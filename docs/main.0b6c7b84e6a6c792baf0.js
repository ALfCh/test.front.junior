(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{"+7AZ":function(e,t,n){"use strict";n.r(t),n.d(t,"__extends",function(){return i}),n.d(t,"__assign",function(){return s}),n.d(t,"__rest",function(){return o}),n.d(t,"__decorate",function(){return a}),n.d(t,"__param",function(){return u}),n.d(t,"__metadata",function(){return c}),n.d(t,"__awaiter",function(){return l}),n.d(t,"__generator",function(){return h}),n.d(t,"__exportStar",function(){return d}),n.d(t,"__values",function(){return p}),n.d(t,"__read",function(){return f}),n.d(t,"__spread",function(){return m}),n.d(t,"__await",function(){return g}),n.d(t,"__asyncGenerator",function(){return y}),n.d(t,"__asyncDelegator",function(){return v}),n.d(t,"__asyncValues",function(){return _}),n.d(t,"__makeTemplateObject",function(){return b}),n.d(t,"__importStar",function(){return w}),n.d(t,"__importDefault",function(){return E});var r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};function i(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var s=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e};function o(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&(n[r[i]]=e[r[i]])}return n}function a(e,t,n,r){var i,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,n,o):i(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o}function u(e,t){return function(n,r){t(n,r,e)}}function c(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function l(e,t,n,r){return new(n||(n=Promise))(function(i,s){function o(e){try{u(r.next(e))}catch(t){s(t)}}function a(e){try{u(r.throw(e))}catch(t){s(t)}}function u(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(o,a)}u((r=r.apply(e,t||[])).next())})}function h(e,t){var n,r,i,s,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=r[2&s[0]?"return":s[0]?"throw":"next"])&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[0,i.value]),s[0]){case 0:case 1:i=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,r=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===s[0]||2===s[0])){o=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){o.label=s[1];break}if(6===s[0]&&o.label<i[1]){o.label=i[1],i=s;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(s);break}i[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(a){s=[6,a],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,a])}}}function d(e,t){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}function p(e){var t="function"==typeof Symbol&&e[Symbol.iterator],n=0;return t?t.call(e):{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}}}function f(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,s=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(r=s.next()).done;)o.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=s.return)&&n.call(s)}finally{if(i)throw i.error}}return o}function m(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(f(arguments[t]));return e}function g(e){return this instanceof g?(this.v=e,this):new g(e)}function y(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=n.apply(e,t||[]),s=[];return r={},o("next"),o("throw"),o("return"),r[Symbol.asyncIterator]=function(){return this},r;function o(e){i[e]&&(r[e]=function(t){return new Promise(function(n,r){s.push([e,t,n,r])>1||a(e,t)})})}function a(e,t){try{(n=i[e](t)).value instanceof g?Promise.resolve(n.value.v).then(u,c):l(s[0][2],n)}catch(r){l(s[0][3],r)}var n}function u(e){a("next",e)}function c(e){a("throw",e)}function l(e,t){e(t),s.shift(),s.length&&a(s[0][0],s[0][1])}}function v(e){var t,n;return t={},r("next"),r("throw",function(e){throw e}),r("return"),t[Symbol.iterator]=function(){return this},t;function r(r,i){e[r]&&(t[r]=function(t){return(n=!n)?{value:g(e[r](t)),done:"return"===r}:i?i(t):t})}}function _(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator];return t?t.call(e):p(e)}function b(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}function w(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function E(e){return e&&e.__esModule?e:{default:e}}},0:function(e,t,n){e.exports=n("zUnb")},"2QA8":function(e,t,n){"use strict";n.d(t,"a",function(){return r});const r="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()},"2fFW":function(e,t,n){"use strict";n.d(t,"a",function(){return i});let r=!1;const i={Promise:void 0,set useDeprecatedSynchronousErrorHandling(e){if(e){const e=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+e.stack)}else r&&console.log("RxJS: Back to a better error behavior. Thank you. <3");r=e},get useDeprecatedSynchronousErrorHandling(){return r}}},"3N8a":function(e,t,n){"use strict";var r=n("quSY");class i extends r.a{constructor(e,t){super()}schedule(e,t=0){return this}}n.d(t,"a",function(){return s});class s extends i{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){if(this.closed)return this;this.state=e;const n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,t)),this.pending=!0,this.delay=t,this.id=this.id||this.requestAsyncId(r,this.id,t),this}requestAsyncId(e,t,n=0){return setInterval(e.flush.bind(e,this),n)}recycleAsyncId(e,t,n=0){if(null!==n&&this.delay===n&&!1===this.pending)return t;clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const n=this._execute(e,t);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let n=!1,r=void 0;try{this.work(e)}catch(i){n=!0,r=!!i&&i||new Error(i)}if(n)return this.unsubscribe(),r}_unsubscribe(){const e=this.id,t=this.scheduler,n=t.actions,r=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==r&&n.splice(r,1),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null}}},"5+tZ":function(e,t,n){"use strict";n.d(t,"a",function(){return u});var r=n("ZUHj"),i=n("l7GE"),s=n("51Dv"),o=n("lJxs"),a=n("Cfvw");function u(e,t,n=Number.POSITIVE_INFINITY){return"function"==typeof t?r=>r.pipe(u((n,r)=>Object(a.a)(e(n,r)).pipe(Object(o.a)((e,i)=>t(n,e,r,i))),n)):("number"==typeof t&&(n=t),t=>t.lift(new c(e,n)))}class c{constructor(e,t=Number.POSITIVE_INFINITY){this.project=e,this.concurrent=t}call(e,t){return t.subscribe(new l(e,this.project,this.concurrent))}}class l extends i.a{constructor(e,t,n=Number.POSITIVE_INFINITY){super(e),this.project=t,this.concurrent=n,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(e){this.active<this.concurrent?this._tryNext(e):this.buffer.push(e)}_tryNext(e){let t;const n=this.index++;try{t=this.project(e,n)}catch(r){return void this.destination.error(r)}this.active++,this._innerSub(t,e,n)}_innerSub(e,t,n){const i=new s.a(this,void 0,void 0);this.destination.add(i),Object(r.a)(this,e,t,n,i)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(e,t,n,r,i){this.destination.next(t)}notifyComplete(e){const t=this.buffer;this.remove(e),this.active--,t.length>0?this._next(t.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}},"51Dv":function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=n("7o/Q");class i extends r.a{constructor(e,t,n){super(),this.parent=e,this.outerValue=t,this.outerIndex=n,this.index=0}_next(e){this.parent.notifyNext(this.outerValue,e,this.outerIndex,this.index++,this)}_error(e){this.parent.notifyError(e,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}},"6Joi":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i,s=(r=n("wj3C"))&&"object"==typeof r&&"default"in r?r.default:r,o=n("q/0M"),a=n("os0x"),u=n("x7I3"),c=s.SDK_VERSION,l=new o.Logger("@firebase/firestore");function h(){return l.logLevel===o.LogLevel.DEBUG?i.DEBUG:l.logLevel===o.LogLevel.SILENT?i.SILENT:i.ERROR}function d(e){switch(e){case i.DEBUG:l.logLevel=o.LogLevel.DEBUG;break;case i.ERROR:l.logLevel=o.LogLevel.ERROR;break;case i.SILENT:l.logLevel=o.LogLevel.SILENT;break;default:l.error("Firestore ("+c+"): Invalid value passed to `setLogLevel`")}}function p(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(l.logLevel<=o.LogLevel.DEBUG){var i=n.map(m);l.debug.apply(l,["Firestore ("+c+") ["+e+"]: "+t].concat(i))}}function f(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(l.logLevel<=o.LogLevel.ERROR){var r=t.map(m);l.error.apply(l,["Firestore ("+c+"): "+e].concat(r))}}function m(e){if("string"==typeof e)return e;var t=v.getPlatform();try{return t.formatJSON(e)}catch(n){return e}}function g(e){var t="FIRESTORE ("+c+") INTERNAL ASSERTION FAILED: "+e;throw f(t),new Error(t)}function y(e,t){e||g(t)}!function(e){e[e.DEBUG=0]="DEBUG",e[e.ERROR=1]="ERROR",e[e.SILENT=2]="SILENT"}(i||(i={}));var v=function(){function e(){}return e.setPlatform=function(t){e.platform&&g("Platform already defined"),e.platform=t},e.getPlatform=function(){return e.platform||g("Platform not set"),e.platform},e}();function _(){return v.getPlatform().emptyByteString}var b={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},w=function(e){function t(t,n){var r=e.call(this,n)||this;return r.code=t,r.message=n,r.name="FirebaseError",r.toString=function(){return r.name+": [code="+r.code+"]: "+r.message},r}return a.__extends(t,e),t}(Error);function E(e,t){function n(){var e="This constructor is private.";throw t&&(e+=" ",e+=t),new w(b.INVALID_ARGUMENT,e)}for(var r in n.prototype=e.prototype,e)e.hasOwnProperty(r)&&(n[r]=e[r]);return n}function C(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function S(e,t){return void 0!==e?e:t}function T(e,t){for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Number(n);isNaN(r)||t(r,e[n])}}function x(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function A(e){for(var t in y(null!=e&&"object"==typeof e,"isEmpty() expects object parameter."),e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function D(e,t,n){if(t.length!==n)throw new w(b.INVALID_ARGUMENT,"Function "+e+"() requires "+H(n,"argument")+", but was called with "+H(t.length,"argument")+".")}function I(e,t,n){if(t.length<n)throw new w(b.INVALID_ARGUMENT,"Function "+e+"() requires at least "+H(n,"argument")+", but was called with "+H(t.length,"argument")+".")}function N(e,t,n,r){if(t.length<n||t.length>r)throw new w(b.INVALID_ARGUMENT,"Function "+e+"() requires between "+n+" and "+r+" arguments, but was called with "+H(t.length,"argument")+".")}function O(e,t,n,r){L(e,t,$(n)+" argument",r)}function k(e,t,n,r){void 0!==r&&O(e,t,n,r)}function P(e,t,n,r){L(e,t,n+" option",r)}function M(e,t,n,r){void 0!==r&&P(e,t,n,r)}function R(e,t,n,r,i){void 0!==r&&function(e,t,n,r,i){if(!(r instanceof Array))throw new w(b.INVALID_ARGUMENT,"Function "+e+"() requires its "+t+" option to be an array, but it was: "+j(r));for(var s=0;s<r.length;++s)if(!i(r[s]))throw new w(b.INVALID_ARGUMENT,"Function "+e+"() requires all "+t+" elements to be "+n+", but the value at index "+s+" was: "+j(r[s]))}(e,t,n,r,i)}function F(e,t,n,r,i){void 0!==r&&function(e,t,n,r,i){for(var s=[],o=0,a=i;o<a.length;o++){var u=a[o];if(u===r)return;s.push(j(u))}var c=j(r);throw new w(b.INVALID_ARGUMENT,"Invalid value "+c+" provided to function "+e+'() for option "'+n+'". Acceptable values: '+s.join(", "))}(e,0,n,r,i)}function L(e,t,n,r){if(!("object"===t?V(r):"non-empty string"===t?"string"==typeof r&&""!==r:typeof r===t)){var i=j(r);throw new w(b.INVALID_ARGUMENT,"Function "+e+"() requires its "+n+" to be of type "+t+", but it was: "+i)}}function V(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}function j(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e=e.substring(0,20)+"..."),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";var t=function(e){if(e.constructor){var t=/function\s+([^\s(]+)\s*\(/.exec(e.constructor.toString());if(t&&t.length>1)return t[1]}return null}(e);return t?"a custom "+t+" object":"an object"}return"function"==typeof e?"a function":g("Unknown wrong type: "+typeof e)}function B(e,t,n){if(void 0===n)throw new w(b.INVALID_ARGUMENT,"Function "+e+"() requires a valid "+$(t)+" argument, but it was undefined.")}function U(e,t,n){x(t,function(t,r){if(n.indexOf(t)<0)throw new w(b.INVALID_ARGUMENT,"Unknown option '"+t+"' passed to function "+e+"(). Available options: "+n.join(", "))})}function q(e,t,n,r){var i=j(r);return new w(b.INVALID_ARGUMENT,"Function "+e+"() requires its "+$(n)+" argument to be a "+t+", but it was: "+i)}function $(e){switch(e){case 1:return"first";case 2:return"second";case 3:return"third";default:return e+"th"}}function H(e,t){return e+" "+t+(1===e?"":"s")}var z=function(){function e(){}return e.newId=function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t="",n=0;n<20;n++)t+=e.charAt(Math.floor(Math.random()*e.length));return y(20===t.length,"Invalid auto ID: "+t),t},e}();function W(e,t){return e<t?-1:e>t?1:0}function K(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(!e[n].isEqual(t[n]))return!1;return!0}function Q(){if("undefined"==typeof Uint8Array)throw new w(b.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function G(){if(!v.getPlatform().base64Available)throw new w(b.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var X,Y,Z=function(){function e(e){G(),this._binaryString=e}return e.fromBase64String=function(t){D("Blob.fromBase64String",arguments,1),O("Blob.fromBase64String","string",1,t),G();try{return new e(v.getPlatform().atob(t))}catch(n){throw new w(b.INVALID_ARGUMENT,"Failed to construct Blob from Base64 string: "+n)}},e.fromUint8Array=function(t){if(D("Blob.fromUint8Array",arguments,1),Q(),!(t instanceof Uint8Array))throw q("Blob.fromUint8Array","Uint8Array",1,t);return new e(Array.prototype.map.call(t,function(e){return String.fromCharCode(e)}).join(""))},e.prototype.toBase64=function(){return D("Blob.toBase64",arguments,0),G(),v.getPlatform().btoa(this._binaryString)},e.prototype.toUint8Array=function(){D("Blob.toUint8Array",arguments,0),Q();for(var e=new Uint8Array(this._binaryString.length),t=0;t<this._binaryString.length;t++)e[t]=this._binaryString.charCodeAt(t);return e},e.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},e.prototype.isEqual=function(e){return this._binaryString===e._binaryString},e.prototype._compareTo=function(e){return W(this._binaryString,e._binaryString)},e}(),J=E(Z,"Use Blob.fromUint8Array() or Blob.fromBase64String() instead."),ee=function(){function e(e,t){if(D("GeoPoint",arguments,2),O("GeoPoint","number",1,e),O("GeoPoint","number",2,t),!isFinite(e)||e<-90||e>90)throw new w(b.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new w(b.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}return Object.defineProperty(e.prototype,"latitude",{get:function(){return this._lat},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"longitude",{get:function(){return this._long},enumerable:!0,configurable:!0}),e.prototype.isEqual=function(e){return this._lat===e._lat&&this._long===e._long},e.prototype._compareTo=function(e){return W(this._lat,e._lat)||W(this._long,e._long)},e}(),te=function(){function e(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new w(b.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new w(b.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new w(b.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new w(b.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}return e.now=function(){return e.fromMillis(Date.now())},e.fromDate=function(t){return e.fromMillis(t.getTime())},e.fromMillis=function(t){var n=Math.floor(t/1e3);return new e(n,1e6*(t-1e3*n))},e.prototype.toDate=function(){return new Date(this.toMillis())},e.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},e.prototype._compareTo=function(e){return this.seconds===e.seconds?W(this.nanoseconds,e.nanoseconds):W(this.seconds,e.seconds)},e.prototype.isEqual=function(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds},e.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},e}(),ne=function(){return function(e,t,n,r){this.databaseId=e,this.persistenceKey=t,this.host=n,this.ssl=r}}(),re="(default)",ie=function(){function e(e,t){this.projectId=e,this.database=t||re}return Object.defineProperty(e.prototype,"isDefaultDatabase",{get:function(){return this.database===re},enumerable:!0,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.projectId===this.projectId&&t.database===this.database},e.prototype.compareTo=function(e){return W(this.projectId,e.projectId)||W(this.database,e.database)},e}(),se=function(){function e(e,t,n){this.init(e,t,n)}return e.prototype.init=function(e,t,n){void 0===t?t=0:t>e.length&&g("offset "+t+" out of range "+e.length),void 0===n?n=e.length-t:n>e.length-t&&g("length "+n+" out of range "+(e.length-t)),this.segments=e,this.offset=t,this.len=n},e.prototype.construct=function(e,t,n){var r=Object.create(Object.getPrototypeOf(this));return r.init(e,t,n),r},Object.defineProperty(e.prototype,"length",{get:function(){return this.len},enumerable:!0,configurable:!0}),e.prototype.isEqual=function(t){return 0===e.comparator(this,t)},e.prototype.child=function(t){var n=this.segments.slice(this.offset,this.limit());return t instanceof e?t.forEach(function(e){n.push(e)}):"string"==typeof t?n.push(t):g("Unknown parameter type for Path.child(): "+t),this.construct(n)},e.prototype.limit=function(){return this.offset+this.length},e.prototype.popFirst=function(e){return e=void 0===e?1:e,y(this.length>=e,"Can't call popFirst() with less segments"),this.construct(this.segments,this.offset+e,this.length-e)},e.prototype.popLast=function(){return y(!this.isEmpty(),"Can't call popLast() on empty path"),this.construct(this.segments,this.offset,this.length-1)},e.prototype.firstSegment=function(){return y(!this.isEmpty(),"Can't call firstSegment() on empty path"),this.segments[this.offset]},e.prototype.lastSegment=function(){return y(!this.isEmpty(),"Can't call lastSegment() on empty path"),this.segments[this.limit()-1]},e.prototype.get=function(e){return y(e<this.length,"Index out of range"),this.segments[this.offset+e]},e.prototype.isEmpty=function(){return 0===this.length},e.prototype.isPrefixOf=function(e){if(e.length<this.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0},e.prototype.isImmediateParentOf=function(e){if(this.length+1!==e.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0},e.prototype.forEach=function(e){for(var t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])},e.prototype.toArray=function(){return this.segments.slice(this.offset,this.limit())},e.comparator=function(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++){var i=e.get(r),s=t.get(r);if(i<s)return-1;if(i>s)return 1}return e.length<t.length?-1:e.length>t.length?1:0},e}(),oe=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a.__extends(t,e),t.prototype.canonicalString=function(){return this.toArray().join("/")},t.prototype.toString=function(){return this.canonicalString()},t.fromString=function(e){if(e.indexOf("//")>=0)throw new w(b.INVALID_ARGUMENT,"Invalid path ("+e+"). Paths must not contain // in them.");return new t(e.split("/").filter(function(e){return e.length>0}))},t.EMPTY_PATH=new t([]),t}(se),ae=/^[_a-zA-Z][_a-zA-Z0-9]*$/,ue=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a.__extends(t,e),t.isValidIdentifier=function(e){return ae.test(e)},t.prototype.canonicalString=function(){return this.toArray().map(function(e){return e=e.replace("\\","\\\\").replace("`","\\`"),t.isValidIdentifier(e)||(e="`"+e+"`"),e}).join(".")},t.prototype.toString=function(){return this.canonicalString()},t.prototype.isKeyField=function(){return 1===this.length&&"__name__"===this.get(0)},t.keyField=function(){return new t(["__name__"])},t.fromServerFormat=function(e){for(var n=[],r="",i=0,s=function(){if(0===r.length)throw new w(b.INVALID_ARGUMENT,"Invalid field path ("+e+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");n.push(r),r=""},o=!1;i<e.length;){var a=e[i];if("\\"===a){if(i+1===e.length)throw new w(b.INVALID_ARGUMENT,"Path has trailing escape character: "+e);var u=e[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new w(b.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else"`"===a?(o=!o,i++):"."!==a||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new w(b.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new t(n)},t.EMPTY_PATH=new t([]),t}(se),ce=function(){function e(t){this.path=t,y(e.isDocumentKey(t),"Invalid DocumentKey with an odd number of segments: "+t.toArray().join("/"))}return e.prototype.isEqual=function(e){return null!==e&&0===oe.comparator(this.path,e.path)},e.prototype.toString=function(){return this.path.toString()},e.comparator=function(e,t){return oe.comparator(e.path,t.path)},e.isDocumentKey=function(e){return e.length%2==0},e.fromSegments=function(t){return new e(new oe(t.slice()))},e.fromPathString=function(t){return new e(oe.fromString(t))},e.EMPTY=new e(new oe([])),e}(),le=function(){function e(e,t){this.key=e,this.version=t}return e.compareByKey=function(e,t){return ce.comparator(e.key,t.key)},e}(),he=function(e){function t(t,n,r,i){var s=e.call(this,t,n)||this;return s.data=r,s.hasLocalMutations=!!i.hasLocalMutations,s.hasCommittedMutations=!!i.hasCommittedMutations,s}return a.__extends(t,e),t.prototype.field=function(e){return this.data.field(e)},t.prototype.fieldValue=function(e){var t=this.field(e);return t?t.value():void 0},t.prototype.value=function(){return this.data.value()},t.prototype.isEqual=function(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.data.isEqual(e.data)&&this.hasLocalMutations===e.hasLocalMutations&&this.hasCommittedMutations===e.hasCommittedMutations},t.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+this.data.toString()+", {hasLocalMutations: "+this.hasLocalMutations+"}), {hasCommittedMutations: "+this.hasCommittedMutations+"})"},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return this.hasLocalMutations||this.hasCommittedMutations},enumerable:!0,configurable:!0}),t.compareByField=function(e,t,n){var r=t.field(e),i=n.field(e);return void 0!==r&&void 0!==i?r.compareTo(i):g("Trying to compare documents on fields that don't exist")},t}(le),de=function(e){function t(t,n,r){var i=e.call(this,t,n)||this;return i.hasCommittedMutations=!(!r||!r.hasCommittedMutations),i}return a.__extends(t,e),t.prototype.toString=function(){return"NoDocument("+this.key+", "+this.version+")"},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return this.hasCommittedMutations},enumerable:!0,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.hasCommittedMutations===this.hasCommittedMutations&&e.version.isEqual(this.version)&&e.key.isEqual(this.key)},t}(le),pe=function(e){function t(t,n){return e.call(this,t,n)||this}return a.__extends(t,e),t.prototype.toString=function(){return"UnknownDocument("+this.key+", "+this.version+")"},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return!0},enumerable:!0,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.version.isEqual(this.version)&&e.key.isEqual(this.key)},t}(le),fe=function(){function e(e,t){this.comparator=e,this.root=t||ge.EMPTY}return e.prototype.insert=function(t,n){return new e(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,ge.BLACK,null,null))},e.prototype.remove=function(t){return new e(this.comparator,this.root.remove(t,this.comparator).copy(null,null,ge.BLACK,null,null))},e.prototype.get=function(e){for(var t=this.root;!t.isEmpty();){var n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null},e.prototype.indexOf=function(e){for(var t=0,n=this.root;!n.isEmpty();){var r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1},e.prototype.isEmpty=function(){return this.root.isEmpty()},Object.defineProperty(e.prototype,"size",{get:function(){return this.root.size},enumerable:!0,configurable:!0}),e.prototype.minKey=function(){return this.root.minKey()},e.prototype.maxKey=function(){return this.root.maxKey()},e.prototype.inorderTraversal=function(e){return this.root.inorderTraversal(e)},e.prototype.forEach=function(e){this.inorderTraversal(function(t,n){return e(t,n),!1})},e.prototype.reverseTraversal=function(e){return this.root.reverseTraversal(e)},e.prototype.getIterator=function(){return new me(this.root,null,this.comparator,!1)},e.prototype.getIteratorFrom=function(e){return new me(this.root,e,this.comparator,!1)},e.prototype.getReverseIterator=function(){return new me(this.root,null,this.comparator,!0)},e.prototype.getReverseIteratorFrom=function(e){return new me(this.root,e,this.comparator,!0)},e}(),me=function(){function e(e,t,n,r){this.isReverse=r,this.nodeStack=[];for(var i=1;!e.isEmpty();)if(i=t?n(e.key,t):1,r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(0===i){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}return e.prototype.getNext=function(){y(this.nodeStack.length>0,"getNext() called on iterator when hasNext() is false.");var e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t},e.prototype.hasNext=function(){return this.nodeStack.length>0},e.prototype.peek=function(){if(0===this.nodeStack.length)return null;var e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}},e}(),ge=function(){function e(t,n,r,i,s){this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:e.EMPTY,this.right=null!=s?s:e.EMPTY,this.size=this.left.size+1+this.right.size}return e.prototype.copy=function(t,n,r,i,s){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=s?s:this.right)},e.prototype.isEmpty=function(){return!1},e.prototype.inorderTraversal=function(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)},e.prototype.reverseTraversal=function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)},e.prototype.min=function(){return this.left.isEmpty()?this:this.left.min()},e.prototype.minKey=function(){return this.min().key},e.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},e.prototype.insert=function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp()},e.prototype.removeMin=function(){if(this.left.isEmpty())return e.EMPTY;var t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),(t=t.copy(null,null,null,t.left.removeMin(),null)).fixUp()},e.prototype.remove=function(t,n){var r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(t,i.key)){if(i.right.isEmpty())return e.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()},e.prototype.isRed=function(){return this.color},e.prototype.fixUp=function(){var e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e},e.prototype.moveRedLeft=function(){var e=this.colorFlip();return e.right.left.isRed()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight())).rotateLeft()).colorFlip()),e},e.prototype.moveRedRight=function(){var e=this.colorFlip();return e.left.left.isRed()&&(e=(e=e.rotateRight()).colorFlip()),e},e.prototype.rotateLeft=function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)},e.prototype.rotateRight=function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)},e.prototype.colorFlip=function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)},e.prototype.checkMaxDepth=function(){var e=this.check();return Math.pow(2,e)<=this.size+1},e.prototype.check=function(){if(this.isRed()&&this.left.isRed())throw g("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed())throw g("Right child of ("+this.key+","+this.value+") is red");var e=this.left.check();if(e!==this.right.check())throw g("Black depths differ");return e+(this.isRed()?0:1)},e.EMPTY=null,e.RED=!0,e.BLACK=!1,e}(),ye=function(){function e(){this.size=0}return e.prototype.copy=function(e,t,n,r,i){return this},e.prototype.insert=function(e,t,n){return new ge(e,t)},e.prototype.remove=function(e,t){return this},e.prototype.isEmpty=function(){return!0},e.prototype.inorderTraversal=function(e){return!1},e.prototype.reverseTraversal=function(e){return!1},e.prototype.minKey=function(){return null},e.prototype.maxKey=function(){return null},e.prototype.isRed=function(){return!1},e.prototype.checkMaxDepth=function(){return!0},e.prototype.check=function(){return 0},e}();ge.EMPTY=new ye,function(e){e[e.NullValue=0]="NullValue",e[e.BooleanValue=1]="BooleanValue",e[e.NumberValue=2]="NumberValue",e[e.TimestampValue=3]="TimestampValue",e[e.StringValue=4]="StringValue",e[e.BlobValue=5]="BlobValue",e[e.RefValue=6]="RefValue",e[e.GeoPointValue=7]="GeoPointValue",e[e.ArrayValue=8]="ArrayValue",e[e.ObjectValue=9]="ObjectValue"}(X||(X={})),function(e){e[e.Default=0]="Default",e[e.Estimate=1]="Estimate",e[e.Previous=2]="Previous"}(Y||(Y={}));var ve=function(){function e(e,t){this.serverTimestampBehavior=e,this.timestampsInSnapshots=t}return e.fromSnapshotOptions=function(t,n){switch(t.serverTimestamps){case"estimate":return new e(Y.Estimate,n);case"previous":return new e(Y.Previous,n);case"none":case void 0:return new e(Y.Default,n);default:return g("fromSnapshotOptions() called with invalid options.")}},e}(),_e=function(){function e(){}return e.prototype.toString=function(){var e=this.value();return null===e?"null":e.toString()},e.prototype.defaultCompareTo=function(e){return y(this.typeOrder!==e.typeOrder,"Default compareTo should not be used for values of same type."),W(this.typeOrder,e.typeOrder)},e}(),be=function(e){function t(){var t=e.call(this)||this;return t.typeOrder=X.NullValue,t.internalValue=null,t}return a.__extends(t,e),t.prototype.value=function(e){return null},t.prototype.isEqual=function(e){return e instanceof t},t.prototype.compareTo=function(e){return e instanceof t?0:this.defaultCompareTo(e)},t.INSTANCE=new t,t}(_e),we=function(e){function t(t){var n=e.call(this)||this;return n.internalValue=t,n.typeOrder=X.BooleanValue,n}return a.__extends(t,e),t.prototype.value=function(e){return this.internalValue},t.prototype.isEqual=function(e){return e instanceof t&&this.internalValue===e.internalValue},t.prototype.compareTo=function(e){return e instanceof t?W(this,e):this.defaultCompareTo(e)},t.of=function(e){return e?t.TRUE:t.FALSE},t.TRUE=new t(!0),t.FALSE=new t(!1),t}(_e),Ee=function(e){function t(t){var n=e.call(this)||this;return n.internalValue=t,n.typeOrder=X.NumberValue,n}return a.__extends(t,e),t.prototype.value=function(e){return this.internalValue},t.prototype.compareTo=function(e){return e instanceof t?(n=this.internalValue,r=e.internalValue,n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1):this.defaultCompareTo(e);var n,r},t}(_e);function Ce(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}var Se=function(e){function t(t){return e.call(this,t)||this}return a.__extends(t,e),t.prototype.isEqual=function(e){return e instanceof t&&Ce(this.internalValue,e.internalValue)},t}(Ee),Te=function(e){function t(t){var n=e.call(this,t)||this;return n.internalValue=t,n}return a.__extends(t,e),t.prototype.isEqual=function(e){return e instanceof t&&Ce(this.internalValue,e.internalValue)},t.NAN=new t(NaN),t.POSITIVE_INFINITY=new t(1/0),t.NEGATIVE_INFINITY=new t(-1/0),t}(Ee),xe=function(e){function t(t){var n=e.call(this)||this;return n.internalValue=t,n.typeOrder=X.StringValue,n}return a.__extends(t,e),t.prototype.value=function(e){return this.internalValue},t.prototype.isEqual=function(e){return e instanceof t&&this.internalValue===e.internalValue},t.prototype.compareTo=function(e){return e instanceof t?W(this.internalValue,e.internalValue):this.defaultCompareTo(e)},t}(_e),Ae=function(e){function t(t){var n=e.call(this)||this;return n.internalValue=t,n.typeOrder=X.TimestampValue,n}return a.__extends(t,e),t.prototype.value=function(e){return e&&e.timestampsInSnapshots?this.internalValue:this.internalValue.toDate()},t.prototype.isEqual=function(e){return e instanceof t&&this.internalValue.isEqual(e.internalValue)},t.prototype.compareTo=function(e){return e instanceof t?this.internalValue._compareTo(e.internalValue):e instanceof De?-1:this.defaultCompareTo(e)},t}(_e),De=function(e){function t(t,n){var r=e.call(this)||this;return r.localWriteTime=t,r.previousValue=n,r.typeOrder=X.TimestampValue,r}return a.__extends(t,e),t.prototype.value=function(e){return e&&e.serverTimestampBehavior===Y.Estimate?new Ae(this.localWriteTime).value(e):e&&e.serverTimestampBehavior===Y.Previous&&this.previousValue?this.previousValue.value(e):null},t.prototype.isEqual=function(e){return e instanceof t&&this.localWriteTime.isEqual(e.localWriteTime)},t.prototype.compareTo=function(e){return e instanceof t?this.localWriteTime._compareTo(e.localWriteTime):e instanceof Ae?1:this.defaultCompareTo(e)},t.prototype.toString=function(){return"<ServerTimestamp localTime="+this.localWriteTime.toString()+">"},t}(_e),Ie=function(e){function t(t){var n=e.call(this)||this;return n.internalValue=t,n.typeOrder=X.BlobValue,n}return a.__extends(t,e),t.prototype.value=function(e){return this.internalValue},t.prototype.isEqual=function(e){return e instanceof t&&this.internalValue.isEqual(e.internalValue)},t.prototype.compareTo=function(e){return e instanceof t?this.internalValue._compareTo(e.internalValue):this.defaultCompareTo(e)},t}(_e),Ne=function(e){function t(t,n){var r=e.call(this)||this;return r.databaseId=t,r.key=n,r.typeOrder=X.RefValue,r}return a.__extends(t,e),t.prototype.value=function(e){return this.key},t.prototype.isEqual=function(e){return e instanceof t&&(this.key.isEqual(e.key)&&this.databaseId.isEqual(e.databaseId))},t.prototype.compareTo=function(e){if(e instanceof t){var n=this.databaseId.compareTo(e.databaseId);return 0!==n?n:ce.comparator(this.key,e.key)}return this.defaultCompareTo(e)},t}(_e),Oe=function(e){function t(t){var n=e.call(this)||this;return n.internalValue=t,n.typeOrder=X.GeoPointValue,n}return a.__extends(t,e),t.prototype.value=function(e){return this.internalValue},t.prototype.isEqual=function(e){return e instanceof t&&this.internalValue.isEqual(e.internalValue)},t.prototype.compareTo=function(e){return e instanceof t?this.internalValue._compareTo(e.internalValue):this.defaultCompareTo(e)},t}(_e),ke=function(e){function t(t){var n=e.call(this)||this;return n.internalValue=t,n.typeOrder=X.ObjectValue,n}return a.__extends(t,e),t.prototype.value=function(e){var t={};return this.internalValue.inorderTraversal(function(n,r){t[n]=r.value(e)}),t},t.prototype.forEach=function(e){this.internalValue.inorderTraversal(e)},t.prototype.isEqual=function(e){if(e instanceof t){for(var n=this.internalValue.getIterator(),r=e.internalValue.getIterator();n.hasNext()&&r.hasNext();){var i=n.getNext(),s=r.getNext();if(i.key!==s.key||!i.value.isEqual(s.value))return!1}return!n.hasNext()&&!r.hasNext()}return!1},t.prototype.compareTo=function(e){if(e instanceof t){for(var n=this.internalValue.getIterator(),r=e.internalValue.getIterator();n.hasNext()&&r.hasNext();){var i=n.getNext(),s=r.getNext(),o=W(i.key,s.key)||i.value.compareTo(s.value);if(o)return o}return W(n.hasNext(),r.hasNext())}return this.defaultCompareTo(e)},t.prototype.set=function(e,n){if(y(!e.isEmpty(),"Cannot set field for empty path on ObjectValue"),1===e.length)return this.setChild(e.firstSegment(),n);var r=this.child(e.firstSegment());r instanceof t||(r=t.EMPTY);var i=r.set(e.popFirst(),n);return this.setChild(e.firstSegment(),i)},t.prototype.delete=function(e){if(y(!e.isEmpty(),"Cannot delete field for empty path on ObjectValue"),1===e.length)return new t(this.internalValue.remove(e.firstSegment()));var n=this.child(e.firstSegment());if(n instanceof t){var r=n.delete(e.popFirst());return new t(this.internalValue.insert(e.firstSegment(),r))}return this},t.prototype.contains=function(e){return void 0!==this.field(e)},t.prototype.field=function(e){y(!e.isEmpty(),"Can't get field of empty path");var n=this;return e.forEach(function(e){n=n instanceof t&&n.internalValue.get(e)||void 0}),n},t.prototype.toString=function(){return JSON.stringify(this.value())},t.prototype.child=function(e){return this.internalValue.get(e)||void 0},t.prototype.setChild=function(e,n){return new t(this.internalValue.insert(e,n))},t.EMPTY=new t(new fe(W)),t}(_e),Pe=function(e){function t(t){var n=e.call(this)||this;return n.internalValue=t,n.typeOrder=X.ArrayValue,n}return a.__extends(t,e),t.prototype.value=function(e){return this.internalValue.map(function(t){return t.value(e)})},t.prototype.forEach=function(e){this.internalValue.forEach(e)},t.prototype.isEqual=function(e){if(e instanceof t){if(this.internalValue.length!==e.internalValue.length)return!1;for(var n=0;n<this.internalValue.length;n++)if(!this.internalValue[n].isEqual(e.internalValue[n]))return!1;return!0}return!1},t.prototype.compareTo=function(e){if(e instanceof t){for(var n=Math.min(this.internalValue.length,e.internalValue.length),r=0;r<n;r++){var i=this.internalValue[r].compareTo(e.internalValue[r]);if(i)return i}return W(this.internalValue.length,e.internalValue.length)}return this.defaultCompareTo(e)},t.prototype.toString=function(){return JSON.stringify(this.value())},t}(_e),Me=Number,Re=Me.MIN_SAFE_INTEGER||-(Math.pow(2,53)-1),Fe=Me.MAX_SAFE_INTEGER||Math.pow(2,53)-1,Le=Me.isInteger||function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e};function Ve(e){return null==e}function je(e){return Le(e)&&e<=Fe&&e>=Re}var Be,Ue=function(){function e(e,t,n,r,i,s){void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r=null),void 0===i&&(i=null),void 0===s&&(s=null),this.path=e,this.explicitOrderBy=t,this.filters=n,this.limit=r,this.startAt=i,this.endAt=s,this.memoizedCanonicalId=null,this.memoizedOrderBy=null,this.startAt&&this.assertValidBound(this.startAt),this.endAt&&this.assertValidBound(this.endAt)}return e.atPath=function(t){return new e(t)},Object.defineProperty(e.prototype,"orderBy",{get:function(){if(null===this.memoizedOrderBy){var e=this.getInequalityFilterField(),t=this.getFirstOrderByField();if(null!==e&&null===t)e.isKeyField()?this.memoizedOrderBy=[Xe]:this.memoizedOrderBy=[new Ge(e),Xe];else{y(null===e||null!==t&&e.isEqual(t),"First orderBy should match inequality field."),this.memoizedOrderBy=[];for(var n=!1,r=0,i=this.explicitOrderBy;r<i.length;r++){var s=i[r];this.memoizedOrderBy.push(s),s.field.isKeyField()&&(n=!0)}if(!n){var o=this.explicitOrderBy.length>0?this.explicitOrderBy[this.explicitOrderBy.length-1].dir:Ke.ASCENDING;this.memoizedOrderBy.push(o===Ke.ASCENDING?Xe:Ye)}}}return this.memoizedOrderBy},enumerable:!0,configurable:!0}),e.prototype.addFilter=function(t){y(null==this.getInequalityFilterField()||!(t instanceof He)||!t.isInequality()||t.field.isEqual(this.getInequalityFilterField()),"Query must only have one inequality field."),y(!ce.isDocumentKey(this.path),"No filtering allowed for document query");var n=this.filters.concat([t]);return new e(this.path,this.explicitOrderBy.slice(),n,this.limit,this.startAt,this.endAt)},e.prototype.addOrderBy=function(t){y(!ce.isDocumentKey(this.path),"No ordering allowed for document query"),y(!this.startAt&&!this.endAt,"Bounds must be set after orderBy");var n=this.explicitOrderBy.concat([t]);return new e(this.path,n,this.filters.slice(),this.limit,this.startAt,this.endAt)},e.prototype.withLimit=function(t){return new e(this.path,this.explicitOrderBy.slice(),this.filters.slice(),t,this.startAt,this.endAt)},e.prototype.withStartAt=function(t){return new e(this.path,this.explicitOrderBy.slice(),this.filters.slice(),this.limit,t,this.endAt)},e.prototype.withEndAt=function(t){return new e(this.path,this.explicitOrderBy.slice(),this.filters.slice(),this.limit,this.startAt,t)},e.prototype.canonicalId=function(){if(null===this.memoizedCanonicalId){var e=this.path.canonicalString();e+="|f:";for(var t=0,n=this.filters;t<n.length;t++){e+=n[t].canonicalId(),e+=","}e+="|ob:";for(var r=0,i=this.orderBy;r<i.length;r++){e+=i[r].canonicalId(),e+=","}Ve(this.limit)||(e+="|l:",e+=this.limit),this.startAt&&(e+="|lb:",e+=this.startAt.canonicalId()),this.endAt&&(e+="|ub:",e+=this.endAt.canonicalId()),this.memoizedCanonicalId=e}return this.memoizedCanonicalId},e.prototype.toString=function(){var e="Query("+this.path.canonicalString();return this.filters.length>0&&(e+=", filters: ["+this.filters.join(", ")+"]"),Ve(this.limit)||(e+=", limit: "+this.limit),this.explicitOrderBy.length>0&&(e+=", orderBy: ["+this.explicitOrderBy.join(", ")+"]"),this.startAt&&(e+=", startAt: "+this.startAt.canonicalId()),this.endAt&&(e+=", endAt: "+this.endAt.canonicalId()),e+")"},e.prototype.isEqual=function(e){if(this.limit!==e.limit)return!1;if(this.orderBy.length!==e.orderBy.length)return!1;for(var t=0;t<this.orderBy.length;t++)if(!this.orderBy[t].isEqual(e.orderBy[t]))return!1;if(this.filters.length!==e.filters.length)return!1;for(t=0;t<this.filters.length;t++)if(!this.filters[t].isEqual(e.filters[t]))return!1;return!!this.path.isEqual(e.path)&&(!(null!==this.startAt?!this.startAt.isEqual(e.startAt):null!==e.startAt)&&(null!==this.endAt?this.endAt.isEqual(e.endAt):null===e.endAt))},e.prototype.docComparator=function(e,t){for(var n=!1,r=0,i=this.orderBy;r<i.length;r++){var s=i[r],o=s.compare(e,t);if(0!==o)return o;n=n||s.field.isKeyField()}return y(n,"orderBy used that doesn't compare on key field"),0},e.prototype.matches=function(e){return this.matchesAncestor(e)&&this.matchesOrderBy(e)&&this.matchesFilters(e)&&this.matchesBounds(e)},e.prototype.hasLimit=function(){return!Ve(this.limit)},e.prototype.getFirstOrderByField=function(){return this.explicitOrderBy.length>0?this.explicitOrderBy[0].field:null},e.prototype.getInequalityFilterField=function(){for(var e=0,t=this.filters;e<t.length;e++){var n=t[e];if(n instanceof He&&n.isInequality())return n.field}return null},e.prototype.hasArrayContainsFilter=function(){return void 0!==this.filters.find(function(e){return e instanceof He&&e.op===$e.ARRAY_CONTAINS})},e.prototype.isDocumentQuery=function(){return ce.isDocumentKey(this.path)&&0===this.filters.length},e.prototype.matchesAncestor=function(e){var t=e.key.path;return ce.isDocumentKey(this.path)?this.path.isEqual(t):this.path.isPrefixOf(t)&&this.path.length===t.length-1},e.prototype.matchesOrderBy=function(e){for(var t=0,n=this.explicitOrderBy;t<n.length;t++){var r=n[t];if(!r.field.isKeyField()&&void 0===e.field(r.field))return!1}return!0},e.prototype.matchesFilters=function(e){for(var t=0,n=this.filters;t<n.length;t++){if(!n[t].matches(e))return!1}return!0},e.prototype.matchesBounds=function(e){return!(this.startAt&&!this.startAt.sortsBeforeDocument(this.orderBy,e))&&(!this.endAt||!this.endAt.sortsBeforeDocument(this.orderBy,e))},e.prototype.assertValidBound=function(e){y(e.position.length<=this.orderBy.length,"Bound is longer than orderBy")},e}(),qe=function(){function e(){}return e.create=function(e,t,n){if(n.isEqual(be.INSTANCE)){if(t!==$e.EQUAL)throw new w(b.INVALID_ARGUMENT,"Invalid query. You can only perform equals comparisons on null.");return new ze(e)}if(n.isEqual(Te.NAN)){if(t!==$e.EQUAL)throw new w(b.INVALID_ARGUMENT,"Invalid query. You can only perform equals comparisons on NaN.");return new We(e)}return new He(e,t,n)},e}(),$e=function(){function e(e){this.name=e}return e.fromString=function(t){switch(t){case"<":return e.LESS_THAN;case"<=":return e.LESS_THAN_OR_EQUAL;case"==":return e.EQUAL;case">=":return e.GREATER_THAN_OR_EQUAL;case">":return e.GREATER_THAN;case"array-contains":return e.ARRAY_CONTAINS;default:return g("Unknown relation: "+t)}},e.prototype.toString=function(){return this.name},e.prototype.isEqual=function(e){return this.name===e.name},e.LESS_THAN=new e("<"),e.LESS_THAN_OR_EQUAL=new e("<="),e.EQUAL=new e("=="),e.GREATER_THAN=new e(">"),e.GREATER_THAN_OR_EQUAL=new e(">="),e.ARRAY_CONTAINS=new e("array-contains"),e}(),He=function(e){function t(t,n,r){var i=e.call(this)||this;return i.field=t,i.op=n,i.value=r,i}return a.__extends(t,e),t.prototype.matches=function(e){if(this.field.isKeyField()){y(this.value instanceof Ne,"Comparing on key, but filter value not a RefValue"),y(this.op!==$e.ARRAY_CONTAINS,"array-contains queries don't make sense on document keys.");var t=this.value,n=ce.comparator(e.key,t.key);return this.matchesComparison(n)}var r=e.field(this.field);return void 0!==r&&this.matchesValue(r)},t.prototype.matchesValue=function(e){var t=this;return this.op===$e.ARRAY_CONTAINS?e instanceof Pe&&void 0!==e.internalValue.find(function(e){return e.isEqual(t.value)}):this.value.typeOrder===e.typeOrder&&this.matchesComparison(e.compareTo(this.value))},t.prototype.matchesComparison=function(e){switch(this.op){case $e.LESS_THAN:return e<0;case $e.LESS_THAN_OR_EQUAL:return e<=0;case $e.EQUAL:return 0===e;case $e.GREATER_THAN:return e>0;case $e.GREATER_THAN_OR_EQUAL:return e>=0;default:return g("Unknown relation op"+this.op)}},t.prototype.isInequality=function(){return this.op!==$e.EQUAL&&this.op!==$e.ARRAY_CONTAINS},t.prototype.canonicalId=function(){return this.field.canonicalString()+this.op.toString()+this.value.toString()},t.prototype.isEqual=function(e){return e instanceof t&&(this.op.isEqual(e.op)&&this.field.isEqual(e.field)&&this.value.isEqual(e.value))},t.prototype.toString=function(){return this.field.canonicalString()+" "+this.op+" "+this.value.value()},t}(qe),ze=function(e){function t(t){var n=e.call(this)||this;return n.field=t,n}return a.__extends(t,e),t.prototype.matches=function(e){var t=e.field(this.field);return void 0!==t&&null===t.value()},t.prototype.canonicalId=function(){return this.field.canonicalString()+" IS null"},t.prototype.toString=function(){return this.field.canonicalString()+" IS null"},t.prototype.isEqual=function(e){return e instanceof t&&this.field.isEqual(e.field)},t}(qe),We=function(e){function t(t){var n=e.call(this)||this;return n.field=t,n}return a.__extends(t,e),t.prototype.matches=function(e){var t=e.field(this.field),n=t&&t.value();return"number"==typeof n&&isNaN(n)},t.prototype.canonicalId=function(){return this.field.canonicalString()+" IS NaN"},t.prototype.toString=function(){return this.field.canonicalString()+" IS NaN"},t.prototype.isEqual=function(e){return e instanceof t&&this.field.isEqual(e.field)},t}(qe),Ke=function(){function e(e){this.name=e}return e.prototype.toString=function(){return this.name},e.ASCENDING=new e("asc"),e.DESCENDING=new e("desc"),e}(),Qe=function(){function e(e,t){this.position=e,this.before=t}return e.prototype.canonicalId=function(){for(var e=this.before?"b:":"a:",t=0,n=this.position;t<n.length;t++){e+=n[t].toString()}return e},e.prototype.sortsBeforeDocument=function(e,t){y(this.position.length<=e.length,"Bound has more components than query's orderBy");for(var n=0,r=0;r<this.position.length;r++){var i=e[r],s=this.position[r];if(i.field.isKeyField())y(s instanceof Ne,"Bound has a non-key value where the key path is being used."),n=ce.comparator(s.key,t.key);else{var o=t.field(i.field);y(void 0!==o,"Field should exist since document matched the orderBy already."),n=s.compareTo(o)}if(i.dir===Ke.DESCENDING&&(n*=-1),0!==n)break}return this.before?n<=0:n<0},e.prototype.isEqual=function(e){if(null===e)return!1;if(this.before!==e.before||this.position.length!==e.position.length)return!1;for(var t=0;t<this.position.length;t++){var n=this.position[t],r=e.position[t];return n.isEqual(r)}return!0},e}(),Ge=function(){function e(e,t){this.field=e,void 0===t&&(t=Ke.ASCENDING),this.dir=t,this.isKeyOrderBy=e.isKeyField()}return e.prototype.compare=function(e,t){var n=this.isKeyOrderBy?he.compareByKey(e,t):he.compareByField(this.field,e,t);switch(this.dir){case Ke.ASCENDING:return n;case Ke.DESCENDING:return-1*n;default:return g("Unknown direction: "+this.dir)}},e.prototype.canonicalId=function(){return this.field.canonicalString()+this.dir.toString()},e.prototype.toString=function(){return this.field.canonicalString()+" ("+this.dir+")"},e.prototype.isEqual=function(e){return this.dir===e.dir&&this.field.isEqual(e.field)},e}(),Xe=new Ge(ue.keyField(),Ke.ASCENDING),Ye=new Ge(ue.keyField(),Ke.DESCENDING),Ze=function(){function e(e){this.timestamp=e}return e.fromMicroseconds=function(t){var n=Math.floor(t/1e6);return new e(new te(n,t%1e6*1e3))},e.fromTimestamp=function(t){return new e(t)},e.forDeletedDoc=function(){return e.MIN},e.prototype.compareTo=function(e){return this.timestamp._compareTo(e.timestamp)},e.prototype.isEqual=function(e){return this.timestamp.isEqual(e.timestamp)},e.prototype.toMicroseconds=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},e.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},e.prototype.toTimestamp=function(){return this.timestamp},e.MIN=new e(new te(0,0)),e}();!function(e){e[e.Listen=0]="Listen",e[e.ExistenceFilterMismatch=1]="ExistenceFilterMismatch",e[e.LimboResolution=2]="LimboResolution"}(Be||(Be={}));var Je,et=function(){function e(e,t,n,r,i,s){void 0===i&&(i=Ze.MIN),void 0===s&&(s=_()),this.query=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.resumeToken=s}return e.prototype.copy=function(t){return new e(this.query,this.targetId,this.purpose,void 0===t.sequenceNumber?this.sequenceNumber:t.sequenceNumber,void 0===t.snapshotVersion?this.snapshotVersion:t.snapshotVersion,void 0===t.resumeToken?this.resumeToken:t.resumeToken)},e.prototype.isEqual=function(e){return this.targetId===e.targetId&&this.purpose===e.purpose&&this.sequenceNumber===e.sequenceNumber&&this.snapshotVersion.isEqual(e.snapshotVersion)&&this.resumeToken===e.resumeToken&&this.query.isEqual(e.query)},e}(),tt=function(){function e(e){this.fields=e}return e.prototype.covers=function(e){for(var t=0,n=this.fields;t<n.length;t++){if(n[t].isPrefixOf(e))return!0}return!1},e.prototype.isEqual=function(e){return K(this.fields,e.fields)},e}(),nt=function(){function e(e,t){this.field=e,this.transform=t}return e.prototype.isEqual=function(e){return this.field.isEqual(e.field)&&this.transform.isEqual(e.transform)},e}(),rt=function(){return function(e,t){this.version=e,this.transformResults=t}}();!function(e){e[e.Set=0]="Set",e[e.Patch=1]="Patch",e[e.Transform=2]="Transform",e[e.Delete=3]="Delete"}(Je||(Je={}));var it=function(){function e(e,t){this.updateTime=e,this.exists=t,y(void 0===e||void 0===t,'Precondition can specify "exists" or "updateTime" but not both')}return e.exists=function(t){return new e(void 0,t)},e.updateTime=function(t){return new e(t)},Object.defineProperty(e.prototype,"isNone",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!0,configurable:!0}),e.prototype.isValidFor=function(e){return void 0!==this.updateTime?e instanceof he&&e.version.isEqual(this.updateTime):void 0!==this.exists?this.exists===e instanceof he:(y(this.isNone,"Precondition should be empty"),!0)},e.prototype.isEqual=function(e){return t=this.updateTime,n=e.updateTime,(null!=t?!(!n||!t.isEqual(n)):t===n)&&this.exists===e.exists;var t,n},e.NONE=new e,e}(),st=function(){function e(){}return e.prototype.verifyKeyMatches=function(e){null!=e&&y(e.key.isEqual(this.key),"Can only apply a mutation to a document with the same key")},e.getPostMutationVersion=function(e){return e instanceof he?e.version:Ze.MIN},e}(),ot=function(e){function t(t,n,r){var i=e.call(this)||this;return i.key=t,i.value=n,i.precondition=r,i.type=Je.Set,i}return a.__extends(t,e),t.prototype.applyToRemoteDocument=function(e,t){this.verifyKeyMatches(e),y(null==t.transformResults,"Transform results received by SetMutation.");var n=t.version;return new he(this.key,n,this.value,{hasCommittedMutations:!0})},t.prototype.applyToLocalView=function(e,t,n){if(this.verifyKeyMatches(e),!this.precondition.isValidFor(e))return e;var r=st.getPostMutationVersion(e);return new he(this.key,r,this.value,{hasLocalMutations:!0})},t.prototype.isEqual=function(e){return e instanceof t&&this.key.isEqual(e.key)&&this.value.isEqual(e.value)&&this.precondition.isEqual(e.precondition)},t}(st),at=function(e){function t(t,n,r,i){var s=e.call(this)||this;return s.key=t,s.data=n,s.fieldMask=r,s.precondition=i,s.type=Je.Patch,s}return a.__extends(t,e),t.prototype.applyToRemoteDocument=function(e,t){if(this.verifyKeyMatches(e),y(null==t.transformResults,"Transform results received by PatchMutation."),!this.precondition.isValidFor(e))return new pe(this.key,t.version);var n=this.patchDocument(e);return new he(this.key,t.version,n,{hasCommittedMutations:!0})},t.prototype.applyToLocalView=function(e,t,n){if(this.verifyKeyMatches(e),!this.precondition.isValidFor(e))return e;var r=st.getPostMutationVersion(e),i=this.patchDocument(e);return new he(this.key,r,i,{hasLocalMutations:!0})},t.prototype.isEqual=function(e){return e instanceof t&&this.key.isEqual(e.key)&&this.fieldMask.isEqual(e.fieldMask)&&this.precondition.isEqual(e.precondition)},t.prototype.patchDocument=function(e){var t;return t=e instanceof he?e.data:ke.EMPTY,this.patchObject(t)},t.prototype.patchObject=function(e){for(var t=0,n=this.fieldMask.fields;t<n.length;t++){var r=n[t];if(!r.isEmpty()){var i=this.data.field(r);e=void 0!==i?e.set(r,i):e.delete(r)}}return e},t}(st),ut=function(e){function t(t,n){var r=e.call(this)||this;return r.key=t,r.fieldTransforms=n,r.type=Je.Transform,r.precondition=it.exists(!0),r}return a.__extends(t,e),t.prototype.applyToRemoteDocument=function(e,t){if(this.verifyKeyMatches(e),y(null!=t.transformResults,"Transform results missing for TransformMutation."),!this.precondition.isValidFor(e))return new pe(this.key,t.version);var n=this.requireDocument(e),r=this.serverTransformResults(e,t.transformResults),i=t.version,s=this.transformObject(n.data,r);return new he(this.key,i,s,{hasCommittedMutations:!0})},t.prototype.applyToLocalView=function(e,t,n){if(this.verifyKeyMatches(e),!this.precondition.isValidFor(e))return e;var r=this.requireDocument(e),i=this.localTransformResults(n,t),s=this.transformObject(r.data,i);return new he(this.key,r.version,s,{hasLocalMutations:!0})},t.prototype.isEqual=function(e){return e instanceof t&&this.key.isEqual(e.key)&&K(this.fieldTransforms,e.fieldTransforms)&&this.precondition.isEqual(e.precondition)},t.prototype.requireDocument=function(e){y(e instanceof he,"Unknown MaybeDocument type "+e);var t=e;return y(t.key.isEqual(this.key),"Can only transform a document with the same key"),t},t.prototype.serverTransformResults=function(e,t){var n=[];y(this.fieldTransforms.length===t.length,"server transform result count ("+t.length+") should match field transform count ("+this.fieldTransforms.length+")");for(var r=0;r<t.length;r++){var i=this.fieldTransforms[r],s=i.transform,o=null;e instanceof he&&(o=e.field(i.field)||null),n.push(s.applyToRemoteDocument(o,t[r]))}return n},t.prototype.localTransformResults=function(e,t){for(var n=[],r=0,i=this.fieldTransforms;r<i.length;r++){var s=i[r],o=s.transform,a=null;t instanceof he&&(a=t.field(s.field)||null),n.push(o.applyToLocalView(a,e))}return n},t.prototype.transformObject=function(e,t){y(t.length===this.fieldTransforms.length,"TransformResults length mismatch.");for(var n=0;n<this.fieldTransforms.length;n++){var r=this.fieldTransforms[n].field;e=e.set(r,t[n])}return e},t}(st),ct=function(e){function t(t,n){var r=e.call(this)||this;return r.key=t,r.precondition=n,r.type=Je.Delete,r}return a.__extends(t,e),t.prototype.applyToRemoteDocument=function(e,t){return this.verifyKeyMatches(e),y(null==t.transformResults,"Transform results received by DeleteMutation."),new de(this.key,t.version,{hasCommittedMutations:!0})},t.prototype.applyToLocalView=function(e,t,n){return this.verifyKeyMatches(e),this.precondition.isValidFor(e)?(e&&y(e.key.isEqual(this.key),"Can only apply mutation to document with same key"),new de(this.key,Ze.forDeletedDoc())):e},t.prototype.isEqual=function(e){return e instanceof t&&this.key.isEqual(e.key)&&this.precondition.isEqual(e.precondition)},t}(st),lt=function(){function e(){}return e.prototype.applyToLocalView=function(e,t){return new De(t,e)},e.prototype.applyToRemoteDocument=function(e,t){return t},e.prototype.isEqual=function(t){return t instanceof e},e.instance=new e,e}(),ht=function(){function e(e){this.elements=e}return e.prototype.applyToLocalView=function(e,t){return this.apply(e)},e.prototype.applyToRemoteDocument=function(e,t){return this.apply(e)},e.prototype.apply=function(e){for(var t=pt(e),n=function(e){t.find(function(t){return t.isEqual(e)})||t.push(e)},r=0,i=this.elements;r<i.length;r++){n(i[r])}return new Pe(t)},e.prototype.isEqual=function(t){return t instanceof e&&K(t.elements,this.elements)},e}(),dt=function(){function e(e){this.elements=e}return e.prototype.applyToLocalView=function(e,t){return this.apply(e)},e.prototype.applyToRemoteDocument=function(e,t){return this.apply(e)},e.prototype.apply=function(e){for(var t=pt(e),n=function(e){t=t.filter(function(t){return!t.isEqual(e)})},r=0,i=this.elements;r<i.length;r++){n(i[r])}return new Pe(t)},e.prototype.isEqual=function(t){return t instanceof e&&K(t.elements,this.elements)},e}();function pt(e){return e instanceof Pe?e.internalValue.slice():[]}var ft,mt=function(){function e(e){this.count=e}return e.prototype.isEqual=function(e){return e&&e.count===this.count},e}();function gt(e){switch(e){case b.OK:return g("Treated status OK as error");case b.CANCELLED:case b.UNKNOWN:case b.DEADLINE_EXCEEDED:case b.RESOURCE_EXHAUSTED:case b.INTERNAL:case b.UNAVAILABLE:case b.UNAUTHENTICATED:return!1;case b.INVALID_ARGUMENT:case b.NOT_FOUND:case b.ALREADY_EXISTS:case b.PERMISSION_DENIED:case b.FAILED_PRECONDITION:case b.ABORTED:case b.OUT_OF_RANGE:case b.UNIMPLEMENTED:case b.DATA_LOSS:return!0;default:return g("Unknown status code: "+e)}}function yt(e){if(void 0===e)return f("GRPC error has no .code"),b.UNKNOWN;switch(e){case ft.OK:return b.OK;case ft.CANCELLED:return b.CANCELLED;case ft.UNKNOWN:return b.UNKNOWN;case ft.DEADLINE_EXCEEDED:return b.DEADLINE_EXCEEDED;case ft.RESOURCE_EXHAUSTED:return b.RESOURCE_EXHAUSTED;case ft.INTERNAL:return b.INTERNAL;case ft.UNAVAILABLE:return b.UNAVAILABLE;case ft.UNAUTHENTICATED:return b.UNAUTHENTICATED;case ft.INVALID_ARGUMENT:return b.INVALID_ARGUMENT;case ft.NOT_FOUND:return b.NOT_FOUND;case ft.ALREADY_EXISTS:return b.ALREADY_EXISTS;case ft.PERMISSION_DENIED:return b.PERMISSION_DENIED;case ft.FAILED_PRECONDITION:return b.FAILED_PRECONDITION;case ft.ABORTED:return b.ABORTED;case ft.OUT_OF_RANGE:return b.OUT_OF_RANGE;case ft.UNIMPLEMENTED:return b.UNIMPLEMENTED;case ft.DATA_LOSS:return b.DATA_LOSS;default:return g("Unknown status code: "+e)}}!function(e){e[e.OK=0]="OK",e[e.CANCELLED=1]="CANCELLED",e[e.UNKNOWN=2]="UNKNOWN",e[e.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",e[e.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",e[e.NOT_FOUND=5]="NOT_FOUND",e[e.ALREADY_EXISTS=6]="ALREADY_EXISTS",e[e.PERMISSION_DENIED=7]="PERMISSION_DENIED",e[e.UNAUTHENTICATED=16]="UNAUTHENTICATED",e[e.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",e[e.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",e[e.ABORTED=10]="ABORTED",e[e.OUT_OF_RANGE=11]="OUT_OF_RANGE",e[e.UNIMPLEMENTED=12]="UNIMPLEMENTED",e[e.INTERNAL=13]="INTERNAL",e[e.UNAVAILABLE=14]="UNAVAILABLE",e[e.DATA_LOSS=15]="DATA_LOSS"}(ft||(ft={}));var vt=function(){function e(e){this.comparator=e,this.data=new fe(this.comparator)}return e.fromMapKeys=function(t){var n=new e(t.comparator);return t.forEach(function(e){n=n.add(e)}),n},e.prototype.has=function(e){return null!==this.data.get(e)},e.prototype.first=function(){return this.data.minKey()},e.prototype.last=function(){return this.data.maxKey()},Object.defineProperty(e.prototype,"size",{get:function(){return this.data.size},enumerable:!0,configurable:!0}),e.prototype.indexOf=function(e){return this.data.indexOf(e)},e.prototype.forEach=function(e){this.data.inorderTraversal(function(t,n){return e(t),!1})},e.prototype.forEachInRange=function(e,t){for(var n=this.data.getIteratorFrom(e[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}},e.prototype.forEachWhile=function(e,t){var n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();){if(!e(n.getNext().key))return}},e.prototype.firstAfterOrEqual=function(e){var t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null},e.prototype.add=function(e){return this.copy(this.data.remove(e).insert(e,!0))},e.prototype.delete=function(e){return this.has(e)?this.copy(this.data.remove(e)):this},e.prototype.isEmpty=function(){return this.data.isEmpty()},e.prototype.unionWith=function(e){var t=this;return e.forEach(function(e){t=t.add(e)}),t},e.prototype.isEqual=function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.data.getIterator(),r=t.data.getIterator();n.hasNext();){var i=n.getNext().key,s=r.getNext().key;if(0!==this.comparator(i,s))return!1}return!0},e.prototype.toArray=function(){var e=[];return this.forEach(function(t){e.push(t)}),e},e.prototype.toString=function(){var e=[];return this.forEach(function(t){return e.push(t)}),"SortedSet("+e.toString()+")"},e.prototype.copy=function(t){var n=new e(this.comparator);return n.data=t,n},e}(),_t=new fe(ce.comparator);function bt(){return _t}var wt=new fe(ce.comparator);function Et(){return wt}var Ct=new fe(ce.comparator);function St(){return Ct}var Tt=new vt(ce.comparator);function xt(){return Tt}var At=new vt(W);function Dt(){return At}var It,Nt,Ot=function(){function e(e){this.comparator=e?function(t,n){return e(t,n)||ce.comparator(t.key,n.key)}:function(e,t){return ce.comparator(e.key,t.key)},this.keyedMap=Et(),this.sortedSet=new fe(this.comparator)}return e.emptySet=function(t){return new e(t.comparator)},e.prototype.has=function(e){return null!=this.keyedMap.get(e)},e.prototype.get=function(e){return this.keyedMap.get(e)},e.prototype.first=function(){return this.sortedSet.minKey()},e.prototype.last=function(){return this.sortedSet.maxKey()},e.prototype.isEmpty=function(){return this.sortedSet.isEmpty()},e.prototype.indexOf=function(e){var t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1},Object.defineProperty(e.prototype,"size",{get:function(){return this.sortedSet.size},enumerable:!0,configurable:!0}),e.prototype.forEach=function(e){this.sortedSet.inorderTraversal(function(t,n){return e(t),!1})},e.prototype.add=function(e){var t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))},e.prototype.delete=function(e){var t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this},e.prototype.isEqual=function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0},e.prototype.toString=function(){var e=[];return this.forEach(function(t){e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"},e.prototype.copy=function(t,n){var r=new e;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r},e}();!function(e){e[e.Added=0]="Added",e[e.Removed=1]="Removed",e[e.Modified=2]="Modified",e[e.Metadata=3]="Metadata"}(It||(It={})),function(e){e[e.Local=0]="Local",e[e.Synced=1]="Synced"}(Nt||(Nt={}));var kt,Pt=function(){function e(){this.changeMap=new fe(ce.comparator)}return e.prototype.track=function(e){var t=e.doc.key,n=this.changeMap.get(t);n?e.type!==It.Added&&n.type===It.Metadata?this.changeMap=this.changeMap.insert(t,e):e.type===It.Metadata&&n.type!==It.Removed?this.changeMap=this.changeMap.insert(t,{type:n.type,doc:e.doc}):e.type===It.Modified&&n.type===It.Modified?this.changeMap=this.changeMap.insert(t,{type:It.Modified,doc:e.doc}):e.type===It.Modified&&n.type===It.Added?this.changeMap=this.changeMap.insert(t,{type:It.Added,doc:e.doc}):e.type===It.Removed&&n.type===It.Added?this.changeMap=this.changeMap.remove(t):e.type===It.Removed&&n.type===It.Modified?this.changeMap=this.changeMap.insert(t,{type:It.Removed,doc:n.doc}):e.type===It.Added&&n.type===It.Removed?this.changeMap=this.changeMap.insert(t,{type:It.Modified,doc:e.doc}):g("unsupported combination of changes: "+JSON.stringify(e)+" after "+JSON.stringify(n)):this.changeMap=this.changeMap.insert(t,e)},e.prototype.getChanges=function(){var e=[];return this.changeMap.inorderTraversal(function(t,n){e.push(n)}),e},e}(),Mt=function(){function e(e,t,n,r,i,s,o,a){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=s,this.syncStateChanged=o,this.excludesMetadataChanges=a}return e.fromInitialDocuments=function(t,n,r,i){var s=[];return n.forEach(function(e){s.push({type:It.Added,doc:e})}),new e(t,n,Ot.emptySet(n),s,r,i,!0,!1)},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return!this.mutatedKeys.isEmpty()},enumerable:!0,configurable:!0}),e.prototype.isEqual=function(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&this.query.isEqual(e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;var t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(var r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0},e}(),Rt=function(){function e(e,t,n,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}return e.createSynthesizedRemoteEventForCurrentChange=function(t,n){var r,i=((r={})[t]=Ft.createSynthesizedTargetChangeForCurrentChange(t,n),r);return new e(Ze.MIN,i,Dt(),bt(),xt())},e}(),Ft=function(){function e(e,t,n,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}return e.createSynthesizedTargetChangeForCurrentChange=function(t,n){return new e(_(),n,xt(),xt(),xt())},e}(),Lt=function(){return function(e,t,n,r){this.updatedTargetIds=e,this.removedTargetIds=t,this.key=n,this.newDoc=r}}(),Vt=function(){return function(e,t){this.targetId=e,this.existenceFilter=t}}();!function(e){e[e.NoChange=0]="NoChange",e[e.Added=1]="Added",e[e.Removed=2]="Removed",e[e.Current=3]="Current",e[e.Reset=4]="Reset"}(kt||(kt={}));var jt=function(){return function(e,t,n,r){void 0===n&&(n=_()),void 0===r&&(r=null),this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}(),Bt=function(){function e(){this.pendingResponses=0,this.documentChanges=$t(),this._resumeToken=_(),this._current=!1,this._hasPendingChanges=!0}return Object.defineProperty(e.prototype,"current",{get:function(){return this._current},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"resumeToken",{get:function(){return this._resumeToken},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isPending",{get:function(){return 0!==this.pendingResponses},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hasPendingChanges",{get:function(){return this._hasPendingChanges},enumerable:!0,configurable:!0}),e.prototype.updateResumeToken=function(e){e.length>0&&(this._hasPendingChanges=!0,this._resumeToken=e)},e.prototype.toTargetChange=function(){var e=xt(),t=xt(),n=xt();return this.documentChanges.forEach(function(r,i){switch(i){case It.Added:e=e.add(r);break;case It.Modified:t=t.add(r);break;case It.Removed:n=n.add(r);break;default:g("Encountered invalid change type: "+i)}}),new Ft(this._resumeToken,this._current,e,t,n)},e.prototype.clearPendingChanges=function(){this._hasPendingChanges=!1,this.documentChanges=$t()},e.prototype.addDocumentChange=function(e,t){this._hasPendingChanges=!0,this.documentChanges=this.documentChanges.insert(e,t)},e.prototype.removeDocumentChange=function(e){this._hasPendingChanges=!0,this.documentChanges=this.documentChanges.remove(e)},e.prototype.recordPendingTargetRequest=function(){this.pendingResponses+=1},e.prototype.recordTargetResponse=function(){this.pendingResponses-=1},e.prototype.markCurrent=function(){this._hasPendingChanges=!0,this._current=!0},e}(),Ut=function(){function e(e){this.metadataProvider=e,this.targetStates={},this.pendingDocumentUpdates=bt(),this.pendingDocumentTargetMapping=qt(),this.pendingTargetResets=new vt(W)}return e.prototype.handleDocumentChange=function(e){for(var t=0,n=e.updatedTargetIds;t<n.length;t++){var r=n[t];e.newDoc instanceof he?this.addDocumentToTarget(r,e.newDoc):e.newDoc instanceof de&&this.removeDocumentFromTarget(r,e.key,e.newDoc)}for(var i=0,s=e.removedTargetIds;i<s.length;i++){r=s[i];this.removeDocumentFromTarget(r,e.key,e.newDoc)}},e.prototype.handleTargetChange=function(e){var t=this;this.forEachTarget(e,function(n){var r=t.ensureTargetState(n);switch(e.state){case kt.NoChange:t.isActiveTarget(n)&&r.updateResumeToken(e.resumeToken);break;case kt.Added:r.recordTargetResponse(),r.isPending||r.clearPendingChanges(),r.updateResumeToken(e.resumeToken);break;case kt.Removed:r.recordTargetResponse(),r.isPending||t.removeTarget(n),y(!e.cause,"WatchChangeAggregator does not handle errored targets");break;case kt.Current:t.isActiveTarget(n)&&(r.markCurrent(),r.updateResumeToken(e.resumeToken));break;case kt.Reset:t.isActiveTarget(n)&&(t.resetTarget(n),r.updateResumeToken(e.resumeToken));break;default:g("Unknown target watch change state: "+e.state)}})},e.prototype.forEachTarget=function(e,t){e.targetIds.length>0?e.targetIds.forEach(t):T(this.targetStates,t)},e.prototype.handleExistenceFilter=function(e){var t=e.targetId,n=e.existenceFilter.count,r=this.queryDataForActiveTarget(t);if(r){var i=r.query;if(i.isDocumentQuery())if(0===n){var s=new ce(i.path);this.removeDocumentFromTarget(t,s,new de(s,Ze.forDeletedDoc()))}else y(1===n,"Single document existence filter with count: "+n);else this.getCurrentDocumentCountForTarget(t)!==n&&(this.resetTarget(t),this.pendingTargetResets=this.pendingTargetResets.add(t))}},e.prototype.createRemoteEvent=function(e){var t=this,n={};T(this.targetStates,function(r,i){var s=t.queryDataForActiveTarget(r);if(s){if(i.current&&s.query.isDocumentQuery()){var o=new ce(s.query.path);null!==t.pendingDocumentUpdates.get(o)||t.targetContainsDocument(r,o)||t.removeDocumentFromTarget(r,o,new de(o,e))}i.hasPendingChanges&&(n[r]=i.toTargetChange(),i.clearPendingChanges())}});var r=xt();this.pendingDocumentTargetMapping.forEach(function(e,n){var i=!0;n.forEachWhile(function(e){var n=t.queryDataForActiveTarget(e);return!n||n.purpose===Be.LimboResolution||(i=!1,!1)}),i&&(r=r.add(e))});var i=new Rt(e,n,this.pendingTargetResets,this.pendingDocumentUpdates,r);return this.pendingDocumentUpdates=bt(),this.pendingDocumentTargetMapping=qt(),this.pendingTargetResets=new vt(W),i},e.prototype.addDocumentToTarget=function(e,t){if(this.isActiveTarget(e)){var n=this.targetContainsDocument(e,t.key)?It.Modified:It.Added;this.ensureTargetState(e).addDocumentChange(t.key,n),this.pendingDocumentUpdates=this.pendingDocumentUpdates.insert(t.key,t),this.pendingDocumentTargetMapping=this.pendingDocumentTargetMapping.insert(t.key,this.ensureDocumentTargetMapping(t.key).add(e))}},e.prototype.removeDocumentFromTarget=function(e,t,n){if(this.isActiveTarget(e)){var r=this.ensureTargetState(e);this.targetContainsDocument(e,t)?r.addDocumentChange(t,It.Removed):r.removeDocumentChange(t),this.pendingDocumentTargetMapping=this.pendingDocumentTargetMapping.insert(t,this.ensureDocumentTargetMapping(t).delete(e)),n&&(this.pendingDocumentUpdates=this.pendingDocumentUpdates.insert(t,n))}},e.prototype.removeTarget=function(e){delete this.targetStates[e]},e.prototype.getCurrentDocumentCountForTarget=function(e){var t=this.ensureTargetState(e).toTargetChange();return this.metadataProvider.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size},e.prototype.recordPendingTargetRequest=function(e){this.ensureTargetState(e).recordPendingTargetRequest()},e.prototype.ensureTargetState=function(e){return this.targetStates[e]||(this.targetStates[e]=new Bt),this.targetStates[e]},e.prototype.ensureDocumentTargetMapping=function(e){var t=this.pendingDocumentTargetMapping.get(e);return t||(t=new vt(W),this.pendingDocumentTargetMapping=this.pendingDocumentTargetMapping.insert(e,t)),t},e.prototype.isActiveTarget=function(e){return null!==this.queryDataForActiveTarget(e)},e.prototype.queryDataForActiveTarget=function(e){var t=this.targetStates[e];return t&&t.isPending?null:this.metadataProvider.getQueryDataForTarget(e)},e.prototype.resetTarget=function(e){var t=this;y(!this.targetStates[e].isPending,"Should only reset active targets"),this.targetStates[e]=new Bt,this.metadataProvider.getRemoteKeysForTarget(e).forEach(function(n){t.removeDocumentFromTarget(e,n,null)})},e.prototype.targetContainsDocument=function(e,t){return this.metadataProvider.getRemoteKeysForTarget(e).has(t)},e}();function qt(){return new fe(ce.comparator)}function $t(){return new fe(ce.comparator)}var Ht,zt,Wt=((Ht={})[Ke.ASCENDING.name]="ASCENDING",Ht[Ke.DESCENDING.name]="DESCENDING",Ht),Kt=((zt={})[$e.LESS_THAN.name]="LESS_THAN",zt[$e.LESS_THAN_OR_EQUAL.name]="LESS_THAN_OR_EQUAL",zt[$e.GREATER_THAN.name]="GREATER_THAN",zt[$e.GREATER_THAN_OR_EQUAL.name]="GREATER_THAN_OR_EQUAL",zt[$e.EQUAL.name]="EQUAL",zt[$e.ARRAY_CONTAINS.name]="ARRAY_CONTAINS",zt),Qt=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Gt(e,t){y(!Ve(e),t+" is missing")}function Xt(e){return"number"==typeof e?e:"string"==typeof e?Number(e):g("can't parse "+e)}var Yt=function(){function e(e,t){this.databaseId=e,this.options=t}return e.prototype.emptyByteString=function(){return this.options.useProto3Json?"":new Uint8Array(0)},e.prototype.unsafeCastProtoByteString=function(e){return e},e.prototype.fromRpcStatus=function(e){var t=void 0===e.code?b.UNKNOWN:yt(e.code);return new w(t,e.message||"")},e.prototype.toInt32Value=function(e){return Ve(e)?void 0:{value:e}},e.prototype.fromInt32Value=function(e){var t;return Ve(t="object"==typeof e?e.value:e)?null:t},e.prototype.toTimestamp=function(e){return{seconds:e.seconds,nanos:e.nanoseconds}},e.prototype.fromTimestamp=function(e){if("string"==typeof e)return this.fromIso8601String(e);y(!!e,"Cannot deserialize null or undefined timestamp.");var t=Xt(e.seconds||"0"),n=e.nanos||0;return new te(t,n)},e.prototype.fromIso8601String=function(e){var t=0,n=Qt.exec(e);if(y(!!n,"invalid timestamp: "+e),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}var i=new Date(e),s=Math.floor(i.getTime()/1e3);return new te(s,t)},e.prototype.toBytes=function(e){return this.options.useProto3Json?e.toBase64():this.unsafeCastProtoByteString(e.toUint8Array())},e.prototype.fromBlob=function(e){return"string"==typeof e?(y(this.options.useProto3Json,"Expected bytes to be passed in as Uint8Array, but got a string instead."),Z.fromBase64String(e)):(y(!this.options.useProto3Json,"Expected bytes to be passed in as string, but got something else instead."),Z.fromUint8Array(e))},e.prototype.toVersion=function(e){return this.toTimestamp(e.toTimestamp())},e.prototype.fromVersion=function(e){return y(!!e,"Trying to deserialize version that isn't set"),Ze.fromTimestamp(this.fromTimestamp(e))},e.prototype.toResourceName=function(e,t){return this.fullyQualifiedPrefixPath(e).child("documents").child(t).canonicalString()},e.prototype.fromResourceName=function(e){var t=oe.fromString(e);return y(this.isValidResourceName(t),"Tried to deserialize invalid key "+t.toString()),t},e.prototype.toName=function(e){return this.toResourceName(this.databaseId,e.path)},e.prototype.fromName=function(e){var t=this.fromResourceName(e);return y(t.get(1)===this.databaseId.projectId,"Tried to deserialize key from different project: "+t.get(1)+" vs "+this.databaseId.projectId),y(!t.get(3)&&!this.databaseId.database||t.get(3)===this.databaseId.database,"Tried to deserialize key from different database: "+t.get(3)+" vs "+this.databaseId.database),new ce(this.extractLocalPathFromResourceName(t))},e.prototype.toQueryPath=function(e){return 0===e.length?this.encodedDatabaseId:this.toResourceName(this.databaseId,e)},e.prototype.fromQueryPath=function(e){var t=this.fromResourceName(e);return 4===t.length?oe.EMPTY_PATH:this.extractLocalPathFromResourceName(t)},Object.defineProperty(e.prototype,"encodedDatabaseId",{get:function(){return new oe(["projects",this.databaseId.projectId,"databases",this.databaseId.database]).canonicalString()},enumerable:!0,configurable:!0}),e.prototype.fullyQualifiedPrefixPath=function(e){return new oe(["projects",e.projectId,"databases",e.database])},e.prototype.extractLocalPathFromResourceName=function(e){return y(e.length>4&&"documents"===e.get(4),"tried to deserialize invalid key "+e.toString()),e.popFirst(5)},e.prototype.isValidResourceName=function(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)},e.prototype.toValue=function(e){if(e instanceof be)return{nullValue:"NULL_VALUE"};if(e instanceof we)return{booleanValue:e.value()};if(e instanceof Se)return{integerValue:""+e.value()};if(e instanceof Te){var t=e.value();if(this.options.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:e.value()}}return e instanceof xe?{stringValue:e.value()}:e instanceof ke?{mapValue:this.toMapValue(e)}:e instanceof Pe?{arrayValue:this.toArrayValue(e)}:e instanceof Ae?{timestampValue:this.toTimestamp(e.internalValue)}:e instanceof Oe?{geoPointValue:{latitude:e.value().latitude,longitude:e.value().longitude}}:e instanceof Ie?{bytesValue:this.toBytes(e.value())}:e instanceof Ne?{referenceValue:this.toResourceName(e.databaseId,e.key.path)}:g("Unknown FieldValue "+JSON.stringify(e))},e.prototype.fromValue=function(e){var t=this,n=e.value_type;if(Zt(e,n,"nullValue"))return be.INSTANCE;if(Zt(e,n,"booleanValue"))return we.of(e.booleanValue);if(Zt(e,n,"integerValue"))return new Se(Xt(e.integerValue));if(Zt(e,n,"doubleValue")){if(this.options.useProto3Json){if("NaN"===e.doubleValue)return Te.NAN;if("Infinity"===e.doubleValue)return Te.POSITIVE_INFINITY;if("-Infinity"===e.doubleValue)return Te.NEGATIVE_INFINITY}return new Te(e.doubleValue)}if(Zt(e,n,"stringValue"))return new xe(e.stringValue);if(Zt(e,n,"mapValue"))return this.fromFields(e.mapValue.fields||{});if(Zt(e,n,"arrayValue")){Gt(e.arrayValue,"arrayValue");var r=e.arrayValue.values||[];return new Pe(r.map(function(e){return t.fromValue(e)}))}if(Zt(e,n,"timestampValue"))return Gt(e.timestampValue,"timestampValue"),new Ae(this.fromTimestamp(e.timestampValue));if(Zt(e,n,"geoPointValue")){Gt(e.geoPointValue,"geoPointValue");var i=e.geoPointValue.latitude||0,s=e.geoPointValue.longitude||0;return new Oe(new ee(i,s))}if(Zt(e,n,"bytesValue")){Gt(e.bytesValue,"bytesValue");var o=this.fromBlob(e.bytesValue);return new Ie(o)}if(Zt(e,n,"referenceValue")){Gt(e.referenceValue,"referenceValue");var a=this.fromResourceName(e.referenceValue),u=new ie(a.get(1),a.get(3)),c=new ce(this.extractLocalPathFromResourceName(a));return new Ne(u,c)}return g("Unknown Value proto "+JSON.stringify(e))},e.prototype.toMutationDocument=function(e,t){return{name:this.toName(e),fields:this.toFields(t)}},e.prototype.toDocument=function(e){return y(!e.hasLocalMutations,"Can't serialize documents with mutations."),{name:this.toName(e.key),fields:this.toFields(e.data),updateTime:this.toTimestamp(e.version.toTimestamp())}},e.prototype.fromDocument=function(e,t){return new he(this.fromName(e.name),this.fromVersion(e.updateTime),this.fromFields(e.fields||{}),{hasCommittedMutations:!!t})},e.prototype.toFields=function(e){var t=this,n={};return e.forEach(function(e,r){n[e]=t.toValue(r)}),n},e.prototype.fromFields=function(e){var t=this,n=e,r=ke.EMPTY;return x(n,function(e,n){r=r.set(new ue([e]),t.fromValue(n))}),r},e.prototype.toMapValue=function(e){return{fields:this.toFields(e)}},e.prototype.toArrayValue=function(e){var t=this,n=[];return e.forEach(function(e){n.push(t.toValue(e))}),{values:n}},e.prototype.fromFound=function(e){y(!!e.found,"Tried to deserialize a found document from a missing document."),Gt(e.found.name,"doc.found.name"),Gt(e.found.updateTime,"doc.found.updateTime");var t=this.fromName(e.found.name),n=this.fromVersion(e.found.updateTime),r=this.fromFields(e.found.fields||{});return new he(t,n,r,{})},e.prototype.fromMissing=function(e){y(!!e.missing,"Tried to deserialize a missing document from a found document."),y(!!e.readTime,"Tried to deserialize a missing document without a read time.");var t=this.fromName(e.missing),n=this.fromVersion(e.readTime);return new de(t,n)},e.prototype.fromMaybeDocument=function(e){var t=e.result;return Zt(e,t,"found")?this.fromFound(e):Zt(e,t,"missing")?this.fromMissing(e):g("invalid batch get response: "+JSON.stringify(e))},e.prototype.toWatchTargetChangeState=function(e){switch(e){case kt.Added:return"ADD";case kt.Current:return"CURRENT";case kt.NoChange:return"NO_CHANGE";case kt.Removed:return"REMOVE";case kt.Reset:return"RESET";default:return g("Unknown WatchTargetChangeState: "+e)}},e.prototype.toTestWatchChange=function(e){if(e instanceof Vt)return{filter:{count:e.existenceFilter.count,targetId:e.targetId}};if(e instanceof Lt){if(e.newDoc instanceof he){var t=e.newDoc;return{documentChange:{document:{name:this.toName(t.key),fields:this.toFields(t.data),updateTime:this.toVersion(t.version)},targetIds:e.updatedTargetIds,removedTargetIds:e.removedTargetIds}}}if(e.newDoc instanceof de){t=e.newDoc;return{documentDelete:{document:this.toName(t.key),readTime:this.toVersion(t.version),removedTargetIds:e.removedTargetIds}}}if(null===e.newDoc)return{documentRemove:{document:this.toName(e.key),removedTargetIds:e.removedTargetIds}}}if(e instanceof jt){var n=void 0;return e.cause&&(n={code:function(e){if(void 0===e)return ft.OK;switch(e){case b.OK:return ft.OK;case b.CANCELLED:return ft.CANCELLED;case b.UNKNOWN:return ft.UNKNOWN;case b.DEADLINE_EXCEEDED:return ft.DEADLINE_EXCEEDED;case b.RESOURCE_EXHAUSTED:return ft.RESOURCE_EXHAUSTED;case b.INTERNAL:return ft.INTERNAL;case b.UNAVAILABLE:return ft.UNAVAILABLE;case b.UNAUTHENTICATED:return ft.UNAUTHENTICATED;case b.INVALID_ARGUMENT:return ft.INVALID_ARGUMENT;case b.NOT_FOUND:return ft.NOT_FOUND;case b.ALREADY_EXISTS:return ft.ALREADY_EXISTS;case b.PERMISSION_DENIED:return ft.PERMISSION_DENIED;case b.FAILED_PRECONDITION:return ft.FAILED_PRECONDITION;case b.ABORTED:return ft.ABORTED;case b.OUT_OF_RANGE:return ft.OUT_OF_RANGE;case b.UNIMPLEMENTED:return ft.UNIMPLEMENTED;case b.DATA_LOSS:return ft.DATA_LOSS;default:return g("Unknown status code: "+e)}}(e.cause.code),message:e.cause.message}),{targetChange:{targetChangeType:this.toWatchTargetChangeState(e.state),targetIds:e.targetIds,resumeToken:this.unsafeCastProtoByteString(e.resumeToken),cause:n}}}return g("Unrecognized watch change: "+JSON.stringify(e))},e.prototype.fromWatchChange=function(e){var t,n=e.response_type;if(Zt(e,n,"targetChange")){Gt(e.targetChange,"targetChange");var r=this.fromWatchTargetChangeState(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=e.targetChange.resumeToken||this.emptyByteString(),o=e.targetChange.cause,a=o&&this.fromRpcStatus(o);t=new jt(r,i,s,a||null)}else if(Zt(e,n,"documentChange")){Gt(e.documentChange,"documentChange"),Gt(e.documentChange.document,"documentChange.name"),Gt(e.documentChange.document.name,"documentChange.document.name"),Gt(e.documentChange.document.updateTime,"documentChange.document.updateTime");var u=e.documentChange,c=this.fromName(u.document.name),l=this.fromVersion(u.document.updateTime),h=this.fromFields(u.document.fields||{}),d=new he(c,l,h,{}),p=u.targetIds||[],f=u.removedTargetIds||[];t=new Lt(p,f,d.key,d)}else if(Zt(e,n,"documentDelete")){Gt(e.documentDelete,"documentDelete"),Gt(e.documentDelete.document,"documentDelete.document");var m=e.documentDelete;c=this.fromName(m.document),l=m.readTime?this.fromVersion(m.readTime):Ze.forDeletedDoc(),d=new de(c,l),f=m.removedTargetIds||[];t=new Lt([],f,d.key,d)}else if(Zt(e,n,"documentRemove")){Gt(e.documentRemove,"documentRemove"),Gt(e.documentRemove.document,"documentRemove");var y=e.documentRemove;c=this.fromName(y.document),f=y.removedTargetIds||[];t=new Lt([],f,c,null)}else{if(!Zt(e,n,"filter"))return g("Unknown change type "+JSON.stringify(e));Gt(e.filter,"filter"),Gt(e.filter.targetId,"filter.targetId");var v=e.filter,_=v.count||0,b=new mt(_),w=v.targetId;t=new Vt(w,b)}return t},e.prototype.fromWatchTargetChangeState=function(e){return"NO_CHANGE"===e?kt.NoChange:"ADD"===e?kt.Added:"REMOVE"===e?kt.Removed:"CURRENT"===e?kt.Current:"RESET"===e?kt.Reset:g("Got unexpected TargetChange.state: "+e)},e.prototype.versionFromListenResponse=function(e){if(!Zt(e,e.response_type,"targetChange"))return Ze.MIN;var t=e.targetChange;return t.targetIds&&t.targetIds.length?Ze.MIN:t.readTime?this.fromVersion(t.readTime):Ze.MIN},e.prototype.toMutation=function(e){var t,n=this;if(e instanceof ot)t={update:this.toMutationDocument(e.key,e.value)};else if(e instanceof ct)t={delete:this.toName(e.key)};else if(e instanceof at)t={update:this.toMutationDocument(e.key,e.data),updateMask:this.toDocumentMask(e.fieldMask)};else{if(!(e instanceof ut))return g("Unknown mutation type "+e.type);t={transform:{document:this.toName(e.key),fieldTransforms:e.fieldTransforms.map(function(e){return n.toFieldTransform(e)})}}}return e.precondition.isNone||(t.currentDocument=this.toPrecondition(e.precondition)),t},e.prototype.fromMutation=function(e){var t=this,n=e.currentDocument?this.fromPrecondition(e.currentDocument):it.NONE;if(e.update){Gt(e.update.name,"name");var r=this.fromName(e.update.name),i=this.fromFields(e.update.fields||{});if(e.updateMask){var s=this.fromDocumentMask(e.updateMask);return new at(r,i,s,n)}return new ot(r,i,n)}if(e.delete){r=this.fromName(e.delete);return new ct(r,n)}if(e.transform){r=this.fromName(e.transform.document);var o=e.transform.fieldTransforms.map(function(e){return t.fromFieldTransform(e)});return y(!0===n.exists,'Transforms only support precondition "exists == true"'),new ut(r,o)}return g("unknown mutation proto: "+JSON.stringify(e))},e.prototype.toPrecondition=function(e){return y(!e.isNone,"Can't serialize an empty precondition"),void 0!==e.updateTime?{updateTime:this.toVersion(e.updateTime)}:void 0!==e.exists?{exists:e.exists}:g("Unknown precondition")},e.prototype.fromPrecondition=function(e){return void 0!==e.updateTime?it.updateTime(this.fromVersion(e.updateTime)):void 0!==e.exists?it.exists(e.exists):it.NONE},e.prototype.fromWriteResult=function(e,t){var n=this,r=e.updateTime?this.fromVersion(e.updateTime):this.fromVersion(t),i=null;return e.transformResults&&e.transformResults.length>0&&(i=e.transformResults.map(function(e){return n.fromValue(e)})),new rt(r,i)},e.prototype.fromWriteResults=function(e,t){var n=this;return e&&e.length>0?(y(void 0!==t,"Received a write result without a commit time"),e.map(function(e){return n.fromWriteResult(e,t)})):[]},e.prototype.toFieldTransform=function(e){var t=this,n=e.transform;if(n instanceof lt)return{fieldPath:e.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof ht)return{fieldPath:e.field.canonicalString(),appendMissingElements:{values:n.elements.map(function(e){return t.toValue(e)})}};if(n instanceof dt)return{fieldPath:e.field.canonicalString(),removeAllFromArray:{values:n.elements.map(function(e){return t.toValue(e)})}};throw g("Unknown transform: "+e.transform)},e.prototype.fromFieldTransform=function(e){var t=this,n=e.transform_type,r=null;if(Zt(e,n,"setToServerValue"))y("REQUEST_TIME"===e.setToServerValue,"Unknown server value transform proto: "+JSON.stringify(e)),r=lt.instance;else if(Zt(e,n,"appendMissingElements")){var i=e.appendMissingElements.values||[];r=new ht(i.map(function(e){return t.fromValue(e)}))}else if(Zt(e,n,"removeAllFromArray")){i=e.removeAllFromArray.values||[];r=new dt(i.map(function(e){return t.fromValue(e)}))}else g("Unknown transform proto: "+JSON.stringify(e));var s=ue.fromServerFormat(e.fieldPath);return new nt(s,r)},e.prototype.toDocumentsTarget=function(e){return{documents:[this.toQueryPath(e.path)]}},e.prototype.fromDocumentsTarget=function(e){var t=e.documents.length;y(1===t,"DocumentsTarget contained other than 1 document: "+t);var n=e.documents[0];return Ue.atPath(this.fromQueryPath(n))},e.prototype.toQueryTarget=function(e){var t={structuredQuery:{}};if(e.path.isEmpty())t.parent=this.toQueryPath(oe.EMPTY_PATH);else{var n=e.path;y(n.length%2!=0,"Document queries with filters are not supported."),t.parent=this.toQueryPath(n.popLast()),t.structuredQuery.from=[{collectionId:n.lastSegment()}]}var r=this.toFilter(e.filters);r&&(t.structuredQuery.where=r);var i=this.toOrder(e.orderBy);i&&(t.structuredQuery.orderBy=i);var s=this.toInt32Value(e.limit);return void 0!==s&&(t.structuredQuery.limit=s),e.startAt&&(t.structuredQuery.startAt=this.toCursor(e.startAt)),e.endAt&&(t.structuredQuery.endAt=this.toCursor(e.endAt)),t},e.prototype.fromQueryTarget=function(e){var t=this.fromQueryPath(e.parent),n=e.structuredQuery,r=n.from?n.from.length:0;if(r>0){y(1===r,"StructuredQuery.from with more than one collection is not supported.");var i=n.from[0];t=t.child(i.collectionId)}var s=[];n.where&&(s=this.fromFilter(n.where));var o=[];n.orderBy&&(o=this.fromOrder(n.orderBy));var a=null;n.limit&&(a=this.fromInt32Value(n.limit));var u=null;n.startAt&&(u=this.fromCursor(n.startAt));var c=null;return n.endAt&&(c=this.fromCursor(n.endAt)),new Ue(t,o,s,a,u,c)},e.prototype.toListenRequestLabels=function(e){var t=this.toLabel(e.purpose);return null==t?null:{"goog-listen-tags":t}},e.prototype.toLabel=function(e){switch(e){case Be.Listen:return null;case Be.ExistenceFilterMismatch:return"existence-filter-mismatch";case Be.LimboResolution:return"limbo-document";default:return g("Unrecognized query purpose: "+e)}},e.prototype.toTarget=function(e){var t,n=e.query;return(t=n.isDocumentQuery()?{documents:this.toDocumentsTarget(n)}:{query:this.toQueryTarget(n)}).targetId=e.targetId,e.resumeToken.length>0&&(t.resumeToken=this.unsafeCastProtoByteString(e.resumeToken)),t},e.prototype.toFilter=function(e){var t=this;if(0!==e.length){var n=e.map(function(e){return e instanceof He?t.toRelationFilter(e):t.toUnaryFilter(e)});return 1===n.length?n[0]:{compositeFilter:{op:"AND",filters:n}}}},e.prototype.fromFilter=function(e){var t=this;return e?void 0!==e.unaryFilter?[this.fromUnaryFilter(e)]:void 0!==e.fieldFilter?[this.fromRelationFilter(e)]:void 0!==e.compositeFilter?e.compositeFilter.filters.map(function(e){return t.fromFilter(e)}).reduce(function(e,t){return e.concat(t)}):g("Unknown filter: "+JSON.stringify(e)):[]},e.prototype.toOrder=function(e){var t=this;if(0!==e.length)return e.map(function(e){return t.toPropertyOrder(e)})},e.prototype.fromOrder=function(e){var t=this;return e.map(function(e){return t.fromPropertyOrder(e)})},e.prototype.toCursor=function(e){var t=this;return{before:e.before,values:e.position.map(function(e){return t.toValue(e)})}},e.prototype.fromCursor=function(e){var t=this,n=!!e.before,r=e.values.map(function(e){return t.fromValue(e)});return new Qe(r,n)},e.prototype.toDirection=function(e){return Wt[e.name]},e.prototype.fromDirection=function(e){switch(e){case"ASCENDING":return Ke.ASCENDING;case"DESCENDING":return Ke.DESCENDING;default:return}},e.prototype.toOperatorName=function(e){return Kt[e.name]},e.prototype.fromOperatorName=function(e){switch(e){case"EQUAL":return $e.EQUAL;case"GREATER_THAN":return $e.GREATER_THAN;case"GREATER_THAN_OR_EQUAL":return $e.GREATER_THAN_OR_EQUAL;case"LESS_THAN":return $e.LESS_THAN;case"LESS_THAN_OR_EQUAL":return $e.LESS_THAN_OR_EQUAL;case"ARRAY_CONTAINS":return $e.ARRAY_CONTAINS;case"OPERATOR_UNSPECIFIED":return g("Unspecified relation");default:return g("Unknown relation")}},e.prototype.toFieldPathReference=function(e){return{fieldPath:e.canonicalString()}},e.prototype.fromFieldPathReference=function(e){return ue.fromServerFormat(e.fieldPath)},e.prototype.toPropertyOrder=function(e){return{field:this.toFieldPathReference(e.field),direction:this.toDirection(e.dir)}},e.prototype.fromPropertyOrder=function(e){return new Ge(this.fromFieldPathReference(e.field),this.fromDirection(e.direction))},e.prototype.toRelationFilter=function(e){return e instanceof He?{fieldFilter:{field:this.toFieldPathReference(e.field),op:this.toOperatorName(e.op),value:this.toValue(e.value)}}:g("Unrecognized filter: "+JSON.stringify(e))},e.prototype.fromRelationFilter=function(e){return new He(this.fromFieldPathReference(e.fieldFilter.field),this.fromOperatorName(e.fieldFilter.op),this.fromValue(e.fieldFilter.value))},e.prototype.toUnaryFilter=function(e){return e instanceof We?{unaryFilter:{field:this.toFieldPathReference(e.field),op:"IS_NAN"}}:e instanceof ze?{unaryFilter:{field:this.toFieldPathReference(e.field),op:"IS_NULL"}}:g("Unrecognized filter: "+JSON.stringify(e))},e.prototype.fromUnaryFilter=function(e){switch(e.unaryFilter.op){case"IS_NAN":var t=this.fromFieldPathReference(e.unaryFilter.field);return new We(t);case"IS_NULL":var n=this.fromFieldPathReference(e.unaryFilter.field);return new ze(n);case"OPERATOR_UNSPECIFIED":return g("Unspecified filter");default:return g("Unknown filter")}},e.prototype.toDocumentMask=function(e){return{fieldPaths:e.fields.map(function(e){return e.canonicalString()})}},e.prototype.fromDocumentMask=function(e){var t=(e.fieldPaths||[]).map(function(e){return ue.fromServerFormat(e)});return new tt(t)},e}();function Zt(e,t,n){return t===n||!t&&n in e}var Jt="FirebaseError",en=Error.captureStackTrace,tn=function(){return function(e,t){if(this.code=e,this.message=t,en)en(this,nn.prototype.create);else try{throw Error.apply(this,arguments)}catch(n){this.name=Jt,Object.defineProperty(this,"stack",{get:function(){return n.stack}})}}}();tn.prototype=Object.create(Error.prototype),tn.prototype.constructor=tn,tn.prototype.name=Jt;var nn=function(){function e(e,t,n){this.service=e,this.serviceName=t,this.errors=n,this.pattern=/\{\$([^}]+)}/g}return e.prototype.create=function(e,t){void 0===t&&(t={});var n,r=this.errors[e],i=this.service+"/"+e;n=void 0===r?"Error":r.replace(this.pattern,function(e,n){var r=t[n];return void 0!==r?r.toString():"<"+n+"?>"}),n=this.serviceName+": "+n+" ("+i+").";var s=new tn(i,n);for(var o in t)t.hasOwnProperty(o)&&"_"!==o.slice(-1)&&(s[o]=t[o]);return s},e}(),rn=(function(e){function t(){var t=e.call(this)||this;t.chain_=[],t.buf_=[],t.W_=[],t.pad_=[],t.inbuf_=0,t.total_=0,t.blockSize=64,t.pad_[0]=128;for(var n=1;n<t.blockSize;++n)t.pad_[n]=0;return t.reset(),t}a.__extends(t,e),t.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},t.prototype.compress_=function(e,t){t||(t=0);var n=this.W_;if("string"==typeof e)for(var r=0;r<16;r++)n[r]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(r=0;r<16;r++)n[r]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(r=16;r<80;r++){var i=n[r-3]^n[r-8]^n[r-14]^n[r-16];n[r]=4294967295&(i<<1|i>>>31)}var s,o,a=this.chain_[0],u=this.chain_[1],c=this.chain_[2],l=this.chain_[3],h=this.chain_[4];for(r=0;r<80;r++){r<40?r<20?(s=l^u&(c^l),o=1518500249):(s=u^c^l,o=1859775393):r<60?(s=u&c|l&(u|c),o=2400959708):(s=u^c^l,o=3395469782);i=(a<<5|a>>>27)+s+h+o+n[r]&4294967295;h=l,l=c,c=4294967295&(u<<30|u>>>2),u=a,a=i}this.chain_[0]=this.chain_[0]+a&4294967295,this.chain_[1]=this.chain_[1]+u&4294967295,this.chain_[2]=this.chain_[2]+c&4294967295,this.chain_[3]=this.chain_[3]+l&4294967295,this.chain_[4]=this.chain_[4]+h&4294967295},t.prototype.update=function(e,t){if(null!=e){void 0===t&&(t=e.length);for(var n=t-this.blockSize,r=0,i=this.buf_,s=this.inbuf_;r<t;){if(0==s)for(;r<=n;)this.compress_(e,r),r+=this.blockSize;if("string"==typeof e){for(;r<t;)if(i[s]=e.charCodeAt(r),++r,++s==this.blockSize){this.compress_(i),s=0;break}}else for(;r<t;)if(i[s]=e[r],++r,++s==this.blockSize){this.compress_(i),s=0;break}}this.inbuf_=s,this.total_+=t}},t.prototype.digest=function(){var e=[],t=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&t,t/=256;this.compress_(this.buf_);var r=0;for(n=0;n<5;n++)for(var i=24;i>=0;i-=8)e[r]=this.chain_[n]>>i&255,++r;return e}}(function(){return function(){this.blockSize=-1}}()),function(){function e(e){this.sendFn=e.sendFn,this.closeFn=e.closeFn}return e.prototype.onOpen=function(e){y(!this.wrappedOnOpen,"Called onOpen on stream twice!"),this.wrappedOnOpen=e},e.prototype.onClose=function(e){y(!this.wrappedOnClose,"Called onClose on stream twice!"),this.wrappedOnClose=e},e.prototype.onMessage=function(e){y(!this.wrappedOnMessage,"Called onMessage on stream twice!"),this.wrappedOnMessage=e},e.prototype.close=function(){this.closeFn()},e.prototype.send=function(e){this.sendFn(e)},e.prototype.callOnOpen=function(){y(void 0!==this.wrappedOnOpen,"Cannot call onOpen because no callback was set"),this.wrappedOnOpen()},e.prototype.callOnClose=function(e){y(void 0!==this.wrappedOnClose,"Cannot call onClose because no callback was set"),this.wrappedOnClose(e)},e.prototype.callOnMessage=function(e){y(void 0!==this.wrappedOnMessage,"Cannot call onMessage because no callback was set"),this.wrappedOnMessage(e)},e}()),sn="Connection",on={BatchGetDocuments:"batchGet",Commit:"commit"},an="gl-js/ fire/"+c,un=function(){function e(e){this.databaseId=e.databaseId,this.pool=new u.XhrIoPool;var t=e.ssl?"https":"http";this.baseUrl=t+"://"+e.host}return e.prototype.modifyHeadersForRequest=function(e,t){if(t)for(var n in t.authHeaders)t.authHeaders.hasOwnProperty(n)&&(e[n]=t.authHeaders[n]);e["X-Goog-Api-Client"]=an},e.prototype.invokeRPC=function(e,t,n){var r=this,i=this.makeUrl(e);return new Promise(function(s,o){r.pool.getObject(function(a){a.listenOnce(u.EventType.COMPLETE,function(){try{switch(a.getLastErrorCode()){case u.ErrorCode.NO_ERROR:var t=a.getResponseJson();p(sn,"XHR received:",JSON.stringify(t)),s(t);break;case u.ErrorCode.TIMEOUT:p(sn,'RPC "'+e+'" timed out'),o(new w(b.DEADLINE_EXCEEDED,"Request time out"));break;case u.ErrorCode.HTTP_ERROR:var n=a.getStatus();p(sn,'RPC "'+e+'" failed with status:',n,"response text:",a.getResponseText()),n>0?o(new w(function(e){switch(e){case 200:return b.OK;case 400:return b.INVALID_ARGUMENT;case 401:return b.UNAUTHENTICATED;case 403:return b.PERMISSION_DENIED;case 404:return b.NOT_FOUND;case 409:return b.ABORTED;case 416:return b.OUT_OF_RANGE;case 429:return b.RESOURCE_EXHAUSTED;case 499:return b.CANCELLED;case 500:return b.UNKNOWN;case 501:return b.UNIMPLEMENTED;case 503:return b.UNAVAILABLE;case 504:return b.DEADLINE_EXCEEDED;default:return e>=200&&e<300?b.OK:e>=400&&e<500?b.FAILED_PRECONDITION:e>=500&&e<600?b.INTERNAL:b.UNKNOWN}}(n),"Server responded with status "+a.getStatusText())):(p(sn,'RPC "'+e+'" failed'),o(new w(b.UNAVAILABLE,"Connection failed.")));break;default:g('RPC "'+e+'" failed with unanticipated webchannel error '+a.getLastErrorCode()+": "+a.getLastError()+", giving up.")}}finally{p(sn,'RPC "'+e+'" completed.'),r.pool.releaseObject(a)}});var c=JSON.stringify(t);p(sn,"XHR sending: ",i+" "+c);var l={"Content-Type":"text/plain"};r.modifyHeadersForRequest(l,n),a.send(i,"POST",c,l,15)})})},e.prototype.invokeStreamingRPC=function(e,t,n){return this.invokeRPC(e,t,n)},e.prototype.openStream=function(e,t){var n=[this.baseUrl,"/","google.firestore.v1beta1.Firestore","/",e,"/channel"],r=u.createWebChannelTransport(),i={backgroundChannelTest:!0,httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database},sendRawJson:!0,supportsCrossDomainXhr:!0};this.modifyHeadersForRequest(i.initMessageHeaders,t),"object"==typeof navigator&&"ReactNative"===navigator.product||(i.httpHeadersOverwriteParam="$httpHeaders");var s=n.join("");p(sn,"Creating WebChannel: "+s+" "+i);var o=r.createWebChannel(s,i),a=!1,c=!1,l=new rn({sendFn:function(e){c?p(sn,"Not sending because WebChannel is closed:",e):(a||(p(sn,"Opening WebChannel transport."),o.open(),a=!0),p(sn,"WebChannel sending:",e),o.send(e))},closeFn:function(){return o.close()}}),h=function(e,t){o.listen(e,function(e){try{t(e)}catch(n){setTimeout(function(){throw n},0)}})};return h(u.WebChannel.EventType.OPEN,function(){c||p(sn,"WebChannel transport opened.")}),h(u.WebChannel.EventType.CLOSE,function(){c||(c=!0,p(sn,"WebChannel transport closed"),l.callOnClose())}),h(u.WebChannel.EventType.ERROR,function(e){c||(c=!0,p(sn,"WebChannel transport errored:",e),l.callOnClose(new w(b.UNAVAILABLE,"The operation could not be completed")))}),h(u.WebChannel.EventType.MESSAGE,function(e){if(!c){var t=e.data[0];y(!!t,"Got a webchannel message without data.");var n=t.error||t[0]&&t[0].error;if(n){p(sn,"WebChannel received error:",n);var r=n.status,i=function(e){var t=ft[e];if(void 0!==t)return yt(t)}(r),s=n.message;void 0===i&&(i=b.INTERNAL,s="Unknown error status: "+r+" with message "+n.message),c=!0,l.callOnClose(new w(i,s)),o.close()}else p(sn,"WebChannel received:",t),l.callOnMessage(t)}}),setTimeout(function(){l.callOnOpen()},0),l},e.prototype.makeUrl=function(e){var t=on[e];y(void 0!==t,"Unknown REST mapping for: "+e);var n=[this.baseUrl,"/","v1beta1"];return n.push("/projects/"),n.push(this.databaseId.projectId),n.push("/databases/"),n.push(this.databaseId.database),n.push("/documents"),n.push(":"),n.push(t),n.join("")},e}(),cn=function(){function e(){this.emptyByteString="",this.base64Available="undefined"!=typeof atob}return Object.defineProperty(e.prototype,"document",{get:function(){return"undefined"!=typeof document?document:null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"window",{get:function(){return"undefined"!=typeof window?window:null},enumerable:!0,configurable:!0}),e.prototype.loadConnection=function(e){return Promise.resolve(new un(e))},e.prototype.newSerializer=function(e){return new Yt(e,{useProto3Json:!0})},e.prototype.formatJSON=function(e){return JSON.stringify(e)},e.prototype.atob=function(e){return atob(e)},e.prototype.btoa=function(e){return btoa(e)},e}();v.setPlatform(new cn);var ln,hn=function(){function e(e,t){var n=this;this.previousValue=e,t&&(t.sequenceNumberHandler=function(e){return n.setPreviousValue(e)},this.writeNewSequenceNumber=function(e){return t.writeSequenceNumber(e)})}return e.prototype.setPreviousValue=function(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue},e.prototype.next=function(){var e=++this.previousValue;return this.writeNewSequenceNumber&&this.writeNewSequenceNumber(e),e},e.INVALID=-1,e}(),dn=function(){return function(){var e=this;this.promise=new Promise(function(t,n){e.resolve=t,e.reject=n})}}();!function(e){e.All="all",e.ListenStreamIdle="listen_stream_idle",e.ListenStreamConnectionBackoff="listen_stream_connection_backoff",e.WriteStreamIdle="write_stream_idle",e.WriteStreamConnectionBackoff="write_stream_connection_backoff",e.OnlineStateTimeout="online_state_timeout",e.ClientMetadataRefresh="client_metadata_refresh"}(ln||(ln={}));var pn=function(){function e(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new dn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.catch=this.deferred.promise.catch.bind(this.deferred.promise),this.deferred.promise.catch(function(e){})}return e.createAndSchedule=function(t,n,r,i,s){var o=new e(t,n,Date.now()+r,i,s);return o.start(r),o},e.prototype.start=function(e){var t=this;this.timerHandle=setTimeout(function(){return t.handleDelayElapsed()},e)},e.prototype.skipDelay=function(){return this.handleDelayElapsed()},e.prototype.cancel=function(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new w(b.CANCELLED,"Operation cancelled"+(e?": "+e:""))))},e.prototype.handleDelayElapsed=function(){var e=this;this.asyncQueue.enqueueAndForget(function(){return null!==e.timerHandle?(e.clearTimeout(),e.op().then(function(t){return e.deferred.resolve(t)})):Promise.resolve()})},e.prototype.clearTimeout=function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)},e}(),fn=function(){function e(){this.tail=Promise.resolve(),this.delayedOperations=[],this.operationInProgress=!1}return e.prototype.enqueueAndForget=function(e){this.enqueue(e)},e.prototype.enqueue=function(e){var t=this;this.verifyNotFailed();var n=this.tail.then(function(){return t.operationInProgress=!0,e().catch(function(e){t.failure=e,t.operationInProgress=!1;var n=e.stack||e.message||"";throw f("INTERNAL UNHANDLED ERROR: ",n),n.indexOf("Firestore Test Simulated Error")<0&&setTimeout(function(){throw e},0),e}).then(function(e){return t.operationInProgress=!1,e})});return this.tail=n,n},e.prototype.enqueueAfterDelay=function(e,t,n){var r=this;this.verifyNotFailed(),y(t>=0,"Attempted to schedule an operation with a negative delay of "+t),y(!this.containsDelayedOperation(e),"Attempted to schedule multiple operations with timer id "+e+".");var i=pn.createAndSchedule(this,e,t,n,function(e){return r.removeDelayedOperation(e)});return this.delayedOperations.push(i),i},e.prototype.verifyNotFailed=function(){this.failure&&g("AsyncQueue is already failed: "+(this.failure.stack||this.failure.message))},e.prototype.verifyOperationInProgress=function(){y(this.operationInProgress,"verifyOpInProgress() called when no op in progress on this queue.")},e.prototype.drain=function(){return this.enqueue(function(){return Promise.resolve()})},e.prototype.containsDelayedOperation=function(e){for(var t=0,n=this.delayedOperations;t<n.length;t++){if(n[t].timerId===e)return!0}return!1},e.prototype.runDelayedOperationsEarly=function(e){var t=this;return this.drain().then(function(){y(e===ln.All||t.containsDelayedOperation(e),"Attempted to drain to missing operation "+e),t.delayedOperations.sort(function(e,t){return e.targetTimeMs-t.targetTimeMs});for(var n=0,r=t.delayedOperations;n<r.length;n++){var i=r[n];if(i.skipDelay(),e!==ln.All&&i.timerId===e)break}return t.drain()})},e.prototype.removeDelayedOperation=function(e){var t=this.delayedOperations.indexOf(e);y(t>=0,"Delayed operation not found."),this.delayedOperations.splice(t,1)},e}(),mn="\x01",gn="\x01",yn="\x10",vn="\x11";function _n(e){for(var t="",n=0;n<e.length;n++)t.length>0&&(t=wn(t)),t=bn(e.get(n),t);return wn(t)}function bn(e,t){for(var n=t,r=e.length,i=0;i<r;i++){var s=e.charAt(i);switch(s){case"\0":n+=mn+yn;break;case mn:n+=mn+vn;break;default:n+=s}}return n}function wn(e){return e+mn+gn}function En(e){var t=e.length;if(y(t>=2,"Invalid path "+e),2===t)return y(e.charAt(0)===mn&&e.charAt(1)===gn,"Non-empty path "+e+" had length 2"),oe.EMPTY_PATH;for(var n=t-2,r=[],i="",s=0;s<t;){var o=e.indexOf(mn,s);switch((o<0||o>n)&&g('Invalid encoded resource path: "'+e+'"'),e.charAt(o+1)){case gn:var a=e.substring(s,o),u=void 0;0===i.length?u=a:(u=i+=a,i=""),r.push(u);break;case yn:i+=e.substring(s,o),i+="\0";break;case vn:i+=e.substring(s,o+1);break;default:g('Invalid encoded resource path: "'+e+'"')}s=o+2}return new oe(r)}var Cn,Sn=-1,Tn=function(){function e(e,t,n){this.batchId=e,this.localWriteTime=t,this.mutations=n,y(n.length>0,"Cannot create an empty mutation batch")}return e.prototype.applyToRemoteDocument=function(e,t,n){t&&y(t.key.isEqual(e),"applyToRemoteDocument: key "+e+" should match maybeDoc key\n        "+t.key);var r=n.mutationResults;y(r.length===this.mutations.length,"Mismatch between mutations length\n      ("+this.mutations.length+") and mutation results length\n      ("+r.length+").");for(var i=0;i<this.mutations.length;i++){var s=this.mutations[i];if(s.key.isEqual(e)){var o=r[i];t=s.applyToRemoteDocument(t,o)}}return t},e.prototype.applyToLocalView=function(e,t){t&&y(t.key.isEqual(e),"applyToLocalDocument: key "+e+" should match maybeDoc key\n        "+t.key);for(var n=t,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(e)&&(t=i.applyToLocalView(t,n,this.localWriteTime))}return t},e.prototype.keys=function(){for(var e=xt(),t=0,n=this.mutations;t<n.length;t++){var r=n[t];e=e.add(r.key)}return e},e.prototype.isEqual=function(e){return this.batchId===e.batchId&&K(this.mutations,e.mutations)},e}(),xn=function(){function e(e,t,n,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.streamToken=r,this.docVersions=i}return e.from=function(t,n,r,i){y(t.mutations.length===r.length,"Mutations sent "+t.mutations.length+" must equal results received "+r.length);for(var s=St(),o=t.mutations,a=0;a<o.length;a++)s=s.insert(o[a].key,r[a].version);return new e(t,n,r,i,s)},e}(),An=1;!function(e){e[e.QueryCache=0]="QueryCache",e[e.SyncEngine=1]="SyncEngine"}(Cn||(Cn={}));var Dn=function(){function e(e,t){this.generatorId=e,y((e&An)===e,"Generator ID "+e+" contains more than "+An+" reserved bits"),this.seek(void 0!==t?t:this.generatorId)}return e.prototype.next=function(){var e=this.nextId;return this.nextId+=1<<An,e},e.prototype.after=function(e){return this.seek(e+(1<<An)),this.next()},e.prototype.seek=function(e){y((e&An)===this.generatorId,"Cannot supply target ID from different generator ID"),this.nextId=e},e.forQueryCache=function(){return new e(Cn.QueryCache,2)},e.forSyncEngine=function(){return new e(Cn.SyncEngine)},e}(),In=function(){function e(e){var t=this;this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(function(e){t.isDone=!0,t.result=e,t.nextCallback&&t.nextCallback(e)},function(e){t.isDone=!0,t.error=e,t.catchCallback&&t.catchCallback(e)})}return e.prototype.catch=function(e){return this.next(void 0,e)},e.prototype.next=function(t,n){var r=this;return this.callbackAttached&&g("Called next() or catch() twice for PersistencePromise"),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new e(function(e,i){r.nextCallback=function(n){r.wrapSuccess(t,n).next(e,i)},r.catchCallback=function(t){r.wrapFailure(n,t).next(e,i)}})},e.prototype.toPromise=function(){var e=this;return new Promise(function(t,n){e.next(t,n)})},e.prototype.wrapUserFunction=function(t){try{var n=t();return n instanceof e?n:e.resolve(n)}catch(r){return e.reject(r)}},e.prototype.wrapSuccess=function(t,n){return t?this.wrapUserFunction(function(){return t(n)}):e.resolve(n)},e.prototype.wrapFailure=function(t,n){return t?this.wrapUserFunction(function(){return t(n)}):e.reject(n)},e.resolve=function(t){return new e(function(e,n){e(t)})},e.reject=function(t){return new e(function(e,n){n(t)})},e.waitFor=function(t){return new e(function(e,n){var r=0,i=0,s=!1;t.forEach(function(t){++r,t.next(function(){++i,s&&i===r&&e()},function(e){return n(e)})}),s=!0,i===r&&e()})},e.or=function(t){for(var n=e.resolve(!1),r=function(t){n=n.next(function(n){return n?e.resolve(n):t()})},i=0,s=t;i<s.length;i++){r(s[i])}return n},e.forEach=function(e,t){var n=this,r=[];return e.forEach(function(e,i){r.push(t.call(n,e,i))}),this.waitFor(r)},e}(),Nn=function(){function e(e){this.db=e}return e.openOrCreate=function(t,n,r){return y(e.isAvailable(),"IndexedDB not supported in current environment."),p("SimpleDb","Opening database:",t),new In(function(i,s){var o=window.indexedDB.open(t,n);o.onsuccess=function(t){var n=t.target.result;i(new e(n))},o.onblocked=function(){s(new w(b.FAILED_PRECONDITION,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},o.onerror=function(e){s(e.target.error)},o.onupgradeneeded=function(e){p("SimpleDb",'Database "'+t+'" requires upgrade from version:',e.oldVersion);var n=e.target.result,i=new kn(o.transaction);r.createOrUpgrade(n,i,e.oldVersion,Xn).next(function(){p("SimpleDb","Database upgrade to version "+Xn+" complete")})}}).toPromise()},e.delete=function(e){return p("SimpleDb","Removing database:",e),Mn(window.indexedDB.deleteDatabase(e)).toPromise()},e.isAvailable=function(){if("undefined"==typeof window||null==window.indexedDB)return!1;if(void 0===window.navigator)return"YES"===process.env.USE_MOCK_PERSISTENCE;var e=window.navigator.userAgent;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0)},e.getStore=function(e,t){return e.store(t)},e.prototype.runTransaction=function(e,t,n){var r=kn.open(this.db,e,t),i=n(r).catch(function(e){r.abort(e)}).toPromise();return r.completionPromise.then(function(){return i})},e.prototype.close=function(){this.db.close()},e}(),On=function(){function e(e){this.dbCursor=e,this.shouldStop=!1,this.nextKey=null}return Object.defineProperty(e.prototype,"isDone",{get:function(){return this.shouldStop},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"skipToKey",{get:function(){return this.nextKey},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"cursor",{set:function(e){this.dbCursor=e},enumerable:!0,configurable:!0}),e.prototype.done=function(){this.shouldStop=!0},e.prototype.skip=function(e){this.nextKey=e},e.prototype.delete=function(){return Mn(this.dbCursor.delete())},e}(),kn=function(){function e(e){var t=this;this.transaction=e,this.aborted=!1,this.completionDeferred=new dn,this.transaction.oncomplete=function(){t.completionDeferred.resolve()},this.transaction.onabort=function(){e.error?t.completionDeferred.reject(e.error):t.completionDeferred.resolve()},this.transaction.onerror=function(e){t.completionDeferred.reject(e.target.error)}}return e.open=function(t,n,r){return new e(t.transaction(r,n))},Object.defineProperty(e.prototype,"completionPromise",{get:function(){return this.completionDeferred.promise},enumerable:!0,configurable:!0}),e.prototype.abort=function(e){e&&this.completionDeferred.reject(e),this.aborted||(p("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},e.prototype.store=function(e){var t=this.transaction.objectStore(e);return y(!!t,"Object store not part of transaction: "+e),new Pn(t)},e}(),Pn=function(){function e(e){this.store=e}return e.prototype.put=function(e,t){var n;return void 0!==t?(p("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(p("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),Mn(n)},e.prototype.add=function(e){return p("SimpleDb","ADD",this.store.name,e,e),Mn(this.store.add(e))},e.prototype.get=function(e){var t=this;return Mn(this.store.get(e)).next(function(n){return void 0===n&&(n=null),p("SimpleDb","GET",t.store.name,e,n),n})},e.prototype.delete=function(e){return p("SimpleDb","DELETE",this.store.name,e),Mn(this.store.delete(e))},e.prototype.count=function(){return p("SimpleDb","COUNT",this.store.name),Mn(this.store.count())},e.prototype.loadAll=function(e,t){var n=this.cursor(this.options(e,t)),r=[];return this.iterateCursor(n,function(e,t){r.push(t)}).next(function(){return r})},e.prototype.deleteAll=function(e,t){p("SimpleDb","DELETE ALL",this.store.name);var n=this.options(e,t);n.keysOnly=!1;var r=this.cursor(n);return this.iterateCursor(r,function(e,t,n){return n.delete()})},e.prototype.iterate=function(e,t){var n;t?n=e:(n={},t=e);var r=this.cursor(n);return this.iterateCursor(r,t)},e.prototype.iterateSerial=function(e){var t=this.cursor({});return new In(function(n,r){t.onerror=function(e){r(e.target.error)},t.onsuccess=function(t){var r=t.target.result;r?e(r.primaryKey,r.value).next(function(e){e?r.continue():n()}):n()}})},e.prototype.iterateCursor=function(e,t){var n=[];return new In(function(r,i){e.onerror=function(e){i(e.target.error)},e.onsuccess=function(e){var i=e.target.result;if(i){var s=new On(i),o=t(i.primaryKey,i.value,s);if(o instanceof In){var a=o.catch(function(e){return s.done(),In.reject(e)});n.push(a)}s.isDone?r():null===s.skipToKey?i.continue():i.continue(s.skipToKey)}else r()}}).next(function(){return In.waitFor(n)})},e.prototype.options=function(e,t){var n=void 0;return void 0!==e&&("string"==typeof e?n=e:(y(void 0===t,"3rd argument must not be defined if 2nd is a range."),t=e)),{index:n,range:t}},e.prototype.cursor=function(e){var t="next";if(e.reverse&&(t="prev"),e.index){var n=this.store.index(e.index);return e.keysOnly?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)},e}();function Mn(e){return new In(function(t,n){e.onsuccess=function(e){var n=e.target.result;t(n)},e.onerror=function(e){n(e.target.error)}})}var Rn=function(){function e(e,t){this.referenceDelegate=e,this.serializer=t,this.targetIdGenerator=Dn.forQueryCache()}return e.prototype.allocateTargetId=function(e){var t=this;return this.retrieveMetadata(e).next(function(n){return n.highestTargetId=t.targetIdGenerator.after(n.highestTargetId),t.saveMetadata(e,n).next(function(){return n.highestTargetId})})},e.prototype.getLastRemoteSnapshotVersion=function(e){return this.retrieveMetadata(e).next(function(e){return Ze.fromTimestamp(new te(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))})},e.prototype.getHighestSequenceNumber=function(e){return Vn(e.simpleDbTransaction)},e.prototype.setTargetsMetadata=function(e,t,n){var r=this;return this.retrieveMetadata(e).next(function(i){return i.highestListenSequenceNumber=t,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),r.saveMetadata(e,i)})},e.prototype.addQueryData=function(e,t){var n=this;return this.saveQueryData(e,t).next(function(){return n.retrieveMetadata(e).next(function(r){return r.targetCount+=1,n.updateMetadataFromQueryData(t,r),n.saveMetadata(e,r)})})},e.prototype.updateQueryData=function(e,t){return this.saveQueryData(e,t)},e.prototype.removeQueryData=function(e,t){var n=this;return this.removeMatchingKeysForTargetId(e,t.targetId).next(function(){return Fn(e).delete(t.targetId)}).next(function(){return n.retrieveMetadata(e)}).next(function(t){return y(t.targetCount>0,"Removing from an empty query cache"),t.targetCount-=1,n.saveMetadata(e,t)})},e.prototype.removeTargets=function(e,t,n){var r=this,i=0,s=[];return Fn(e).iterate(function(o,a){var u=r.serializer.fromDbTarget(a);u.sequenceNumber<=t&&void 0===n[u.targetId]&&(i++,s.push(r.removeQueryData(e,u)))}).next(function(){return In.waitFor(s)}).next(function(){return i})},e.prototype.forEachTarget=function(e,t){var n=this;return Fn(e).iterate(function(e,r){var i=n.serializer.fromDbTarget(r);t(i)})},e.prototype.retrieveMetadata=function(e){return Ln(e.simpleDbTransaction)},e.prototype.saveMetadata=function(e,t){return(n=e,Or.getStore(n,cr.store)).put(cr.key,t);var n},e.prototype.saveQueryData=function(e,t){return Fn(e).put(this.serializer.toDbTarget(t))},e.prototype.updateMetadataFromQueryData=function(e,t){var n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n},e.prototype.getQueryCount=function(e){return this.retrieveMetadata(e).next(function(e){return e.targetCount})},e.prototype.getQueryData=function(e,t){var n=this,r=t.canonicalId(),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]),s=null;return Fn(e).iterate({range:i,index:ar.queryTargetsIndexName},function(e,r,i){var o=n.serializer.fromDbTarget(r);t.isEqual(o.query)&&(s=o,i.done())}).next(function(){return s})},e.prototype.addMatchingKeys=function(e,t,n){var r=this,i=[],s=jn(e);return t.forEach(function(t){var o=_n(t.path);i.push(s.put(new ur(n,o))),i.push(r.referenceDelegate.addReference(e,t))}),In.waitFor(i)},e.prototype.removeMatchingKeys=function(e,t,n){var r=this,i=jn(e);return In.forEach(t,function(t){var s=_n(t.path);return In.waitFor([i.delete([n,s]),r.referenceDelegate.removeReference(e,t)])})},e.prototype.removeMatchingKeysForTargetId=function(e,t){var n=jn(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)},e.prototype.getMatchingKeysForTargetId=function(e,t){var n=IDBKeyRange.bound([t],[t+1],!1,!0),r=jn(e),i=xt();return r.iterate({range:n,keysOnly:!0},function(e,t,n){var r=En(e[1]),s=new ce(r);i=i.add(s)}).next(function(){return i})},e.prototype.containsKey=function(e,t){var n,r=_n(t.path),i=IDBKeyRange.bound([r],[(n=r,n+"\0")],!1,!0),s=0;return jn(e).iterate({index:ur.documentTargetsIndex,keysOnly:!0,range:i},function(e,t,n){var r=e[0];e[1];0!==r&&(s++,n.done())}).next(function(){return s>0})},e.prototype.getQueryDataForTarget=function(e,t){var n=this;return Fn(e).get(t).next(function(e){return e?n.serializer.fromDbTarget(e):null})},e}();function Fn(e){return Or.getStore(e,ar.store)}function Ln(e){return Nn.getStore(e,cr.store).get(cr.key).next(function(e){return y(null!==e,"Missing metadata row."),e})}function Vn(e){return Ln(e).next(function(e){return e.highestListenSequenceNumber})}function jn(e){return Or.getStore(e,ur.store)}var Bn=function(){function e(e){this.mapKeyFn=e,this.inner={}}return e.prototype.get=function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var s=i[r],o=s[0],a=s[1];if(o.isEqual(e))return a}},e.prototype.has=function(e){return void 0!==this.get(e)},e.prototype.set=function(e,t){var n=this.mapKeyFn(e),r=this.inner[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(r[i][0].isEqual(e))return void(r[i]=[e,t]);r.push([e,t])}else this.inner[n]=[[e,t]]},e.prototype.delete=function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(n[r][0].isEqual(e))return 1===n.length?delete this.inner[t]:n.splice(r,1),!0;return!1},e.prototype.forEach=function(e){x(this.inner,function(t,n){for(var r=0,i=n;r<i.length;r++){var s=i[r],o=s[0],a=s[1];e(o,a)}})},e.prototype.isEmpty=function(){return A(this.inner)},e}(),Un=function(){function e(){this.changes=bt(),this.documentSizes=new Bn(function(e){return e.toString()})}return e.prototype.addEntry=function(e){var t=this.assertChanges();this.changes=t.insert(e.key,e)},e.prototype.getEntry=function(e,t){var n=this,r=this.assertChanges().get(t);return r?In.resolve(r):this.getFromCache(e,t).next(function(e){return null===e?(n.documentSizes.set(t,0),null):(n.documentSizes.set(t,e.size),e.maybeDocument)})},e.prototype.apply=function(e){var t=this.applyChanges(e);return this.changes=null,t},e.prototype.assertChanges=function(){return y(null!==this.changes,"Changes have already been applied."),this.changes},e}(),qn="The remote document changelog no longer contains all changes for all local query views. It may be necessary to rebuild these views.",$n=function(){function e(e,t){this.serializer=e,this.keepDocumentChangeLog=t,this._lastProcessedDocumentChangeId=0}return Object.defineProperty(e.prototype,"lastProcessedDocumentChangeId",{get:function(){return this._lastProcessedDocumentChangeId},enumerable:!0,configurable:!0}),e.prototype.start=function(e){var t=Nn.getStore(e,hr.store);return this.synchronizeLastDocumentChangeId(t)},e.prototype.addEntries=function(e,t,n){var r=[];if(t.length>0){for(var i=Wn(e),s=xt(),o=0,a=t;o<a.length;o++){var u=a[o],c=u.key,l=u.doc;r.push(i.put(Qn(c),l)),s=s.add(c)}this.keepDocumentChangeLog&&r.push(Kn(e).put({changes:this.serializer.toDbResourcePaths(s)})),r.push(this.updateSize(e,n))}return In.waitFor(r)},e.prototype.removeEntry=function(e,t){var n=Wn(e),r=Qn(t);return n.get(r).next(function(e){return e?n.delete(r).next(function(){return Gn(e)}):In.resolve(0)})},e.prototype.getEntry=function(e,t){var n=this;return Wn(e).get(Qn(t)).next(function(e){return e?n.serializer.fromDbRemoteDocument(e):null})},e.prototype.getSizedEntry=function(e,t){var n=this;return Wn(e).get(Qn(t)).next(function(e){return e?{maybeDocument:n.serializer.fromDbRemoteDocument(e),size:Gn(e)}:null})},e.prototype.getDocumentsMatchingQuery=function(e,t){var n=this,r=Et(),i=t.path.toArray(),s=IDBKeyRange.lowerBound(i);return Wn(e).iterate({range:s},function(e,i,s){var o=n.serializer.fromDbRemoteDocument(i);t.path.isPrefixOf(o.key.path)?o instanceof he&&t.matches(o)&&(r=r.insert(o.key,o)):s.done()}).next(function(){return r})},e.prototype.getNewDocumentChanges=function(e){var t=this;y(this.keepDocumentChangeLog,"Can only call getNewDocumentChanges() when document change log is enabled");var n=xt(),r=bt(),i=IDBKeyRange.lowerBound(this._lastProcessedDocumentChangeId+1),s=!0,o=Kn(e);return o.iterate({range:i},function(e,r){if(s&&(s=!1,t._lastProcessedDocumentChangeId+1!==r.id))return t.synchronizeLastDocumentChangeId(o).next(function(){return In.reject(new w(b.DATA_LOSS,qn))});n=n.unionWith(t.serializer.fromDbResourcePaths(r.changes)),t._lastProcessedDocumentChangeId=r.id}).next(function(){var i=[];return n.forEach(function(n){i.push(t.getEntry(e,n).next(function(e){var t=e||new de(n,Ze.forDeletedDoc());r=r.insert(n,t)}))}),In.waitFor(i)}).next(function(){return r})},e.prototype.removeDocumentChangesThroughChangeId=function(e,t){var n=IDBKeyRange.upperBound(t);return Kn(e).delete(n)},e.prototype.synchronizeLastDocumentChangeId=function(e){var t=this;return this._lastProcessedDocumentChangeId=0,e.iterate({keysOnly:!0,reverse:!0},function(e,n,r){t._lastProcessedDocumentChangeId=e,r.done()})},e.prototype.newChangeBuffer=function(){return new zn(this)},e.prototype.getSize=function(e){return this.getMetadata(e).next(function(e){return e.byteSize})},e.prototype.getMetadata=function(e){return Hn(e).get(or.key).next(function(e){return y(!!e,"Missing document cache metadata"),e})},e.prototype.setMetadata=function(e,t){return Hn(e).put(or.key,t)},e.prototype.updateSize=function(e,t){var n=this;return this.getMetadata(e).next(function(r){return r.byteSize+=t,n.setMetadata(e,r)})},e}();function Hn(e){return Or.getStore(e,or.store)}var zn=function(e){function t(t){var n=e.call(this)||this;return n.documentCache=t,n}return a.__extends(t,e),t.prototype.applyChanges=function(e){var t=this,n=this.assertChanges(),r=0,i=[];return n.forEach(function(e,n){var s=t.documentCache.serializer.toDbRemoteDocument(n),o=t.documentSizes.get(e);y(void 0!==o,"Attempting to change document "+e.toString()+" without having read it first");var a=Gn(s);r+=a-o,i.push({key:e,doc:s})}),this.documentCache.addEntries(e,i,r)},t.prototype.getFromCache=function(e,t){return this.documentCache.getSizedEntry(e,t)},t}(Un);function Wn(e){return Or.getStore(e,sr.store)}function Kn(e){return Or.getStore(e,hr.store)}function Qn(e){return e.path.toArray()}function Gn(e){var t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw g("Unknown remote document type");t=e.noDocument}return JSON.stringify(t).length}var Xn=7,Yn=function(){function e(e){this.serializer=e}return e.prototype.createOrUpgrade=function(e,t,n,r){var i=this;y(n<r&&n>=0&&r<=Xn,"Unexpected schema upgrade from v"+n+" to v{toVersion}."),n<1&&r>=1&&(function(e){e.createObjectStore(Jn.store)}(e),function(e){e.createObjectStore(er.store,{keyPath:er.keyPath}),e.createObjectStore(tr.store,{keyPath:tr.keyPath,autoIncrement:!0}).createIndex(tr.userMutationsIndex,tr.userMutationsKeyPath,{unique:!0}),e.createObjectStore(nr.store)}(e),lr(e),function(e){e.createObjectStore(sr.store)}(e));var s=In.resolve();return n<3&&r>=3&&(0!==n&&(!function(e){e.deleteObjectStore(ur.store),e.deleteObjectStore(ar.store),e.deleteObjectStore(cr.store)}(e),lr(e)),s=s.next(function(){return function(e){var t=e.store(cr.store),n=new cr(0,0,Ze.MIN.toTimestamp(),0);return t.put(cr.key,n)}(t)})),n<4&&r>=4&&(0!==n&&(s=s.next(function(){return function(e,t){return t.store(tr.store).loadAll().next(function(n){e.deleteObjectStore(tr.store);var r=e.createObjectStore(tr.store,{keyPath:tr.keyPath,autoIncrement:!0});r.createIndex(tr.userMutationsIndex,tr.userMutationsKeyPath,{unique:!0});var i=t.store(tr.store),s=n.map(function(e){return i.put(e)});return In.waitFor(s)})}(e,t)})),s=s.next(function(){!function(e){e.createObjectStore(dr.store,{keyPath:dr.keyPath})}(e),function(e){e.createObjectStore(hr.store,{keyPath:"id",autoIncrement:!0})}(e)})),n<5&&r>=5&&(s=s.next(function(){return i.removeAcknowledgedMutations(t)})),n<6&&r>=6&&(s=s.next(function(){return function(e){e.createObjectStore(or.store)}(e),i.addDocumentGlobal(t)})),n<7&&r>=7&&(s=s.next(function(){return i.ensureSequenceNumbers(t)})),s},e.prototype.addDocumentGlobal=function(e){var t=0;return e.store(sr.store).iterate(function(e,n){t+=Gn(n)}).next(function(){var n=new or(t);return e.store(or.store).put(or.key,n)})},e.prototype.removeAcknowledgedMutations=function(e){var t=this,n=e.store(er.store),r=e.store(tr.store);return n.loadAll().next(function(n){return In.forEach(n,function(n){var i=IDBKeyRange.bound([n.userId,Sn],[n.userId,n.lastAcknowledgedBatchId]);return r.loadAll(tr.userMutationsIndex,i).next(function(r){return In.forEach(r,function(r){y(r.userId===n.userId,"Cannot process batch "+r.batchId+" from unexpected user");var i=t.serializer.fromDbMutationBatch(r);return gr(e,n.userId,i).next(function(){})})})})})},e.prototype.ensureSequenceNumbers=function(e){var t=e.store(ur.store),n=e.store(sr.store);return Vn(e).next(function(e){var r=[];return n.iterate(function(n,i){var s=new oe(n),o=function(e){return[0,_n(e)]}(s);r.push(t.get(o).next(function(n){return n?In.resolve():function(n){return t.put(new ur(0,_n(n),e))}(s)}))}).next(function(){return In.waitFor(r)})})},e}();var Zn=function(){return function(e,t){this.seconds=e,this.nanoseconds=t}}(),Jn=function(){function e(e,t,n){this.ownerId=e,this.allowTabSynchronization=t,this.leaseTimestampMs=n}return e.store="owner",e.key="owner",e}();var er=function(){function e(e,t,n){this.userId=e,this.lastAcknowledgedBatchId=t,this.lastStreamToken=n}return e.store="mutationQueues",e.keyPath="userId",e}(),tr=function(){function e(e,t,n,r){this.userId=e,this.batchId=t,this.localWriteTimeMs=n,this.mutations=r}return e.store="mutations",e.keyPath="batchId",e.userMutationsIndex="userMutationsIndex",e.userMutationsKeyPath=["userId","batchId"],e}();var nr=function(){function e(){}return e.prefixForUser=function(e){return[e]},e.prefixForPath=function(e,t){return[e,_n(t)]},e.key=function(e,t,n){return[e,_n(t),n]},e.store="documentMutations",e.PLACEHOLDER=new e,e}();var rr=function(){return function(e,t){this.path=e,this.readTime=t}}(),ir=function(){return function(e,t){this.path=e,this.version=t}}(),sr=function(){function e(e,t,n,r){this.unknownDocument=e,this.noDocument=t,this.document=n,this.hasCommittedMutations=r}return e.store="remoteDocuments",e}(),or=function(){function e(e){this.byteSize=e}return e.store="remoteDocumentGlobal",e.key="remoteDocumentGlobalKey",e}();var ar=function(){function e(e,t,n,r,i,s){this.targetId=e,this.canonicalId=t,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.query=s}return e.store="targets",e.keyPath="targetId",e.queryTargetsIndexName="queryTargetsIndex",e.queryTargetsKeyPath=["canonicalId","targetId"],e}(),ur=function(){function e(e,t,n){this.targetId=e,this.path=t,this.sequenceNumber=n,y(0===e==(void 0!==n),"A target-document row must either have targetId == 0 and a defined sequence number, or a non-zero targetId and no sequence number")}return e.store="targetDocuments",e.keyPath=["targetId","path"],e.documentTargetsIndex="documentTargetsIndex",e.documentTargetsKeyPath=["path","targetId"],e}(),cr=function(){function e(e,t,n,r){this.highestTargetId=e,this.highestListenSequenceNumber=t,this.lastRemoteSnapshotVersion=n,this.targetCount=r}return e.key="targetGlobalKey",e.store="targetGlobal",e}();function lr(e){e.createObjectStore(ur.store,{keyPath:ur.keyPath}).createIndex(ur.documentTargetsIndex,ur.documentTargetsKeyPath,{unique:!0}),e.createObjectStore(ar.store,{keyPath:ar.keyPath}).createIndex(ar.queryTargetsIndexName,ar.queryTargetsKeyPath,{unique:!0}),e.createObjectStore(cr.store)}var hr=function(){function e(e){this.changes=e}return e.store="remoteDocumentChanges",e.keyPath="id",e}();var dr=function(){function e(e,t,n,r,i){this.clientId=e,this.updateTimeMs=t,this.networkEnabled=n,this.inForeground=r,this.lastProcessedDocumentChangeId=i}return e.store="clientMetadata",e.keyPath="clientId",e}();var pr=[er.store,tr.store,nr.store,sr.store,ar.store,Jn.store,cr.store,ur.store].concat([dr.store,hr.store]).concat([or.store]),fr=function(){function e(e,t,n){this.userId=e,this.serializer=t,this.referenceDelegate=n,this.documentKeysByBatchId={}}return e.forUser=function(t,n,r){return y(""!==t.uid,"UserID must not be an empty string."),new e(t.isAuthenticated()?t.uid:"",n,r)},e.prototype.checkEmpty=function(e){var t=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return vr(e).iterate({index:tr.userMutationsIndex,range:n},function(e,n,r){t=!1,r.done()}).next(function(){return t})},e.prototype.acknowledgeBatch=function(e,t,n){return this.getMutationQueueMetadata(e).next(function(r){var i=t.batchId;return y(i>r.lastAcknowledgedBatchId,"Mutation batchIDs must be acknowledged in order"),r.lastAcknowledgedBatchId=i,r.lastStreamToken=yr(n),br(e).put(r)})},e.prototype.getLastStreamToken=function(e){return this.getMutationQueueMetadata(e).next(function(e){return e.lastStreamToken})},e.prototype.setLastStreamToken=function(e,t){return this.getMutationQueueMetadata(e).next(function(n){return n.lastStreamToken=yr(t),br(e).put(n)})},e.prototype.addMutationBatch=function(e,t,n){var r=this,i=_r(e),s=vr(e);return s.add({}).next(function(e){y("number"==typeof e,"Auto-generated key is not a number");var o=new Tn(e,t,n),a=r.serializer.toDbMutationBatch(r.userId,o);r.documentKeysByBatchId[e]=o.keys();for(var u=[],c=0,l=n;c<l.length;c++){var h=l[c],d=nr.key(r.userId,h.key.path,e);u.push(s.put(a)),u.push(i.put(d,nr.PLACEHOLDER))}return In.waitFor(u).next(function(){return o})})},e.prototype.lookupMutationBatch=function(e,t){var n=this;return vr(e).get(t).next(function(e){return e?(y(e.userId===n.userId,"Unexpected user '"+e.userId+"' for mutation batch "+t),n.serializer.fromDbMutationBatch(e)):null})},e.prototype.lookupMutationKeys=function(e,t){var n=this;return this.documentKeysByBatchId[t]?In.resolve(this.documentKeysByBatchId[t]):this.lookupMutationBatch(e,t).next(function(e){if(e){var r=e.keys();return n.documentKeysByBatchId[t]=r,r}return null})},e.prototype.getNextMutationBatchAfterBatchId=function(e,t){var n=this;return this.getMutationQueueMetadata(e).next(function(r){var i=Math.max(t,r.lastAcknowledgedBatchId)+1,s=IDBKeyRange.lowerBound([n.userId,i]),o=null;return vr(e).iterate({index:tr.userMutationsIndex,range:s},function(e,t,r){t.userId===n.userId&&(y(t.batchId>=i,"Should have found mutation after "+i),o=n.serializer.fromDbMutationBatch(t)),r.done()}).next(function(){return o})})},e.prototype.getAllMutationBatches=function(e){var t=this,n=IDBKeyRange.bound([this.userId,Sn],[this.userId,Number.POSITIVE_INFINITY]);return vr(e).loadAll(tr.userMutationsIndex,n).next(function(e){return e.map(function(e){return t.serializer.fromDbMutationBatch(e)})})},e.prototype.getAllMutationBatchesAffectingDocumentKey=function(e,t){var n=this,r=nr.prefixForPath(this.userId,t.path),i=IDBKeyRange.lowerBound(r),s=[];return _r(e).iterate({range:i},function(r,i,o){var a=r[0],u=r[1],c=r[2],l=En(u);if(a===n.userId&&t.path.isEqual(l))return vr(e).get(c).next(function(e){if(!e)throw g("Dangling document-mutation reference found: "+r+" which points to "+c);y(e.userId===n.userId,"Unexpected user '"+e.userId+"' for mutation batch "+c),s.push(n.serializer.fromDbMutationBatch(e))});o.done()}).next(function(){return s})},e.prototype.getAllMutationBatchesAffectingDocumentKeys=function(e,t){var n=this,r=new vt(W),i=[];return t.forEach(function(t){var s=nr.prefixForPath(n.userId,t.path),o=IDBKeyRange.lowerBound(s),a=_r(e).iterate({range:o},function(e,i,s){var o=e[0],a=e[1],u=e[2],c=En(a);o===n.userId&&t.path.isEqual(c)?r=r.add(u):s.done()});i.push(a)}),In.waitFor(i).next(function(){return n.lookupMutationBatches(e,r)})},e.prototype.getAllMutationBatchesAffectingQuery=function(e,t){var n=this;y(!t.isDocumentQuery(),"Document queries shouldn't go down this path");var r=t.path,i=r.length+1,s=nr.prefixForPath(this.userId,r),o=IDBKeyRange.lowerBound(s),a=new vt(W);return _r(e).iterate({range:o},function(e,t,s){var o=e[0],u=e[1],c=e[2],l=En(u);o===n.userId&&r.isPrefixOf(l)?l.length===i&&(a=a.add(c)):s.done()}).next(function(){return n.lookupMutationBatches(e,a)})},e.prototype.lookupMutationBatches=function(e,t){var n=this,r=[],i=[];return t.forEach(function(t){i.push(vr(e).get(t).next(function(e){if(null===e)throw g("Dangling document-mutation reference found, which points to "+t);y(e.userId===n.userId,"Unexpected user '"+e.userId+"' for mutation batch "+t),r.push(n.serializer.fromDbMutationBatch(e))}))}),In.waitFor(i).next(function(){return r})},e.prototype.removeMutationBatch=function(e,t){var n=this;return gr(e.simpleDbTransaction,this.userId,t).next(function(r){return n.removeCachedMutationKeys(t.batchId),In.forEach(r,function(t){return n.referenceDelegate.removeMutationReference(e,t)})})},e.prototype.removeCachedMutationKeys=function(e){delete this.documentKeysByBatchId[e]},e.prototype.performConsistencyCheck=function(e){var t=this;return this.checkEmpty(e).next(function(n){if(!n)return In.resolve();var r=IDBKeyRange.lowerBound(nr.prefixForUser(t.userId)),i=[];return _r(e).iterate({range:r},function(e,n,r){if(e[0]===t.userId){var s=En(e[1]);i.push(s)}else r.done()}).next(function(){y(0===i.length,"Document leak -- detected dangling mutation references when queue is empty. Dangling keys: "+i.map(function(e){return e.canonicalString()}))})})},e.prototype.containsKey=function(e,t){return mr(e,this.userId,t)},e.prototype.getMutationQueueMetadata=function(e){var t=this;return br(e).get(this.userId).next(function(e){return e||new er(t.userId,Sn,"")})},e}();function mr(e,t,n){var r=nr.prefixForPath(t,n.path),i=r[1],s=IDBKeyRange.lowerBound(r),o=!1;return _r(e).iterate({range:s,keysOnly:!0},function(e,n,r){var s=e[0],a=e[1];e[2];s===t&&a===i&&(o=!0),r.done()}).next(function(){return o})}function gr(e,t,n){var r=e.store(tr.store),i=e.store(nr.store),s=[],o=IDBKeyRange.only(n.batchId),a=0,u=r.iterate({range:o},function(e,t,n){return a++,n.delete()});s.push(u.next(function(){y(1===a,"Dangling document-mutation reference found: Missing batch "+n.batchId)}));for(var c=[],l=0,h=n.mutations;l<h.length;l++){var d=h[l],p=nr.key(t,d.key.path,n.batchId);s.push(i.delete(p)),c.push(d.key)}return In.waitFor(s).next(function(){return c})}function yr(e){return e instanceof Uint8Array?(y("YES"===process.env.USE_MOCK_PERSISTENCE,"Persisting non-string stream tokens is only supported with mock persistence."),e.toString()):e}function vr(e){return Or.getStore(e,tr.store)}function _r(e){return Or.getStore(e,nr.store)}function br(e){return Or.getStore(e,er.store)}var wr=function(){function e(e){this.remoteSerializer=e}return e.prototype.fromDbRemoteDocument=function(e){if(e.document)return this.remoteSerializer.fromDocument(e.document,!!e.hasCommittedMutations);if(e.noDocument){var t=ce.fromSegments(e.noDocument.path),n=this.fromDbTimestamp(e.noDocument.readTime);return new de(t,n,{hasCommittedMutations:!!e.hasCommittedMutations})}if(e.unknownDocument){t=ce.fromSegments(e.unknownDocument.path),n=this.fromDbTimestamp(e.unknownDocument.version);return new pe(t,n)}return g("Unexpected DbRemoteDocument")},e.prototype.toDbRemoteDocument=function(e){if(e instanceof he){var t=this.remoteSerializer.toDocument(e),n=e.hasCommittedMutations;return new sr(null,null,t,n)}if(e instanceof de){var r=e.key.path.toArray(),i=this.toDbTimestamp(e.version);n=e.hasCommittedMutations;return new sr(null,new rr(r,i),null,n)}if(e instanceof pe){r=e.key.path.toArray(),i=this.toDbTimestamp(e.version);return new sr(new ir(r,i),null,null,!0)}return g("Unexpected MaybeDocumment")},e.prototype.toDbTimestamp=function(e){var t=e.toTimestamp();return new Zn(t.seconds,t.nanoseconds)},e.prototype.fromDbTimestamp=function(e){var t=new te(e.seconds,e.nanoseconds);return Ze.fromTimestamp(t)},e.prototype.toDbMutationBatch=function(e,t){var n=this,r=t.mutations.map(function(e){return n.remoteSerializer.toMutation(e)});return new tr(e,t.batchId,t.localWriteTime.toMillis(),r)},e.prototype.fromDbMutationBatch=function(e){var t=this,n=e.mutations.map(function(e){return t.remoteSerializer.fromMutation(e)}),r=te.fromMillis(e.localWriteTimeMs);return new Tn(e.batchId,r,n)},e.prototype.toDbResourcePaths=function(e){var t=[];return e.forEach(function(e){t.push(_n(e.path))}),t},e.prototype.fromDbResourcePaths=function(e){for(var t=xt(),n=0,r=e;n<r.length;n++){var i=r[n];t=t.add(new ce(En(i)))}return t},e.prototype.fromDbTarget=function(e){var t,n=this.fromDbTimestamp(e.readTime);return t=void 0!==e.query.documents?this.remoteSerializer.fromDocumentsTarget(e.query):this.remoteSerializer.fromQueryTarget(e.query),new et(t,e.targetId,Be.Listen,e.lastListenSequenceNumber,n,e.resumeToken)},e.prototype.toDbTarget=function(e){y(Be.Listen===e.purpose,"Only queries with purpose "+Be.Listen+" may be stored, got "+e.purpose);var t,n,r=this.toDbTimestamp(e.snapshotVersion);return t=e.query.isDocumentQuery()?this.remoteSerializer.toDocumentsTarget(e.query):this.remoteSerializer.toQueryTarget(e.query),e.resumeToken instanceof Uint8Array?(y("YES"===process.env.USE_MOCK_PERSISTENCE,"Persisting non-string stream tokens is only supported with mock persistence ."),n=e.resumeToken.toString()):n=e.resumeToken,new ar(e.targetId,e.query.canonicalId(),r,n,e.sequenceNumber,t)},e}();function Er(e,t){var n=e[0],r=e[1],i=t[0],s=t[1],o=W(n,i);return 0===o?W(r,s):o}var Cr=function(){function e(e){this.maxElements=e,this.buffer=new vt(Er),this.previousIndex=0}return e.prototype.nextIndex=function(){return++this.previousIndex},e.prototype.addElement=function(e){var t=[e,this.nextIndex()];if(this.buffer.size<this.maxElements)this.buffer=this.buffer.add(t);else{var n=this.buffer.last();Er(t,n)<0&&(this.buffer=this.buffer.delete(n).add(t))}},Object.defineProperty(e.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!0,configurable:!0}),e}(),Sr=function(){function e(e){this.delegate=e}return e.prototype.calculateTargetCount=function(e,t){return this.delegate.getSequenceNumberCount(e).next(function(e){return Math.floor(t/100*e)})},e.prototype.nthSequenceNumber=function(e,t){var n=this;if(0===t)return In.resolve(hn.INVALID);var r=new Cr(t);return this.delegate.forEachTarget(e,function(e){return r.addElement(e.sequenceNumber)}).next(function(){return n.delegate.forEachOrphanedDocumentSequenceNumber(e,function(e){return r.addElement(e)})}).next(function(){return r.maxValue})},e.prototype.removeTargets=function(e,t,n){return this.delegate.removeTargets(e,t,n)},e.prototype.removeOrphanedDocuments=function(e,t){return this.delegate.removeOrphanedDocuments(e,t)},e}(),Tr=function(){return function(){}}(),xr="IndexedDbPersistence",Ar="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Dr="Another tab has exclusive access to the persistence layer. To allow shared access, make sure to invoke `enablePersistence()` with `experimentalTabSynchronization:true` in all tabs.",Ir="This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.",Nr=function(e){function t(t,n){var r=e.call(this)||this;return r.simpleDbTransaction=t,r.currentSequenceNumber=n,r}return a.__extends(t,e),t}(Tr),Or=function(){function e(t,n,r,i,s,o){if(this.persistenceKey=t,this.clientId=n,this.queue=i,this.multiClientParams=o,this._started=!1,this.isPrimary=!1,this.networkEnabled=!0,this.inForeground=!1,this.lastGarbageCollectionTime=Number.NEGATIVE_INFINITY,this.primaryStateListener=function(e){return Promise.resolve()},!e.isAvailable())throw new w(b.UNIMPLEMENTED,Ir);if(this.referenceDelegate=new Rr(this),this.dbName=t+e.MAIN_DATABASE,this.serializer=new wr(s),this.document=r.document,this.allowTabSynchronization=void 0!==o,this.queryCache=new Rn(this.referenceDelegate,this.serializer),this.remoteDocumentCache=new $n(this.serializer,this.allowTabSynchronization),!r.window||!r.window.localStorage)throw new w(b.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");this.window=r.window,this.webStorage=this.window.localStorage}return e.getStore=function(e,t){if(e instanceof Nr)return Nn.getStore(e.simpleDbTransaction,t);throw g("IndexedDbPersistence must use instances of IndexedDbTransaction")},e.createIndexedDbPersistence=function(t,n,r,i,s){return a.__awaiter(this,void 0,void 0,function(){var o;return a.__generator(this,function(a){switch(a.label){case 0:return[4,(o=new e(t,n,r,i,s)).start()];case 1:return a.sent(),[2,o]}})})},e.createMultiClientIndexedDbPersistence=function(t,n,r,i,s,o){return a.__awaiter(this,void 0,void 0,function(){var u;return a.__generator(this,function(a){switch(a.label){case 0:return[4,(u=new e(t,n,r,i,s,o)).start()];case 1:return a.sent(),[2,u]}})})},e.prototype.start=function(){var e=this;return y(!this.started,"IndexedDbPersistence double-started!"),y(null!==this.window,"Expected 'window' to be defined"),Nn.openOrCreate(this.dbName,Xn,new Yn(this.serializer)).then(function(t){e.simpleDb=t}).then(function(){return e.startRemoteDocumentCache()}).then(function(){return e.attachVisibilityHandler(),e.attachWindowUnloadHook(),e.updateClientMetadataAndTryBecomePrimary().then(function(){return e.scheduleClientMetadataAndPrimaryLeaseRefreshes()})}).then(function(){return e.simpleDb.runTransaction("readonly",[cr.store],function(t){return Vn(t).next(function(t){var n=e.multiClientParams?e.multiClientParams.sequenceNumberSyncer:void 0;e.listenSequence=new hn(t,n)})})}).then(function(){e._started=!0}).catch(function(t){return e.simpleDb&&e.simpleDb.close(),Promise.reject(t)})},e.prototype.startRemoteDocumentCache=function(){var e=this;return this.simpleDb.runTransaction("readonly",pr,function(t){return e.remoteDocumentCache.start(t)})},e.prototype.setPrimaryStateListener=function(e){var t=this;return this.primaryStateListener=function(n){return a.__awaiter(t,void 0,void 0,function(){return a.__generator(this,function(t){return this.started?[2,e(n)]:[2]})})},e(this.isPrimary)},e.prototype.setNetworkEnabled=function(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.queue.enqueueAndForget(function(){return a.__awaiter(t,void 0,void 0,function(){return a.__generator(this,function(e){switch(e.label){case 0:return this.started?[4,this.updateClientMetadataAndTryBecomePrimary()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})})}))},e.prototype.updateClientMetadataAndTryBecomePrimary=function(){var e=this;return this.simpleDb.runTransaction("readwrite",pr,function(t){return Mr(t).put(new dr(e.clientId,Date.now(),e.networkEnabled,e.inForeground,e.remoteDocumentCache.lastProcessedDocumentChangeId)).next(function(){if(e.isPrimary)return e.verifyPrimaryLease(t).next(function(t){t||(e.isPrimary=!1,e.queue.enqueueAndForget(function(){return e.primaryStateListener(!1)}))})}).next(function(){return e.canActAsPrimary(t)}).next(function(n){var r=e.isPrimary;return e.isPrimary=n,r!==e.isPrimary&&e.queue.enqueueAndForget(function(){return e.primaryStateListener(e.isPrimary)}),r&&!e.isPrimary?e.releasePrimaryLeaseIfHeld(t):e.isPrimary?e.acquireOrExtendPrimaryLease(t):void 0})})},e.prototype.verifyPrimaryLease=function(e){var t=this;return Pr(e).get(Jn.key).next(function(e){return In.resolve(t.isLocalClient(e))})},e.prototype.removeClientMetadata=function(e){return Mr(e).delete(this.clientId)},e.prototype.maybeGarbageCollectMultiClientState=function(){return a.__awaiter(this,void 0,void 0,function(){var t,n,r=this;return a.__generator(this,function(i){switch(i.label){case 0:return!this.isPrimary||this.isWithinAge(this.lastGarbageCollectionTime,18e5)?[3,2]:(this.lastGarbageCollectionTime=Date.now(),n=[],[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",function(i){var s=e.getStore(i,dr.store);return s.loadAll().next(function(e){t=r.filterActiveClients(e,18e5),n=e.filter(function(e){return-1===t.indexOf(e)})}).next(function(){return In.forEach(n,function(e){return s.delete(e.clientId)})}).next(function(){if((t=t.filter(function(e){return e.clientId!==r.clientId})).length>0){var e=t.map(function(e){return e.lastProcessedDocumentChangeId||0}),n=Math.min.apply(Math,e);return r.remoteDocumentCache.removeDocumentChangesThroughChangeId(i,n)}})})]);case 1:i.sent(),n.forEach(function(e){r.window.localStorage.removeItem(r.zombiedClientLocalStorageKey(e.clientId))}),i.label=2;case 2:return[2]}})})},e.prototype.scheduleClientMetadataAndPrimaryLeaseRefreshes=function(){var e=this;this.clientMetadataRefresher=this.queue.enqueueAfterDelay(ln.ClientMetadataRefresh,4e3,function(){return e.updateClientMetadataAndTryBecomePrimary().then(function(){return e.maybeGarbageCollectMultiClientState()}).then(function(){return e.scheduleClientMetadataAndPrimaryLeaseRefreshes()})})},e.prototype.isLocalClient=function(e){return!!e&&e.ownerId===this.clientId},e.prototype.canActAsPrimary=function(e){var t=this;return Pr(e).get(Jn.key).next(function(n){if(null!==n&&t.isWithinAge(n.leaseTimestampMs,5e3)&&!t.isClientZombied(n.ownerId)){if(t.isLocalClient(n)&&t.networkEnabled)return!0;if(!t.isLocalClient(n)){if(!n.allowTabSynchronization)throw new w(b.FAILED_PRECONDITION,Dr);return!1}}return!(!t.networkEnabled||!t.inForeground)||Mr(e).loadAll().next(function(e){return void 0===t.filterActiveClients(e,5e3).find(function(e){if(t.clientId!==e.clientId){var n=!t.networkEnabled&&e.networkEnabled,r=!t.inForeground&&e.inForeground,i=t.networkEnabled===e.networkEnabled;if(n||r&&i)return!0}return!1})})}).next(function(e){return t.isPrimary!==e&&p(xr,"Client "+(e?"is":"is not")+" eligible for a primary lease."),e})},e.prototype.shutdown=function(e){return a.__awaiter(this,void 0,void 0,function(){var t=this;return a.__generator(this,function(n){switch(n.label){case 0:return this._started=!1,this.markClientZombied(),this.clientMetadataRefresher&&this.clientMetadataRefresher.cancel(),this.detachVisibilityHandler(),this.detachWindowUnloadHook(),[4,this.simpleDb.runTransaction("readwrite",[Jn.store,dr.store],function(e){return t.releasePrimaryLeaseIfHeld(e).next(function(){return t.removeClientMetadata(e)})})];case 1:return n.sent(),this.simpleDb.close(),this.removeClientZombiedEntry(),e?[4,Nn.delete(this.dbName)]:[3,3];case 2:n.sent(),n.label=3;case 3:return[2]}})})},e.prototype.filterActiveClients=function(e,t){var n=this;return e.filter(function(e){return n.isWithinAge(e.updateTimeMs,t)&&!n.isClientZombied(e.clientId)})},e.prototype.getActiveClients=function(){var e=this;return this.simpleDb.runTransaction("readonly",[dr.store],function(t){return Mr(t).loadAll().next(function(t){return e.filterActiveClients(t,18e5).map(function(e){return e.clientId})})})},Object.defineProperty(e.prototype,"started",{get:function(){return this._started},enumerable:!0,configurable:!0}),e.prototype.getMutationQueue=function(e){return y(this.started,"Cannot initialize MutationQueue before persistence is started."),fr.forUser(e,this.serializer,this.referenceDelegate)},e.prototype.getQueryCache=function(){return y(this.started,"Cannot initialize QueryCache before persistence is started."),this.queryCache},e.prototype.getRemoteDocumentCache=function(){return y(this.started,"Cannot initialize RemoteDocumentCache before persistence is started."),this.remoteDocumentCache},e.prototype.runTransaction=function(e,t,n){var r=this;return p(xr,"Starting transaction:",e),this.simpleDb.runTransaction("readonly"===t?"readonly":"readwrite",pr,function(i){return"readwrite-primary"===t?r.verifyPrimaryLease(i).next(function(t){if(!t)throw f("Failed to obtain primary lease for action '"+e+"'."),r.isPrimary=!1,r.queue.enqueueAndForget(function(){return r.primaryStateListener(!1)}),new w(b.FAILED_PRECONDITION,Ar);return n(new Nr(i,r.listenSequence.next()))}).next(function(e){return r.acquireOrExtendPrimaryLease(i).next(function(){return e})}):r.verifyAllowTabSynchronization(i).next(function(){return n(new Nr(i,r.listenSequence.next()))})})},e.prototype.verifyAllowTabSynchronization=function(e){var t=this;return Pr(e).get(Jn.key).next(function(e){if(null!==e&&t.isWithinAge(e.leaseTimestampMs,5e3)&&!t.isClientZombied(e.ownerId)&&!t.isLocalClient(e)&&!e.allowTabSynchronization)throw new w(b.FAILED_PRECONDITION,Dr)})},e.prototype.acquireOrExtendPrimaryLease=function(e){var t=new Jn(this.clientId,this.allowTabSynchronization,Date.now());return Pr(e).put(Jn.key,t)},e.isAvailable=function(){return Nn.isAvailable()},e.buildStoragePrefix=function(e){var t=e.databaseId.projectId;return e.databaseId.isDefaultDatabase||(t+="."+e.databaseId.database),"firestore/"+e.persistenceKey+"/"+t+"/"},e.prototype.releasePrimaryLeaseIfHeld=function(e){var t=this,n=Pr(e);return n.get(Jn.key).next(function(e){return t.isLocalClient(e)?(p(xr,"Releasing primary lease."),n.delete(Jn.key)):In.resolve()})},e.prototype.isWithinAge=function(e,t){var n=Date.now();return!(e<n-t)&&(!(e>n)||(f("Detected an update time that is in the future: "+e+" > "+n),!1))},e.prototype.attachVisibilityHandler=function(){var e=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.documentVisibilityHandler=function(){e.queue.enqueueAndForget(function(){return e.inForeground="visible"===e.document.visibilityState,e.updateClientMetadataAndTryBecomePrimary()})},this.document.addEventListener("visibilitychange",this.documentVisibilityHandler),this.inForeground="visible"===this.document.visibilityState)},e.prototype.detachVisibilityHandler=function(){this.documentVisibilityHandler&&(y(null!==this.document&&"function"==typeof this.document.addEventListener,"Expected 'document.addEventListener' to be a function"),this.document.removeEventListener("visibilitychange",this.documentVisibilityHandler),this.documentVisibilityHandler=null)},e.prototype.attachWindowUnloadHook=function(){var e=this;"function"==typeof this.window.addEventListener&&(this.windowUnloadHandler=function(){e.markClientZombied(),e.queue.enqueueAndForget(function(){return e.shutdown()})},this.window.addEventListener("unload",this.windowUnloadHandler))},e.prototype.detachWindowUnloadHook=function(){this.windowUnloadHandler&&(y("function"==typeof this.window.removeEventListener,"Expected 'window.removeEventListener' to be a function"),this.window.removeEventListener("unload",this.windowUnloadHandler),this.windowUnloadHandler=null)},e.prototype.isClientZombied=function(e){try{var t=null!==this.webStorage.getItem(this.zombiedClientLocalStorageKey(e));return p(xr,"Client '"+e+"' "+(t?"is":"is not")+" zombied in LocalStorage"),t}catch(n){return f(xr,"Failed to get zombied client id.",n),!1}},e.prototype.markClientZombied=function(){try{this.webStorage.setItem(this.zombiedClientLocalStorageKey(this.clientId),String(Date.now()))}catch(e){f("Failed to set zombie client id.",e)}},e.prototype.removeClientZombiedEntry=function(){try{this.webStorage.removeItem(this.zombiedClientLocalStorageKey(this.clientId))}catch(e){}},e.prototype.zombiedClientLocalStorageKey=function(e){return"firestore_zombie_"+this.persistenceKey+"_"+e},e.MAIN_DATABASE="main",e}();function kr(e){return e.code===b.FAILED_PRECONDITION&&e.message===Ar}function Pr(e){return e.store(Jn.store)}function Mr(e){return e.store(dr.store)}var Rr=function(){function e(e){this.db=e,this.garbageCollector=new Sr(this)}return e.prototype.getSequenceNumberCount=function(e){var t=this.orphanedDocmentCount(e);return this.db.getQueryCache().getQueryCount(e).next(function(e){return t.next(function(t){return e+t})})},e.prototype.orphanedDocmentCount=function(e){var t=0;return this.forEachOrphanedDocumentSequenceNumber(e,function(e){t++}).next(function(){return t})},e.prototype.forEachTarget=function(e,t){return this.db.getQueryCache().forEachTarget(e,t)},e.prototype.forEachOrphanedDocumentSequenceNumber=function(e,t){return this.forEachOrphanedDocument(e,function(e,n){return t(n)})},e.prototype.setInMemoryPins=function(e){this.inMemoryPins=e},e.prototype.addReference=function(e,t){return Fr(e,t)},e.prototype.removeReference=function(e,t){return Fr(e,t)},e.prototype.removeTargets=function(e,t,n){return this.db.getQueryCache().removeTargets(e,t,n)},e.prototype.removeMutationReference=function(e,t){return Fr(e,t)},e.prototype.isPinned=function(e,t){return this.inMemoryPins.containsKey(t)?In.resolve(!0):function(e,t){var n=!1;return br(e).iterateSerial(function(r){return mr(e,r,t).next(function(e){return e&&(n=!0),In.resolve(!e)})}).next(function(){return n})}(e,t)},e.prototype.removeOrphanedDocuments=function(e,t){var n=this,r=0,i=0,s=[];return this.forEachOrphanedDocument(e,function(o,a){if(a<=t){var u=n.isPinned(e,o).next(function(t){if(!t)return r++,n.removeOrphanedDocument(e,o).next(function(e){i+=e})});s.push(u)}}).next(function(){return In.waitFor(s)}).next(function(){return n.db.getRemoteDocumentCache().updateSize(e,-i)}).next(function(){return r})},e.prototype.removeOrphanedDocument=function(e,t){var n,r=0,i=this.db.getRemoteDocumentCache();return In.waitFor([jn(e).delete((n=t,[0,_n(n.path)])),i.removeEntry(e,t).next(function(e){r+=e})]).next(function(){return r})},e.prototype.removeTarget=function(e,t){var n=t.copy({sequenceNumber:e.currentSequenceNumber});return this.db.getQueryCache().updateQueryData(e,n)},e.prototype.updateLimboDocument=function(e,t){return Fr(e,t)},e.prototype.forEachOrphanedDocument=function(e,t){var n,r=jn(e),i=hn.INVALID;return r.iterate({index:ur.documentTargetsIndex},function(e,r){var s=e[0],o=(e[1],r.path),a=r.sequenceNumber;0===s?(i!==hn.INVALID&&t(new ce(En(n)),i),i=a,n=o):i=hn.INVALID}).next(function(){i!==hn.INVALID&&t(new ce(En(n)),i)})},e}();function Fr(e,t){return jn(e).put(function(e,t){return new ur(0,_n(e.path),t)}(t,e.currentSequenceNumber))}var Lr=function(){function e(e,t){this.remoteDocumentCache=e,this.mutationQueue=t}return e.prototype.getDocument=function(e,t){var n=this;return this.mutationQueue.getAllMutationBatchesAffectingDocumentKey(e,t).next(function(r){return n.getDocumentInternal(e,t,r)})},e.prototype.getDocumentInternal=function(e,t,n){return this.remoteDocumentCache.getEntry(e,t).next(function(e){for(var r=0,i=n;r<i.length;r++){e=i[r].applyToLocalView(t,e)}return e})},e.prototype.getDocuments=function(e,t){var n=this;return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(function(r){var i=[],s=bt();return t.forEach(function(t){i.push(n.getDocumentInternal(e,t,r).next(function(e){e||(e=new de(t,Ze.forDeletedDoc())),s=s.insert(t,e)}))}),In.waitFor(i).next(function(){return s})})},e.prototype.getDocumentsMatchingQuery=function(e,t){return ce.isDocumentKey(t.path)?this.getDocumentsMatchingDocumentQuery(e,t.path):this.getDocumentsMatchingCollectionQuery(e,t)},e.prototype.getDocumentsMatchingDocumentQuery=function(e,t){return this.getDocument(e,new ce(t)).next(function(e){var t=Et();return e instanceof he&&(t=t.insert(e.key,e)),t})},e.prototype.getDocumentsMatchingCollectionQuery=function(e,t){var n,r=this;return this.remoteDocumentCache.getDocumentsMatchingQuery(e,t).next(function(i){return n=i,r.mutationQueue.getAllMutationBatchesAffectingQuery(e,t)}).next(function(e){for(var r=0,i=e;r<i.length;r++)for(var s=i[r],o=0,a=s.mutations;o<a.length;o++){var u=a[o],c=u.key;if(t.path.isImmediateParentOf(c.path)){var l=n.get(c),h=u.applyToLocalView(l,l,s.localWriteTime);n=h instanceof he?n.insert(c,h):n.remove(c)}}}).next(function(){return n.forEach(function(e,r){t.matches(r)||(n=n.remove(e))}),n})},e}(),Vr=function(){function e(){this.refsByKey=new vt(jr.compareByKey),this.refsByTarget=new vt(jr.compareByTargetId)}return e.prototype.isEmpty=function(){return this.refsByKey.isEmpty()},e.prototype.addReference=function(e,t){var n=new jr(e,t);this.refsByKey=this.refsByKey.add(n),this.refsByTarget=this.refsByTarget.add(n)},e.prototype.addReferences=function(e,t){var n=this;e.forEach(function(e){return n.addReference(e,t)})},e.prototype.removeReference=function(e,t){this.removeRef(new jr(e,t))},e.prototype.removeReferences=function(e,t){var n=this;e.forEach(function(e){return n.removeReference(e,t)})},e.prototype.removeReferencesForId=function(e){var t=this,n=ce.EMPTY,r=new jr(n,e),i=new jr(n,e+1),s=[];return this.refsByTarget.forEachInRange([r,i],function(e){t.removeRef(e),s.push(e.key)}),s},e.prototype.removeAllReferences=function(){var e=this;this.refsByKey.forEach(function(t){return e.removeRef(t)})},e.prototype.removeRef=function(e){this.refsByKey=this.refsByKey.delete(e),this.refsByTarget=this.refsByTarget.delete(e)},e.prototype.referencesForId=function(e){var t=ce.EMPTY,n=new jr(t,e),r=new jr(t,e+1),i=xt();return this.refsByTarget.forEachInRange([n,r],function(e){i=i.add(e.key)}),i},e.prototype.containsKey=function(e){var t=new jr(e,0),n=this.refsByKey.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)},e}(),jr=function(){function e(e,t){this.key=e,this.targetOrBatchId=t}return e.compareByKey=function(e,t){return ce.comparator(e.key,t.key)||W(e.targetOrBatchId,t.targetOrBatchId)},e.compareByTargetId=function(e,t){return W(e.targetOrBatchId,t.targetOrBatchId)||ce.comparator(e.key,t.key)},e}(),Br=function(){function e(e,t){this.persistence=e,this.localViewReferences=new Vr,this.queryDataByTarget={},y(e.started,"LocalStore was passed an unstarted persistence implementation"),this.persistence.referenceDelegate.setInMemoryPins(this.localViewReferences),this.mutationQueue=e.getMutationQueue(t),this.remoteDocuments=e.getRemoteDocumentCache(),this.queryCache=e.getQueryCache(),this.localDocuments=new Lr(this.remoteDocuments,this.mutationQueue)}return e.prototype.handleUserChange=function(e){var t=this;return this.persistence.runTransaction("Handle user change","readonly",function(n){var r;return t.mutationQueue.getAllMutationBatches(n).next(function(i){return r=i,t.mutationQueue=t.persistence.getMutationQueue(e),t.localDocuments=new Lr(t.remoteDocuments,t.mutationQueue),t.mutationQueue.getAllMutationBatches(n)}).next(function(e){for(var i=[],s=[],o=xt(),a=0,u=r;a<u.length;a++){var c=u[a];i.push(c.batchId);for(var l=0,h=c.mutations;l<h.length;l++){var d=h[l];o=o.add(d.key)}}for(var p=0,f=e;p<f.length;p++){c=f[p];s.push(c.batchId);for(var m=0,g=c.mutations;m<g.length;m++){d=g[m];o=o.add(d.key)}}return t.localDocuments.getDocuments(n,o).next(function(e){return{affectedDocuments:e,removedBatchIds:i,addedBatchIds:s}})})})},e.prototype.localWrite=function(e){var t=this;return this.persistence.runTransaction("Locally write mutations","readwrite",function(n){var r,i=te.now();return t.mutationQueue.addMutationBatch(n,i,e).next(function(e){var i=(r=e).keys();return t.localDocuments.getDocuments(n,i)}).next(function(e){return{batchId:r.batchId,changes:e}})})},e.prototype.lookupMutationDocuments=function(e){var t=this;return this.persistence.runTransaction("Lookup mutation documents","readonly",function(n){return t.mutationQueue.lookupMutationKeys(n,e).next(function(e){return e?t.localDocuments.getDocuments(n,e):In.resolve(null)})})},e.prototype.acknowledgeBatch=function(e){var t=this;return this.persistence.runTransaction("Acknowledge batch","readwrite-primary",function(n){var r=e.batch.keys(),i=t.remoteDocuments.newChangeBuffer();return t.mutationQueue.acknowledgeBatch(n,e.batch,e.streamToken).next(function(){return t.applyWriteToRemoteDocuments(n,e,i)}).next(function(){return i.apply(n)}).next(function(){return t.mutationQueue.performConsistencyCheck(n)}).next(function(){return t.localDocuments.getDocuments(n,r)})})},e.prototype.rejectBatch=function(e){var t=this;return this.persistence.runTransaction("Reject batch","readwrite-primary",function(n){var r;return t.mutationQueue.lookupMutationBatch(n,e).next(function(e){return y(null!==e,"Attempt to reject nonexistent batch!"),r=e.keys(),t.mutationQueue.removeMutationBatch(n,e)}).next(function(){return t.mutationQueue.performConsistencyCheck(n)}).next(function(){return t.localDocuments.getDocuments(n,r)})})},e.prototype.getLastStreamToken=function(){var e=this;return this.persistence.runTransaction("Get last stream token","readonly",function(t){return e.mutationQueue.getLastStreamToken(t)})},e.prototype.setLastStreamToken=function(e){var t=this;return this.persistence.runTransaction("Set last stream token","readwrite-primary",function(n){return t.mutationQueue.setLastStreamToken(n,e)})},e.prototype.getLastRemoteSnapshotVersion=function(){var e=this;return this.persistence.runTransaction("Get last remote snapshot version","readonly",function(t){return e.queryCache.getLastRemoteSnapshotVersion(t)})},e.prototype.applyRemoteEvent=function(t){var n=this,r=this.remoteDocuments.newChangeBuffer();return this.persistence.runTransaction("Apply remote event","readwrite-primary",function(i){var s=[],o=xt();T(t.targetChanges,function(r,a){var u=n.queryDataByTarget[r];if(u){a.addedDocuments.forEach(function(e){o=o.add(e)}),a.modifiedDocuments.forEach(function(e){o=o.add(e)}),s.push(n.queryCache.removeMatchingKeys(i,a.removedDocuments,r).next(function(){return n.queryCache.addMatchingKeys(i,a.addedDocuments,r)}));var c=a.resumeToken;if(c.length>0){var l=u;u=u.copy({resumeToken:c,snapshotVersion:t.snapshotVersion}),n.queryDataByTarget[r]=u,e.shouldPersistQueryData(l,u,a)&&s.push(n.queryCache.updateQueryData(i,u))}}});var a=xt();t.documentUpdates.forEach(function(e,u){a=a.add(e),s.push(r.getEntry(i,e).next(function(t){null==t||u.version.isEqual(Ze.MIN)||o.has(u.key)&&!t.hasPendingWrites||u.version.compareTo(t.version)>=0?r.addEntry(u):p("LocalStore","Ignoring outdated watch update for ",e,". Current version:",t.version," Watch version:",u.version)})),t.resolvedLimboDocuments.has(e)&&s.push(n.persistence.referenceDelegate.updateLimboDocument(i,e))});var u=t.snapshotVersion;if(!u.isEqual(Ze.MIN)){var c=n.queryCache.getLastRemoteSnapshotVersion(i).next(function(e){return y(u.compareTo(e)>=0,"Watch stream reverted to previous snapshot?? "+u+" < "+e),n.queryCache.setTargetsMetadata(i,i.currentSequenceNumber,u)});s.push(c)}return In.waitFor(s).next(function(){return r.apply(i)}).next(function(){return n.localDocuments.getDocuments(i,a)})})},e.shouldPersistQueryData=function(e,t,n){return 0!==t.resumeToken.length&&(0===e.resumeToken.length||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=this.RESUME_TOKEN_MAX_AGE_MICROS||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0))},e.prototype.notifyLocalViewChanges=function(e){var t=this;return this.persistence.runTransaction("notifyLocalViewChanges","readwrite",function(n){return In.forEach(e,function(e){return t.localViewReferences.addReferences(e.addedKeys,e.targetId),t.localViewReferences.removeReferences(e.removedKeys,e.targetId),In.forEach(e.removedKeys,function(e){return t.persistence.referenceDelegate.removeReference(n,e)})})})},e.prototype.nextMutationBatch=function(e){var t=this;return this.persistence.runTransaction("Get next mutation batch","readonly",function(n){return void 0===e&&(e=Sn),t.mutationQueue.getNextMutationBatchAfterBatchId(n,e)})},e.prototype.readDocument=function(e){var t=this;return this.persistence.runTransaction("read document","readonly",function(n){return t.localDocuments.getDocument(n,e)})},e.prototype.allocateQuery=function(e){var t=this;return this.persistence.runTransaction("Allocate query","readwrite",function(n){var r;return t.queryCache.getQueryData(n,e).next(function(i){return i?(r=i,In.resolve()):t.queryCache.allocateTargetId(n).next(function(i){return r=new et(e,i,Be.Listen,n.currentSequenceNumber),t.queryCache.addQueryData(n,r)})}).next(function(){return y(!t.queryDataByTarget[r.targetId],"Tried to allocate an already allocated query: "+e),t.queryDataByTarget[r.targetId]=r,r})})},e.prototype.releaseQuery=function(e,t){var n=this,r=t?"readwrite":"readwrite-primary";return this.persistence.runTransaction("Release query",r,function(r){return n.queryCache.getQueryData(r,e).next(function(i){y(null!=i,"Tried to release nonexistent query: "+e);var s=i.targetId,o=n.queryDataByTarget[s],a=n.localViewReferences.removeReferencesForId(s);return delete n.queryDataByTarget[s],t?In.resolve():In.forEach(a,function(e){return n.persistence.referenceDelegate.removeReference(r,e)}).next(function(){return n.persistence.referenceDelegate.removeTarget(r,o)})})})},e.prototype.executeQuery=function(e){var t=this;return this.persistence.runTransaction("Execute query","readonly",function(n){return t.localDocuments.getDocumentsMatchingQuery(n,e)})},e.prototype.remoteDocumentKeys=function(e){var t=this;return this.persistence.runTransaction("Remote document keys","readonly",function(n){return t.queryCache.getMatchingKeysForTargetId(n,e)})},e.prototype.getActiveClients=function(){return this.persistence.getActiveClients()},e.prototype.removeCachedMutationBatchMetadata=function(e){this.mutationQueue.removeCachedMutationKeys(e)},e.prototype.setNetworkEnabled=function(e){this.persistence.setNetworkEnabled(e)},e.prototype.applyWriteToRemoteDocuments=function(e,t,n){var r=this,i=t.batch,s=i.keys(),o=In.resolve();return s.forEach(function(r){o=o.next(function(){return n.getEntry(e,r)}).next(function(e){var s=e,o=t.docVersions.get(r);y(null!==o,"ackVersions should contain every doc in the write."),(!s||s.version.compareTo(o)<0)&&((s=i.applyToRemoteDocument(r,s,t))?n.addEntry(s):y(!e,"Mutation batch "+i+" applied to document "+e+" resulted in null"))})}),o.next(function(){return r.mutationQueue.removeMutationBatch(e,i)})},e.prototype.getQueryForTarget=function(e){var t=this;return this.queryDataByTarget[e]?Promise.resolve(this.queryDataByTarget[e].query):this.persistence.runTransaction("Get query data","readonly",function(n){return t.queryCache.getQueryDataForTarget(n,e).next(function(e){return e?e.query:null})})},e.prototype.getNewDocumentChanges=function(){var e=this;return this.persistence.runTransaction("Get new document changes","readonly",function(t){return e.remoteDocuments.getNewDocumentChanges(t)})},e.RESUME_TOKEN_MAX_AGE_MICROS=3e8,e}(),Ur=function(){function e(e){this.referenceDelegate=e,this.mutationQueue=[],this.nextBatchId=1,this.highestAcknowledgedBatchId=Sn,this.lastStreamToken=_(),this.batchesByDocumentKey=new vt(jr.compareByKey)}return e.prototype.checkEmpty=function(e){return In.resolve(0===this.mutationQueue.length)},e.prototype.acknowledgeBatch=function(e,t,n){var r=t.batchId;y(r>this.highestAcknowledgedBatchId,"Mutation batchIDs must be acknowledged in order");var i=this.indexOfExistingBatchId(r,"acknowledged");y(0===i,"Can only acknowledge the first batch in the mutation queue");var s=this.mutationQueue[i];return y(r===s.batchId,"Queue ordering failure: expected batch "+r+", got batch "+s.batchId),this.highestAcknowledgedBatchId=r,this.lastStreamToken=n,In.resolve()},e.prototype.getLastStreamToken=function(e){return In.resolve(this.lastStreamToken)},e.prototype.setLastStreamToken=function(e,t){return this.lastStreamToken=t,In.resolve()},e.prototype.addMutationBatch=function(e,t,n){y(0!==n.length,"Mutation batches should not be empty");var r=this.nextBatchId;(this.nextBatchId++,this.mutationQueue.length>0)&&y(this.mutationQueue[this.mutationQueue.length-1].batchId<r,"Mutation batchIDs must be monotonically increasing order");var i=new Tn(r,t,n);this.mutationQueue.push(i);for(var s=0,o=n;s<o.length;s++){var a=o[s];this.batchesByDocumentKey=this.batchesByDocumentKey.add(new jr(a.key,r))}return In.resolve(i)},e.prototype.lookupMutationBatch=function(e,t){return In.resolve(this.findMutationBatch(t))},e.prototype.lookupMutationKeys=function(e,t){var n=this.findMutationBatch(t);return y(null!=n,"Failed to find local mutation batch."),In.resolve(n.keys())},e.prototype.getNextMutationBatchAfterBatchId=function(e,t){var n=Math.max(t,this.highestAcknowledgedBatchId)+1,r=this.indexOfBatchId(n),i=r<0?0:r;return In.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)},e.prototype.getAllMutationBatches=function(e){return In.resolve(this.mutationQueue.slice())},e.prototype.getAllMutationBatchesAffectingDocumentKey=function(e,t){var n=this,r=new jr(t,0),i=new jr(t,Number.POSITIVE_INFINITY),s=[];return this.batchesByDocumentKey.forEachInRange([r,i],function(e){y(t.isEqual(e.key),"Should only iterate over a single key's batches");var r=n.findMutationBatch(e.targetOrBatchId);y(null!==r,"Batches in the index must exist in the main table"),s.push(r)}),In.resolve(s)},e.prototype.getAllMutationBatchesAffectingDocumentKeys=function(e,t){var n=this,r=new vt(W);return t.forEach(function(e){var t=new jr(e,0),i=new jr(e,Number.POSITIVE_INFINITY);n.batchesByDocumentKey.forEachInRange([t,i],function(t){y(e.isEqual(t.key),"For each key, should only iterate over a single key's batches"),r=r.add(t.targetOrBatchId)})}),In.resolve(this.findMutationBatches(r))},e.prototype.getAllMutationBatchesAffectingQuery=function(e,t){var n=t.path,r=n.length+1,i=n;ce.isDocumentKey(i)||(i=i.child(""));var s=new jr(new ce(i),0),o=new vt(W);return this.batchesByDocumentKey.forEachWhile(function(e){var t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.targetOrBatchId)),!0)},s),In.resolve(this.findMutationBatches(o))},e.prototype.findMutationBatches=function(e){var t=this,n=[];return e.forEach(function(e){var r=t.findMutationBatch(e);null!==r&&n.push(r)}),n},e.prototype.removeMutationBatch=function(e,t){var n=this;y(0===this.indexOfExistingBatchId(t.batchId,"removed"),"Can only remove the first entry of the mutation queue"),this.mutationQueue.shift();var r=this.batchesByDocumentKey;return In.forEach(t.mutations,function(i){var s=new jr(i.key,t.batchId);return r=r.delete(s),n.referenceDelegate.removeMutationReference(e,i.key)}).next(function(){n.batchesByDocumentKey=r})},e.prototype.removeCachedMutationKeys=function(e){},e.prototype.containsKey=function(e,t){var n=new jr(t,0),r=this.batchesByDocumentKey.firstAfterOrEqual(n);return In.resolve(t.isEqual(r&&r.key))},e.prototype.performConsistencyCheck=function(e){return 0===this.mutationQueue.length&&y(this.batchesByDocumentKey.isEmpty(),"Document leak -- detected dangling mutation references when queue is empty."),In.resolve()},e.prototype.indexOfExistingBatchId=function(e,t){var n=this.indexOfBatchId(e);return y(n>=0&&n<this.mutationQueue.length,"Batches must exist to be "+t),n},e.prototype.indexOfBatchId=function(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId},e.prototype.findMutationBatch=function(e){var t=this.indexOfBatchId(e);if(t<0||t>=this.mutationQueue.length)return null;var n=this.mutationQueue[t];return y(n.batchId===e,"If found batch must match"),n},e}(),qr=function(){function e(e){this.persistence=e,this.queries=new Bn(function(e){return e.canonicalId()}),this.lastRemoteSnapshotVersion=Ze.MIN,this.highestTargetId=0,this.highestSequenceNumber=0,this.references=new Vr,this.targetCount=0,this.targetIdGenerator=Dn.forQueryCache()}return e.prototype.getTargetCount=function(e){return In.resolve(this.targetCount)},e.prototype.forEachTarget=function(e,t){return this.queries.forEach(function(e,n){return t(n)}),In.resolve()},e.prototype.getLastRemoteSnapshotVersion=function(e){return In.resolve(this.lastRemoteSnapshotVersion)},e.prototype.getHighestSequenceNumber=function(e){return In.resolve(this.highestSequenceNumber)},e.prototype.allocateTargetId=function(e){var t=this.targetIdGenerator.after(this.highestTargetId);return this.highestTargetId=t,In.resolve(t)},e.prototype.setTargetsMetadata=function(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.highestSequenceNumber&&(this.highestSequenceNumber=t),In.resolve()},e.prototype.saveQueryData=function(e){this.queries.set(e.query,e);var t=e.targetId;t>this.highestTargetId&&(this.highestTargetId=t),e.sequenceNumber>this.highestSequenceNumber&&(this.highestSequenceNumber=e.sequenceNumber)},e.prototype.addQueryData=function(e,t){return y(!this.queries.has(t.query),"Adding a query that already exists"),this.saveQueryData(t),this.targetCount+=1,In.resolve()},e.prototype.updateQueryData=function(e,t){return y(this.queries.has(t.query),"Updating a non-existent query"),this.saveQueryData(t),In.resolve()},e.prototype.removeQueryData=function(e,t){return y(this.targetCount>0,"Removing a target from an empty cache"),y(this.queries.has(t.query),"Removing a non-existent target from the cache"),this.queries.delete(t.query),this.references.removeReferencesForId(t.targetId),this.targetCount-=1,In.resolve()},e.prototype.removeTargets=function(e,t,n){var r=this,i=0,s=[];return this.queries.forEach(function(o,a){a.sequenceNumber<=t&&!n[a.targetId]&&(r.queries.delete(o),s.push(r.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),In.waitFor(s).next(function(){return i})},e.prototype.getQueryCount=function(e){return In.resolve(this.targetCount)},e.prototype.getQueryData=function(e,t){var n=this.queries.get(t)||null;return In.resolve(n)},e.prototype.getQueryDataForTarget=function(e,t){return g("Not yet implemented.")},e.prototype.addMatchingKeys=function(e,t,n){this.references.addReferences(t,n);var r=this.persistence.referenceDelegate,i=[];return r&&t.forEach(function(t){i.push(r.addReference(e,t))}),In.waitFor(i)},e.prototype.removeMatchingKeys=function(e,t,n){this.references.removeReferences(t,n);var r=this.persistence.referenceDelegate,i=[];return r&&t.forEach(function(t){i.push(r.removeReference(e,t))}),In.waitFor(i)},e.prototype.removeMatchingKeysForTargetId=function(e,t){return this.references.removeReferencesForId(t),In.resolve()},e.prototype.getMatchingKeysForTargetId=function(e,t){var n=this.references.referencesForId(t);return In.resolve(n)},e.prototype.containsKey=function(e,t){return In.resolve(this.references.containsKey(t))},e}();var $r,Hr=function(){function e(e){this.sizer=e,this.docs=new fe(ce.comparator),this.newDocumentChanges=xt(),this.size=0}return e.prototype.addEntries=function(e,t,n){for(var r=0,i=t;r<i.length;r++){var s=i[r],o=s.maybeDocument.key;this.docs=this.docs.insert(o,s),this.newDocumentChanges=this.newDocumentChanges.add(o)}return this.size+=n,In.resolve()},e.prototype.removeEntry=function(e,t){var n=this.docs.get(t);return n?(this.docs=this.docs.remove(t),this.size-=n.size,In.resolve(n.size)):In.resolve(0)},e.prototype.getEntry=function(e,t){var n=this.docs.get(t);return In.resolve(n?n.maybeDocument:null)},e.prototype.getSizedEntry=function(e,t){return In.resolve(this.docs.get(t))},e.prototype.getDocumentsMatchingQuery=function(e,t){for(var n=Et(),r=new ce(t.path.child("")),i=this.docs.getIteratorFrom(r);i.hasNext();){var s=i.getNext(),o=s.key,a=s.value.maybeDocument;if(!t.path.isPrefixOf(o.path))break;a instanceof he&&t.matches(a)&&(n=n.insert(a.key,a))}return In.resolve(n)},e.prototype.forEachDocumentKey=function(e,t){return In.forEach(this.docs,function(e){return t(e)})},e.prototype.getNewDocumentChanges=function(e){var t=this,n=bt();return this.newDocumentChanges.forEach(function(e){var r=t.docs.get(e),i=r?r.maybeDocument:new de(e,Ze.forDeletedDoc());n=n.insert(e,i)}),this.newDocumentChanges=xt(),In.resolve(n)},e.prototype.newChangeBuffer=function(){return new zr(this.sizer,this)},e.prototype.getSize=function(e){return In.resolve(this.size)},e}(),zr=function(e){function t(t,n){var r=e.call(this)||this;return r.sizer=t,r.documentCache=n,r}return a.__extends(t,e),t.prototype.applyChanges=function(e){var t=this,n=this.assertChanges(),r=0,i=[];return n.forEach(function(e,n){var s=t.documentSizes.get(e);y(void 0!==s,"Attempting to change document "+e.toString()+" without having read it first");var o=t.sizer(n);r+=o-s,i.push({maybeDocument:n,size:o})}),this.documentCache.addEntries(e,i,r)},t.prototype.getFromCache=function(e,t){return this.documentCache.getSizedEntry(e,t)},t}(Un),Wr=function(){function e(e,t,n){var r=this;this.clientId=e,this.mutationQueues={},this.listenSequence=new hn(0),this._started=!1,this._started=!0,this.referenceDelegate=t?new Qr(this):new Gr(this,new wr(n)),this.queryCache=new qr(this);this.remoteDocumentCache=new Hr(function(e){return r.referenceDelegate.documentSize(e)})}return e.createLruPersistence=function(t,n){return new e(t,!1,n)},e.createEagerPersistence=function(t,n){return new e(t,!0,n)},e.prototype.shutdown=function(e){return this._started=!1,Promise.resolve()},Object.defineProperty(e.prototype,"started",{get:function(){return this._started},enumerable:!0,configurable:!0}),e.prototype.getActiveClients=function(){return a.__awaiter(this,void 0,void 0,function(){return a.__generator(this,function(e){return[2,[this.clientId]]})})},e.prototype.setPrimaryStateListener=function(e){return e(!0)},e.prototype.setNetworkEnabled=function(e){},e.prototype.getMutationQueue=function(e){var t=this.mutationQueues[e.toKey()];return t||(t=new Ur(this.referenceDelegate),this.mutationQueues[e.toKey()]=t),t},e.prototype.getQueryCache=function(){return this.queryCache},e.prototype.getRemoteDocumentCache=function(){return this.remoteDocumentCache},e.prototype.runTransaction=function(e,t,n){var r=this;p("MemoryPersistence","Starting transaction:",e);var i=new Kr(this.listenSequence.next());return this.referenceDelegate.onTransactionStarted(),n(i).next(function(e){return r.referenceDelegate.onTransactionCommitted(i).next(function(){return e})}).toPromise()},e.prototype.mutationQueuesContainKey=function(e,t){return In.or((n=this.mutationQueues,r=[],x(n,function(e,t){return r.push(t)}),r).map(function(n){return function(){return n.containsKey(e,t)}}));var n,r},e}(),Kr=function(){return function(e){this.currentSequenceNumber=e}}(),Qr=function(){function e(e){this.persistence=e}return e.prototype.setInMemoryPins=function(e){this.inMemoryPins=e},e.prototype.addReference=function(e,t){return this.orphanedDocuments.delete(t),In.resolve()},e.prototype.removeReference=function(e,t){return this.orphanedDocuments.add(t),In.resolve()},e.prototype.removeMutationReference=function(e,t){return this.orphanedDocuments.add(t),In.resolve()},e.prototype.removeTarget=function(e,t){var n=this,r=this.persistence.getQueryCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(function(e){e.forEach(function(e){return n.orphanedDocuments.add(e)})}).next(function(){return r.removeQueryData(e,t)})},e.prototype.onTransactionStarted=function(){this.orphanedDocuments=new Set},e.prototype.onTransactionCommitted=function(e){var t=this,n=this.persistence.getRemoteDocumentCache();return In.forEach(this.orphanedDocuments,function(r){return t.isReferenced(e,r).next(function(t){return t?In.resolve():n.removeEntry(e,r).next(function(){})})})},e.prototype.updateLimboDocument=function(e,t){var n=this;return this.isReferenced(e,t).next(function(e){e?n.orphanedDocuments.delete(t):n.orphanedDocuments.add(t)})},e.prototype.documentSize=function(e){return 0},e.prototype.isReferenced=function(e,t){var n=this;return In.or([function(){return n.persistence.getQueryCache().containsKey(e,t)},function(){return n.persistence.mutationQueuesContainKey(e,t)},function(){return In.resolve(n.inMemoryPins.containsKey(t))}])},e}(),Gr=function(){function e(e,t){this.persistence=e,this.serializer=t,this.orphanedSequenceNumbers=new Bn(function(e){return _n(e.path)}),this.garbageCollector=new Sr(this)}return e.prototype.onTransactionStarted=function(){},e.prototype.onTransactionCommitted=function(e){return In.resolve()},e.prototype.forEachTarget=function(e,t){return this.persistence.getQueryCache().forEachTarget(e,t)},e.prototype.getSequenceNumberCount=function(e){var t=this.orphanedDocumentCount(e);return this.persistence.getQueryCache().getTargetCount(e).next(function(e){return t.next(function(t){return e+t})})},e.prototype.orphanedDocumentCount=function(e){var t=0;return this.forEachOrphanedDocumentSequenceNumber(e,function(e){t++}).next(function(){return t})},e.prototype.forEachOrphanedDocumentSequenceNumber=function(e,t){var n=this;return In.forEach(this.orphanedSequenceNumbers,function(r,i){return n.isPinned(e,r,i).next(function(e){return e?In.resolve():t(i)})})},e.prototype.setInMemoryPins=function(e){this.inMemoryPins=e},e.prototype.removeTargets=function(e,t,n){return this.persistence.getQueryCache().removeTargets(e,t,n)},e.prototype.removeOrphanedDocuments=function(e,t){var n=this,r=0,i=this.persistence.getRemoteDocumentCache();return i.forEachDocumentKey(e,function(s){return n.isPinned(e,s,t).next(function(t){return t?In.resolve():(r++,i.removeEntry(e,s).next())})}).next(function(){return r})},e.prototype.removeMutationReference=function(e,t){return this.orphanedSequenceNumbers.set(t,e.currentSequenceNumber),In.resolve()},e.prototype.removeTarget=function(e,t){var n=t.copy({sequenceNumber:e.currentSequenceNumber});return this.persistence.getQueryCache().updateQueryData(e,n)},e.prototype.addReference=function(e,t){return this.orphanedSequenceNumbers.set(t,e.currentSequenceNumber),In.resolve()},e.prototype.removeReference=function(e,t){return this.orphanedSequenceNumbers.set(t,e.currentSequenceNumber),In.resolve()},e.prototype.updateLimboDocument=function(e,t){return this.orphanedSequenceNumbers.set(t,e.currentSequenceNumber),In.resolve()},e.prototype.documentSize=function(e){var t,n=this.serializer.toDbRemoteDocument(e);if(n.document)t=n.document;else if(n.unknownDocument)t=n.unknownDocument;else{if(!n.noDocument)throw g("Unknown remote document type");t=n.noDocument}return JSON.stringify(t).length},e.prototype.isPinned=function(e,t,n){var r=this;return In.or([function(){return r.persistence.mutationQueuesContainKey(e,t)},function(){return In.resolve(r.inMemoryPins.containsKey(t))},function(){return r.persistence.getQueryCache().containsKey(e,t)},function(){var e=r.orphanedSequenceNumbers.get(t);return In.resolve(void 0!==e&&e>n)}])},e}(),Xr=function(){function e(e,t,n,r,i){this.queue=e,this.timerId=t,this.initialDelayMs=n,this.backoffFactor=r,this.maxDelayMs=i,this.timerPromise=null,this.lastAttemptTime=Date.now(),this.reset()}return e.prototype.reset=function(){this.currentBaseMs=0},e.prototype.resetToMax=function(){this.currentBaseMs=this.maxDelayMs},e.prototype.backoffAndRun=function(e){var t=this;this.cancel();var n=Math.floor(this.currentBaseMs+this.jitterDelayMs()),r=Math.max(0,Date.now()-this.lastAttemptTime),i=Math.max(0,n-r);this.currentBaseMs>0&&p("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.currentBaseMs+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.timerPromise=this.queue.enqueueAfterDelay(this.timerId,i,function(){return t.lastAttemptTime=Date.now(),e()}),this.currentBaseMs*=this.backoffFactor,this.currentBaseMs<this.initialDelayMs&&(this.currentBaseMs=this.initialDelayMs),this.currentBaseMs>this.maxDelayMs&&(this.currentBaseMs=this.maxDelayMs)},e.prototype.cancel=function(){null!==this.timerPromise&&(this.timerPromise.cancel(),this.timerPromise=null)},e.prototype.jitterDelayMs=function(){return(Math.random()-.5)*this.currentBaseMs},e}();!function(e){e[e.Initial=0]="Initial",e[e.Starting=1]="Starting",e[e.Open=2]="Open",e[e.Error=3]="Error",e[e.Backoff=4]="Backoff"}($r||($r={}));var Yr,Zr,Jr=1e3,ei=6e4,ti=1.5,ni=function(){function e(e,t,n,r,i,s){this.queue=e,this.idleTimerId=n,this.connection=r,this.credentialsProvider=i,this.listener=s,this.state=$r.Initial,this.closeCount=0,this.idleTimer=null,this.stream=null,this.backoff=new Xr(e,t,Jr,ti,ei)}return e.prototype.isStarted=function(){return this.state===$r.Starting||this.state===$r.Open||this.state===$r.Backoff},e.prototype.isOpen=function(){return this.state===$r.Open},e.prototype.start=function(){this.state!==$r.Error?(y(this.state===$r.Initial,"Already started"),this.auth()):this.performBackoff()},e.prototype.stop=function(){return a.__awaiter(this,void 0,void 0,function(){return a.__generator(this,function(e){switch(e.label){case 0:return this.isStarted()?[4,this.close($r.Initial)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})})},e.prototype.inhibitBackoff=function(){y(!this.isStarted(),"Can only inhibit backoff in a stopped state"),this.state=$r.Initial,this.backoff.reset()},e.prototype.markIdle=function(){var e=this;this.isOpen()&&null===this.idleTimer&&(this.idleTimer=this.queue.enqueueAfterDelay(this.idleTimerId,6e4,function(){return e.handleIdleCloseTimer()}))},e.prototype.sendRequest=function(e){this.cancelIdleCheck(),this.stream.send(e)},e.prototype.handleIdleCloseTimer=function(){return a.__awaiter(this,void 0,void 0,function(){return a.__generator(this,function(e){return this.isOpen()?[2,this.close($r.Initial)]:[2]})})},e.prototype.cancelIdleCheck=function(){this.idleTimer&&(this.idleTimer.cancel(),this.idleTimer=null)},e.prototype.close=function(e,t){return a.__awaiter(this,void 0,void 0,function(){return a.__generator(this,function(n){switch(n.label){case 0:return y(this.isStarted(),"Only started streams should be closed."),y(e===$r.Error||Ve(t),"Can't provide an error when not in an error state."),this.cancelIdleCheck(),this.backoff.cancel(),this.closeCount++,e!==$r.Error?this.backoff.reset():t&&t.code===b.RESOURCE_EXHAUSTED?(f(t.toString()),f("Using maximum backoff delay to prevent overloading the backend."),this.backoff.resetToMax()):t&&t.code===b.UNAUTHENTICATED&&this.credentialsProvider.invalidateToken(),null!==this.stream&&(this.tearDown(),this.stream.close(),this.stream=null),this.state=e,[4,this.listener.onClose(t)];case 1:return n.sent(),[2]}})})},e.prototype.tearDown=function(){},e.prototype.auth=function(){var e=this;y(this.state===$r.Initial,"Must be in initial state to auth"),this.state=$r.Starting;var t=this.getCloseGuardedDispatcher(this.closeCount),n=this.closeCount;this.credentialsProvider.getToken().then(function(t){e.closeCount===n&&e.startStream(t)},function(n){t(function(){var t=new w(b.UNKNOWN,"Fetching auth token failed: "+n.message);return e.handleStreamClose(t)})})},e.prototype.startStream=function(e){var t=this;y(this.state===$r.Starting,"Trying to start stream in a non-starting state");var n=this.getCloseGuardedDispatcher(this.closeCount);this.stream=this.startRpc(e),this.stream.onOpen(function(){n(function(){return y(t.state===$r.Starting,"Expected stream to be in state Starting, but was "+t.state),t.state=$r.Open,t.listener.onOpen()})}),this.stream.onClose(function(e){n(function(){return t.handleStreamClose(e)})}),this.stream.onMessage(function(e){n(function(){return t.onMessage(e)})})},e.prototype.performBackoff=function(){var e=this;y(this.state===$r.Error,"Should only perform backoff when in Error state"),this.state=$r.Backoff,this.backoff.backoffAndRun(function(){return a.__awaiter(e,void 0,void 0,function(){return a.__generator(this,function(e){return y(this.state===$r.Backoff,"Backoff elapsed but state is now: "+this.state),this.state=$r.Initial,this.start(),y(this.isStarted(),"PersistentStream should have started"),[2]})})})},e.prototype.handleStreamClose=function(e){return y(this.isStarted(),"Can't handle server close on non-started stream"),p("PersistentStream","close with error: "+e),this.stream=null,this.close($r.Error,e)},e.prototype.getCloseGuardedDispatcher=function(e){var t=this;return function(n){t.queue.enqueueAndForget(function(){return t.closeCount===e?n():(p("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())})}},e}(),ri=function(e){function t(t,n,r,i,s){var o=e.call(this,t,ln.ListenStreamConnectionBackoff,ln.ListenStreamIdle,n,r,s)||this;return o.serializer=i,o}return a.__extends(t,e),t.prototype.startRpc=function(e){return this.connection.openStream("Listen",e)},t.prototype.onMessage=function(e){this.backoff.reset();var t=this.serializer.fromWatchChange(e),n=this.serializer.versionFromListenResponse(e);return this.listener.onWatchChange(t,n)},t.prototype.watch=function(e){var t={};t.database=this.serializer.encodedDatabaseId,t.addTarget=this.serializer.toTarget(e);var n=this.serializer.toListenRequestLabels(e);n&&(t.labels=n),this.sendRequest(t)},t.prototype.unwatch=function(e){var t={};t.database=this.serializer.encodedDatabaseId,t.removeTarget=e,this.sendRequest(t)},t}(ni),ii=function(e){function t(t,n,r,i,s){var o=e.call(this,t,ln.WriteStreamConnectionBackoff,ln.WriteStreamIdle,n,r,s)||this;return o.serializer=i,o.handshakeComplete_=!1,o}return a.__extends(t,e),Object.defineProperty(t.prototype,"handshakeComplete",{get:function(){return this.handshakeComplete_},enumerable:!0,configurable:!0}),t.prototype.start=function(){this.handshakeComplete_=!1,e.prototype.start.call(this)},t.prototype.tearDown=function(){this.handshakeComplete_&&this.writeMutations([])},t.prototype.startRpc=function(e){return this.connection.openStream("Write",e)},t.prototype.onMessage=function(e){if(y(!!e.streamToken,"Got a write response without a stream token"),this.lastStreamToken=e.streamToken,this.handshakeComplete_){this.backoff.reset();var t=this.serializer.fromWriteResults(e.writeResults,e.commitTime),n=this.serializer.fromVersion(e.commitTime);return this.listener.onMutationResult(n,t)}return y(!e.writeResults||0===e.writeResults.length,"Got mutation results for handshake"),this.handshakeComplete_=!0,this.listener.onHandshakeComplete()},t.prototype.writeHandshake=function(){y(this.isOpen(),"Writing handshake requires an opened stream"),y(!this.handshakeComplete_,"Handshake already completed");var e={};e.database=this.serializer.encodedDatabaseId,this.sendRequest(e)},t.prototype.writeMutations=function(e){var t=this;y(this.isOpen(),"Writing mutations requires an opened stream"),y(this.handshakeComplete_,"Handshake must be complete before writing mutations"),y(this.lastStreamToken.length>0,"Trying to write mutation without a token");var n={streamToken:this.lastStreamToken,writes:e.map(function(e){return t.serializer.toMutation(e)})};this.sendRequest(n)},t}(ni),si=function(){function e(e,t,n,r){this.queue=e,this.connection=t,this.credentials=n,this.serializer=r}return e.prototype.newPersistentWriteStream=function(e){return new ii(this.queue,this.connection,this.credentials,this.serializer,e)},e.prototype.newPersistentWatchStream=function(e){return new ri(this.queue,this.connection,this.credentials,this.serializer,e)},e.prototype.commit=function(e){var t=this,n={database:this.serializer.encodedDatabaseId,writes:e.map(function(e){return t.serializer.toMutation(e)})};return this.invokeRPC("Commit",n).then(function(e){return t.serializer.fromWriteResults(e.writeResults,e.commitTime)})},e.prototype.lookup=function(e){var t=this,n={database:this.serializer.encodedDatabaseId,documents:e.map(function(e){return t.serializer.toName(e)})};return this.invokeStreamingRPC("BatchGetDocuments",n).then(function(n){var r=bt();n.forEach(function(e){var n=t.serializer.fromMaybeDocument(e);r=r.insert(n.key,n)});var i=[];return e.forEach(function(e){var t=r.get(e);y(!!t,"Missing entity in write response for "+e),i.push(t)}),i})},e.prototype.invokeRPC=function(e,t){var n=this;return this.credentials.getToken().then(function(r){return n.connection.invokeRPC(e,t,r)}).catch(function(e){throw e.code===b.UNAUTHENTICATED&&n.credentials.invalidateToken(),e})},e.prototype.invokeStreamingRPC=function(e,t){var n=this;return this.credentials.getToken().then(function(r){return n.connection.invokeStreamingRPC(e,t,r)}).catch(function(e){throw e.code===b.UNAUTHENTICATED&&n.credentials.invalidateToken(),e})},e}(),oi=function(){function e(e){this.datastore=e,this.readVersions=St(),this.mutations=[],this.committed=!1}return e.prototype.recordVersion=function(e){var t;if(e instanceof he)t=e.version;else{if(!(e instanceof de))throw g("Document in a transaction was a "+e.constructor.name);t=Ze.forDeletedDoc()}var n=this.readVersions.get(e.key);if(null!==n){if(!t.isEqual(n))throw new w(b.ABORTED,"Document version changed between two reads.")}else this.readVersions=this.readVersions.insert(e.key,t)},e.prototype.lookup=function(e){var t=this;return this.committed?Promise.reject("Transaction has already completed."):this.mutations.length>0?Promise.reject("Transactions lookups are invalid after writes."):this.datastore.lookup(e).then(function(e){return e.forEach(function(e){e instanceof de||e instanceof he?t.recordVersion(e):g("Document in a transaction was a "+e.constructor.name)}),e})},e.prototype.write=function(e){if(this.committed)throw new w(b.FAILED_PRECONDITION,"Transaction has already completed.");this.mutations=this.mutations.concat(e)},e.prototype.precondition=function(e){var t=this.readVersions.get(e);return t?it.updateTime(t):it.NONE},e.prototype.preconditionForUpdate=function(e){var t=this.readVersions.get(e);if(t&&t.isEqual(Ze.forDeletedDoc()))throw new w(b.FAILED_PRECONDITION,"Can't update a document that doesn't exist.");return t?it.updateTime(t):it.exists(!0)},e.prototype.set=function(e,t){this.write(t.toMutations(e,this.precondition(e)))},e.prototype.update=function(e,t){this.write(t.toMutations(e,this.preconditionForUpdate(e)))},e.prototype.delete=function(e){this.write([new ct(e,this.precondition(e))]),this.readVersions=this.readVersions.insert(e,Ze.forDeletedDoc())},e.prototype.commit=function(){var e=this,t=this.readVersions;return this.mutations.forEach(function(e){t=t.remove(e.key)}),t.isEmpty()?this.datastore.commit(this.mutations).then(function(){e.committed=!0}):Promise.reject(Error("Every document read in a transaction must also be written."))},e}();!function(e){e[e.Unknown=0]="Unknown",e[e.Online=1]="Online",e[e.Offline=2]="Offline"}(Yr||(Yr={})),function(e){e[e.RemoteStore=0]="RemoteStore",e[e.SharedClientState=1]="SharedClientState"}(Zr||(Zr={}));var ai=function(){function e(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state=Yr.Unknown,this.watchStreamFailures=0,this.onlineStateTimer=null,this.shouldWarnClientIsOffline=!0}return e.prototype.handleWatchStreamStart=function(){var e=this;0===this.watchStreamFailures&&(this.setAndBroadcast(Yr.Unknown),y(null===this.onlineStateTimer,"onlineStateTimer shouldn't be started yet"),this.onlineStateTimer=this.asyncQueue.enqueueAfterDelay(ln.OnlineStateTimeout,1e4,function(){return e.onlineStateTimer=null,y(e.state===Yr.Unknown,"Timer should be canceled if we transitioned to a different state."),e.logClientOfflineWarningIfNecessary("Backend didn't respond within 10 seconds."),e.setAndBroadcast(Yr.Offline),Promise.resolve()}))},e.prototype.handleWatchStreamFailure=function(e){this.state===Yr.Online?(this.setAndBroadcast(Yr.Unknown),y(0===this.watchStreamFailures,"watchStreamFailures must be 0"),y(null===this.onlineStateTimer,"onlineStateTimer must be null")):(this.watchStreamFailures++,this.watchStreamFailures>=1&&(this.clearOnlineStateTimer(),this.logClientOfflineWarningIfNecessary("Connection failed 1 times. Most recent error: "+e.toString()),this.setAndBroadcast(Yr.Offline)))},e.prototype.set=function(e){this.clearOnlineStateTimer(),this.watchStreamFailures=0,e===Yr.Online&&(this.shouldWarnClientIsOffline=!1),this.setAndBroadcast(e)},e.prototype.setAndBroadcast=function(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))},e.prototype.logClientOfflineWarningIfNecessary=function(e){var t="Could not reach Cloud Firestore backend. "+e+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.shouldWarnClientIsOffline?(f(t),this.shouldWarnClientIsOffline=!1):p("OnlineStateTracker",t)},e.prototype.clearOnlineStateTimer=function(){null!==this.onlineStateTimer&&(this.onlineStateTimer.cancel(),this.onlineStateTimer=null)},e}(),ui=function(){function e(e,t,n,r){this.localStore=e,this.datastore=t,this.writePipeline=[],this.listenTargets={},this.watchChangeAggregator=null,this.networkEnabled=!1,this.isPrimary=!1,this.onlineStateTracker=new ai(n,r),this.watchStream=this.datastore.newPersistentWatchStream({onOpen:this.onWatchStreamOpen.bind(this),onClose:this.onWatchStreamClose.bind(this),onWatchChange:this.onWatchStreamChange.bind(this)}),this.writeStream=this.datastore.newPersistentWriteStream({onOpen:this.onWriteStreamOpen.bind(this),onClose:this.onWriteStreamClose.bind(this),onHandshakeComplete:this.onWriteHandshakeComplete.bind(this),onMutationResult:this.onMutationResult.bind(this)})}return e.prototype.start=function(){return this.enableNetwork()},e.prototype.enableNetwork=function(){return a.__awaiter(this,void 0,void 0,function(){var e;return a.__generator(this,function(t){switch(t.label){case 0:return this.networkEnabled=!0,this.canUseNetwork()?(e=this.writeStream,[4,this.localStore.getLastStreamToken()]):[3,3];case 1:return e.lastStreamToken=t.sent(),this.shouldStartWatchStream()?this.startWatchStream():this.onlineStateTracker.set(Yr.Unknown),[4,this.fillWritePipeline()];case 2:t.sent(),t.label=3;case 3:return[2]}})})},e.prototype.disableNetwork=function(){return a.__awaiter(this,void 0,void 0,function(){return a.__generator(this,function(e){switch(e.label){case 0:return this.networkEnabled=!1,[4,this.disableNetworkInternal()];case 1:return e.sent(),this.onlineStateTracker.set(Yr.Offline),[2]}})})},e.prototype.disableNetworkInternal=function(){return a.__awaiter(this,void 0,void 0,function(){return a.__generator(this,function(e){switch(e.label){case 0:return[4,this.writeStream.stop()];case 1:return e.sent(),[4,this.watchStream.stop()];case 2:return e.sent(),this.writePipeline.length>0&&(p("RemoteStore","Stopping write stream with "+this.writePipeline.length+" pending writes"),this.writePipeline=[]),this.cleanUpWatchStreamState(),[2]}})})},e.prototype.shutdown=function(){return a.__awaiter(this,void 0,void 0,function(){return a.__generator(this,function(e){switch(e.label){case 0:return p("RemoteStore","RemoteStore shutting down."),this.networkEnabled=!1,[4,this.disableNetworkInternal()];case 1:return e.sent(),this.onlineStateTracker.set(Yr.Unknown),[2]}})})},e.prototype.listen=function(e){y(!C(this.listenTargets,e.targetId),"listen called with duplicate targetId!"),this.listenTargets[e.targetId]=e,this.shouldStartWatchStream()?this.startWatchStream():this.watchStream.isOpen()&&this.sendWatchRequest(e)},e.prototype.unlisten=function(e){y(C(this.listenTargets,e),"unlisten called without assigned target ID!"),delete this.listenTargets[e],this.watchStream.isOpen()&&this.sendUnwatchRequest(e),A(this.listenTargets)&&(this.watchStream.isOpen()?this.watchStream.markIdle():this.canUseNetwork()&&this.onlineStateTracker.set(Yr.Unknown))},e.prototype.getQueryDataForTarget=function(e){return this.listenTargets[e]||null},e.prototype.getRemoteKeysForTarget=function(e){return this.syncEngine.getRemoteKeysForTarget(e)},e.prototype.sendWatchRequest=function(e){this.watchChangeAggregator.recordPendingTargetRequest(e.targetId),this.watchStream.watch(e)},e.prototype.sendUnwatchRequest=function(e){this.watchChangeAggregator.recordPendingTargetRequest(e),this.watchStream.unwatch(e)},e.prototype.startWatchStream=function(){y(this.shouldStartWatchStream(),"startWatchStream() called when shouldStartWatchStream() is false."),this.watchChangeAggregator=new Ut(this),this.watchStream.start(),this.onlineStateTracker.handleWatchStreamStart()},e.prototype.shouldStartWatchStream=function(){return this.canUseNetwork()&&!this.watchStream.isStarted()&&!A(this.listenTargets)},e.prototype.canUseNetwork=function(){return this.isPrimary&&this.networkEnabled},e.prototype.cleanUpWatchStreamState=function(){this.watchChangeAggregator=null},e.prototype.onWatchStreamOpen=function(){return a.__awaiter(this,void 0,void 0,function(){var e=this;return a.__generator(this,function(t){return T(this.listenTargets,function(t,n){e.sendWatchRequest(n)}),[2]})})},e.prototype.onWatchStreamClose=function(e){return a.__awaiter(this,void 0,void 0,function(){return a.__generator(this,function(t){return void 0===e&&y(!this.shouldStartWatchStream(),"Watch stream was stopped gracefully while still needed."),this.cleanUpWatchStreamState(),this.shouldStartWatchStream()?(this.onlineStateTracker.handleWatchStreamFailure(e),this.startWatchStream()):this.onlineStateTracker.set(Yr.Unknown),[2]})})},e.prototype.onWatchStreamChange=function(e,t){return a.__awaiter(this,void 0,void 0,function(){var n;return a.__generator(this,function(r){switch(r.label){case 0:return this.onlineStateTracker.set(Yr.Online),e instanceof jt&&e.state===kt.Removed&&e.cause?[2,this.handleTargetError(e)]:(e instanceof Lt?this.watchChangeAggregator.handleDocumentChange(e):e instanceof Vt?this.watchChangeAggregator.handleExistenceFilter(e):(y(e instanceof jt,"Expected watchChange to be an instance of WatchTargetChange"),this.watchChangeAggregator.handleTargetChange(e)),t.isEqual(Ze.MIN)?[3,3]:[4,this.localStore.getLastRemoteSnapshotVersion()]);case 1:return n=r.sent(),t.compareTo(n)>=0?[4,this.raiseWatchSnapshot(t)]:[3,3];case 2:r.sent(),r.label=3;case 3:return[2]}})})},e.prototype.raiseWatchSnapshot=function(e){var t=this;y(!e.isEqual(Ze.MIN),"Can't raise event for unknown SnapshotVersion");var n=this.watchChangeAggregator.createRemoteEvent(e);return T(n.targetChanges,function(n,r){if(r.resumeToken.length>0){var i=t.listenTargets[n];i&&(t.listenTargets[n]=i.copy({resumeToken:r.resumeToken,snapshotVersion:e}))}}),n.targetMismatches.forEach(function(e){var n=t.listenTargets[e];if(n){t.listenTargets[e]=n.copy({resumeToken:_()}),t.sendUnwatchRequest(e);var r=new et(n.query,e,Be.ExistenceFilterMismatch,n.sequenceNumber);t.sendWatchRequest(r)}}),this.syncEngine.applyRemoteEvent(n)},e.prototype.handleTargetError=function(e){var t=this;y(!!e.cause,"Handling target error without a cause");var n=e.cause,r=Promise.resolve();return e.targetIds.forEach(function(e){r=r.then(function(){return a.__awaiter(t,void 0,void 0,function(){return a.__generator(this,function(t){return C(this.listenTargets,e)?(delete this.listenTargets[e],this.watchChangeAggregator.removeTarget(e),[2,this.syncEngine.rejectListen(e,n)]):[2]})})})}),r},e.prototype.fillWritePipeline=function(){return a.__awaiter(this,void 0,void 0,function(){var e,t;return a.__generator(this,function(n){switch(n.label){case 0:return this.canAddToWritePipeline()?(e=this.writePipeline.length>0?this.writePipeline[this.writePipeline.length-1].batchId:Sn,[4,this.localStore.nextMutationBatch(e)]):[3,4];case 1:return null!==(t=n.sent())?[3,2]:(0===this.writePipeline.length&&this.writeStream.markIdle(),[3,4]);case 2:return this.addToWritePipeline(t),[4,this.fillWritePipeline()];case 3:n.sent(),n.label=4;case 4:return this.shouldStartWriteStream()&&this.startWriteStream(),[2]}})})},e.prototype.canAddToWritePipeline=function(){return this.canUseNetwork()&&this.writePipeline.length<10},e.prototype.outstandingWrites=function(){return this.writePipeline.length},e.prototype.addToWritePipeline=function(e){y(this.canAddToWritePipeline(),"addToWritePipeline called when pipeline is full"),this.writePipeline.push(e),this.writeStream.isOpen()&&this.writeStream.handshakeComplete&&this.writeStream.writeMutations(e.mutations)},e.prototype.shouldStartWriteStream=function(){return this.canUseNetwork()&&!this.writeStream.isStarted()&&this.writePipeline.length>0},e.prototype.startWriteStream=function(){y(this.shouldStartWriteStream(),"startWriteStream() called when shouldStartWriteStream() is false."),this.writeStream.start()},e.prototype.onWriteStreamOpen=function(){return a.__awaiter(this,void 0,void 0,function(){return a.__generator(this,function(e){return this.writeStream.writeHandshake(),[2]})})},e.prototype.onWriteHandshakeComplete=function(){var e=this;return this.localStore.setLastStreamToken(this.writeStream.lastStreamToken).then(function(){for(var t=0,n=e.writePipeline;t<n.length;t++){var r=n[t];e.writeStream.writeMutations(r.mutations)}}).catch(function(t){return e.ignoreIfPrimaryLeaseLoss(t)})},e.prototype.ignoreIfPrimaryLeaseLoss=function(e){if(!kr(e))throw e;p("RemoteStore","Unexpectedly lost primary lease")},e.prototype.onMutationResult=function(e,t){var n=this;y(this.writePipeline.length>0,"Got result for empty write pipeline");var r=this.writePipeline.shift(),i=xn.from(r,e,t,this.writeStream.lastStreamToken);return this.syncEngine.applySuccessfulWrite(i).then(function(){return n.fillWritePipeline()})},e.prototype.onWriteStreamClose=function(e){return a.__awaiter(this,void 0,void 0,function(){var t=this;return a.__generator(this,function(n){return void 0===e&&y(!this.shouldStartWriteStream(),"Write stream was stopped gracefully while still needed."),e&&this.writePipeline.length>0?(void 0,[2,(this.writeStream.handshakeComplete?this.handleWriteError(e):this.handleHandshakeError(e)).then(function(){t.shouldStartWriteStream()&&t.startWriteStream()})]):[2]})})},e.prototype.handleHandshakeError=function(e){return a.__awaiter(this,void 0,void 0,function(){var t=this;return a.__generator(this,function(n){return gt(e.code)||e.code===b.ABORTED?(p("RemoteStore","RemoteStore error before completed handshake; resetting stream token: ",this.writeStream.lastStreamToken),this.writeStream.lastStreamToken=_(),[2,this.localStore.setLastStreamToken(_()).catch(function(e){return t.ignoreIfPrimaryLeaseLoss(e)})]):[2]})})},e.prototype.handleWriteError=function(e){return a.__awaiter(this,void 0,void 0,function(){var t,n=this;return a.__generator(this,function(r){return gt(e.code)?(t=this.writePipeline.shift(),this.writeStream.inhibitBackoff(),[2,this.syncEngine.rejectFailedWrite(t.batchId,e).then(function(){return n.fillWritePipeline()})]):[2]})})},e.prototype.createTransaction=function(){return new oi(this.datastore)},e.prototype.handleCredentialChange=function(){return a.__awaiter(this,void 0,void 0,function(){return a.__generator(this,function(e){switch(e.label){case 0:return this.canUseNetwork()?(p("RemoteStore","RemoteStore restarting streams for new credential"),this.networkEnabled=!1,[4,this.disableNetworkInternal()]):[3,3];case 1:return e.sent(),this.onlineStateTracker.set(Yr.Unknown),[4,this.enableNetwork()];case 2:e.sent(),e.label=3;case 3:return[2]}})})},e.prototype.applyPrimaryState=function(e){return a.__awaiter(this,void 0,void 0,function(){return a.__generator(this,function(t){switch(t.label){case 0:return this.isPrimary=e,e&&this.networkEnabled?[4,this.enableNetwork()]:[3,2];case 1:return t.sent(),[3,4];case 2:return e?[3,4]:[4,this.disableNetworkInternal()];case 3:t.sent(),this.onlineStateTracker.set(Yr.Unknown),t.label=4;case 4:return[2]}})})},e}(),ci=function(){return function(){this.listeners=[]}}(),li=function(){function e(e){this.syncEngine=e,this.queries=new Bn(function(e){return e.canonicalId()}),this.onlineState=Yr.Unknown,this.syncEngine.subscribe(this)}return e.prototype.listen=function(e){var t=e.query,n=!1,r=this.queries.get(t);return r||(n=!0,r=new ci,this.queries.set(t,r)),r.listeners.push(e),e.applyOnlineStateChange(this.onlineState),r.viewSnap&&e.onViewSnapshot(r.viewSnap),n?this.syncEngine.listen(t).then(function(e){return r.targetId=e,e}):Promise.resolve(r.targetId)},e.prototype.unlisten=function(e){return a.__awaiter(this,void 0,void 0,function(){var t,n,r,i;return a.__generator(this,function(s){return t=e.query,n=!1,(r=this.queries.get(t))&&(i=r.listeners.indexOf(e))>=0&&(r.listeners.splice(i,1),n=0===r.listeners.length),n?(this.queries.delete(t),[2,this.syncEngine.unlisten(t)]):[2]})})},e.prototype.onWatchChange=function(e){for(var t=0,n=e;t<n.length;t++){var r=n[t],i=r.query,s=this.queries.get(i);if(s){for(var o=0,a=s.listeners;o<a.length;o++){a[o].onViewSnapshot(r)}s.viewSnap=r}}},e.prototype.onWatchError=function(e,t){var n=this.queries.get(e);if(n)for(var r=0,i=n.listeners;r<i.length;r++){i[r].onError(t)}this.queries.delete(e)},e.prototype.onOnlineStateChange=function(e){this.onlineState=e,this.queries.forEach(function(t,n){for(var r=0,i=n.listeners;r<i.length;r++){i[r].applyOnlineStateChange(e)}})},e}(),hi=function(){function e(e,t,n){this.query=e,this.queryObserver=t,this.raisedInitialEvent=!1,this.onlineState=Yr.Unknown,this.options=n||{}}return e.prototype.onViewSnapshot=function(e){if(y(e.docChanges.length>0||e.syncStateChanged,"We got a new snapshot with no changes?"),!this.options.includeMetadataChanges){for(var t=[],n=0,r=e.docChanges;n<r.length;n++){var i=r[n];i.type!==It.Metadata&&t.push(i)}e=new Mt(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}this.raisedInitialEvent?this.shouldRaiseEvent(e)&&this.queryObserver.next(e):this.shouldRaiseInitialEvent(e,this.onlineState)&&this.raiseInitialEvent(e),this.snap=e},e.prototype.onError=function(e){this.queryObserver.error(e)},e.prototype.applyOnlineStateChange=function(e){this.onlineState=e,this.snap&&!this.raisedInitialEvent&&this.shouldRaiseInitialEvent(this.snap,e)&&this.raiseInitialEvent(this.snap)},e.prototype.shouldRaiseInitialEvent=function(e,t){if(y(!this.raisedInitialEvent,"Determining whether to raise first event but already had first event"),!e.fromCache)return!0;var n=t!==Yr.Offline;return this.options.waitForSyncWhenOnline&&n?(y(e.fromCache,"Waiting for sync, but snapshot is not from cache"),!1):!e.docs.isEmpty()||t===Yr.Offline},e.prototype.shouldRaiseEvent=function(e){if(e.docChanges.length>0)return!0;var t=this.snap&&this.snap.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges},e.prototype.raiseInitialEvent=function(e){y(!this.raisedInitialEvent,"Trying to raise initial events for second time"),e=Mt.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.raisedInitialEvent=!0,this.queryObserver.next(e)},e}(),di=function(){function e(e,t,n){this.targetId=e,this.addedKeys=t,this.removedKeys=n}return e.fromSnapshot=function(t,n){for(var r=xt(),i=xt(),s=0,o=n.docChanges;s<o.length;s++){var a=o[s];switch(a.type){case It.Added:r=r.add(a.doc.key);break;case It.Removed:i=i.add(a.doc.key)}}return new e(t,r,i)},e}(),pi=function(){return function(e){this.key=e}}(),fi=function(){return function(e){this.key=e}}(),mi=function(){function e(e,t){this.query=e,this._syncedDocuments=t,this.syncState=null,this.current=!1,this.limboDocuments=xt(),this.mutatedKeys=xt(),this.documentSet=new Ot(e.docComparator.bind(e))}return Object.defineProperty(e.prototype,"syncedDocuments",{get:function(){return this._syncedDocuments},enumerable:!0,configurable:!0}),e.prototype.computeDocChanges=function(e,t){var n=this,r=t?t.changeSet:new Pt,i=t?t.documentSet:this.documentSet,s=t?t.mutatedKeys:this.mutatedKeys,o=i,a=!1,u=this.query.hasLimit()&&i.size===this.query.limit?i.last():null;if(e.inorderTraversal(function(e,t){var c=i.get(e),l=t instanceof he?t:null;l&&(y(e.isEqual(l.key),"Mismatching keys found in document changes: "+e+" != "+l.key),l=n.query.matches(l)?l:null);var h=!!c&&n.mutatedKeys.has(c.key),d=!!l&&(l.hasLocalMutations||n.mutatedKeys.has(l.key)&&l.hasCommittedMutations),p=!1;c&&l?c.data.isEqual(l.data)?h!==d&&(r.track({type:It.Metadata,doc:l}),p=!0):n.shouldWaitForSyncedDocument(c,l)||(r.track({type:It.Modified,doc:l}),p=!0,u&&n.query.docComparator(l,u)>0&&(a=!0)):!c&&l?(r.track({type:It.Added,doc:l}),p=!0):c&&!l&&(r.track({type:It.Removed,doc:c}),p=!0,u&&(a=!0));p&&(l?(o=o.add(l),s=d?s.add(e):s.delete(e)):(o=o.delete(e),s=s.delete(e)))}),this.query.hasLimit())for(;o.size>this.query.limit;){var c=o.last();o=o.delete(c.key),s=s.delete(c.key),r.track({type:It.Removed,doc:c})}return y(!a||!t,"View was refilled using docs that themselves needed refilling."),{documentSet:o,changeSet:r,needsRefill:a,mutatedKeys:s}},e.prototype.shouldWaitForSyncedDocument=function(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations},e.prototype.applyChanges=function(e,t,n){var r=this;y(!e.needsRefill,"Cannot apply changes that need a refill");var i=this.documentSet;this.documentSet=e.documentSet,this.mutatedKeys=e.mutatedKeys;var s=e.changeSet.getChanges();s.sort(function(e,t){return function(e,t){var n=function(e){switch(e){case It.Added:return 1;case It.Modified:case It.Metadata:return 2;case It.Removed:return 0;default:return g("Unknown ChangeType: "+e)}};return n(e)-n(t)}(e.type,t.type)||r.query.docComparator(e.doc,t.doc)}),this.applyTargetChange(n);var o=t?this.updateLimboDocuments():[],a=0===this.limboDocuments.size&&this.current?Nt.Synced:Nt.Local,u=a!==this.syncState;return this.syncState=a,0!==s.length||u?{snapshot:new Mt(this.query,e.documentSet,i,s,e.mutatedKeys,a===Nt.Local,u,!1),limboChanges:o}:{limboChanges:o}},e.prototype.applyOnlineStateChange=function(e){return this.current&&e===Yr.Offline?(this.current=!1,this.applyChanges({documentSet:this.documentSet,changeSet:new Pt,mutatedKeys:this.mutatedKeys,needsRefill:!1},!1)):{limboChanges:[]}},e.prototype.shouldBeInLimbo=function(e){return!this._syncedDocuments.has(e)&&(!!this.documentSet.has(e)&&!this.documentSet.get(e).hasLocalMutations)},e.prototype.applyTargetChange=function(e){var t=this;e&&(e.addedDocuments.forEach(function(e){return t._syncedDocuments=t._syncedDocuments.add(e)}),e.modifiedDocuments.forEach(function(e){return y(t._syncedDocuments.has(e),"Modified document "+e+" not found in view.")}),e.removedDocuments.forEach(function(e){return t._syncedDocuments=t._syncedDocuments.delete(e)}),this.current=e.current)},e.prototype.updateLimboDocuments=function(){var e=this;if(!this.current)return[];var t=this.limboDocuments;this.limboDocuments=xt(),this.documentSet.forEach(function(t){e.shouldBeInLimbo(t.key)&&(e.limboDocuments=e.limboDocuments.add(t.key))});var n=[];return t.forEach(function(t){e.limboDocuments.has(t)||n.push(new fi(t))}),this.limboDocuments.forEach(function(e){t.has(e)||n.push(new pi(e))}),n},e.prototype.synchronizeWithPersistedState=function(e,t){this._syncedDocuments=t,this.limboDocuments=xt();var n=this.computeDocChanges(e);return this.applyChanges(n,!0)},e.prototype.computeInitialSnapshot=function(){return Mt.fromInitialDocuments(this.query,this.documentSet,this.mutatedKeys,this.syncState===Nt.Local)},e}();var gi=function(){return function(e,t,n){this.query=e,this.targetId=t,this.view=n}}(),yi=function(){return function(e){this.key=e}}(),vi=function(){function e(e,t,n,r){this.localStore=e,this.remoteStore=t,this.sharedClientState=n,this.currentUser=r,this.syncEngineListener=null,this.queryViewsByQuery=new Bn(function(e){return e.canonicalId()}),this.queryViewsByTarget={},this.limboTargetsByKey=new fe(ce.comparator),this.limboResolutionsByTarget={},this.limboDocumentRefs=new Vr,this.mutationUserCallbacks={},this.limboTargetIdGenerator=Dn.forSyncEngine(),this.isPrimary=void 0,this.onlineState=Yr.Unknown}return Object.defineProperty(e.prototype,"isPrimaryClient",{get:function(){return!0===this.isPrimary},enumerable:!0,configurable:!0}),e.prototype.subscribe=function(e){y(null!==e,"SyncEngine listener cannot be null"),y(null===this.syncEngineListener,"SyncEngine already has a subscriber."),this.syncEngineListener=e},e.prototype.listen=function(e){return a.__awaiter(this,void 0,void 0,function(){var t,n,r,i,s;return a.__generator(this,function(o){switch(o.label){case 0:return this.assertSubscribed("listen()"),(r=this.queryViewsByQuery.get(e))?(t=r.targetId,this.sharedClientState.addLocalQueryTarget(t),n=r.view.computeInitialSnapshot(),[3,4]):[3,1];case 1:return[4,this.localStore.allocateQuery(e)];case 2:return i=o.sent(),s=this.sharedClientState.addLocalQueryTarget(i.targetId),t=i.targetId,[4,this.initializeViewAndComputeSnapshot(i,"current"===s)];case 3:n=o.sent(),this.isPrimary&&this.remoteStore.listen(i),o.label=4;case 4:return this.syncEngineListener.onWatchChange([n]),[2,t]}})})},e.prototype.initializeViewAndComputeSnapshot=function(e,t){var n=this,r=e.query;return this.localStore.executeQuery(r).then(function(i){return n.localStore.remoteDocumentKeys(e.targetId).then(function(s){var o=new mi(r,s),a=o.computeDocChanges(i),u=Ft.createSynthesizedTargetChangeForCurrentChange(e.targetId,t&&n.onlineState!==Yr.Offline),c=o.applyChanges(a,!0===n.isPrimary,u);y(0===c.limboChanges.length,"View returned limbo docs before target ack from the server."),y(!!c.snapshot,"applyChanges for new view should always return a snapshot");var l=new gi(r,e.targetId,o);return n.queryViewsByQuery.set(r,l),n.queryViewsByTarget[e.targetId]=l,c.snapshot})})},e.prototype.synchronizeViewAndComputeSnapshot=function(e){var t=this;return this.localStore.executeQuery(e.query).then(function(n){return t.localStore.remoteDocumentKeys(e.targetId).then(function(r){return a.__awaiter(t,void 0,void 0,function(){var t;return a.__generator(this,function(i){return t=e.view.synchronizeWithPersistedState(n,r),this.isPrimary&&this.updateTrackedLimbos(e.targetId,t.limboChanges),[2,t]})})})})},e.prototype.unlisten=function(e){return a.__awaiter(this,void 0,void 0,function(){var t,n=this;return a.__generator(this,function(r){switch(r.label){case 0:return this.assertSubscribed("unlisten()"),y(!!(t=this.queryViewsByQuery.get(e)),"Trying to unlisten on query not found:"+e),this.isPrimary?(this.sharedClientState.removeLocalQueryTarget(t.targetId),this.sharedClientState.isActiveQueryTarget(t.targetId)?[3,2]:[4,this.localStore.releaseQuery(e,!1).then(function(){n.sharedClientState.clearQueryState(t.targetId),n.remoteStore.unlisten(t.targetId),n.removeAndCleanupQuery(t)}).catch(function(e){return n.ignoreIfPrimaryLeaseLoss(e)})]):[3,3];case 1:r.sent(),r.label=2;case 2:return[3,5];case 3:return this.removeAndCleanupQuery(t),[4,this.localStore.releaseQuery(e,!0)];case 4:r.sent(),r.label=5;case 5:return[2]}})})},e.prototype.write=function(e,t){var n=this;return this.assertSubscribed("write()"),this.localStore.localWrite(e).then(function(e){return n.sharedClientState.addPendingMutation(e.batchId),n.addMutationCallback(e.batchId,t),n.emitNewSnapsAndNotifyLocalStore(e.changes)}).then(function(){return n.remoteStore.fillWritePipeline()})},e.prototype.wrapUpdateFunctionError=function(e){return e},e.prototype.runTransaction=function(e,t){var n=this;void 0===t&&(t=5),y(t>=0,"Got negative number of retries for transaction.");var r=this.remoteStore.createTransaction();return function(){try{var t=e(r);return!Ve(t)&&t.catch&&t.then?t.catch(function(e){return Promise.reject(n.wrapUpdateFunctionError(e))}):Promise.reject(Error("Transaction callback must return a Promise"))}catch(i){return Promise.reject(n.wrapUpdateFunctionError(i))}}().then(function(i){return r.commit().then(function(){return i}).catch(function(r){return 0===t?Promise.reject(r):n.runTransaction(e,t-1)})})},e.prototype.applyRemoteEvent=function(e){var t=this;return this.assertSubscribed("applyRemoteEvent()"),this.localStore.applyRemoteEvent(e).then(function(n){return x(e.targetChanges,function(e,n){var r=t.limboResolutionsByTarget[e];r&&(y(n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size<=1,"Limbo resolution for single document contains multiple changes."),n.addedDocuments.size>0?r.receivedDocument=!0:n.modifiedDocuments.size>0?y(r.receivedDocument,"Received change for limbo target document without add."):n.removedDocuments.size>0&&(y(r.receivedDocument,"Received remove for limbo target document without add."),r.receivedDocument=!1))}),t.emitNewSnapsAndNotifyLocalStore(n,e)}).catch(function(e){return t.ignoreIfPrimaryLeaseLoss(e)})},e.prototype.applyOnlineStateChange=function(e,t){if(this.isPrimary&&t===Zr.RemoteStore||!this.isPrimary&&t===Zr.SharedClientState){var n=[];this.queryViewsByQuery.forEach(function(t,r){var i=r.view.applyOnlineStateChange(e);y(0===i.limboChanges.length,"OnlineState should not affect limbo documents."),i.snapshot&&n.push(i.snapshot)}),this.syncEngineListener.onOnlineStateChange(e),this.syncEngineListener.onWatchChange(n),this.onlineState=e,this.isPrimary&&this.sharedClientState.setOnlineState(e)}},e.prototype.rejectListen=function(e,t){return a.__awaiter(this,void 0,void 0,function(){var n,r,i,s,o,u,c=this;return a.__generator(this,function(a){switch(a.label){case 0:return this.assertSubscribed("rejectListens()"),this.sharedClientState.updateQueryState(e,"rejected",t),n=this.limboResolutionsByTarget[e],(r=n&&n.key)?(this.limboTargetsByKey=this.limboTargetsByKey.remove(r),delete this.limboResolutionsByTarget[e],i=(i=new fe(ce.comparator)).insert(r,new de(r,Ze.forDeletedDoc())),s=xt().add(r),o=new Rt(Ze.MIN,{},new vt(W),i,s),[2,this.applyRemoteEvent(o)]):[3,1];case 1:return y(!!(u=this.queryViewsByTarget[e]),"Unknown targetId: "+e),[4,this.localStore.releaseQuery(u.query,!1).then(function(){return c.removeAndCleanupQuery(u)}).catch(function(e){return c.ignoreIfPrimaryLeaseLoss(e)})];case 2:a.sent(),this.syncEngineListener.onWatchError(u.query,t),a.label=3;case 3:return[2]}})})},e.prototype.applyBatchState=function(e,t,n){return a.__awaiter(this,void 0,void 0,function(){var r;return a.__generator(this,function(i){switch(i.label){case 0:return this.assertSubscribed("applyBatchState()"),[4,this.localStore.lookupMutationDocuments(e)];case 1:return null===(r=i.sent())?(p("SyncEngine","Cannot apply mutation batch with id: "+e),[2]):"pending"!==t?[3,3]:[4,this.remoteStore.fillWritePipeline()];case 2:return i.sent(),[3,4];case 3:"acknowledged"===t||"rejected"===t?(this.processUserCallback(e,n||null),this.localStore.removeCachedMutationBatchMetadata(e)):g("Unknown batchState: "+t),i.label=4;case 4:return[4,this.emitNewSnapsAndNotifyLocalStore(r)];case 5:return i.sent(),[2]}})})},e.prototype.applySuccessfulWrite=function(e){var t=this;this.assertSubscribed("applySuccessfulWrite()");var n=e.batch.batchId;return this.processUserCallback(n,null),this.localStore.acknowledgeBatch(e).then(function(e){return t.sharedClientState.updateMutationState(n,"acknowledged"),t.emitNewSnapsAndNotifyLocalStore(e)}).catch(function(e){return t.ignoreIfPrimaryLeaseLoss(e)})},e.prototype.rejectFailedWrite=function(e,t){var n=this;return this.assertSubscribed("rejectFailedWrite()"),this.processUserCallback(e,t),this.localStore.rejectBatch(e).then(function(r){return n.sharedClientState.updateMutationState(e,"rejected",t),n.emitNewSnapsAndNotifyLocalStore(r)}).catch(function(e){return n.ignoreIfPrimaryLeaseLoss(e)})},e.prototype.addMutationCallback=function(e,t){var n=this.mutationUserCallbacks[this.currentUser.toKey()];n||(n=new fe(W)),n=n.insert(e,t),this.mutationUserCallbacks[this.currentUser.toKey()]=n},e.prototype.processUserCallback=function(e,t){var n=this.mutationUserCallbacks[this.currentUser.toKey()];if(n){var r=n.get(e);r&&(y(e===n.minKey(),"Mutation callbacks processed out-of-order?"),t?r.reject(t):r.resolve(),n=n.remove(e)),this.mutationUserCallbacks[this.currentUser.toKey()]=n}},e.prototype.removeAndCleanupQuery=function(e){var t=this;if(this.sharedClientState.removeLocalQueryTarget(e.targetId),this.queryViewsByQuery.delete(e.query),delete this.queryViewsByTarget[e.targetId],this.isPrimary){var n=this.limboDocumentRefs.referencesForId(e.targetId);this.limboDocumentRefs.removeReferencesForId(e.targetId),n.forEach(function(e){t.limboDocumentRefs.containsKey(e)||t.removeLimboTarget(e)})}},e.prototype.removeLimboTarget=function(e){var t=this.limboTargetsByKey.get(e);null!==t&&(this.remoteStore.unlisten(t),this.limboTargetsByKey=this.limboTargetsByKey.remove(e),delete this.limboResolutionsByTarget[t])},e.prototype.updateTrackedLimbos=function(e,t){for(var n=0,r=t;n<r.length;n++){var i=r[n];if(i instanceof pi)this.limboDocumentRefs.addReference(i.key,e),this.trackLimboChange(i);else if(i instanceof fi){p("SyncEngine","Document no longer in limbo: "+i.key),this.limboDocumentRefs.removeReference(i.key,e),this.limboDocumentRefs.containsKey(i.key)||this.removeLimboTarget(i.key)}else g("Unknown limbo change: "+JSON.stringify(i))}},e.prototype.trackLimboChange=function(e){var t=e.key;if(!this.limboTargetsByKey.get(t)){p("SyncEngine","New document in limbo: "+t);var n=this.limboTargetIdGenerator.next(),r=Ue.atPath(t.path);this.limboResolutionsByTarget[n]=new yi(t),this.remoteStore.listen(new et(r,n,Be.LimboResolution,hn.INVALID)),this.limboTargetsByKey=this.limboTargetsByKey.insert(t,n)}},e.prototype.currentLimboDocs=function(){return this.limboTargetsByKey},e.prototype.emitNewSnapsAndNotifyLocalStore=function(e,t){return a.__awaiter(this,void 0,void 0,function(){var n,r,i,s=this;return a.__generator(this,function(o){switch(o.label){case 0:return n=[],r=[],i=[],this.queryViewsByQuery.forEach(function(o,a){i.push(Promise.resolve().then(function(){var t=a.view.computeDocChanges(e);return t.needsRefill?s.localStore.executeQuery(a.query).then(function(e){return a.view.computeDocChanges(e,t)}):t}).then(function(e){var i=t&&t.targetChanges[a.targetId],o=a.view.applyChanges(e,!0===s.isPrimary,i);if(s.updateTrackedLimbos(a.targetId,o.limboChanges),o.snapshot){s.isPrimary&&s.sharedClientState.updateQueryState(a.targetId,o.snapshot.fromCache?"not-current":"current"),n.push(o.snapshot);var u=di.fromSnapshot(a.targetId,o.snapshot);r.push(u)}}))}),[4,Promise.all(i)];case 1:return o.sent(),this.syncEngineListener.onWatchChange(n),[4,this.localStore.notifyLocalViewChanges(r)];case 2:return o.sent(),[2]}})})},e.prototype.ignoreIfPrimaryLeaseLoss=function(e){return a.__awaiter(this,void 0,void 0,function(){return a.__generator(this,function(t){if(!kr(e))throw e;return p("SyncEngine","Unexpectedly lost primary lease"),[2]})})},e.prototype.assertSubscribed=function(e){y(null!==this.syncEngineListener,"Trying to call "+e+" before calling subscribe().")},e.prototype.handleCredentialChange=function(e){return a.__awaiter(this,void 0,void 0,function(){var t,n;return a.__generator(this,function(r){switch(r.label){case 0:return t=!this.currentUser.isEqual(e),this.currentUser=e,t?[4,this.localStore.handleUserChange(e)]:[3,3];case 1:return n=r.sent(),this.sharedClientState.handleUserChange(e,n.removedBatchIds,n.addedBatchIds),[4,this.emitNewSnapsAndNotifyLocalStore(n.affectedDocuments)];case 2:r.sent(),r.label=3;case 3:return[4,this.remoteStore.handleCredentialChange()];case 4:return r.sent(),[2]}})})},e.prototype.applyPrimaryState=function(e){return a.__awaiter(this,void 0,void 0,function(){var t,n,r,i,s,o,u,c=this;return a.__generator(this,function(a){switch(a.label){case 0:return!0!==e||!0===this.isPrimary?[3,3]:(this.isPrimary=!0,[4,this.remoteStore.applyPrimaryState(!0)]);case 1:return a.sent(),t=this.sharedClientState.getAllActiveQueryTargets(),[4,this.synchronizeQueryViewsAndRaiseSnapshots(t.toArray())];case 2:for(n=a.sent(),r=0,i=n;r<i.length;r++)s=i[r],this.remoteStore.listen(s);return[3,7];case 3:return!1!==e||!1===this.isPrimary?[3,7]:(this.isPrimary=!1,o=[],u=Promise.resolve(),T(this.queryViewsByTarget,function(e,t){c.sharedClientState.isLocalQueryTarget(e)?o.push(e):u=u.then(function(){return c.unlisten(t.query)}),c.remoteStore.unlisten(t.targetId)}),[4,u]);case 4:return a.sent(),[4,this.synchronizeQueryViewsAndRaiseSnapshots(o)];case 5:return a.sent(),this.resetLimboDocuments(),[4,this.remoteStore.applyPrimaryState(!1)];case 6:a.sent(),a.label=7;case 7:return[2]}})})},e.prototype.resetLimboDocuments=function(){var e=this;T(this.limboResolutionsByTarget,function(t){e.remoteStore.unlisten(t)}),this.limboDocumentRefs.removeAllReferences(),this.limboResolutionsByTarget=[],this.limboTargetsByKey=new fe(ce.comparator)},e.prototype.synchronizeQueryViewsAndRaiseSnapshots=function(e){for(var t=this,n=Promise.resolve(),r=[],i=[],s=function(e){n=n.then(function(){return a.__awaiter(t,void 0,void 0,function(){var t,n,s,o;return a.__generator(this,function(a){switch(a.label){case 0:return(n=this.queryViewsByTarget[e])?[4,this.localStore.releaseQuery(n.query,!0)]:[3,4];case 1:return a.sent(),[4,this.localStore.allocateQuery(n.query)];case 2:return t=a.sent(),[4,this.synchronizeViewAndComputeSnapshot(n)];case 3:return(s=a.sent()).snapshot&&i.push(s.snapshot),[3,8];case 4:return y(!0===this.isPrimary,"A secondary tab should never have an active query without an active view."),[4,this.localStore.getQueryForTarget(e)];case 5:return y(!!(o=a.sent()),"Query data for target "+e+" not found"),[4,this.localStore.allocateQuery(o)];case 6:return t=a.sent(),[4,this.initializeViewAndComputeSnapshot(t,!1)];case 7:a.sent(),a.label=8;case 8:return r.push(t),[2]}})})})},o=0,u=e;o<u.length;o++){s(u[o])}return n.then(function(){return t.syncEngineListener.onWatchChange(i),r})},e.prototype.getActiveClients=function(){return this.localStore.getActiveClients()},e.prototype.applyTargetState=function(e,t,n){return a.__awaiter(this,void 0,void 0,function(){var r,i=this;return a.__generator(this,function(s){switch(s.label){case 0:if(this.isPrimary)return p("SyncEngine","Ignoring unexpected query state notification."),[2];if(!this.queryViewsByTarget[e])return[3,5];switch(t){case"current":case"not-current":return[3,1];case"rejected":return[3,2]}return[3,4];case 1:return[2,this.localStore.getNewDocumentChanges().then(function(n){return a.__awaiter(i,void 0,void 0,function(){var r;return a.__generator(this,function(i){switch(i.label){case 0:return r=Rt.createSynthesizedRemoteEventForCurrentChange(e,"current"===t),[4,this.emitNewSnapsAndNotifyLocalStore(n,r)];case 1:return i.sent(),[2]}})})},function(e){return a.__awaiter(i,void 0,void 0,function(){var t;return a.__generator(this,function(n){switch(n.label){case 0:return function(e){return e.code===b.DATA_LOSS&&e.message===qn}(e)?(t=[],T(this.queryViewsByTarget,function(e){return t.push(e)}),[4,this.synchronizeQueryViewsAndRaiseSnapshots(t)]):[3,2];case 1:return n.sent(),[3,3];case 2:throw e;case 3:return[2]}})})})];case 2:return r=this.queryViewsByTarget[e],this.removeAndCleanupQuery(r),[4,this.localStore.releaseQuery(r.query,!0)];case 3:return s.sent(),this.syncEngineListener.onWatchError(r.query,n),[3,5];case 4:g("Unexpected target state: "+t),s.label=5;case 5:return[2]}})})},e.prototype.applyActiveTargetsChange=function(e,t){return a.__awaiter(this,void 0,void 0,function(){var n,r,i,s,o,u,c,l,h,d=this;return a.__generator(this,function(p){switch(p.label){case 0:if(!this.isPrimary)return[2];n=0,r=e,p.label=1;case 1:return n<r.length?(h=r[n],y(!this.queryViewsByTarget[h],"Trying to add an already active target"),[4,this.localStore.getQueryForTarget(h)]):[3,6];case 2:return y(!!(i=p.sent()),"Query data for active target "+h+" not found"),[4,this.localStore.allocateQuery(i)];case 3:return s=p.sent(),[4,this.initializeViewAndComputeSnapshot(s,!1)];case 4:p.sent(),this.remoteStore.listen(s),p.label=5;case 5:return n++,[3,1];case 6:o=function(e){var t;return a.__generator(this,function(n){switch(n.label){case 0:return(t=u.queryViewsByTarget[e])?[4,u.localStore.releaseQuery(t.query,!1).then(function(){d.remoteStore.unlisten(e),d.removeAndCleanupQuery(t)}).catch(function(e){return d.ignoreIfPrimaryLeaseLoss(e)})]:[3,2];case 1:n.sent(),n.label=2;case 2:return[2]}})},u=this,c=0,l=t,p.label=7;case 7:return c<l.length?(h=l[c],[5,o(h)]):[3,10];case 8:p.sent(),p.label=9;case 9:return c++,[3,7];case 10:return[2]}})})},e.prototype.enableNetwork=function(){return this.localStore.setNetworkEnabled(!0),this.remoteStore.enableNetwork()},e.prototype.disableNetwork=function(){return this.localStore.setNetworkEnabled(!1),this.remoteStore.disableNetwork()},e.prototype.getRemoteKeysForTarget=function(e){var t=this.limboResolutionsByTarget[e];return t&&t.receivedDocument?xt().add(t.key):this.queryViewsByTarget[e]?this.queryViewsByTarget[e].view.syncedDocuments:xt()},e}(),_i=function(){function e(e){this.uid=e}return e.prototype.isAuthenticated=function(){return null!=this.uid},e.prototype.toKey=function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"},e.prototype.isEqual=function(e){return e.uid===this.uid},e.UNAUTHENTICATED=new e(null),e.GOOGLE_CREDENTIALS=new e("google-credentials-uid"),e.FIRST_PARTY=new e("first-party-uid"),e}(),bi="SharedClientState",wi="firestore_clients",Ei="firestore_mutations",Ci="firestore_targets",Si="firestore_online_state",Ti="firestore_sequence_number",xi=function(){function e(e,t,n,r){this.user=e,this.batchId=t,this.state=n,this.error=r,y(void 0!==r==("rejected"===n),"MutationMetadata must contain an error iff state is 'rejected'")}return e.fromWebStorageEntry=function(t,n,r){var i=JSON.parse(r),s="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error),o=void 0;return s&&i.error&&(s="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(o=new w(i.error.code,i.error.message)),s?new e(t,n,i.state,o):(f(bi,"Failed to parse mutation state for ID '"+n+"': "+r),null)},e.prototype.toWebStorageJSON=function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)},e}(),Ai=function(){function e(e,t,n){this.targetId=e,this.state=t,this.error=n,y(void 0!==n==("rejected"===t),"QueryTargetMetadata must contain an error iff state is 'rejected'")}return e.fromWebStorageEntry=function(t,n){var r=JSON.parse(n),i="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error),s=void 0;return i&&r.error&&(i="string"==typeof r.error.message&&"string"==typeof r.error.code)&&(s=new w(r.error.code,r.error.message)),i?new e(t,r.state,s):(f(bi,"Failed to parse target state for ID '"+t+"': "+n),null)},e.prototype.toWebStorageJSON=function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)},e}(),Di=function(){function e(e,t){this.clientId=e,this.activeTargetIds=t}return e.fromWebStorageEntry=function(t,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,s=Dt(),o=0;i&&o<r.activeTargetIds.length;++o)i=je(r.activeTargetIds[o]),s=s.add(r.activeTargetIds[o]);return i?new e(t,s):(f(bi,"Failed to parse client data for instance '"+t+"': "+n),null)},e}(),Ii=function(){function e(e,t){this.clientId=e,this.onlineState=t}return e.fromWebStorageEntry=function(t){var n=JSON.parse(t);return"object"==typeof n&&void 0!==Yr[n.onlineState]&&"string"==typeof n.clientId?new e(n.clientId,Yr[n.onlineState]):(f(bi,"Failed to parse online state: "+t),null)},e}(),Ni=function(){function e(){this.activeTargetIds=Dt()}return e.prototype.addQueryTarget=function(e){y(!this.activeTargetIds.has(e),"Target with ID '"+e+"' already active."),this.activeTargetIds=this.activeTargetIds.add(e)},e.prototype.removeQueryTarget=function(e){this.activeTargetIds=this.activeTargetIds.delete(e)},e.prototype.toWebStorageJSON=function(){var e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)},e}(),Oi=function(){function e(t,n,r,i,s){if(this.queue=t,this.platform=n,this.persistenceKey=r,this.localClientId=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.activeClients={},this.storageListener=this.handleWebStorageEvent.bind(this),this.started=!1,this.earlyEvents=[],!e.isAvailable(this.platform))throw new w(b.UNIMPLEMENTED,"LocalStorage is not available on this platform.");var o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.platform.window.localStorage,this.currentUser=s,this.localClientStorageKey=this.toWebStorageClientStateKey(this.localClientId),this.sequenceNumberKey=Ti+"_"+r,this.activeClients[this.localClientId]=new Ni,this.clientStateKeyRe=new RegExp("^"+wi+"_"+o+"_([^_]*)$"),this.mutationBatchKeyRe=new RegExp("^"+Ei+"_"+o+"_(\\d+)(?:_(.*))?$"),this.queryTargetKeyRe=new RegExp("^"+Ci+"_"+o+"_(\\d+)$"),this.onlineStateKey=Si+"_"+r,this.platform.window.addEventListener("storage",this.storageListener)}return e.isAvailable=function(e){return!(!e.window||null==e.window.localStorage)},e.prototype.start=function(){return a.__awaiter(this,void 0,void 0,function(){var e,t,n,r,i,s,o,u,c,l,h,d=this;return a.__generator(this,function(a){switch(a.label){case 0:return y(!this.started,"WebStorageSharedClientState already started"),y(null!==this.syncEngine,"syncEngine property must be set before calling start()"),y(null!==this.onlineStateHandler,"onlineStateHandler property must be set before calling start()"),[4,this.syncEngine.getActiveClients()];case 1:for(e=a.sent(),t=0,n=e;t<n.length;t++)(r=n[t])!==this.localClientId&&(i=this.getItem(this.toWebStorageClientStateKey(r)))&&(s=Di.fromWebStorageEntry(r,i))&&(this.activeClients[s.clientId]=s);for(this.persistClientState(),(o=this.storage.getItem(this.onlineStateKey))&&(u=this.fromWebStorageOnlineState(o))&&this.handleOnlineStateEvent(u),c=0,l=this.earlyEvents;c<l.length;c++)h=l[c],this.handleWebStorageEvent(h);return this.earlyEvents=[],this.platform.window.addEventListener("unload",function(){return d.shutdown()}),this.started=!0,[2]}})})},e.prototype.writeSequenceNumber=function(e){this.setItem(this.sequenceNumberKey,JSON.stringify(e))},e.prototype.getAllActiveQueryTargets=function(){var e=Dt();return x(this.activeClients,function(t,n){e=e.unionWith(n.activeTargetIds)}),e},e.prototype.isActiveQueryTarget=function(e){for(var t in this.activeClients)if(this.activeClients.hasOwnProperty(t)&&this.activeClients[t].activeTargetIds.has(e))return!0;return!1},e.prototype.addPendingMutation=function(e){this.persistMutationState(e,"pending")},e.prototype.updateMutationState=function(e,t,n){this.persistMutationState(e,t,n),this.removeMutationState(e)},e.prototype.addLocalQueryTarget=function(e){var t="not-current";if(this.isActiveQueryTarget(e)){var n=this.storage.getItem(this.toWebStorageQueryTargetMetadataKey(e));if(n){var r=Ai.fromWebStorageEntry(e,n);r&&(t=r.state)}}return this.localClientState.addQueryTarget(e),this.persistClientState(),t},e.prototype.removeLocalQueryTarget=function(e){this.localClientState.removeQueryTarget(e),this.persistClientState()},e.prototype.isLocalQueryTarget=function(e){return this.localClientState.activeTargetIds.has(e)},e.prototype.clearQueryState=function(e){this.removeItem(this.toWebStorageQueryTargetMetadataKey(e))},e.prototype.updateQueryState=function(e,t,n){this.persistQueryTargetState(e,t,n)},e.prototype.handleUserChange=function(e,t,n){var r=this;t.forEach(function(e){r.removeMutationState(e)}),this.currentUser=e,n.forEach(function(e){r.addPendingMutation(e)})},e.prototype.setOnlineState=function(e){this.persistOnlineState(e)},e.prototype.shutdown=function(){this.started&&(this.platform.window.removeEventListener("storage",this.storageListener),this.removeItem(this.localClientStorageKey),this.started=!1)},e.prototype.getItem=function(e){var t=this.storage.getItem(e);return p(bi,"READ",e,t),t},e.prototype.setItem=function(e,t){p(bi,"SET",e,t),this.storage.setItem(e,t)},e.prototype.removeItem=function(e){p(bi,"REMOVE",e),this.storage.removeItem(e)},e.prototype.handleWebStorageEvent=function(e){var t=this;if(e.storageArea===this.storage){if(p(bi,"EVENT",e.key,e.newValue),e.key===this.localClientStorageKey)return void f("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.queue.enqueueAndForget(function(){return a.__awaiter(t,void 0,void 0,function(){var t,n,r,i,s,o;return a.__generator(this,function(a){if(!this.started)return this.earlyEvents.push(e),[2];if(null===e.key)return[2];if(this.clientStateKeyRe.test(e.key)){if(null==e.newValue)return n=this.fromWebStorageClientStateKey(e.key),[2,this.handleClientStateEvent(n,null)];if(t=this.fromWebStorageClientState(e.key,e.newValue))return[2,this.handleClientStateEvent(t.clientId,t)]}else if(this.mutationBatchKeyRe.test(e.key)){if(null!==e.newValue&&(r=this.fromWebStorageMutationMetadata(e.key,e.newValue)))return[2,this.handleMutationBatchEvent(r)]}else if(this.queryTargetKeyRe.test(e.key)){if(null!==e.newValue&&(i=this.fromWebStorageQueryTargetMetadata(e.key,e.newValue)))return[2,this.handleQueryTargetEvent(i)]}else if(e.key===this.onlineStateKey){if(null!==e.newValue&&(s=this.fromWebStorageOnlineState(e.newValue)))return[2,this.handleOnlineStateEvent(s)]}else e.key===this.sequenceNumberKey&&(y(!!this.sequenceNumberHandler,"Missing sequenceNumberHandler"),(o=function(e){var t=hn.INVALID;if(null!=e)try{var n=JSON.parse(e);y("number"==typeof n,"Found non-numeric sequence number"),t=n}catch(r){f(bi,"Failed to read sequence number from WebStorage",r)}return t}(e.newValue))!==hn.INVALID&&this.sequenceNumberHandler(o));return[2]})})})}},Object.defineProperty(e.prototype,"localClientState",{get:function(){return this.activeClients[this.localClientId]},enumerable:!0,configurable:!0}),e.prototype.persistClientState=function(){this.setItem(this.localClientStorageKey,this.localClientState.toWebStorageJSON())},e.prototype.persistMutationState=function(e,t,n){var r=new xi(this.currentUser,e,t,n),i=this.toWebStorageMutationBatchKey(e);this.setItem(i,r.toWebStorageJSON())},e.prototype.removeMutationState=function(e){var t=this.toWebStorageMutationBatchKey(e);this.removeItem(t)},e.prototype.persistOnlineState=function(e){var t={clientId:this.localClientId,onlineState:Yr[e]};this.storage.setItem(this.onlineStateKey,JSON.stringify(t))},e.prototype.persistQueryTargetState=function(e,t,n){var r=this.toWebStorageQueryTargetMetadataKey(e),i=new Ai(e,t,n);this.setItem(r,i.toWebStorageJSON())},e.prototype.toWebStorageClientStateKey=function(e){return y(-1===e.indexOf("_"),"Client key cannot contain '_', but was '"+e+"'"),wi+"_"+this.persistenceKey+"_"+e},e.prototype.toWebStorageQueryTargetMetadataKey=function(e){return Ci+"_"+this.persistenceKey+"_"+e},e.prototype.toWebStorageMutationBatchKey=function(e){var t=Ei+"_"+this.persistenceKey+"_"+e;return this.currentUser.isAuthenticated()&&(t+="_"+this.currentUser.uid),t},e.prototype.fromWebStorageClientStateKey=function(e){var t=this.clientStateKeyRe.exec(e);return t?t[1]:null},e.prototype.fromWebStorageClientState=function(e,t){var n=this.fromWebStorageClientStateKey(e);return y(null!==n,"Cannot parse client state key '"+e+"'"),Di.fromWebStorageEntry(n,t)},e.prototype.fromWebStorageMutationMetadata=function(e,t){var n=this.mutationBatchKeyRe.exec(e);y(null!==n,"Cannot parse mutation batch key '"+e+"'");var r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return xi.fromWebStorageEntry(new _i(i),r,t)},e.prototype.fromWebStorageQueryTargetMetadata=function(e,t){var n=this.queryTargetKeyRe.exec(e);y(null!==n,"Cannot parse query target key '"+e+"'");var r=Number(n[1]);return Ai.fromWebStorageEntry(r,t)},e.prototype.fromWebStorageOnlineState=function(e){return Ii.fromWebStorageEntry(e)},e.prototype.handleMutationBatchEvent=function(e){return a.__awaiter(this,void 0,void 0,function(){return a.__generator(this,function(t){return e.user.uid!==this.currentUser.uid?(p(bi,"Ignoring mutation for non-active user "+e.user.uid),[2]):[2,this.syncEngine.applyBatchState(e.batchId,e.state,e.error)]})})},e.prototype.handleQueryTargetEvent=function(e){return this.syncEngine.applyTargetState(e.targetId,e.state,e.error)},e.prototype.handleClientStateEvent=function(e,t){var n=this,r=this.getAllActiveQueryTargets();t?this.activeClients[e]=t:delete this.activeClients[e];var i=this.getAllActiveQueryTargets(),s=[],o=[];return i.forEach(function(e){return a.__awaiter(n,void 0,void 0,function(){return a.__generator(this,function(t){return r.has(e)||s.push(e),[2]})})}),r.forEach(function(e){return a.__awaiter(n,void 0,void 0,function(){return a.__generator(this,function(t){return i.has(e)||o.push(e),[2]})})}),this.syncEngine.applyActiveTargetsChange(s,o)},e.prototype.handleOnlineStateEvent=function(e){this.activeClients[e.clientId]&&this.onlineStateHandler(e.onlineState)},e}();var ki=function(){function e(){this.localState=new Ni,this.queryState={},this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null}return e.prototype.addPendingMutation=function(e){},e.prototype.updateMutationState=function(e,t,n){},e.prototype.addLocalQueryTarget=function(e){return this.localState.addQueryTarget(e),this.queryState[e]||"not-current"},e.prototype.updateQueryState=function(e,t,n){this.queryState[e]=t},e.prototype.removeLocalQueryTarget=function(e){this.localState.removeQueryTarget(e)},e.prototype.isLocalQueryTarget=function(e){return this.localState.activeTargetIds.has(e)},e.prototype.clearQueryState=function(e){delete this.queryState[e]},e.prototype.getAllActiveQueryTargets=function(){return this.localState.activeTargetIds},e.prototype.isActiveQueryTarget=function(e){return this.localState.activeTargetIds.has(e)},e.prototype.start=function(){return this.localState=new Ni,Promise.resolve()},e.prototype.handleUserChange=function(e,t,n){},e.prototype.setOnlineState=function(e){},e.prototype.shutdown=function(){},e.prototype.writeSequenceNumber=function(e){},e}(),Pi=function(){function e(e,t,n,r){this.platform=e,this.databaseInfo=t,this.credentials=n,this.asyncQueue=r,this.clientId=z.newId()}return e.prototype.start=function(e){var t=this,n=new dn,r=new dn,i=!1;return this.credentials.setChangeListener(function(s){i?t.asyncQueue.enqueueAndForget(function(){return t.handleCredentialChange(s)}):(i=!0,t.initializePersistence(e,r,s).then(function(){return t.initializeRest(s)}).then(n.resolve,n.reject))}),this.asyncQueue.enqueueAndForget(function(){return n.promise}),r.promise},e.prototype.enableNetwork=function(){var e=this;return this.asyncQueue.enqueue(function(){return e.syncEngine.enableNetwork()})},e.prototype.initializePersistence=function(e,t,n){var r=this;return e.enabled?this.startIndexedDbPersistence(n,e).then(t.resolve).catch(function(e){return t.reject(e),r.canFallback(e)?(console.warn("Error enabling offline storage. Falling back to storage disabled: "+e),r.startMemoryPersistence()):Promise.reject(e)}):(t.resolve(),this.startMemoryPersistence())},e.prototype.canFallback=function(e){return e instanceof w?e.code===b.FAILED_PRECONDITION||e.code===b.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||(22===e.code||20===e.code)},e.prototype.startIndexedDbPersistence=function(e,t){var n=this;y(t.enabled,"Should only start IndexedDb persitence with offline persistence enabled.");var r=Or.buildStoragePrefix(this.databaseInfo),i=new Yt(this.databaseInfo.databaseId,{useProto3Json:!0});return Promise.resolve().then(function(){return a.__awaiter(n,void 0,void 0,function(){var n,s;return a.__generator(this,function(o){switch(o.label){case 0:if(t.experimentalTabSynchronization&&!Oi.isAvailable(this.platform))throw new w(b.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");return t.experimentalTabSynchronization?(this.sharedClientState=new Oi(this.asyncQueue,this.platform,r,this.clientId,e),n=this,[4,Or.createMultiClientIndexedDbPersistence(r,this.clientId,this.platform,this.asyncQueue,i,{sequenceNumberSyncer:this.sharedClientState})]):[3,2];case 1:return n.persistence=o.sent(),[3,4];case 2:return this.sharedClientState=new ki,s=this,[4,Or.createIndexedDbPersistence(r,this.clientId,this.platform,this.asyncQueue,i)];case 3:s.persistence=o.sent(),o.label=4;case 4:return[2]}})})})},e.prototype.startMemoryPersistence=function(){var e=new Yt(this.databaseInfo.databaseId,{useProto3Json:!0});return this.persistence=Wr.createEagerPersistence(this.clientId,e),this.sharedClientState=new ki,Promise.resolve()},e.prototype.initializeRest=function(e){var t=this;return p("FirestoreClient","Initializing. user=",e.uid),this.platform.loadConnection(this.databaseInfo).then(function(n){return a.__awaiter(t,void 0,void 0,function(){var t,r,i,s,o=this;return a.__generator(this,function(a){switch(a.label){case 0:return this.localStore=new Br(this.persistence,e),t=this.platform.newSerializer(this.databaseInfo.databaseId),r=new si(this.asyncQueue,n,this.credentials,t),i=function(e){return o.syncEngine.applyOnlineStateChange(e,Zr.RemoteStore)},s=function(e){return o.syncEngine.applyOnlineStateChange(e,Zr.SharedClientState)},this.remoteStore=new ui(this.localStore,r,this.asyncQueue,i),this.syncEngine=new vi(this.localStore,this.remoteStore,this.sharedClientState,e),this.sharedClientState.onlineStateHandler=s,this.remoteStore.syncEngine=this.syncEngine,this.sharedClientState.syncEngine=this.syncEngine,this.eventMgr=new li(this.syncEngine),[4,this.sharedClientState.start()];case 1:return a.sent(),[4,this.remoteStore.start()];case 2:return a.sent(),[4,this.persistence.setPrimaryStateListener(function(e){return o.syncEngine.applyPrimaryState(e)})];case 3:return a.sent(),[2]}})})})},e.prototype.handleCredentialChange=function(e){return this.asyncQueue.verifyOperationInProgress(),p("FirestoreClient","Credential Changed. Current user: "+e.uid),this.syncEngine.handleCredentialChange(e)},e.prototype.disableNetwork=function(){var e=this;return this.asyncQueue.enqueue(function(){return e.syncEngine.disableNetwork()})},e.prototype.shutdown=function(e){var t=this;return this.asyncQueue.enqueue(function(){return a.__awaiter(t,void 0,void 0,function(){return a.__generator(this,function(t){switch(t.label){case 0:return[4,this.remoteStore.shutdown()];case 1:return t.sent(),[4,this.sharedClientState.shutdown()];case 2:return t.sent(),[4,this.persistence.shutdown(e&&e.purgePersistenceWithDataLoss)];case 3:return t.sent(),this.credentials.removeChangeListener(),[2]}})})})},e.prototype.listen=function(e,t,n){var r=this,i=new hi(e,t,n);return this.asyncQueue.enqueueAndForget(function(){return r.eventMgr.listen(i)}),i},e.prototype.unlisten=function(e){var t=this;this.asyncQueue.enqueueAndForget(function(){return t.eventMgr.unlisten(e)})},e.prototype.getDocumentFromLocalCache=function(e){var t=this;return this.asyncQueue.enqueue(function(){return t.localStore.readDocument(e)}).then(function(e){if(e instanceof he)return e;if(e instanceof de)return null;throw new w(b.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")})},e.prototype.getDocumentsFromLocalCache=function(e){var t=this;return this.asyncQueue.enqueue(function(){return t.localStore.executeQuery(e)}).then(function(t){var n=xt(),r=new mi(e,n),i=r.computeDocChanges(t);return r.applyChanges(i,!1).snapshot})},e.prototype.write=function(e){var t=this,n=new dn;return this.asyncQueue.enqueueAndForget(function(){return t.syncEngine.write(e,n)}),n.promise},e.prototype.databaseId=function(){return this.databaseInfo.databaseId},e.prototype.transaction=function(e){var t=this;return this.asyncQueue.enqueue(function(){return a.__awaiter(t,void 0,void 0,function(){return a.__generator(this,function(e){return[2]})})}).then(function(){return t.syncEngine.runTransaction(e)})},e}(),Mi=function(){function e(e){this.observer=e,this.muted=!1}return e.prototype.next=function(e){this.scheduleEvent(this.observer.next,e)},e.prototype.error=function(e){this.scheduleEvent(this.observer.error,e)},e.prototype.mute=function(){this.muted=!0},e.prototype.scheduleEvent=function(e,t){var n=this;this.muted||setTimeout(function(){n.muted||e(t)},0)},e}(),Ri=function(){function e(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];!function(e,t,n,r){if(!(t instanceof Array)||t.length<r)throw new w(b.INVALID_ARGUMENT,"Function "+e+"() requires its "+n+" argument to be an array with at least "+H(r,"element")+".")}("FieldPath",e,"fieldNames",1);for(var n=0;n<e.length;++n)if(O("FieldPath","string",n,e[n]),0===e[n].length)throw new w(b.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ue(e)}return e.documentId=function(){return e._DOCUMENT_ID},e.prototype.isEqual=function(t){if(!(t instanceof e))throw q("isEqual","FieldPath",1,t);return this._internalPath.isEqual(t._internalPath)},e._DOCUMENT_ID=new e(ue.keyField().canonicalString()),e}(),Fi=new RegExp("[~\\*/\\[\\]]");var Li=function(){return function(e,t){this.user=t,this.type="OAuth",this.authHeaders={Authorization:"Bearer "+e}}}(),Vi=function(){function e(){this.changeListener=null}return e.prototype.getToken=function(){return Promise.resolve(null)},e.prototype.invalidateToken=function(){},e.prototype.setChangeListener=function(e){y(!this.changeListener,"Can only call setChangeListener() once."),this.changeListener=e,e(_i.UNAUTHENTICATED)},e.prototype.removeChangeListener=function(){y(null!==this.changeListener,"removeChangeListener() when no listener registered"),this.changeListener=null},e}(),ji=function(){function e(e){var t=this;this.app=e,this.tokenListener=null,this.tokenCounter=0,this.changeListener=null,this.forceRefresh=!1,this.tokenListener=function(){t.tokenCounter++,t.currentUser=t.getUser(),t.changeListener&&t.changeListener(t.currentUser)},this.tokenCounter=0,this.app.INTERNAL.addAuthTokenListener(this.tokenListener)}return e.prototype.getToken=function(){var e=this;y(null!=this.tokenListener,"getToken cannot be called after listener removed.");var t=this.tokenCounter,n=this.forceRefresh;return this.forceRefresh=!1,this.app.INTERNAL.getToken(n).then(function(n){if(e.tokenCounter!==t)throw new w(b.ABORTED,"getToken aborted due to token change.");return n?(y("string"==typeof n.accessToken,"Invalid tokenData returned from getToken():"+n),new Li(n.accessToken,e.currentUser)):null})},e.prototype.invalidateToken=function(){this.forceRefresh=!0},e.prototype.setChangeListener=function(e){y(!this.changeListener,"Can only call setChangeListener() once."),this.changeListener=e,this.currentUser&&e(this.currentUser)},e.prototype.removeChangeListener=function(){y(null!=this.tokenListener,"removeChangeListener() called twice"),y(null!==this.changeListener,"removeChangeListener() called when no listener registered"),this.app.INTERNAL.removeAuthTokenListener(this.tokenListener),this.tokenListener=null,this.changeListener=null},e.prototype.getUser=function(){var e=this.app.INTERNAL.getUid();return y(null===e||"string"==typeof e,"Received invalid UID: "+e),new _i(e)},e}(),Bi=function(){function e(e,t){this.gapi=e,this.sessionIndex=t,this.type="FirstParty",this.user=_i.FIRST_PARTY,y(this.gapi&&this.gapi.auth&&this.gapi.auth.getAuthHeaderValueForFirstParty,"unexpected gapi interface")}return Object.defineProperty(e.prototype,"authHeaders",{get:function(){return{Authorization:this.gapi.auth.getAuthHeaderValueForFirstParty([]),"X-Goog-AuthUser":this.sessionIndex}},enumerable:!0,configurable:!0}),e}(),Ui=function(){function e(e,t){this.gapi=e,this.sessionIndex=t,y(this.gapi&&this.gapi.auth&&this.gapi.auth.getAuthHeaderValueForFirstParty,"unexpected gapi interface")}return e.prototype.getToken=function(){return Promise.resolve(new Bi(this.gapi,this.sessionIndex))},e.prototype.setChangeListener=function(e){e(_i.FIRST_PARTY)},e.prototype.removeChangeListener=function(){},e.prototype.invalidateToken=function(){},e}();function qi(e){return function(e,t){if("object"!=typeof e||null===e)return!1;for(var n=e,r=0,i=t;r<i.length;r++){var s=i[r];if(s in n&&"function"==typeof n[s])return!0}return!1}(e,["next","error","complete"])}var $i,Hi=function(){function e(e){this._methodName=e}return e.delete=function(){return zi.instance},e.serverTimestamp=function(){return Wi.instance},e.arrayUnion=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return I("FieldValue.arrayUnion",arguments,1),new Ki(e)},e.arrayRemove=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return I("FieldValue.arrayRemove",arguments,1),new Qi(e)},e.prototype.isEqual=function(e){return this===e},e}(),zi=function(e){function t(){return e.call(this,"FieldValue.delete")||this}return a.__extends(t,e),t.instance=new t,t}(Hi),Wi=function(e){function t(){return e.call(this,"FieldValue.serverTimestamp")||this}return a.__extends(t,e),t.instance=new t,t}(Hi),Ki=function(e){function t(t){var n=e.call(this,"FieldValue.arrayUnion")||this;return n._elements=t,n}return a.__extends(t,e),t}(Hi),Qi=function(e){function t(t){var n=e.call(this,"FieldValue.arrayRemove")||this;return n._elements=t,n}return a.__extends(t,e),t}(Hi),Gi=E(Hi,"Use FieldValue.<field>() instead."),Xi=/^__.*__$/,Yi=function(){function e(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}return e.prototype.toMutations=function(e,t){var n=[];return null!==this.fieldMask?n.push(new at(e,this.data,this.fieldMask,t)):n.push(new ot(e,this.data,t)),this.fieldTransforms.length>0&&n.push(new ut(e,this.fieldTransforms)),n},e}(),Zi=function(){function e(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}return e.prototype.toMutations=function(e,t){var n=[new at(e,this.data,this.fieldMask,t)];return this.fieldTransforms.length>0&&n.push(new ut(e,this.fieldTransforms)),n},e}();function Ji(e){switch(e){case $i.Set:case $i.MergeSet:case $i.Update:return!0;case $i.Argument:return!1;default:throw g("Unexpected case for UserDataSource: "+e)}}!function(e){e[e.Set=0]="Set",e[e.Update=1]="Update",e[e.MergeSet=2]="MergeSet",e[e.Argument=3]="Argument"}($i||($i={}));var es=function(){function e(e,t,n,r,i,s){this.dataSource=e,this.methodName=t,this.path=n,this.arrayElement=r,void 0===i&&this.validatePath(),this.arrayElement=void 0!==r&&r,this.fieldTransforms=i||[],this.fieldMask=s||[]}return e.prototype.childContextForField=function(t){var n=null==this.path?null:this.path.child(t),r=new e(this.dataSource,this.methodName,n,!1,this.fieldTransforms,this.fieldMask);return r.validatePathSegment(t),r},e.prototype.childContextForFieldPath=function(t){var n=null==this.path?null:this.path.child(t),r=new e(this.dataSource,this.methodName,n,!1,this.fieldTransforms,this.fieldMask);return r.validatePath(),r},e.prototype.childContextForArray=function(t){return new e(this.dataSource,this.methodName,null,!0,this.fieldTransforms,this.fieldMask)},e.prototype.createError=function(e){var t=null===this.path||this.path.isEmpty()?"":" (found in field "+this.path.toString()+")";return new w(b.INVALID_ARGUMENT,"Function "+this.methodName+"() called with invalid data. "+e+t)},e.prototype.contains=function(e){return void 0!==this.fieldMask.find(function(t){return e.isPrefixOf(t)})||void 0!==this.fieldTransforms.find(function(t){return e.isPrefixOf(t.field)})},e.prototype.validatePath=function(){if(null!==this.path)for(var e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))},e.prototype.validatePathSegment=function(e){if(Ji(this.dataSource)&&Xi.test(e))throw this.createError("Document fields cannot begin and end with __")},e}(),ts=function(){return function(e,t){this.databaseId=e,this.key=t}}(),ns=function(){function e(e){this.preConverter=e}return e.prototype.parseSetData=function(e,t){var n=new es($i.Set,e,ue.EMPTY_PATH);is("Data must be an object, but it was:",n,t);var r=this.parseData(t,n);return new Yi(r,null,n.fieldTransforms)},e.prototype.parseMergeData=function(e,t,n){var r=new es($i.MergeSet,e,ue.EMPTY_PATH);is("Data must be an object, but it was:",r,t);var i,s,o=this.parseData(t,r);if(n){for(var a=[],u=0,c=n;u<c.length;u++){var l=c[u],h=void 0;if(l instanceof Ri)h=l._internalPath;else{if("string"!=typeof l)throw g("Expected stringOrFieldPath to be a string or a FieldPath");h=os(e,l)}if(!r.contains(h))throw new w(b.INVALID_ARGUMENT,"Field '"+h+"' is specified in your field mask but missing from your input data.");a.push(h)}i=new tt(a),s=r.fieldTransforms.filter(function(e){return i.covers(e.field)})}else i=new tt(r.fieldMask),s=r.fieldTransforms;return new Yi(o,i,s)},e.prototype.parseUpdateData=function(e,t){var n=this,r=new es($i.Update,e,ue.EMPTY_PATH);is("Data must be an object, but it was:",r,t);var i=[],s=ke.EMPTY;x(t,function(t,o){var a=os(e,t),u=r.childContextForFieldPath(a);if((o=n.runPreConverter(o,u))instanceof zi)i.push(a);else{var c=n.parseData(o,u);null!=c&&(i.push(a),s=s.set(a,c))}});var o=new tt(i);return new Zi(s,o,r.fieldTransforms)},e.prototype.parseUpdateVarargs=function(e,t,n,r){var i=new es($i.Update,e,ue.EMPTY_PATH),s=[ss(e,t)],o=[n];if(r.length%2!=0)throw new w(b.INVALID_ARGUMENT,"Function "+e+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var a=0;a<r.length;a+=2)s.push(ss(e,r[a])),o.push(r[a+1]);var u=[],c=ke.EMPTY;for(a=0;a<s.length;++a){var l=s[a],h=i.childContextForFieldPath(l),d=this.runPreConverter(o[a],h);if(d instanceof zi)u.push(l);else{var p=this.parseData(d,h);null!=p&&(u.push(l),c=c.set(l,p))}}var f=new tt(u);return new Zi(c,f,i.fieldTransforms)},e.prototype.parseQueryValue=function(e,t){var n=new es($i.Argument,e,ue.EMPTY_PATH),r=this.parseData(t,n);return y(null!=r,"Parsed data should not be null."),y(0===n.fieldTransforms.length,"Field transforms should have been disallowed."),r},e.prototype.runPreConverter=function(e,t){try{return this.preConverter(e)}catch(r){var n=as(r);throw t.createError(n)}},e.prototype.parseData=function(e,t){if(rs(e=this.runPreConverter(e,t)))return is("Unsupported field value:",t,e),this.parseObject(e,t);if(e instanceof Hi)return this.parseSentinelFieldValue(e,t),null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.arrayElement)throw t.createError("Nested arrays are not supported");return this.parseArray(e,t)}return this.parseScalarValue(e,t)},e.prototype.parseObject=function(e,t){var n=this,r=new fe(W);return A(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):x(e,function(e,i){var s=n.parseData(i,t.childContextForField(e));null!=s&&(r=r.insert(e,s))}),new ke(r)},e.prototype.parseArray=function(e,t){for(var n=[],r=0,i=0,s=e;i<s.length;i++){var o=s[i],a=this.parseData(o,t.childContextForArray(r));null==a&&(a=be.INSTANCE),n.push(a),r++}return new Pe(n)},e.prototype.parseSentinelFieldValue=function(e,t){if(!Ji(t.dataSource))throw t.createError(e._methodName+"() can only be used with update() and set()");if(null===t.path)throw t.createError(e._methodName+"() is not currently supported inside arrays");if(e instanceof zi){if(t.dataSource!==$i.MergeSet)throw t.dataSource===$i.Update?(y(t.path.length>0,"FieldValue.delete() at the top level should have already been handled."),t.createError("FieldValue.delete() can only appear at the top level of your update data")):t.createError("FieldValue.delete() cannot be used with set() unless you pass {merge:true}");t.fieldMask.push(t.path)}else if(e instanceof Wi)t.fieldTransforms.push(new nt(t.path,lt.instance));else if(e instanceof Ki){var n=this.parseArrayTransformElements(e._methodName,e._elements),r=new ht(n);t.fieldTransforms.push(new nt(t.path,r))}else if(e instanceof Qi){n=this.parseArrayTransformElements(e._methodName,e._elements);var i=new dt(n);t.fieldTransforms.push(new nt(t.path,i))}else g("Unknown FieldValue type: "+e)},e.prototype.parseScalarValue=function(e,t){if(null===e)return be.INSTANCE;if("number"==typeof e)return je(e)?new Se(e):new Te(e);if("boolean"==typeof e)return we.of(e);if("string"==typeof e)return new xe(e);if(e instanceof Date)return new Ae(te.fromDate(e));if(e instanceof te)return new Ae(new te(e.seconds,1e3*Math.floor(e.nanoseconds/1e3)));if(e instanceof ee)return new Oe(e);if(e instanceof Z)return new Ie(e);if(e instanceof ts)return new Ne(e.databaseId,e.key);throw t.createError("Unsupported field value: "+j(e))},e.prototype.parseArrayTransformElements=function(e,t){var n=this;return t.map(function(t,r){var i=new es($i.Argument,e,ue.EMPTY_PATH);return n.parseData(t,i.childContextForArray(r))})},e}();function rs(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof te||e instanceof ee||e instanceof Z||e instanceof ts||e instanceof Hi)}function is(e,t,n){if(!rs(n)||!V(n)){var r=j(n);throw"an object"===r?t.createError(e+" a custom object"):t.createError(e+" "+r)}}function ss(e,t){if(t instanceof Ri)return t._internalPath;if("string"==typeof t)return os(e,t);throw new w(b.INVALID_ARGUMENT,"Function "+e+"() called with invalid data. Field path arguments must be of type string or FieldPath.")}function os(e,t){try{return function(e){if(e.search(Fi)>=0)throw new w(b.INVALID_ARGUMENT,"Invalid field path ("+e+"). Paths must not contain '~', '*', '/', '[', or ']'");try{return new(Ri.bind.apply(Ri,[void 0].concat(e.split("."))))}catch(t){throw new w(b.INVALID_ARGUMENT,"Invalid field path ("+e+"). Paths must not be empty, begin with '.', end with '.', or contain '..'")}}(t)._internalPath}catch(r){var n=as(r);throw new w(b.INVALID_ARGUMENT,"Function "+e+"() called with invalid data. "+n)}}function as(e){return e instanceof Error?e.message:e.toString()}var us="firestore.googleapis.com",cs=!0,ls=!1,hs=!1,ds=function(){function e(e){if(void 0===e.host){if(void 0!==e.ssl)throw new w(b.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=us,this.ssl=cs}else P("settings","non-empty string","host",e.host),this.host=e.host,M("settings","boolean","ssl",e.ssl),this.ssl=S(e.ssl,cs);U("settings",e,["host","ssl","credentials","timestampsInSnapshots"]),M("settings","object","credentials",e.credentials),this.credentials=e.credentials,M("settings","boolean","timestampsInSnapshots",e.timestampsInSnapshots),this.timestampsInSnapshots=S(e.timestampsInSnapshots,ls)}return e.prototype.isEqual=function(e){return this.host===e.host&&this.ssl===e.ssl&&this.timestampsInSnapshots===e.timestampsInSnapshots&&this.credentials===e.credentials},e}(),ps=function(){return function(){}}(),fs=function(){function e(e,t){this.enabled=e,y(e||!t,"Can only provide PersistenceSettings with persistence enabled"),t=t||{},this.experimentalTabSynchronization=S(t.experimentalTabSynchronization,hs)}return e.prototype.isEqual=function(e){return this.enabled===e.enabled&&this.experimentalTabSynchronization===e.experimentalTabSynchronization},e}(),ms=function(){function e(t){var n=this;this._queue=new fn,this.INTERNAL={delete:function(e){return a.__awaiter(n,void 0,void 0,function(){return a.__generator(this,function(t){return this._firestoreClient?[2,this._firestoreClient.shutdown(e)]:[2]})})}};var r=new ps;if("object"==typeof t.options){var i=t;r.firebaseApp=i,r.databaseId=e.databaseIdFromApp(i),r.persistenceKey=r.firebaseApp.name,r.credentials=new ji(i)}else{var s=t;if(!s.projectId)throw new w(b.INVALID_ARGUMENT,"Must provide projectId");r.databaseId=new ie(s.projectId,s.database),r.persistenceKey="[DEFAULT]",r.credentials=new Vi}r.settings=new ds({}),this._config=r,this._databaseId=r.databaseId}return e.prototype.settings=function(e){if(D("Firestore.settings",arguments,1),O("Firestore.settings","object",1,e),C(e,"persistence"))throw new w(b.INVALID_ARGUMENT,'"persistence" is now specified with a separate call to firestore.enablePersistence().');var t=new ds(e);if(this._firestoreClient&&!this._config.settings.isEqual(t))throw new w(b.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only call settings() before calling any other methods on a Firestore object.");this._config.settings=t,void 0!==t.credentials&&(this._config.credentials=function(e){if(!e)return new Vi;switch(e.type){case"gapi":return new Ui(e.client,e.sessionIndex||"0");case"provider":return e.client;default:throw new w(b.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(t.credentials))},e.prototype.enableNetwork=function(){return this.ensureClientConfigured(),this._firestoreClient.enableNetwork()},e.prototype.disableNetwork=function(){return this.ensureClientConfigured(),this._firestoreClient.disableNetwork()},e.prototype.enablePersistence=function(e){if(this._firestoreClient)throw new w(b.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only call enablePersistence() before calling any other methods on a Firestore object.");return this.configureClient(new fs(!0,e))},e.prototype.ensureClientConfigured=function(){return this._firestoreClient||this.configureClient(new fs(!1)),this._firestoreClient},e.prototype.configureClient=function(e){var t=this;y(!!this._config.settings.host,"FirestoreSettings.host cannot be falsey"),this._config.settings.timestampsInSnapshots||f("\nThe behavior for Date objects stored in Firestore is going to change\nAND YOUR APP MAY BREAK.\nTo hide this warning and ensure your app does not break, you need to add the\nfollowing code to your app before calling any other Cloud Firestore methods:\n\n  const firestore = firebase.firestore();\n  const settings = {/* your settings... */ timestampsInSnapshots: true};\n  firestore.settings(settings);\n\nWith this change, timestamps stored in Cloud Firestore will be read back as\nFirebase Timestamp objects instead of as system Date objects. So you will also\nneed to update code expecting a Date to instead expect a Timestamp. For example:\n\n  // Old:\n  const date = snapshot.get('created_at');\n  // New:\n  const timestamp = snapshot.get('created_at');\n  const date = timestamp.toDate();\n\nPlease audit all existing usages of Date when you enable the new behavior. In a\nfuture release, the behavior will change to the new behavior, so if you do not\nfollow these steps, YOUR APP MAY BREAK."),y(!this._firestoreClient,"configureClient() called multiple times");var n=new ne(this._config.databaseId,this._config.persistenceKey,this._config.settings.host,this._config.settings.ssl);return this._dataConverter=new ns(function(e){if(e instanceof vs){var n=t._config.databaseId,r=e.firestore._config.databaseId;if(!r.isEqual(n))throw new w(b.INVALID_ARGUMENT,"Document reference is for database "+r.projectId+"/"+r.database+" but should be for database "+n.projectId+"/"+n.database);return new ts(t._config.databaseId,e._key)}return e}),this._firestoreClient=new Pi(v.getPlatform(),n,this._config.credentials,this._queue),this._firestoreClient.start(e)},e.databaseIdFromApp=function(e){var t=e.options;if(!C(t,"projectId"))throw new w(b.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');var n=t.projectId;if(!n||"string"!=typeof n)throw new w(b.INVALID_ARGUMENT,"projectId must be a string in FirebaseApp.options");return new ie(n)},Object.defineProperty(e.prototype,"app",{get:function(){if(!this._config.firebaseApp)throw new w(b.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._config.firebaseApp},enumerable:!0,configurable:!0}),e.prototype.collection=function(e){if(D("Firestore.collection",arguments,1),O("Firestore.collection","non-empty string",1,e),!e)throw new w(b.INVALID_ARGUMENT,"Must provide a non-empty collection path to collection()");return this.ensureClientConfigured(),new Ss(oe.fromString(e),this)},e.prototype.doc=function(e){if(D("Firestore.doc",arguments,1),O("Firestore.doc","non-empty string",1,e),!e)throw new w(b.INVALID_ARGUMENT,"Must provide a non-empty document path to doc()");return this.ensureClientConfigured(),vs.forPath(oe.fromString(e),this)},e.prototype.runTransaction=function(e){var t=this;return D("Firestore.runTransaction",arguments,1),O("Firestore.runTransaction","function",1,e),this.ensureClientConfigured().transaction(function(n){return e(new gs(t,n))})},e.prototype.batch=function(){return this.ensureClientConfigured(),new ys(this)},Object.defineProperty(e,"logLevel",{get:function(){switch(h()){case i.DEBUG:return"debug";case i.ERROR:return"error";case i.SILENT:return"silent";default:return g("Unknown log level: "+h())}},enumerable:!0,configurable:!0}),e.setLogLevel=function(e){switch(D("Firestore.setLogLevel",arguments,1),O("Firestore.setLogLevel","non-empty string",1,e),e){case"debug":d(i.DEBUG);break;case"error":d(i.ERROR);break;case"silent":d(i.SILENT);break;default:throw new w(b.INVALID_ARGUMENT,"Invalid log level: "+e)}},e.prototype._areTimestampsInSnapshotsEnabled=function(){return this._config.settings.timestampsInSnapshots},e}(),gs=function(){function e(e,t){this._firestore=e,this._transaction=t}return e.prototype.get=function(e){var t=this;D("Transaction.get",arguments,1);var n=Ds("Transaction.get",e,this._firestore);return this._transaction.lookup([n._key]).then(function(e){if(!e||1!==e.length)return g("Mismatch in docs returned from document lookup.");var r=e[0];if(r instanceof de)return new bs(t._firestore,n._key,null,!1,!1);if(r instanceof he)return new bs(t._firestore,n._key,r,!1,!1);throw g("BatchGetDocumentsRequest returned unexpected document type: "+r.constructor.name)})},e.prototype.set=function(e,t,n){N("Transaction.set",arguments,2,3);var r=Ds("Transaction.set",e,this._firestore),i=(n=Ts("Transaction.set",n)).merge||n.mergeFields?this._firestore._dataConverter.parseMergeData("Transaction.set",t,n.mergeFields):this._firestore._dataConverter.parseSetData("Transaction.set",t);return this._transaction.set(r._key,i),this},e.prototype.update=function(e,t,n){for(var r,i,s=[],o=3;o<arguments.length;o++)s[o-3]=arguments[o];return"string"==typeof t||t instanceof Ri?(I("Transaction.update",arguments,3),r=Ds("Transaction.update",e,this._firestore),i=this._firestore._dataConverter.parseUpdateVarargs("Transaction.update",t,n,s)):(D("Transaction.update",arguments,2),r=Ds("Transaction.update",e,this._firestore),i=this._firestore._dataConverter.parseUpdateData("Transaction.update",t)),this._transaction.update(r._key,i),this},e.prototype.delete=function(e){D("Transaction.delete",arguments,1);var t=Ds("Transaction.delete",e,this._firestore);return this._transaction.delete(t._key),this},e}(),ys=function(){function e(e){this._firestore=e,this._mutations=[],this._committed=!1}return e.prototype.set=function(e,t,n){N("WriteBatch.set",arguments,2,3),this.verifyNotCommitted();var r=Ds("WriteBatch.set",e,this._firestore),i=(n=Ts("WriteBatch.set",n)).merge||n.mergeFields?this._firestore._dataConverter.parseMergeData("WriteBatch.set",t,n.mergeFields):this._firestore._dataConverter.parseSetData("WriteBatch.set",t);return this._mutations=this._mutations.concat(i.toMutations(r._key,it.NONE)),this},e.prototype.update=function(e,t,n){for(var r,i,s=[],o=3;o<arguments.length;o++)s[o-3]=arguments[o];return this.verifyNotCommitted(),"string"==typeof t||t instanceof Ri?(I("WriteBatch.update",arguments,3),r=Ds("WriteBatch.update",e,this._firestore),i=this._firestore._dataConverter.parseUpdateVarargs("WriteBatch.update",t,n,s)):(D("WriteBatch.update",arguments,2),r=Ds("WriteBatch.update",e,this._firestore),i=this._firestore._dataConverter.parseUpdateData("WriteBatch.update",t)),this._mutations=this._mutations.concat(i.toMutations(r._key,it.exists(!0))),this},e.prototype.delete=function(e){D("WriteBatch.delete",arguments,1),this.verifyNotCommitted();var t=Ds("WriteBatch.delete",e,this._firestore);return this._mutations=this._mutations.concat(new ct(t._key,it.NONE)),this},e.prototype.commit=function(){return a.__awaiter(this,void 0,void 0,function(){return a.__generator(this,function(e){return this.verifyNotCommitted(),this._committed=!0,this._mutations.length>0?[2,this._firestore.ensureClientConfigured().write(this._mutations)]:[2]})})},e.prototype.verifyNotCommitted=function(){if(this._committed)throw new w(b.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},e}(),vs=function(){function e(e,t){this._key=e,this.firestore=t,this._firestoreClient=this.firestore.ensureClientConfigured()}return e.forPath=function(t,n){if(t.length%2!=0)throw new w(b.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t.canonicalString()+" has "+t.length);return new e(new ce(t),n)},Object.defineProperty(e.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return new Ss(this._key.path.popLast(),this.firestore)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._key.path.canonicalString()},enumerable:!0,configurable:!0}),e.prototype.collection=function(e){if(D("DocumentReference.collection",arguments,1),O("DocumentReference.collection","non-empty string",1,e),!e)throw new w(b.INVALID_ARGUMENT,"Must provide a non-empty collection name to collection()");var t=oe.fromString(e);return new Ss(this._key.path.child(t),this.firestore)},e.prototype.isEqual=function(t){if(!(t instanceof e))throw q("isEqual","DocumentReference",1,t);return this.firestore===t.firestore&&this._key.isEqual(t._key)},e.prototype.set=function(e,t){N("DocumentReference.set",arguments,1,2);var n=(t=Ts("DocumentReference.set",t)).merge||t.mergeFields?this.firestore._dataConverter.parseMergeData("DocumentReference.set",e,t.mergeFields):this.firestore._dataConverter.parseSetData("DocumentReference.set",e);return this._firestoreClient.write(n.toMutations(this._key,it.NONE))},e.prototype.update=function(e,t){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];return"string"==typeof e||e instanceof Ri?(I("DocumentReference.update",arguments,2),n=this.firestore._dataConverter.parseUpdateVarargs("DocumentReference.update",e,t,r)):(D("DocumentReference.update",arguments,1),n=this.firestore._dataConverter.parseUpdateData("DocumentReference.update",e)),this._firestoreClient.write(n.toMutations(this._key,it.exists(!0)))},e.prototype.delete=function(){return D("DocumentReference.delete",arguments,0),this._firestoreClient.write([new ct(this._key,it.NONE)])},e.prototype.onSnapshot=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];N("DocumentReference.onSnapshot",arguments,1,4);var n,r={includeMetadataChanges:!1},i=0;"object"!=typeof e[i]||qi(e[i])||(U("DocumentReference.onSnapshot",r=e[i],["includeMetadataChanges"]),M("DocumentReference.onSnapshot","boolean","includeMetadataChanges",r.includeMetadataChanges),i++);var s={includeMetadataChanges:r.includeMetadataChanges};return qi(e[i])?n=e[i]:(O("DocumentReference.onSnapshot","function",i,e[i]),k("DocumentReference.onSnapshot","function",i+1,e[i+1]),k("DocumentReference.onSnapshot","function",i+2,e[i+2]),n={next:e[i],error:e[i+1],complete:e[i+2]}),this.onSnapshotInternal(s,n)},e.prototype.onSnapshotInternal=function(e,t){var n=this,r=function(e){console.error("Uncaught Error in onSnapshot:",e)};t.error&&(r=t.error.bind(t));var i=new Mi({next:function(e){if(t.next){y(e.docs.size<=1,"Too many documents returned on a document query");var r=e.docs.get(n._key);t.next(new bs(n.firestore,n._key,r,e.fromCache,e.hasPendingWrites))}},error:r}),s=this._firestoreClient.listen(Ue.atPath(this._key.path),i,e);return function(){i.mute(),n._firestoreClient.unlisten(s)}},e.prototype.get=function(e){var t=this;return N("DocumentReference.get",arguments,0,1),As("DocumentReference.get",e),new Promise(function(n,r){e&&"cache"===e.source?t.firestore.ensureClientConfigured().getDocumentFromLocalCache(t._key).then(function(e){n(new bs(t.firestore,t._key,e,!0,e instanceof he&&e.hasLocalMutations))},r):t.getViaSnapshotListener(n,r,e)})},e.prototype.getViaSnapshotListener=function(e,t,n){var r=this.onSnapshotInternal({includeMetadataChanges:!0,waitForSyncWhenOnline:!0},{next:function(i){r(),!i.exists&&i.metadata.fromCache?t(new w(b.UNAVAILABLE,"Failed to get document because the client is offline.")):i.exists&&i.metadata.fromCache&&n&&"server"===n.source?t(new w(b.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):e(i)},error:t})},e}(),_s=function(){function e(e,t){this.hasPendingWrites=e,this.fromCache=t}return e.prototype.isEqual=function(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache},e}(),bs=function(){function e(e,t,n,r,i){this._firestore=e,this._key=t,this._document=n,this._fromCache=r,this._hasPendingWrites=i}return e.prototype.data=function(e){return N("DocumentSnapshot.data",arguments,0,1),e=xs("DocumentSnapshot.data",e),this._document?this.convertObject(this._document.data,ve.fromSnapshotOptions(e,this._firestore._areTimestampsInSnapshotsEnabled())):void 0},e.prototype.get=function(e,t){if(N("DocumentSnapshot.get",arguments,1,2),t=xs("DocumentSnapshot.get",t),this._document){var n=this._document.data.field(ss("DocumentSnapshot.get",e));if(void 0!==n)return this.convertValue(n,ve.fromSnapshotOptions(t,this._firestore._areTimestampsInSnapshotsEnabled()))}},Object.defineProperty(e.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ref",{get:function(){return new vs(this._key,this._firestore)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"exists",{get:function(){return null!==this._document},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"metadata",{get:function(){return new _s(this._hasPendingWrites,this._fromCache)},enumerable:!0,configurable:!0}),e.prototype.isEqual=function(t){if(!(t instanceof e))throw q("isEqual","DocumentSnapshot",1,t);return this._firestore===t._firestore&&this._fromCache===t._fromCache&&this._key.isEqual(t._key)&&(null===this._document?null===t._document:this._document.isEqual(t._document))},e.prototype.convertObject=function(e,t){var n=this,r={};return e.forEach(function(e,i){r[e]=n.convertValue(i,t)}),r},e.prototype.convertValue=function(e,t){if(e instanceof ke)return this.convertObject(e,t);if(e instanceof Pe)return this.convertArray(e,t);if(e instanceof Ne){var n=e.value(t),r=this._firestore.ensureClientConfigured().databaseId();return e.databaseId.isEqual(r)||f("Document "+this._key.path+" contains a document reference within a different database ("+e.databaseId.projectId+"/"+e.databaseId.database+") which is not supported. It will be treated as a reference in the current database ("+r.projectId+"/"+r.database+") instead."),new vs(n,this._firestore)}return e.value(t)},e.prototype.convertArray=function(e,t){var n=this;return e.internalValue.map(function(e){return n.convertValue(e,t)})},e}(),ws=function(e){function t(t,n,r,i,s){return e.call(this,t,n,r,i,s)||this}return a.__extends(t,e),t.prototype.data=function(t){var n=e.prototype.data.call(this,t);return y("object"==typeof n,"Document in a QueryDocumentSnapshot should exist"),n},t}(bs),Es=function(){function e(e,t){this._query=e,this.firestore=t}return e.prototype.where=function(t,n,r){var i;D("Query.where",arguments,3),O("Query.where","non-empty string",2,n),B("Query.where",3,r);var s=ss("Query.where",t),o=$e.fromString(n);if(s.isKeyField()){if(o===$e.ARRAY_CONTAINS)throw new w(b.INVALID_ARGUMENT,"Invalid Query. You can't perform array-contains queries on FieldPath.documentId() since document IDs are not arrays.");if("string"==typeof r){if(-1!==r.indexOf("/"))throw new w(b.INVALID_ARGUMENT,"Function Query.where() requires its third parameter to be a valid document ID if the first parameter is FieldPath.documentId(), but it contains a slash.");if(""===r)throw new w(b.INVALID_ARGUMENT,"Function Query.where() requires its third parameter to be a valid document ID if the first parameter is FieldPath.documentId(), but it was an empty string.");var a=this._query.path.child(new oe([r]));y(a.length%2==0,"Path should be a document key"),i=new Ne(this.firestore._databaseId,new ce(a))}else{if(!(r instanceof vs))throw new w(b.INVALID_ARGUMENT,"Function Query.where() requires its third parameter to be a string or a DocumentReference if the first parameter is FieldPath.documentId(), but it was: "+j(r)+".");var u=r;i=new Ne(this.firestore._databaseId,u._key)}}else i=this.firestore._dataConverter.parseQueryValue("Query.where",r);var c=qe.create(s,o,i);return this.validateNewFilter(c),new e(this._query.addFilter(c),this.firestore)},e.prototype.orderBy=function(t,n){var r;if(N("Query.orderBy",arguments,1,2),k("Query.orderBy","non-empty string",2,n),void 0===n||"asc"===n)r=Ke.ASCENDING;else{if("desc"!==n)throw new w(b.INVALID_ARGUMENT,"Function Query.orderBy() has unknown direction '"+n+"', expected 'asc' or 'desc'.");r=Ke.DESCENDING}if(null!==this._query.startAt)throw new w(b.INVALID_ARGUMENT,"Invalid query. You must not call Query.startAt() or Query.startAfter() before calling Query.orderBy().");if(null!==this._query.endAt)throw new w(b.INVALID_ARGUMENT,"Invalid query. You must not call Query.endAt() or Query.endBefore() before calling Query.orderBy().");var i=ss("Query.orderBy",t),s=new Ge(i,r);return this.validateNewOrderBy(s),new e(this._query.addOrderBy(s),this.firestore)},e.prototype.limit=function(t){if(D("Query.limit",arguments,1),O("Query.limit","number",1,t),t<=0)throw new w(b.INVALID_ARGUMENT,"Invalid Query. Query limit ("+t+") is invalid. Limit must be positive.");return new e(this._query.withLimit(t),this.firestore)},e.prototype.startAt=function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];I("Query.startAt",arguments,1);var i=this.boundFromDocOrFields("Query.startAt",t,n,!0);return new e(this._query.withStartAt(i),this.firestore)},e.prototype.startAfter=function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];I("Query.startAfter",arguments,1);var i=this.boundFromDocOrFields("Query.startAfter",t,n,!1);return new e(this._query.withStartAt(i),this.firestore)},e.prototype.endBefore=function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];I("Query.endBefore",arguments,1);var i=this.boundFromDocOrFields("Query.endBefore",t,n,!0);return new e(this._query.withEndAt(i),this.firestore)},e.prototype.endAt=function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];I("Query.endAt",arguments,1);var i=this.boundFromDocOrFields("Query.endAt",t,n,!1);return new e(this._query.withEndAt(i),this.firestore)},e.prototype.isEqual=function(t){if(!(t instanceof e))throw q("isEqual","Query",1,t);return this.firestore===t.firestore&&this._query.isEqual(t._query)},e.prototype.boundFromDocOrFields=function(e,t,n,r){if(B(e,1,t),t instanceof bs){if(n.length>0)throw new w(b.INVALID_ARGUMENT,"Too many arguments provided to "+e+"().");var i=t;if(!i.exists)throw new w(b.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+e+"().");return this.boundFromDocument(e,i._document,r)}var s=[t].concat(n);return this.boundFromFields(e,s,r)},e.prototype.boundFromDocument=function(e,t,n){for(var r=[],i=0,s=this._query.orderBy;i<s.length;i++){var o=s[i];if(o.field.isKeyField())r.push(new Ne(this.firestore._databaseId,t.key));else{var a=t.field(o.field);if(void 0===a){var u=o.field.canonicalString();throw new w(b.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+u+"' (used as the orderBy) does not exist.")}r.push(a)}}return new Qe(r,n)},e.prototype.boundFromFields=function(e,t,n){var r=this._query.explicitOrderBy;if(t.length>r.length)throw new w(b.INVALID_ARGUMENT,"Too many arguments provided to "+e+"(). The number of arguments must be less than or equal to the number of Query.orderBy() clauses");for(var i=[],s=0;s<t.length;s++){var o=t[s];if(r[s].field.isKeyField()){if("string"!=typeof o)throw new w(b.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+e+"(), but got a "+typeof o);if(-1!==o.indexOf("/"))throw new w(b.INVALID_ARGUMENT,"Invalid query. Document ID '"+o+"' contains a slash in "+e+"()");var a=new ce(this._query.path.child(o));i.push(new Ne(this.firestore._databaseId,a))}else{var u=this.firestore._dataConverter.parseQueryValue(e,o);i.push(u)}}return new Qe(i,n)},e.prototype.onSnapshot=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];N("Query.onSnapshot",arguments,1,4);var n,r={},i=0;return"object"!=typeof e[i]||qi(e[i])||(U("Query.onSnapshot",r=e[i],["includeMetadataChanges"]),M("Query.onSnapshot","boolean","includeMetadataChanges",r.includeMetadataChanges),i++),qi(e[i])?n=e[i]:(O("Query.onSnapshot","function",i,e[i]),k("Query.onSnapshot","function",i+1,e[i+1]),k("Query.onSnapshot","function",i+2,e[i+2]),n={next:e[i],error:e[i+1],complete:e[i+2]}),this.onSnapshotInternal(r,n)},e.prototype.onSnapshotInternal=function(e,t){var n=this,r=function(e){console.error("Uncaught Error in onSnapshot:",e)};t.error&&(r=t.error.bind(t));var i=new Mi({next:function(e){t.next&&t.next(new Cs(n.firestore,n._query,e))},error:r}),s=this.firestore.ensureClientConfigured(),o=s.listen(this._query,i,e);return function(){i.mute(),s.unlisten(o)}},e.prototype.get=function(e){var t=this;return N("Query.get",arguments,0,1),As("Query.get",e),new Promise(function(n,r){e&&"cache"===e.source?t.firestore.ensureClientConfigured().getDocumentsFromLocalCache(t._query).then(function(e){n(new Cs(t.firestore,t._query,e))},r):t.getViaSnapshotListener(n,r,e)})},e.prototype.getViaSnapshotListener=function(e,t,n){var r=this.onSnapshotInternal({includeMetadataChanges:!0,waitForSyncWhenOnline:!0},{next:function(i){r(),i.metadata.fromCache&&n&&"server"===n.source?t(new w(b.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):e(i)},error:t})},e.prototype.validateNewFilter=function(e){if(e instanceof He)if(e.isInequality()){var t=this._query.getInequalityFilterField();if(null!==t&&!t.isEqual(e.field))throw new w(b.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, >, or >=) must be on the same field. But you have inequality filters on '"+t.toString()+"' and '"+e.field.toString()+"'");var n=this._query.getFirstOrderByField();null!==n&&this.validateOrderByAndInequalityMatch(e.field,n)}else if(e.op===$e.ARRAY_CONTAINS&&this._query.hasArrayContainsFilter())throw new w(b.INVALID_ARGUMENT,"Invalid query. Queries only support a single array-contains filter.")},e.prototype.validateNewOrderBy=function(e){if(null===this._query.getFirstOrderByField()){var t=this._query.getInequalityFilterField();null!==t&&this.validateOrderByAndInequalityMatch(t,e.field)}},e.prototype.validateOrderByAndInequalityMatch=function(e,t){if(!t.isEqual(e))throw new w(b.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, >, or >=) on field '"+e.toString()+"' and so you must also use '"+e.toString()+"' as your first Query.orderBy(), but your first Query.orderBy() is on field '"+t.toString()+"' instead.")},e}(),Cs=function(){function e(e,t,n){this._firestore=e,this._originalQuery=t,this._snapshot=n,this._cachedChanges=null,this._cachedChangesIncludeMetadataChanges=null,this.metadata=new _s(n.hasPendingWrites,n.fromCache)}return Object.defineProperty(e.prototype,"docs",{get:function(){var e=[];return this.forEach(function(t){return e.push(t)}),e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"empty",{get:function(){return this._snapshot.docs.isEmpty()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this._snapshot.docs.size},enumerable:!0,configurable:!0}),e.prototype.forEach=function(e,t){var n=this;N("QuerySnapshot.forEach",arguments,1,2),O("QuerySnapshot.forEach","function",1,e),this._snapshot.docs.forEach(function(r){e.call(t,n.convertToDocumentImpl(r))})},Object.defineProperty(e.prototype,"query",{get:function(){return new Es(this._originalQuery,this._firestore)},enumerable:!0,configurable:!0}),e.prototype.docChanges=function(e){e&&(U("QuerySnapshot.docChanges",e,["includeMetadataChanges"]),M("QuerySnapshot.docChanges","boolean","includeMetadataChanges",e.includeMetadataChanges));var t=!(!e||!e.includeMetadataChanges);if(t&&this._snapshot.excludesMetadataChanges)throw new w(b.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(e,t,n){if(n.oldDocs.isEmpty()){var r,i=0;return n.docChanges.map(function(t){var s=new ws(e,t.doc.key,t.doc,n.fromCache,n.mutatedKeys.has(t.doc.key));return y(t.type===It.Added,"Invalid event type for first snapshot"),y(!r||n.query.docComparator(r,t.doc)<0,"Got added events in wrong order"),r=t.doc,{type:"added",doc:s,oldIndex:-1,newIndex:i++}})}var s=n.oldDocs;return n.docChanges.filter(function(e){return t||e.type!==It.Metadata}).map(function(t){var r=new ws(e,t.doc.key,t.doc,n.fromCache,n.mutatedKeys.has(t.doc.key)),i=-1,o=-1;return t.type!==It.Added&&(y((i=s.indexOf(t.doc.key))>=0,"Index for document not found"),s=s.delete(t.doc.key)),t.type!==It.Removed&&(s=s.add(t.doc),o=s.indexOf(t.doc.key)),{type:function(e){switch(e){case It.Added:return"added";case It.Modified:case It.Metadata:return"modified";case It.Removed:return"removed";default:return g("Unknown change type: "+e)}}(t.type),doc:r,oldIndex:i,newIndex:o}})}(this._firestore,t,this._snapshot),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges},e.prototype.isEqual=function(t){if(!(t instanceof e))throw q("isEqual","QuerySnapshot",1,t);return this._firestore===t._firestore&&this._originalQuery.isEqual(t._originalQuery)&&this._snapshot.isEqual(t._snapshot)},e.prototype.convertToDocumentImpl=function(e){return new ws(this._firestore,e.key,e,this.metadata.fromCache,this._snapshot.mutatedKeys.has(e.key))},e}();["length","forEach","map"].concat("undefined"!=typeof Symbol?[Symbol.iterator]:[]).forEach(function(e){try{Object.defineProperty(Cs.prototype.docChanges,e,{get:function(){return function(){throw new w(b.INVALID_ARGUMENT,'QuerySnapshot.docChanges has been changed from a property into a method, so usages like "querySnapshot.docChanges" should become "querySnapshot.docChanges()"')}()}})}catch(t){}});var Ss=function(e){function t(t,n){var r=e.call(this,Ue.atPath(t),n)||this;if(t.length%2!=1)throw new w(b.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+t.canonicalString()+" has "+t.length);return r}return a.__extends(t,e),Object.defineProperty(t.prototype,"id",{get:function(){return this._query.path.lastSegment()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){var e=this._query.path.popLast();return e.isEmpty()?null:new vs(new ce(e),this.firestore)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._query.path.canonicalString()},enumerable:!0,configurable:!0}),t.prototype.doc=function(e){if(N("CollectionReference.doc",arguments,0,1),0===arguments.length&&(e=z.newId()),O("CollectionReference.doc","non-empty string",1,e),""===e)throw new w(b.INVALID_ARGUMENT,"Document path must be a non-empty string");var t=oe.fromString(e);return vs.forPath(this._query.path.child(t),this.firestore)},t.prototype.add=function(e){D("CollectionReference.add",arguments,1),O("CollectionReference.add","object",1,e);var t=this.doc();return t.set(e).then(function(){return t})},t}(Es);function Ts(e,t){if(void 0===t)return{merge:!1};if(U(e,t,["merge","mergeFields"]),M(e,"boolean","merge",t.merge),R(e,"mergeFields","a string or a FieldPath",t.mergeFields,function(e){return"string"==typeof e||e instanceof Ri}),void 0!==t.mergeFields&&void 0!==t.merge)throw new w(b.INVALID_ARGUMENT,"Invalid options passed to function "+e+'(): You cannot specify both "merge" and "mergeFields".');return t}function xs(e,t){return void 0===t?{}:(U(e,t,["serverTimestamps"]),F(e,0,"serverTimestamps",t.serverTimestamps,["estimate","previous","none"]),t)}function As(e,t){k(e,"object",1,t),t&&(U(e,t,["source"]),F(e,0,"source",t.source,["default","server","cache"]))}function Ds(e,t,n){if(t instanceof vs){if(t.firestore!==n)throw new w(b.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}throw q(e,"DocumentReference",1,t)}var Is=E(ms,"Use firebase.firestore() instead."),Ns=E(gs,"Use firebase.firestore().runTransaction() instead."),Os=E(ys,"Use firebase.firestore().batch() instead."),ks=E(vs,"Use firebase.firestore().doc() instead."),Ps=E(bs),Ms=E(ws),Rs=E(Es),Fs=E(Cs),Ls=E(Ss,"Use firebase.firestore().collection() instead."),Vs={Firestore:Is,GeoPoint:ee,Timestamp:te,Blob:J,Transaction:Ns,WriteBatch:Os,DocumentReference:ks,DocumentSnapshot:Ps,Query:Rs,QueryDocumentSnapshot:Ms,QuerySnapshot:Fs,CollectionReference:Ls,FieldPath:Ri,FieldValue:Gi,setLogLevel:ms.setLogLevel};function js(e){e.INTERNAL.registerService("firestore",function(e){return new ms(e)},function(e){y(e&&"object"==typeof e,"shallowCopy() expects object parameter.");var t={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}(Vs))}function Bs(e){js(e)}Bs(s),t.registerFirestore=Bs},"7XFi":function(e,t){e.exports='<img [src]="imgSrc(1)" alt="">\r\n<img [src]="imgSrc(2)" alt="">\r\n<img [src]="imgSrc(3)" alt="">'},"7o/Q":function(e,t,n){"use strict";n.d(t,"a",function(){return c});var r=n("n6bG"),i=n("gRHU"),s=n("quSY"),o=n("2QA8"),a=n("2fFW"),u=n("NJ4a");class c extends s.a{constructor(e,t,n){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,this._parentSubscription=null,arguments.length){case 0:this.destination=i.a;break;case 1:if(!e){this.destination=i.a;break}if("object"==typeof e){e instanceof c?(this.syncErrorThrowable=e.syncErrorThrowable,this.destination=e,e.add(this)):(this.syncErrorThrowable=!0,this.destination=new l(this,e));break}default:this.syncErrorThrowable=!0,this.destination=new l(this,e,t,n)}}[o.a](){return this}static create(e,t,n){const r=new c(e,t,n);return r.syncErrorThrowable=!1,r}next(e){this.isStopped||this._next(e)}error(e){this.isStopped||(this.isStopped=!0,this._error(e))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(e){this.destination.next(e)}_error(e){this.destination.error(e),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parent:e,_parents:t}=this;return this._parent=null,this._parents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parent=e,this._parents=t,this._parentSubscription=null,this}}class l extends c{constructor(e,t,n,s){let o;super(),this._parentSubscriber=e;let a=this;Object(r.a)(t)?o=t:t&&(o=t.next,n=t.error,s=t.complete,t!==i.a&&(a=Object.create(t),Object(r.a)(a.unsubscribe)&&this.add(a.unsubscribe.bind(a)),a.unsubscribe=this.unsubscribe.bind(this))),this._context=a,this._next=o,this._error=n,this._complete=s}next(e){if(!this.isStopped&&this._next){const{_parentSubscriber:t}=this;a.a.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?this.__tryOrSetError(t,this._next,e)&&this.unsubscribe():this.__tryOrUnsub(this._next,e)}}error(e){if(!this.isStopped){const{_parentSubscriber:t}=this,{useDeprecatedSynchronousErrorHandling:n}=a.a;if(this._error)n&&t.syncErrorThrowable?(this.__tryOrSetError(t,this._error,e),this.unsubscribe()):(this.__tryOrUnsub(this._error,e),this.unsubscribe());else if(t.syncErrorThrowable)n?(t.syncErrorValue=e,t.syncErrorThrown=!0):Object(u.a)(e),this.unsubscribe();else{if(this.unsubscribe(),n)throw e;Object(u.a)(e)}}}complete(){if(!this.isStopped){const{_parentSubscriber:e}=this;if(this._complete){const t=()=>this._complete.call(this._context);a.a.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?(this.__tryOrSetError(e,t),this.unsubscribe()):(this.__tryOrUnsub(t),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(e,t){try{e.call(this._context,t)}catch(n){if(this.unsubscribe(),a.a.useDeprecatedSynchronousErrorHandling)throw n;Object(u.a)(n)}}__tryOrSetError(e,t,n){if(!a.a.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{t.call(this._context,n)}catch(r){return a.a.useDeprecatedSynchronousErrorHandling?(e.syncErrorValue=r,e.syncErrorThrown=!0,!0):(Object(u.a)(r),!0)}return!1}_unsubscribe(){const{_parentSubscriber:e}=this;this._context=null,this._parentSubscriber=null,e.unsubscribe()}}},"8Y7J":function(e,t,n){"use strict";n.d(t,"g",function(){return Ar}),n.d(t,"mb",function(){return Cr}),n.d(t,"M",function(){return Er}),n.d(t,"ob",function(){return ot}),n.d(t,"sb",function(){return st}),n.d(t,"c",function(){return zn}),n.d(t,"Q",function(){return Yn}),n.d(t,"S",function(){return Qn}),n.d(t,"R",function(){return Gn}),n.d(t,"b",function(){return Xn}),n.d(t,"d",function(){return $n}),n.d(t,"e",function(){return Hn}),n.d(t,"qb",function(){return Wr}),n.d(t,"hb",function(){return mr}),n.d(t,"ub",function(){return yr}),n.d(t,"eb",function(){return di}),n.d(t,"fb",function(){return pi}),n.d(t,"G",function(){return hi}),n.d(t,"H",function(){return fi}),n.d(t,"f",function(){return gi}),n.d(t,"v",function(){return Pt}),n.d(t,"u",function(){return bn}),n.d(t,"Z",function(){return Lt}),n.d(t,"ab",function(){return Ft}),n.d(t,"a",function(){return C}),n.d(t,"h",function(){return S}),n.d(t,"r",function(){return x}),n.d(t,"n",function(){return Xt}),n.d(t,"s",function(){return Gt}),n.d(t,"x",function(){return tn}),n.d(t,"y",function(){return nn}),n.d(t,"D",function(){return Jt}),n.d(t,"P",function(){return en}),n.d(t,"T",function(){return Yt}),n.d(t,"I",function(){return ln}),n.d(t,"kb",function(){return I}),n.d(t,"ib",function(){return et}),n.d(t,"nb",function(){return d}),n.d(t,"pb",function(){return oe}),n.d(t,"A",function(){return dn}),n.d(t,"C",function(){return pe}),n.d(t,"rb",function(){return Q}),n.d(t,"B",function(){return m}),n.d(t,"z",function(){return j}),n.d(t,"O",function(){return B}),n.d(t,"bb",function(){return U}),n.d(t,"cb",function(){return q}),n.d(t,"w",function(){return $}),n.d(t,"N",function(){return ur}),n.d(t,"V",function(){return Ge}),n.d(t,"W",function(){return Ze}),n.d(t,"X",function(){return Xe}),n.d(t,"Y",function(){return Ye}),n.d(t,"i",function(){return tr}),n.d(t,"l",function(){return er}),n.d(t,"m",function(){return nr}),n.d(t,"o",function(){return Ue}),n.d(t,"q",function(){return Be}),n.d(t,"p",function(){return He}),n.d(t,"t",function(){return Ke}),n.d(t,"J",function(){return Oe}),n.d(t,"L",function(){return Ne}),n.d(t,"K",function(){return Ir}),n.d(t,"U",function(){return kr}),n.d(t,"db",function(){return Fr}),n.d(t,"gb",function(){return Mt}),n.d(t,"jb",function(){return Vr}),n.d(t,"j",function(){return A}),n.d(t,"k",function(){return Br}),n.d(t,"E",function(){return ii}),n.d(t,"F",function(){return si}),n.d(t,"lb",function(){return J}),n.d(t,"tb",function(){return li}),n.d(t,"Nb",function(){return te}),n.d(t,"xb",function(){return Zn}),n.d(t,"vb",function(){return je}),n.d(t,"wb",function(){return ze}),n.d(t,"Ab",function(){return Wt}),n.d(t,"Bb",function(){return Nt}),n.d(t,"Cb",function(){return Bt}),n.d(t,"Db",function(){return lt}),n.d(t,"Kb",function(){return k}),n.d(t,"Qb",function(){return L}),n.d(t,"cc",function(){return V}),n.d(t,"Ob",function(){return qn}),n.d(t,"Pb",function(){return Un}),n.d(t,"bc",function(){return Or}),n.d(t,"yb",function(){return hs}),n.d(t,"zb",function(){return ds}),n.d(t,"Eb",function(){return ps}),n.d(t,"Fb",function(){return Ms}),n.d(t,"Gb",function(){return za}),n.d(t,"Hb",function(){return Ri}),n.d(t,"Ib",function(){return io}),n.d(t,"Jb",function(){return fs}),n.d(t,"Lb",function(){return cs}),n.d(t,"Mb",function(){return us}),n.d(t,"Rb",function(){return Ss}),n.d(t,"Sb",function(){return Cs}),n.d(t,"Tb",function(){return Ao}),n.d(t,"Ub",function(){return zs}),n.d(t,"Wb",function(){return so}),n.d(t,"Zb",function(){return oo}),n.d(t,"Vb",function(){return No}),n.d(t,"Xb",function(){return Oo}),n.d(t,"Yb",function(){return Io}),n.d(t,"ac",function(){return Eo}),n.d(t,"dc",function(){return Po}),n.d(t,"ec",function(){return ki}),n.d(t,"fc",function(){return Fo});var r=n("XNiG"),i=n("quSY"),s=n("HDdC"),o=n("VRyK"),a=n("w1tV");function u(e){for(let t in e)if(e[t]===u)return t;throw Error("Could not find renamed property on target object.")}function c(e,t){for(const n in t)t.hasOwnProperty(n)&&!e.hasOwnProperty(n)&&(e[n]=t[n])}u({ngComponentDef:u}),u({ngDirectiveDef:u});const l=u({ngInjectableDef:u}),h=(u({ngInjectorDef:u}),u({ngPipeDef:u}),u({ngModuleDef:u}),u({ngBaseDef:u}));u({__NG_ELEMENT_ID__:u});function d(e){return{providedIn:e.providedIn||null,factory:e.factory,value:void 0}}function p(e){return{factory:e.factory,providers:e.providers||[],imports:e.imports||[]}}function f(e){return e.hasOwnProperty(l)?e[l]:null}class m{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.ngInjectableDef=void 0!==t?d({providedIn:t.providedIn||"root",factory:t.factory}):void 0}toString(){return`InjectionToken ${this._desc}`}}const g="__annotations__",y="__parameters__",v="__prop__metadata__";function _(e,t,n,r,i){const s=b(t);function o(...e){if(this instanceof o)return s.call(this,...e),this;const t=new o(...e);return function(n){return i&&i(n,...e),(n.hasOwnProperty(g)?n[g]:Object.defineProperty(n,g,{value:[]})[g]).push(t),r&&r(n),n}}return n&&(o.prototype=Object.create(n.prototype)),o.prototype.ngMetadataName=e,o.annotationCls=o,o}function b(e){return function(...t){if(e){const n=e(...t);for(const e in n)this[e]=n[e]}}}function w(e,t,n){const r=b(t);function i(...e){if(this instanceof i)return r.apply(this,e),this;const t=new i(...e);return n.annotation=t,n;function n(e,n,r){const i=e.hasOwnProperty(y)?e[y]:Object.defineProperty(e,y,{value:[]})[y];for(;i.length<=r;)i.push(null);return(i[r]=i[r]||[]).push(t),e}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=e,i.annotationCls=i,i}function E(e,t,n,r){const i=b(t);function s(...e){if(this instanceof s)return i.apply(this,e),this;const t=new s(...e);return function(n,i){const s=n.constructor,o=s.hasOwnProperty(v)?s[v]:Object.defineProperty(s,v,{value:{}})[v];o[i]=o.hasOwnProperty(i)&&o[i]||[],o[i].unshift(t),r&&r(n,i,...e)}}return n&&(s.prototype=Object.create(n.prototype)),s.prototype.ngMetadataName=e,s.annotationCls=s,s}const C=new m("AnalyzeForEntryComponents"),S=w("Attribute",e=>({attributeName:e}));class T{}const x=E("ContentChildren",(e,t={})=>Object.assign({selector:e,first:!1,isViewQuery:!1,descendants:!1},t),T);E("ContentChild",(e,t={})=>Object.assign({selector:e,first:!0,isViewQuery:!1,descendants:!0},t),T),E("ViewChildren",(e,t={})=>Object.assign({selector:e,first:!1,isViewQuery:!0,descendants:!0},t),T),E("ViewChild",(e,t)=>Object.assign({selector:e,first:!0,isViewQuery:!0,descendants:!0},t),T);var A={OnPush:0,Default:1};A[A.OnPush]="OnPush",A[A.Default]="Default";var D={CheckOnce:0,Checked:1,CheckAlways:2,Detached:3,Errored:4,Destroyed:5};D[D.CheckOnce]="CheckOnce",D[D.Checked]="Checked",D[D.CheckAlways]="CheckAlways",D[D.Detached]="Detached",D[D.Errored]="Errored",D[D.Destroyed]="Destroyed";new Set;var I={Emulated:0,Native:1,None:2,ShadowDom:3};I[I.Emulated]="Emulated",I[I.Native]="Native",I[I.None]="None",I[I.ShadowDom]="ShadowDom";const N="undefined"!=typeof window&&window,O="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,k="undefined"!=typeof global&&global||N||O,P=Promise.resolve(0);let M=null;function R(){if(!M){const e=k.Symbol;if(e&&e.iterator)M=e.iterator;else{const e=Object.getOwnPropertyNames(Map.prototype);for(let t=0;t<e.length;++t){const n=e[t];"entries"!==n&&"size"!==n&&Map.prototype[n]===Map.prototype.entries&&(M=n)}}}return M}function F(e){"undefined"==typeof Zone?P.then(()=>{e&&e.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",e)}function L(e,t){return e===t||"number"==typeof e&&"number"==typeof t&&isNaN(e)&&isNaN(t)}function V(e){if("string"==typeof e)return e;if(e instanceof Array)return"["+e.map(V).join(", ")+"]";if(null==e)return""+e;if(e.overriddenName)return`${e.overriddenName}`;if(e.name)return`${e.name}`;const t=e.toString();if(null==t)return""+t;const n=t.indexOf("\n");return-1===n?t:t.substring(0,n)}const j=w("Inject",e=>({token:e})),B=w("Optional"),U=w("Self"),q=w("SkipSelf"),$=w("Host");var H={Default:0,Host:1,Self:2,SkipSelf:4,Optional:8};H[H.Default]="Default",H[H.Host]="Host",H[H.Self]="Self",H[H.SkipSelf]="SkipSelf",H[H.Optional]="Optional";let z,W=void 0;function K(e){const t=W;return W=e,t}function Q(e,t=H.Default){return(z||function(e,t=H.Default){if(void 0===W)throw new Error("inject() must be called from an injection context");return null===W?G(e,void 0,t):W.get(e,t&H.Optional?null:void 0,t)})(e,t)}function G(e,t,n){const r=f(e);if(r&&"root"==r.providedIn)return void 0===r.value?r.value=r.factory():r.value;if(n&H.Optional)return null;if(void 0!==t)return t;throw new Error(`Injector: NOT_FOUND [${V(e)}]`)}function X(e){const t=[];for(let n=0;n<e.length;n++){const r=e[n];if(Array.isArray(r)){if(0===r.length)throw new Error("Arguments array must have arguments.");let e=void 0,n=H.Default;for(let t=0;t<r.length;t++){const i=r[t];i instanceof B||"Optional"===i.ngMetadataName?n|=H.Optional:i instanceof q||"SkipSelf"===i.ngMetadataName?n|=H.SkipSelf:i instanceof U||"Self"===i.ngMetadataName?n|=H.Self:e=i instanceof j?i.token:i}t.push(Q(e,n))}else t.push(Q(r))}return t}class Y{constructor(e,t,n){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=n}}Y.prototype;function Z(e,t){const n=te(e),r=te(t);if(n&&r)return function(e,t,n){const r=e[R()](),i=t[R()]();for(;;){const e=r.next(),t=i.next();if(e.done&&t.done)return!0;if(e.done||t.done)return!1;if(!n(e.value,t.value))return!1}}(e,t,Z);{const i=e&&("object"==typeof e||"function"==typeof e),s=t&&("object"==typeof t||"function"==typeof t);return!(n||!i||r||!s)||L(e,t)}}class J{constructor(e){this.wrapped=e}static wrap(e){return new J(e)}static unwrap(e){return J.isWrapped(e)?e.wrapped:e}static isWrapped(e){return e instanceof J}}class ee{constructor(e,t,n){this.previousValue=e,this.currentValue=t,this.firstChange=n}isFirstChange(){return this.firstChange}}function te(e){return!!ne(e)&&(Array.isArray(e)||!(e instanceof Map)&&R()in e)}function ne(e){return null!==e&&("function"==typeof e||"object"==typeof e)}const re=("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(k);function ie(...e){}const se=u({__forward_ref__:u});function oe(e){return e.__forward_ref__=oe,e.toString=function(){return V(this())},e}function ae(e){const t=e;return"function"==typeof t&&t.hasOwnProperty(se)&&t.__forward_ref__===oe?t():e}const ue="__source",ce=new Object,le=ce,he=new m("INJECTOR");class de{get(e,t=ce){if(t===ce)throw new Error(`NullInjectorError: No provider for ${V(e)}!`);return t}}class pe{static create(e,t){return Array.isArray(e)?new Te(e,t):new Te(e.providers,e.parent,e.name||null)}}pe.THROW_IF_NOT_FOUND=ce,pe.NULL=new de,pe.ngInjectableDef=d({providedIn:"any",factory:()=>Q(he)}),pe.__NG_ELEMENT_ID__=(()=>fe());const fe=ie,me=function(e){return e},ge=[],ye=me,ve=function(){return Array.prototype.slice.call(arguments)},_e=u({provide:String,useValue:u}),be="ngTokenPath",we="ngTempTokenPath",Ee=pe.NULL,Ce=/\n/gm,Se="\u0275";class Te{constructor(e,t=Ee,n=null){this.parent=t,this.source=n;const r=this._records=new Map;r.set(pe,{token:pe,fn:me,deps:ge,value:this,useNew:!1}),r.set(he,{token:he,fn:me,deps:ge,value:this,useNew:!1}),function e(t,n){if(n)if((n=ae(n))instanceof Array)for(let r=0;r<n.length;r++)e(t,n[r]);else{if("function"==typeof n)throw Ie("Function/Class not supported",n);if(!n||"object"!=typeof n||!n.provide)throw Ie("Unexpected provider",n);{let e=ae(n.provide);const r=function(e){const t=function(e){let t=ge;const n=e.deps;if(n&&n.length){t=[];for(let e=0;e<n.length;e++){let r=6,i=ae(n[e]);if(i instanceof Array)for(let e=0,t=i;e<t.length;e++){const n=t[e];n instanceof B||n==B?r|=1:n instanceof q||n==q?r&=-3:n instanceof U||n==U?r&=-5:i=n instanceof j?n.token:ae(n)}t.push({token:i,options:r})}}else if(e.useExisting){const n=ae(e.useExisting);t=[{token:n,options:6}]}else if(!(n||_e in e))throw Ie("'deps' required",e);return t}(e);let n=me,r=ge,i=!1,s=ae(e.provide);if(_e in e)r=e.useValue;else if(e.useFactory)n=e.useFactory;else if(e.useExisting);else if(e.useClass)i=!0,n=ae(e.useClass);else{if("function"!=typeof s)throw Ie("StaticProvider does not have [useValue|useFactory|useExisting|useClass] or [provide] is not newable",e);i=!0,n=s}return{deps:t,fn:n,useNew:i,value:r}}(n);if(!0===n.multi){let r=t.get(e);if(r){if(r.fn!==ve)throw xe(e)}else t.set(e,r={token:n.provide,deps:[],useNew:!1,fn:ve,value:ge});e=n,r.deps.push({token:e,options:6})}const i=t.get(e);if(i&&i.fn==ve)throw xe(e);t.set(e,r)}}}(r,e)}get(e,t,n=H.Default){const r=this._records.get(e);try{return Ae(e,r,this._records,this.parent,t,n)}catch(i){const t=i[we];throw e[ue]&&t.unshift(e[ue]),i.message=De("\n"+i.message,t,this.source),i[be]=t,i[we]=null,i}}toString(){const e=[];return this._records.forEach((t,n)=>e.push(V(n))),`StaticInjector[${e.join(", ")}]`}}function xe(e){return Ie("Cannot mix multi providers and regular providers",e)}function Ae(e,t,n,r,i,s){try{return function(e,t,n,r,i,s){let o;if(!t||s&H.SkipSelf)s&H.Self||(o=r.get(e,i,H.Default));else{if((o=t.value)==ye)throw Error(Se+"Circular dependency");if(o===ge){t.value=ye;let e=void 0,i=t.useNew,s=t.fn,a=t.deps,u=ge;if(a.length){u=[];for(let e=0;e<a.length;e++){const t=a[e],i=t.options,s=2&i?n.get(t.token):void 0;u.push(Ae(t.token,s,n,s||4&i?r:Ee,1&i?null:pe.THROW_IF_NOT_FOUND,H.Default))}}t.value=o=i?new s(...u):s.apply(e,u)}}return o}(e,t,n,r,i,s)}catch(o){throw o instanceof Error||(o=new Error(o)),(o[we]=o[we]||[]).unshift(e),t&&t.value==ye&&(t.value=ge),o}}function De(e,t,n=null){e=e&&"\n"===e.charAt(0)&&e.charAt(1)==Se?e.substr(2):e;let r=V(t);if(t instanceof Array)r=t.map(V).join(" -> ");else if("object"==typeof t){let e=[];for(let n in t)if(t.hasOwnProperty(n)){let r=t[n];e.push(n+":"+("string"==typeof r?JSON.stringify(r):V(r)))}r=`{${e.join(", ")}}`}return`StaticInjectorError${n?"("+n+")":""}[${r}]: ${e.replace(Ce,"\n  ")}`}function Ie(e,t){return new Error(De(e,t))}class Ne{}class Oe{}var ke={Important:1,DashCase:2};ke[ke.Important]="Important",ke[ke.DashCase]="DashCase";const Pe=Promise.resolve(null);const Me=Pe;function Re(e,t){return{components:[],scheduler:e||re,clean:Me,playerHandler:t||null,flags:0}}const Fe="__ngOnChanges_";function Le(e){const t=e.declaredInputs,n=e.type.prototype;for(const r in t)if(t.hasOwnProperty(r)){const e=t[r],i=Fe+e;let s=void 0,o=n;for(;!s&&o&&Object.getPrototypeOf(o)!==Object.getPrototypeOf(Object.prototype);)s=Object.getOwnPropertyDescriptor(o,e),o=Object.getPrototypeOf(o);const a=s&&s.get,u=s&&s.set;Object.defineProperty(n,e,{get:a||(u?void 0:function(){return this[i]}),set(e){let t=this[Fe];t||(t={},Object.defineProperty(this,Fe,{value:t,writable:!0}));const n=!this.hasOwnProperty(i),s=t[r];s?s.currentValue=e:t[r]=new ee(this[i],e,n),n?Object.defineProperty(this,i,{value:e,writable:!0}):this[i]=e,u&&u.call(this,e)},configurable:!1})}null!=e.onInit&&(e.onInit=Ve(e.onInit)),e.doCheck=Ve(e.doCheck)}function Ve(e){return function(){const t=this[Fe];null!=t&&(this.ngOnChanges(t),this[Fe]=null),e&&e.apply(this)}}Le.ngInherit=!0;const je=new m("The presence of this token marks an injector as being the root injector.");class Be{}class Ue{}function qe(e){const t=Error(`No component factory found for ${V(e)}. Did you add it to @NgModule.entryComponents?`);return t[$e]=e,t}const $e="ngComponent";class He{}He.NULL=new class{resolveComponentFactory(e){throw qe(e)}};class ze{constructor(e,t,n){this._parent=t,this._ngModule=n,this._factories=new Map;for(let r=0;r<e.length;r++){const t=e[r];this._factories.set(t.componentType,t)}}resolveComponentFactory(e){let t=this._factories.get(e);if(!t&&this._parent&&(t=this._parent.resolveComponentFactory(e)),!t)throw qe(e);return new We(t,this._ngModule)}}class We extends Ue{constructor(e,t){super(),this.factory=e,this.ngModule=t,this.selector=e.selector,this.componentType=e.componentType,this.ngContentSelectors=e.ngContentSelectors,this.inputs=e.inputs,this.outputs=e.outputs}create(e,t,n,r){return this.factory.create(e,t,n,r||this.ngModule)}}class Ke{constructor(e){this.nativeElement=e}}Ke.__NG_ELEMENT_ID__=(()=>Qe(Ke));const Qe=ie;class Ge{}new m("Renderer2Interceptor");class Xe{}var Ye={Important:1,DashCase:2};Ye[Ye.Important]="Important",Ye[Ye.DashCase]="DashCase";class Ze{}Ze.__NG_ELEMENT_ID__=(()=>Je());const Je=ie;class et{constructor(e){this.full=e,this.major=e.split(".")[0],this.minor=e.split(".")[1],this.patch=e.split(".").slice(2).join(".")}}const tt=new et("7.1.1");new m("ROOT_CONTEXT_TOKEN",{providedIn:"root",factory:()=>Re(Q(nt))});const nt=new m("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>re});new m("WRAP_RENDERER_FACTORY2");let rt=!0,it=!1;function st(){return it=!0,rt}function ot(){if(it)throw new Error("Cannot enable prod mode after platform setup.");rt=!1}class at{constructor(e){if(this.defaultDoc=e,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),this.inertBodyElement=this.inertDocument.body,null==this.inertBodyElement){const e=this.inertDocument.createElement("html");this.inertDocument.appendChild(e),this.inertBodyElement=this.inertDocument.createElement("body"),e.appendChild(this.inertBodyElement)}this.inertBodyElement.innerHTML='<svg><g onload="this.parentNode.remove()"></g></svg>',!this.inertBodyElement.querySelector||this.inertBodyElement.querySelector("svg")?(this.inertBodyElement.innerHTML='<svg><p><style><img src="</style><img src=x onerror=alert(1)//">',this.inertBodyElement.querySelector&&this.inertBodyElement.querySelector("svg img")&&function(){try{return!!window.DOMParser}catch(e){return!1}}()?this.getInertBodyElement=this.getInertBodyElement_DOMParser:this.getInertBodyElement=this.getInertBodyElement_InertDocument):this.getInertBodyElement=this.getInertBodyElement_XHR}getInertBodyElement_XHR(e){e="<body><remove></remove>"+e+"</body>";try{e=encodeURI(e)}catch(r){return null}const t=new XMLHttpRequest;t.responseType="document",t.open("GET","data:text/html;charset=utf-8,"+e,!1),t.send(void 0);const n=t.response.body;return n.removeChild(n.firstChild),n}getInertBodyElement_DOMParser(e){e="<body><remove></remove>"+e+"</body>";try{const n=(new window.DOMParser).parseFromString(e,"text/html").body;return n.removeChild(n.firstChild),n}catch(t){return null}}getInertBodyElement_InertDocument(e){const t=this.inertDocument.createElement("template");return"content"in t?(t.innerHTML=e,t):(this.inertBodyElement.innerHTML=e,this.defaultDoc.documentMode&&this.stripCustomNsAttrs(this.inertBodyElement),this.inertBodyElement)}stripCustomNsAttrs(e){const t=e.attributes;for(let r=t.length-1;0<r;r--){const n=t.item(r).name;"xmlns:ns1"!==n&&0!==n.indexOf("ns1:")||e.removeAttribute(n)}let n=e.firstChild;for(;n;)n.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(n),n=n.nextSibling}}const ut=/^(?:(?:https?|mailto|ftp|tel|file):|[^&:\/?#]*(?:[\/?#]|$))/gi,ct=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function lt(e){return(e=String(e)).match(ut)||e.match(ct)?e:(st()&&console.warn(`WARNING: sanitizing unsafe URL value ${e} (see http://g.co/ng/security#xss)`),"unsafe:"+e)}function ht(e){return(e=String(e)).split(",").map(e=>lt(e.trim())).join(", ")}function dt(e){const t={};for(const n of e.split(","))t[n]=!0;return t}function pt(...e){const t={};for(const n of e)for(const e in n)n.hasOwnProperty(e)&&(t[e]=!0);return t}const ft=dt("area,br,col,hr,img,wbr"),mt=dt("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),gt=dt("rp,rt"),yt=pt(gt,mt),vt=pt(mt,dt("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),_t=pt(gt,dt("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),bt=pt(ft,vt,_t,yt),wt=dt("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),Et=dt("srcset"),Ct=dt("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),St=pt(wt,Et,Ct);class Tt{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(e){let t=e.firstChild,n=!0;for(;t;)if(t.nodeType===Node.ELEMENT_NODE?n=this.startElement(t):t.nodeType===Node.TEXT_NODE?this.chars(t.nodeValue):this.sanitizedSomething=!0,n&&t.firstChild)t=t.firstChild;else for(;t;){t.nodeType===Node.ELEMENT_NODE&&this.endElement(t);let e=this.checkClobberedElement(t,t.nextSibling);if(e){t=e;break}t=this.checkClobberedElement(t,t.parentNode)}return this.buf.join("")}startElement(e){const t=e.nodeName.toLowerCase();if(!bt.hasOwnProperty(t))return this.sanitizedSomething=!0,!1;this.buf.push("<"),this.buf.push(t);const n=e.attributes;for(let r=0;r<n.length;r++){const e=n.item(r),t=e.name,i=t.toLowerCase();if(!St.hasOwnProperty(i)){this.sanitizedSomething=!0;continue}let s=e.value;wt[i]&&(s=lt(s)),Et[i]&&(s=ht(s)),this.buf.push(" ",t,'="',Dt(s),'"')}return this.buf.push(">"),!0}endElement(e){const t=e.nodeName.toLowerCase();bt.hasOwnProperty(t)&&!ft.hasOwnProperty(t)&&(this.buf.push("</"),this.buf.push(t),this.buf.push(">"))}chars(e){this.buf.push(Dt(e))}checkClobberedElement(e,t){if(t&&(e.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${e.outerHTML}`);return t}}const xt=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,At=/([^\#-~ |!])/g;function Dt(e){return e.replace(/&/g,"&amp;").replace(xt,function(e){return"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";"}).replace(At,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let It;function Nt(e,t){let n=null;try{It=It||new at(e);let r=t?String(t):"";n=It.getInertBodyElement(r);let i=5,s=r;do{if(0===i)throw new Error("Failed to sanitize html because the input is unstable");i--,r=s,s=n.innerHTML,n=It.getInertBodyElement(r)}while(r!==s);const o=new Tt,a=o.sanitizeChildren(Ot(n)||n);return st()&&o.sanitizedSomething&&console.warn("WARNING: sanitizing HTML stripped some content (see http://g.co/ng/security#xss)."),a}finally{if(n){const e=Ot(n)||n;for(;e.firstChild;)e.removeChild(e.firstChild)}}}function Ot(e){return"content"in e&&function(e){return e.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===e.nodeName}(e)?e.content:null}var kt={Zero:0,One:1,Two:2,Few:3,Many:4,Other:5};kt[kt.Zero]="Zero",kt[kt.One]="One",kt[kt.Two]="Two",kt[kt.Few]="Few",kt[kt.Many]="Many",kt[kt.Other]="Other";class Pt extends r.a{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,t,n){let r,s=e=>null,o=()=>null;e&&"object"==typeof e?(r=this.__isAsync?t=>{setTimeout(()=>e.next(t))}:t=>{e.next(t)},e.error&&(s=this.__isAsync?t=>{setTimeout(()=>e.error(t))}:t=>{e.error(t)}),e.complete&&(o=this.__isAsync?()=>{setTimeout(()=>e.complete())}:()=>{e.complete()})):(r=this.__isAsync?t=>{setTimeout(()=>e(t))}:t=>{e(t)},t&&(s=this.__isAsync?e=>{setTimeout(()=>t(e))}:e=>{t(e)}),n&&(o=this.__isAsync?()=>{setTimeout(()=>n())}:()=>{n()}));const a=super.subscribe(r,s,o);return e instanceof i.a&&e.add(a),a}}class Mt{}Mt.__NG_ELEMENT_ID__=(()=>Rt(Mt,Ke));const Rt=ie;var Ft={NONE:0,HTML:1,STYLE:2,SCRIPT:3,URL:4,RESOURCE_URL:5};Ft[Ft.NONE]="NONE",Ft[Ft.HTML]="HTML",Ft[Ft.STYLE]="STYLE",Ft[Ft.SCRIPT]="SCRIPT",Ft[Ft.URL]="URL",Ft[Ft.RESOURCE_URL]="RESOURCE_URL";class Lt{}const Vt=new RegExp("^([-,.\"'%_!# a-zA-Z0-9]+|(?:(?:matrix|translate|scale|rotate|skew|perspective)(?:X|Y|3d)?|(?:rgb|hsl)a?|(?:repeating-)?(?:linear|radial)-gradient|(?:calc|attr))\\([-0-9.%, #a-zA-Z]+\\))$","g"),jt=/^url\(([^)]+)\)$/;function Bt(e){if(!(e=String(e).trim()))return"";const t=e.match(jt);return t&&lt(t[1])===t[1]||e.match(Vt)&&function(e){let t=!0,n=!0;for(let r=0;r<e.length;r++){const i=e.charAt(r);"'"===i&&n?t=!t:'"'===i&&t&&(n=!n)}return t&&n}(e)?e:(st()&&console.warn(`WARNING: sanitizing unsafe style value ${e} (see http://g.co/ng/security#xss).`),"unsafe")}const Ut=Function;function qt(e){return"function"==typeof e}const $t=/^function\s+\S+\(\)\s*{[\s\S]+\.apply\(this,\s*arguments\)/,Ht=/^class\s+[A-Za-z\d$_]*\s*extends\s+[^{]+{/,zt=/^class\s+[A-Za-z\d$_]*\s*extends\s+[^{]+{[\s\S]*constructor\s*\(/;class Wt{constructor(e){this._reflect=e||k.Reflect}isReflectionEnabled(){return!0}factory(e){return(...t)=>new e(...t)}_zipTypesAndAnnotations(e,t){let n;n=void 0===e?new Array(t.length):new Array(e.length);for(let r=0;r<n.length;r++)void 0===e?n[r]=[]:e[r]!=Object?n[r]=[e[r]]:n[r]=[],t&&null!=t[r]&&(n[r]=n[r].concat(t[r]));return n}_ownParameters(e,t){const n=e.toString();if($t.exec(n)||Ht.exec(n)&&!zt.exec(n))return null;if(e.parameters&&e.parameters!==t.parameters)return e.parameters;const r=e.ctorParameters;if(r&&r!==t.ctorParameters){const e="function"==typeof r?r():r,t=e.map(e=>e&&e.type),n=e.map(e=>e&&Kt(e.decorators));return this._zipTypesAndAnnotations(t,n)}const i=e.hasOwnProperty(y)&&e[y],s=this._reflect&&this._reflect.getOwnMetadata&&this._reflect.getOwnMetadata("design:paramtypes",e);return s||i?this._zipTypesAndAnnotations(s,i):new Array(e.length).fill(void 0)}parameters(e){if(!qt(e))return[];const t=Qt(e);let n=this._ownParameters(e,t);return n||t===Object||(n=this.parameters(t)),n||[]}_ownAnnotations(e,t){if(e.annotations&&e.annotations!==t.annotations){let t=e.annotations;return"function"==typeof t&&t.annotations&&(t=t.annotations),t}return e.decorators&&e.decorators!==t.decorators?Kt(e.decorators):e.hasOwnProperty(g)?e[g]:null}annotations(e){if(!qt(e))return[];const t=Qt(e),n=this._ownAnnotations(e,t)||[];return(t!==Object?this.annotations(t):[]).concat(n)}_ownPropMetadata(e,t){if(e.propMetadata&&e.propMetadata!==t.propMetadata){let t=e.propMetadata;return"function"==typeof t&&t.propMetadata&&(t=t.propMetadata),t}if(e.propDecorators&&e.propDecorators!==t.propDecorators){const t=e.propDecorators,n={};return Object.keys(t).forEach(e=>{n[e]=Kt(t[e])}),n}return e.hasOwnProperty(v)?e[v]:null}propMetadata(e){if(!qt(e))return{};const t=Qt(e),n={};if(t!==Object){const e=this.propMetadata(t);Object.keys(e).forEach(t=>{n[t]=e[t]})}const r=this._ownPropMetadata(e,t);return r&&Object.keys(r).forEach(e=>{const t=[];n.hasOwnProperty(e)&&t.push(...n[e]),t.push(...r[e]),n[e]=t}),n}hasLifecycleHook(e,t){return e instanceof Ut&&t in e.prototype}guards(e){return{}}getter(e){return new Function("o","return o."+e+";")}setter(e){return new Function("o","v","return o."+e+" = v;")}method(e){return new Function("o","args",`if (!o.${e}) throw new Error('"${e}" is undefined');\n        return o.${e}.apply(o, args);`)}importUri(e){return"object"==typeof e&&e.filePath?e.filePath:`./${V(e)}`}resourceUri(e){return`./${V(e)}`}resolveIdentifier(e,t,n,r){return r}resolveEnum(e,t){return e[t]}}function Kt(e){return e?e.map(e=>{return new(0,e.type.annotationCls)(...e.args?e.args:[])}):[]}function Qt(e){const t=e.prototype?Object.getPrototypeOf(e.prototype):null;return(t?t.constructor:null)||Object}const Gt=_("Directive",(e={})=>e,void 0,void 0,(e,t)=>sn(e,t)),Xt=_("Component",(e={})=>Object.assign({changeDetection:A.Default},e),Gt,void 0,(e,t)=>rn(e,t)),Yt=_("Pipe",e=>Object.assign({pure:!0},e),void 0,void 0,(e,t)=>on(e,t)),Zt=e=>(t,n,...r)=>{const i=t.constructor;i.hasOwnProperty(h)||(e=>{const t=e.constructor,n=t.ngBaseDef,r=t.ngBaseDef={inputs:{},outputs:{},declaredInputs:{}};n&&(c(r.inputs,n.inputs),c(r.outputs,n.outputs),c(r.declaredInputs,n.declaredInputs))})(t);const s=i.ngBaseDef;e(s)[n]=r[0]},Jt=E("Input",e=>({bindingPropertyName:e}),void 0,Zt(e=>e.inputs||{})),en=E("Output",e=>({bindingPropertyName:e}),void 0,Zt(e=>e.outputs||{})),tn=E("HostBinding",e=>({hostPropertyName:e})),nn=E("HostListener",(e,t)=>({eventName:e,args:t})),rn=ie,sn=ie,on=ie,an=u({provide:String,useValue:u}),un=[];function cn(e,t){if(!t){const t=(new Wt).parameters(e);return()=>new e(...X(t))}if(an in t){const e=t;return()=>e.useValue}if(t.useExisting){const e=t;return()=>Q(e.useExisting)}if(t.useFactory){const e=t;return()=>e.useFactory(...X(e.deps||un))}if(t.useClass){const n=t;let r=t.deps;if(!r){const t=new Wt;r=t.parameters(e)}return()=>new n.useClass(...X(r))}{let n=t.deps;if(!n){const t=new Wt;n=t.parameters(e)}return()=>new e(...X(n))}}const ln=_("NgModule",e=>e,void 0,void 0,(e,t)=>hn(e,t));const hn=function(e,t){let n=t&&t.imports||[];t&&t.exports&&(n=[...n,t.exports]),e.ngInjectorDef=p({factory:cn(e,{useClass:e}),providers:t&&t.providers,imports:n})};u({provide:String,useValue:u});const dn=_("Injectable",void 0,void 0,void 0,(e,t)=>pn(e,t));const pn=function(e,t){t&&void 0!==t.providedIn&&!f(e)&&(e.ngInjectableDef=d({providedIn:t.providedIn,factory:cn(e,t)}))},fn="ngDebugContext",mn="ngOriginalError",gn="ngErrorLogger";function yn(e){return e[fn]}function vn(e){return e[mn]}function _n(e,...t){e.error(...t)}class bn{constructor(){this._console=console}handleError(e){const t=this._findOriginalError(e),n=this._findContext(e),r=function(e){return e[gn]||_n}(e);r(this._console,"ERROR",e),t&&r(this._console,"ORIGINAL ERROR",t),n&&r(this._console,"ERROR CONTEXT",n)}_findContext(e){return e?yn(e)?yn(e):this._findContext(vn(e)):null}_findOriginalError(e){let t=vn(e);for(;t&&vn(t);)t=vn(t);return t}}function wn(e){if(e.length>1){return" ("+function(e){const t=[];for(let n=0;n<e.length;++n){if(t.indexOf(e[n])>-1)return t.push(e[n]),t;t.push(e[n])}return t}(e.slice().reverse()).map(e=>V(e.token)).join(" -> ")+")"}return""}function En(e,t,n,r){const i=[t],s=n(i),o=r?function(e,t){const n=`${e} caused by: ${t instanceof Error?t.message:t}`,r=Error(n);return r[mn]=t,r}(s,r):Error(s);return o.addKey=Cn,o.keys=i,o.injectors=[e],o.constructResolvingMessage=n,o[mn]=r,o}function Cn(e,t){this.injectors.push(e),this.keys.push(t),this.message=this.constructResolvingMessage(this.keys)}function Sn(e,t){const n=[];for(let r=0,i=t.length;r<i;r++){const e=t[r];e&&0!=e.length?n.push(e.map(V).join(" ")):n.push("?")}return Error("Cannot resolve all parameters for '"+V(e)+"'("+n.join(", ")+"). Make sure that all the parameters are decorated with Inject or have valid type annotations and that '"+V(e)+"' is decorated with Injectable.")}class Tn{constructor(e,t){if(this.token=e,this.id=t,!e)throw new Error("Token must be defined!");this.displayName=V(this.token)}static get(e){return xn.get(ae(e))}static get numberOfKeys(){return xn.numberOfKeys}}const xn=new class{constructor(){this._allKeys=new Map}get(e){if(e instanceof Tn)return e;if(this._allKeys.has(e))return this._allKeys.get(e);const t=new Tn(e,Tn.numberOfKeys);return this._allKeys.set(e,t),t}get numberOfKeys(){return this._allKeys.size}};const An=new class{constructor(e){this.reflectionCapabilities=e}updateCapabilities(e){this.reflectionCapabilities=e}factory(e){return this.reflectionCapabilities.factory(e)}parameters(e){return this.reflectionCapabilities.parameters(e)}annotations(e){return this.reflectionCapabilities.annotations(e)}propMetadata(e){return this.reflectionCapabilities.propMetadata(e)}hasLifecycleHook(e,t){return this.reflectionCapabilities.hasLifecycleHook(e,t)}getter(e){return this.reflectionCapabilities.getter(e)}setter(e){return this.reflectionCapabilities.setter(e)}method(e){return this.reflectionCapabilities.method(e)}importUri(e){return this.reflectionCapabilities.importUri(e)}resourceUri(e){return this.reflectionCapabilities.resourceUri(e)}resolveIdentifier(e,t,n,r){return this.reflectionCapabilities.resolveIdentifier(e,t,n,r)}resolveEnum(e,t){return this.reflectionCapabilities.resolveEnum(e,t)}}(new Wt);class Dn{constructor(e,t,n){this.key=e,this.optional=t,this.visibility=n}static fromKey(e){return new Dn(e,!1,null)}}const In=[];class Nn{constructor(e,t,n){this.key=e,this.resolvedFactories=t,this.multiProvider=n,this.resolvedFactory=this.resolvedFactories[0]}}class On{constructor(e,t){this.factory=e,this.dependencies=t}}function kn(e){let t,n;if(e.useClass){const r=ae(e.useClass);t=An.factory(r),n=Rn(r)}else e.useExisting?(t=(e=>e),n=[Dn.fromKey(Tn.get(e.useExisting))]):e.useFactory?(t=e.useFactory,n=function(e,t){if(t){const n=t.map(e=>[e]);return t.map(t=>Fn(e,t,n))}return Rn(e)}(e.useFactory,e.deps)):(t=(()=>e.useValue),n=In);return new On(t,n)}function Pn(e){return new Nn(Tn.get(e.provide),[kn(e)],e.multi||!1)}function Mn(e){const t=function(e,t){for(let n=0;n<e.length;n++){const r=e[n],i=t.get(r.key.id);if(i){if(r.multiProvider!==i.multiProvider)throw Error(`Cannot mix multi providers and regular providers, got: ${i} ${r}`);if(r.multiProvider)for(let e=0;e<r.resolvedFactories.length;e++)i.resolvedFactories.push(r.resolvedFactories[e]);else t.set(r.key.id,r)}else{let e;e=r.multiProvider?new Nn(r.key,r.resolvedFactories.slice(),r.multiProvider):r,t.set(r.key.id,e)}}return t}(function e(t,n){t.forEach(t=>{if(t instanceof Ut)n.push({provide:t,useClass:t});else if(t&&"object"==typeof t&&void 0!==t.provide)n.push(t);else{if(!(t instanceof Array))throw function(e){return Error(`Invalid provider - only instances of Provider and Type are allowed, got: ${e}`)}(t);e(t,n)}});return n}(e,[]).map(Pn),new Map);return Array.from(t.values())}function Rn(e){const t=An.parameters(e);if(!t)return[];if(t.some(e=>null==e))throw Sn(e,t);return t.map(n=>Fn(e,n,t))}function Fn(e,t,n){let r=null,i=!1;if(!Array.isArray(t))return Ln(t instanceof j?t.token:t,i,null);let s=null;for(let o=0;o<t.length;++o){const e=t[o];e instanceof Ut?r=e:e instanceof j?r=e.token:e instanceof B?i=!0:e instanceof U||e instanceof q?s=e:e instanceof m&&(r=e)}if(null!=(r=ae(r)))return Ln(r,i,s);throw Sn(e,n)}function Ln(e,t,n){return new Dn(Tn.get(e),t,n)}const Vn=new Object;class jn{static resolve(e){return Mn(e)}static resolveAndCreate(e,t){const n=jn.resolve(e);return jn.fromResolvedProviders(n,t)}static fromResolvedProviders(e,t){return new Bn(e,t)}}class Bn{constructor(e,t){this._constructionCounter=0,this._providers=e,this.parent=t||null;const n=e.length;this.keyIds=new Array(n),this.objs=new Array(n);for(let r=0;r<n;r++)this.keyIds[r]=e[r].key.id,this.objs[r]=Vn}get(e,t=le){return this._getByKey(Tn.get(e),null,t)}resolveAndCreateChild(e){const t=jn.resolve(e);return this.createChildFromResolved(t)}createChildFromResolved(e){const t=new Bn(e);return t.parent=this,t}resolveAndInstantiate(e){return this.instantiateResolved(jn.resolve([e])[0])}instantiateResolved(e){return this._instantiateProvider(e)}getProviderAtIndex(e){if(e<0||e>=this._providers.length)throw function(e){return Error(`Index ${e} is out-of-bounds.`)}(e);return this._providers[e]}_new(e){if(this._constructionCounter++>this._getMaxNumberOfObjects())throw t=this,n=e.key,En(t,n,function(e){return`Cannot instantiate cyclic dependency!${wn(e)}`});var t,n;return this._instantiateProvider(e)}_getMaxNumberOfObjects(){return this.objs.length}_instantiateProvider(e){if(e.multiProvider){const t=new Array(e.resolvedFactories.length);for(let n=0;n<e.resolvedFactories.length;++n)t[n]=this._instantiate(e,e.resolvedFactories[n]);return t}return this._instantiate(e,e.resolvedFactories[0])}_instantiate(e,t){const n=t.factory;let r,i;try{r=t.dependencies.map(e=>this._getByReflectiveDependency(e))}catch(u){throw u.addKey&&u.addKey(this,e.key),u}try{i=n(...r)}catch(u){throw s=this,o=u,u.stack,a=e.key,En(s,a,function(e){const t=V(e[0].token);return`${o.message}: Error during instantiation of ${t}!${wn(e)}.`},o)}var s,o,a;return i}_getByReflectiveDependency(e){return this._getByKey(e.key,e.visibility,e.optional?null:le)}_getByKey(e,t,n){return e===Bn.INJECTOR_KEY?this:t instanceof U?this._getByKeySelf(e,n):this._getByKeyDefault(e,n,t)}_getObjByKeyId(e){for(let t=0;t<this.keyIds.length;t++)if(this.keyIds[t]===e)return this.objs[t]===Vn&&(this.objs[t]=this._new(this._providers[t])),this.objs[t];return Vn}_throwOrNull(e,t){if(t!==le)return t;throw function(e,t){return En(e,t,function(e){return`No provider for ${V(e[0].token)}!${wn(e)}`})}(this,e)}_getByKeySelf(e,t){const n=this._getObjByKeyId(e.id);return n!==Vn?n:this._throwOrNull(e,t)}_getByKeyDefault(e,t,n){let r;for(r=n instanceof q?this.parent:this;r instanceof Bn;){const t=r,n=t._getObjByKeyId(e.id);if(n!==Vn)return n;r=t.parent}return null!==r?r.get(e.token,t):this._throwOrNull(e,t)}get displayName(){return`ReflectiveInjector(providers: [${function(e,t){const n=new Array(e._providers.length);for(let r=0;r<e._providers.length;++r)n[r]=t(e.getProviderAtIndex(r));return n}(this,e=>' "'+e.key.displayName+'" ').join(", ")}])`}toString(){return this.displayName}}function Un(e){return!!e&&"function"==typeof e.then}function qn(e){return!!e&&"function"==typeof e.subscribe}Bn.INJECTOR_KEY=Tn.get(pe);const $n=new m("Application Initializer");class Hn{constructor(e){this.appInits=e,this.initialized=!1,this.done=!1,this.donePromise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}runInitializers(){if(this.initialized)return;const e=[],t=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let n=0;n<this.appInits.length;n++){const t=this.appInits[n]();Un(t)&&e.push(t)}Promise.all(e).then(()=>{t()}).catch(e=>{this.reject(e)}),0===e.length&&t(),this.initialized=!0}}Hn.decorators=[{type:dn}],Hn.ctorParameters=(()=>[{type:Array,decorators:[{type:j,args:[$n]},{type:B}]}]);const zn=new m("AppId");const Wn={provide:zn,useFactory:function(){return`${Kn()}${Kn()}${Kn()}`},deps:[]};function Kn(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const Qn=new m("Platform Initializer"),Gn=new m("Platform ID"),Xn=new m("appBootstrapListener"),Yn=new m("Application Packages Root URL");class Zn{log(e){console.log(e)}warn(e){console.warn(e)}}Zn.decorators=[{type:dn}];function Jn(){throw new Error("Runtime compiler is not loaded")}class er{compileModuleSync(e){throw Jn()}compileModuleAsync(e){throw Jn()}compileModuleAndAllComponentsSync(e){throw Jn()}compileModuleAndAllComponentsAsync(e){throw Jn()}clearCache(){}clearCacheFor(e){}getModuleId(e){}}er.decorators=[{type:dn}];const tr=new m("compilerOptions");class nr{}let rr,ir;const sr=function(){const e=k.wtf;return!(!e||!(rr=e.trace)||(ir=rr.events,0))}();const or=sr?function(e,t=null){return ir.createScope(e,t)}:(e,t)=>(function(e,t){return null}),ar=sr?function(e,t){return rr.leaveScope(e,t),t}:(e,t)=>t;class ur{constructor({enableLongStackTrace:e=!1}){if(this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Pt(!1),this.onMicrotaskEmpty=new Pt(!1),this.onStable=new Pt(!1),this.onError=new Pt(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const t=this;var n;t._nesting=0,t._outer=t._inner=Zone.current,Zone.wtfZoneSpec&&(t._inner=t._inner.fork(Zone.wtfZoneSpec)),Zone.TaskTrackingZoneSpec&&(t._inner=t._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(t._inner=t._inner.fork(Zone.longStackTraceZoneSpec)),(n=t)._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(e,t,r,i,s,o)=>{try{return dr(n),e.invokeTask(r,i,s,o)}finally{pr(n)}},onInvoke:(e,t,r,i,s,o,a)=>{try{return dr(n),e.invoke(r,i,s,o,a)}finally{pr(n)}},onHasTask:(e,t,r,i)=>{e.hasTask(r,i),t===r&&("microTask"==i.change?(n.hasPendingMicrotasks=i.microTask,hr(n)):"macroTask"==i.change&&(n.hasPendingMacrotasks=i.macroTask))},onHandleError:(e,t,r,i)=>(e.handleError(r,i),n.runOutsideAngular(()=>n.onError.emit(i)),!1)})}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!ur.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(ur.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(e,t,n){return this._inner.run(e,t,n)}runTask(e,t,n,r){const i=this._inner,s=i.scheduleEventTask("NgZoneEvent: "+r,e,lr,cr,cr);try{return i.runTask(s,t,n)}finally{i.cancelTask(s)}}runGuarded(e,t,n){return this._inner.runGuarded(e,t,n)}runOutsideAngular(e){return this._outer.run(e)}}function cr(){}const lr={};function hr(e){if(0==e._nesting&&!e.hasPendingMicrotasks&&!e.isStable)try{e._nesting++,e.onMicrotaskEmpty.emit(null)}finally{if(e._nesting--,!e.hasPendingMicrotasks)try{e.runOutsideAngular(()=>e.onStable.emit(null))}finally{e.isStable=!0}}}function dr(e){e._nesting++,e.isStable&&(e.isStable=!1,e.onUnstable.emit(null))}function pr(e){e._nesting--,hr(e)}class fr{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Pt,this.onMicrotaskEmpty=new Pt,this.onStable=new Pt,this.onError=new Pt}run(e){return e()}runGuarded(e){return e()}runOutsideAngular(e){return e()}runTask(e){return e()}}class mr{constructor(e){this._ngZone=e,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),e.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{ur.assertNotInAngularZone(),F(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())F(()=>{for(;0!==this._callbacks.length;){let e=this._callbacks.pop();clearTimeout(e.timeoutId),e.doneCb(this._didWork)}this._didWork=!1});else{let e=this.getPendingTasks();this._callbacks=this._callbacks.filter(t=>!t.updateCb||!t.updateCb(e)||(clearTimeout(t.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(e=>({source:e.source,creationLocation:e.creationLocation,data:e.data})):[]}addCallback(e,t,n){let r=-1;t&&t>0&&(r=setTimeout(()=>{this._callbacks=this._callbacks.filter(e=>e.timeoutId!==r),e(this._didWork,this.getPendingTasks())},t)),this._callbacks.push({doneCb:e,timeoutId:r,updateCb:n})}whenStable(e,t,n){if(n&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/dist/task-tracking.js" loaded?');this.addCallback(e,t,n),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(e,t,n){return[]}}mr.decorators=[{type:dn}],mr.ctorParameters=(()=>[{type:ur}]);class gr{constructor(){this._applications=new Map,_r.addToWindow(this)}registerApplication(e,t){this._applications.set(e,t)}unregisterApplication(e){this._applications.delete(e)}unregisterAllApplications(){this._applications.clear()}getTestability(e){return this._applications.get(e)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(e,t=!0){return _r.findTestabilityInTree(this,e,t)}}gr.decorators=[{type:dn}],gr.ctorParameters=(()=>[]);function yr(e){_r=e}let vr,_r=new class{addToWindow(e){}findTestabilityInTree(e,t,n){return null}},br=function(e,t,n){return e.get(nr).createCompiler([t]).compileModuleAsync(n)};const wr=new m("AllowMultipleToken");class Er{constructor(e,t){this.name=e,this.token=t}}function Cr(e,t,n=[]){const r=`Platform: ${t}`,i=new m(r);return(t=[])=>{let s=Sr();if(!s||s.injector.get(wr,!1))if(e)e(n.concat(t).concat({provide:i,useValue:!0}));else{const e=n.concat(t).concat({provide:i,useValue:!0});!function(e){if(vr&&!vr.destroyed&&!vr.injector.get(wr,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");vr=e.get(Tr);const t=e.get(Qn,null);t&&t.forEach(e=>e())}(pe.create({providers:e,name:r}))}return function(e){const t=Sr();if(!t)throw new Error("No platform exists!");if(!t.injector.get(e,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return t}(i)}}function Sr(){return vr&&!vr.destroyed?vr:null}class Tr{constructor(e){this._injector=e,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(e,t){const n=function(e){let t;t="noop"===e?new fr:("zone.js"===e?void 0:e)||new ur({enableLongStackTrace:st()});return t}(t?t.ngZone:void 0),r=[{provide:ur,useValue:n}];return n.run(()=>{const t=pe.create({providers:r,parent:this.injector,name:e.moduleType.name}),i=e.create(t),s=i.injector.get(bn,null);if(!s)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return i.onDestroy(()=>Dr(this._modules,i)),n.runOutsideAngular(()=>n.onError.subscribe({next:e=>{s.handleError(e)}})),function(e,t,n){try{const i=n();return Un(i)?i.catch(n=>{throw t.runOutsideAngular(()=>e.handleError(n)),n}):i}catch(r){throw t.runOutsideAngular(()=>e.handleError(r)),r}}(s,n,()=>{const e=i.injector.get(Hn);return e.runInitializers(),e.donePromise.then(()=>(this._moduleDoBootstrap(i),i))})})}bootstrapModule(e,t=[]){const n=xr({},t);return br(this.injector,n,e).then(e=>this.bootstrapModuleFactory(e,n))}_moduleDoBootstrap(e){const t=e.injector.get(Ar);if(e._bootstrapComponents.length>0)e._bootstrapComponents.forEach(e=>t.bootstrap(e));else{if(!e.instance.ngDoBootstrap)throw new Error(`The module ${V(e.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. `+"Please define one of these.");e.instance.ngDoBootstrap(t)}this._modules.push(e)}onDestroy(e){this._destroyListeners.push(e)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(e=>e.destroy()),this._destroyListeners.forEach(e=>e()),this._destroyed=!0}get destroyed(){return this._destroyed}}function xr(e,t){return e=Array.isArray(t)?t.reduce(xr,e):Object.assign({},e,t)}Tr.decorators=[{type:dn}],Tr.ctorParameters=(()=>[{type:pe}]);class Ar{constructor(e,t,n,r,i,u){this._zone=e,this._console=t,this._injector=n,this._exceptionHandler=r,this._componentFactoryResolver=i,this._initStatus=u,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._enforceNoNewChanges=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._enforceNoNewChanges=st(),this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const c=new s.a(e=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{e.next(this._stable),e.complete()})}),l=new s.a(e=>{let t;this._zone.runOutsideAngular(()=>{t=this._zone.onStable.subscribe(()=>{ur.assertNotInAngularZone(),F(()=>{this._stable||this._zone.hasPendingMacrotasks||this._zone.hasPendingMicrotasks||(this._stable=!0,e.next(!0))})})});const n=this._zone.onUnstable.subscribe(()=>{ur.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{e.next(!1)}))});return()=>{t.unsubscribe(),n.unsubscribe()}});this.isStable=Object(o.a)(c,l.pipe(Object(a.a)()))}bootstrap(e,t){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let n;n=e instanceof Ue?e:this._componentFactoryResolver.resolveComponentFactory(e),this.componentTypes.push(n.componentType);const r=n instanceof We?null:this._injector.get(Ne),i=t||n.selector,s=n.create(pe.NULL,[],i,r);s.onDestroy(()=>{this._unloadComponent(s)});const o=s.injector.get(mr,null);return o&&s.injector.get(gr).registerApplication(s.location.nativeElement,o),this._loadComponent(s),st()&&this._console.log("Angular is running in the development mode. Call enableProdMode() to enable the production mode."),s}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");const e=Ar._tickScope();try{this._runningTick=!0,this._views.forEach(e=>e.detectChanges()),this._enforceNoNewChanges&&this._views.forEach(e=>e.checkNoChanges())}catch(t){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(t))}finally{this._runningTick=!1,ar(e)}}attachView(e){const t=e;this._views.push(t),t.attachToAppRef(this)}detachView(e){const t=e;Dr(this._views,t),t.detachFromAppRef()}_loadComponent(e){this.attachView(e.hostView),this.tick(),this.components.push(e),this._injector.get(Xn,[]).concat(this._bootstrapListeners).forEach(t=>t(e))}_unloadComponent(e){this.detachView(e.hostView),Dr(this.components,e)}ngOnDestroy(){this._views.slice().forEach(e=>e.destroy())}get viewCount(){return this._views.length}}function Dr(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}Ar._tickScope=or("ApplicationRef#tick()"),Ar.decorators=[{type:dn}],Ar.ctorParameters=(()=>[{type:ur},{type:Zn},{type:pe},{type:bn},{type:He},{type:Hn}]);class Ir{}let Nr=new Map;function Or(e,t){const n=Nr.get(e);if(n)throw new Error(`Duplicate module registered for ${e} - ${n.moduleType.name} vs ${t.moduleType.name}`);Nr.set(e,t)}class kr{constructor(){this.dirty=!0,this._results=[],this.changes=new Pt,this.length=0}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}[R()](){return this._results[R()]()}toString(){return this._results.toString()}reset(e){this._results=function e(t){return t.reduce((t,n)=>{const r=Array.isArray(n)?e(n):n;return t.concat(r)},[])}(e),this.dirty=!1,this.length=this._results.length,this.last=this._results[this.length-1],this.first=this._results[0]}notifyOnChanges(){this.changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}const Pr="#",Mr="NgFactory";const Rr={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"};class Fr{constructor(e,t){this._compiler=e,this._config=t||Rr}load(e){return this._compiler instanceof er?this.loadFactory(e):this.loadAndCompile(e)}loadAndCompile(e){let[t,r]=e.split(Pr);return void 0===r&&(r="default"),n("crnd")(t).then(e=>e[r]).then(e=>Lr(e,t,r)).then(e=>this._compiler.compileModuleAsync(e))}loadFactory(e){let[t,r]=e.split(Pr),i=Mr;return void 0===r&&(r="default",i=""),n("crnd")(this._config.factoryPathPrefix+t+this._config.factoryPathSuffix).then(e=>e[r+i]).then(e=>Lr(e,t,r))}}function Lr(e,t,n){if(!e)throw new Error(`Cannot find '${n}' in '${t}'`);return e}Fr.decorators=[{type:dn}],Fr.ctorParameters=(()=>[{type:er},{type:class{},decorators:[{type:B}]}]);class Vr{}Vr.__NG_ELEMENT_ID__=(()=>jr(Vr,Ke));const jr=ie;class Br{}Br.__NG_ELEMENT_ID__=(()=>Ur());const Ur=(...e)=>{};class qr{constructor(e,t){this.name=e,this.callback=t}}class $r{constructor(e,t,n){this.nativeNode=e,this._debugContext=n,this.listeners=[],this.parent=null,t&&t instanceof Hr&&t.addChild(this)}get injector(){return this._debugContext.injector}get componentInstance(){return this._debugContext.component}get context(){return this._debugContext.context}get references(){return this._debugContext.references}get providerTokens(){return this._debugContext.providerTokens}}class Hr extends $r{constructor(e,t,n){super(e,t,n),this.properties={},this.attributes={},this.classes={},this.styles={},this.childNodes=[],this.nativeElement=e}addChild(e){e&&(this.childNodes.push(e),e.parent=this)}removeChild(e){const t=this.childNodes.indexOf(e);-1!==t&&(e.parent=null,this.childNodes.splice(t,1))}insertChildrenAfter(e,t){const n=this.childNodes.indexOf(e);-1!==n&&(this.childNodes.splice(n+1,0,...t),t.forEach(e=>{e.parent&&e.parent.removeChild(e),e.parent=this}))}insertBefore(e,t){const n=this.childNodes.indexOf(e);-1===n?this.addChild(t):(t.parent&&t.parent.removeChild(t),t.parent=this,this.childNodes.splice(n,0,t))}query(e){return this.queryAll(e)[0]||null}queryAll(e){const t=[];return function e(t,n,r){t.childNodes.forEach(t=>{t instanceof Hr&&(n(t)&&r.push(t),e(t,n,r))})}(this,e,t),t}queryAllNodes(e){const t=[];return function e(t,n,r){t instanceof Hr&&t.childNodes.forEach(t=>{n(t)&&r.push(t),t instanceof Hr&&e(t,n,r)})}(this,e,t),t}get children(){return this.childNodes.filter(e=>e instanceof Hr)}triggerEventHandler(e,t){this.listeners.forEach(n=>{n.name==e&&n.callback(t)})}}const zr=new Map;function Wr(e){return zr.get(e)||null}function Kr(e){zr.set(e.nativeNode,e)}class Qr{constructor(){}supports(e){return te(e)}create(e){return new Xr(e)}}const Gr=(e,t)=>t;class Xr{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||Gr}forEachItem(e){let t;for(t=this._itHead;null!==t;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,n=this._removalsHead,r=0,i=null;for(;t||n;){const s=!n||t&&t.currentIndex<ei(n,r,i)?t:n,o=ei(s,r,i),a=s.currentIndex;if(s===n)r--,n=n._nextRemoved;else if(t=t._next,null==s.previousIndex)r++;else{i||(i=[]);const e=o-r,t=a-r;if(e!=t){for(let n=0;n<e;n++){const r=n<i.length?i[n]:i[n]=0,s=r+n;t<=s&&s<e&&(i[n]=r+1)}i[s.previousIndex]=t-e}}o!==a&&e(s,o,a)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;null!==t;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;null!==t;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;null!==t;t=t._nextIdentityChange)e(t)}diff(e){if(null==e&&(e=[]),!te(e))throw new Error(`Error trying to diff '${V(e)}'. Only arrays and iterables are allowed`);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t,n,r,i=this._itHead,s=!1;if(Array.isArray(e)){this.length=e.length;for(let t=0;t<this.length;t++)n=e[t],r=this._trackByFn(t,n),null!==i&&L(i.trackById,r)?(s&&(i=this._verifyReinsertion(i,n,r,t)),L(i.item,n)||this._addIdentityChange(i,n)):(i=this._mismatch(i,n,r,t),s=!0),i=i._next}else t=0,function(e,t){if(Array.isArray(e))for(let n=0;n<e.length;n++)t(e[n]);else{const n=e[R()]();let r;for(;!(r=n.next()).done;)t(r.value)}}(e,e=>{r=this._trackByFn(t,e),null!==i&&L(i.trackById,r)?(s&&(i=this._verifyReinsertion(i,e,r,t)),L(i.item,e)||this._addIdentityChange(i,e)):(i=this._mismatch(i,e,r,t),s=!0),i=i._next,t++}),this.length=t;return this._truncate(i),this.collection=e,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let e,t;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=t)e.previousIndex=e.currentIndex,t=e._nextMoved;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,n,r){let i;return null===e?i=this._itTail:(i=e._prev,this._remove(e)),null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(n,r))?(L(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,i,r)):null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null))?(L(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,i,r)):e=this._addAfter(new Yr(t,n),i,r),e}_verifyReinsertion(e,t,n,r){let i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null);return null!==i?e=this._reinsertAfter(i,e._prev,r):e.currentIndex!=r&&(e.currentIndex=r,this._addToMoves(e,r)),e}_truncate(e){for(;null!==e;){const t=e._next;this._addToRemovals(this._unlink(e)),e=t}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,n){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);const r=e._prevRemoved,i=e._nextRemoved;return null===r?this._removalsHead=i:r._nextRemoved=i,null===i?this._removalsTail=r:i._prevRemoved=r,this._insertAfter(e,t,n),this._addToMoves(e,n),e}_moveAfter(e,t,n){return this._unlink(e),this._insertAfter(e,t,n),this._addToMoves(e,n),e}_addAfter(e,t,n){return this._insertAfter(e,t,n),null===this._additionsTail?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,t,n){const r=null===t?this._itHead:t._next;return e._next=r,e._prev=t,null===r?this._itTail=e:r._prev=e,null===t?this._itHead=e:t._next=e,null===this._linkedRecords&&(this._linkedRecords=new Jr),this._linkedRecords.put(e),e.currentIndex=n,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);const t=e._prev,n=e._next;return null===t?this._itHead=n:t._next=n,null===n?this._itTail=t:n._prev=t,e}_addToMoves(e,t){return e.previousIndex===t?e:(null===this._movesTail?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e,e)}_addToRemovals(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Jr),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,null===this._identityChangesTail?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}}class Yr{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class Zr{constructor(){this._head=null,this._tail=null}add(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let n;for(n=this._head;null!==n;n=n._nextDup)if((null===t||t<=n.currentIndex)&&L(n.trackById,e))return n;return null}remove(e){const t=e._prevDup,n=e._nextDup;return null===t?this._head=n:t._nextDup=n,null===n?this._tail=t:n._prevDup=t,null===this._head}}class Jr{constructor(){this.map=new Map}put(e){const t=e.trackById;let n=this.map.get(t);n||(n=new Zr,this.map.set(t,n)),n.add(e)}get(e,t){const n=e,r=this.map.get(n);return r?r.get(e,t):null}remove(e){const t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function ei(e,t,n){const r=e.previousIndex;if(null===r)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+t+i}class ti{constructor(){}supports(e){return e instanceof Map||ne(e)}create(){return new ni}}class ni{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(e){let t;for(t=this._mapHead;null!==t;t=t._next)e(t)}forEachPreviousItem(e){let t;for(t=this._previousMapHead;null!==t;t=t._nextPrevious)e(t)}forEachChangedItem(e){let t;for(t=this._changesHead;null!==t;t=t._nextChanged)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}diff(e){if(e){if(!(e instanceof Map||ne(e)))throw new Error(`Error trying to diff '${V(e)}'. Only maps and objects are allowed`)}else e=new Map;return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._mapHead;if(this._appendAfter=null,this._forEach(e,(e,n)=>{if(t&&t.key===n)this._maybeAddToChanges(t,e),this._appendAfter=t,t=t._next;else{const r=this._getOrCreateRecordForKey(n,e);t=this._insertBeforeOrAppend(t,r)}}),t){t._prev&&(t._prev._next=null),this._removalsHead=t;for(let e=t;null!==e;e=e._nextRemoved)e===this._mapHead&&(this._mapHead=null),this._records.delete(e.key),e._nextRemoved=e._next,e.previousValue=e.currentValue,e.currentValue=null,e._prev=null,e._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(e,t){if(e){const n=e._prev;return t._next=e,t._prev=n,e._prev=t,n&&(n._next=t),e===this._mapHead&&(this._mapHead=t),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=t,t._prev=this._appendAfter):this._mapHead=t,this._appendAfter=t,null}_getOrCreateRecordForKey(e,t){if(this._records.has(e)){const n=this._records.get(e);this._maybeAddToChanges(n,t);const r=n._prev,i=n._next;return r&&(r._next=i),i&&(i._prev=r),n._next=null,n._prev=null,n}const n=new ri(e);return this._records.set(e,n),n.currentValue=t,this._addToAdditions(n),n}_reset(){if(this.isDirty){let e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;null!==e;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;null!=e;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(e,t){L(t,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=t,this._addToChanges(e))}_addToAdditions(e){null===this._additionsHead?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}_addToChanges(e){null===this._changesHead?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}_forEach(e,t){e instanceof Map?e.forEach(t):Object.keys(e).forEach(n=>t(e[n],n))}}class ri{constructor(e){this.key=e,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}class ii{constructor(e){this.factories=e}static create(e,t){if(null!=t){const n=t.factories.slice();e=e.concat(n)}return new ii(e)}static extend(e){return{provide:ii,useFactory:t=>{if(!t)throw new Error("Cannot extend IterableDiffers without a parent injector");return ii.create(e,t)},deps:[[ii,new q,new B]]}}find(e){const t=this.factories.find(t=>t.supports(e));if(null!=t)return t;throw new Error(`Cannot find a differ supporting object '${e}' of type '${n=e,n.name||typeof n}'`);var n}}ii.ngInjectableDef=d({providedIn:"root",factory:()=>new ii([new Qr])});class si{constructor(e){this.factories=e}static create(e,t){if(t){const n=t.factories.slice();e=e.concat(n)}return new si(e)}static extend(e){return{provide:si,useFactory:t=>{if(!t)throw new Error("Cannot extend KeyValueDiffers without a parent injector");return si.create(e,t)},deps:[[si,new q,new B]]}}find(e){const t=this.factories.find(t=>t.supports(e));if(t)return t;throw new Error(`Cannot find a differ supporting object '${e}'`)}}si.ngInjectableDef=d({providedIn:"root",factory:()=>new si([new ti])});const oi=[new ti],ai=[new Qr],ui=new ii(ai),ci=new si(oi),li=Cr(null,"core",[{provide:Gn,useValue:"unknown"},{provide:Tr,deps:[pe]},{provide:gr,deps:[]},{provide:Zn,deps:[]}]),hi=new m("LocaleId"),di=new m("Translations"),pi=new m("TranslationsFormat");var fi={Error:0,Warning:1,Ignore:2};fi[fi.Error]="Error",fi[fi.Warning]="Warning",fi[fi.Ignore]="Ignore";const mi=[{provide:Ar,useClass:Ar,deps:[ur,Zn,pe,bn,He,Hn]},{provide:Hn,useClass:Hn,deps:[[new B,$n]]},{provide:er,useClass:er,deps:[]},Wn,{provide:ii,useFactory:function(){return ui},deps:[]},{provide:si,useFactory:function(){return ci},deps:[]},{provide:hi,useFactory:function(e){return e||"en-US"},deps:[[new j(hi),new B,new q]]}];class gi{constructor(e){}}gi.decorators=[{type:ln,args:[{providers:mi}]}],gi.ctorParameters=(()=>[{type:Ar}]);const yi=!1;function vi(e,t,n){const r=e.state,i=1792&r;return i===t?(e.state=-1793&r|n,e.initIndex=-1,!0):i===n}function _i(e,t,n){return(1792&e.state)===t&&e.initIndex<=n&&(e.initIndex=n+1,!0)}function bi(e,t){return e.nodes[t]}function wi(e,t){return e.nodes[t]}function Ei(e,t){return e.nodes[t]}function Ci(e,t){return e.nodes[t]}function Si(e,t){return e.nodes[t]}const Ti={setCurrentNode:void 0,createRootView:void 0,createEmbeddedView:void 0,createComponentView:void 0,createNgModuleRef:void 0,overrideProvider:void 0,overrideComponentView:void 0,clearOverrides:void 0,checkAndUpdateView:void 0,checkNoChangesView:void 0,destroyView:void 0,resolveDep:void 0,createDebugContext:void 0,handleEvent:void 0,updateDirectives:void 0,updateRenderer:void 0,dirtyParentQueries:void 0};function xi(e,t,n,r){let i=`ExpressionChangedAfterItHasBeenCheckedError: Expression has changed after it was checked. Previous value: '${t}'. Current value: '${n}'.`;return r&&(i+=" It seems like the view has been created after its parent and its children have been dirty checked. Has it been created in a change detection hook ?"),function(e,t){const n=new Error(e);return Ai(n,t),n}(i,e)}function Ai(e,t){e[fn]=t,e[gn]=t.logError.bind(t)}function Di(e){return new Error(`ViewDestroyedError: Attempt to use a destroyed view: ${e}`)}const Ii=()=>{},Ni=new Map;function Oi(e){let t=Ni.get(e);return t||(t=V(e)+"_"+Ni.size,Ni.set(e,t)),t}function ki(e,t,n,r){if(J.isWrapped(r)){r=J.unwrap(r);const i=e.def.nodes[t].bindingIndex+n,s=J.unwrap(e.oldValues[i]);e.oldValues[i]=new J(s)}return r}const Pi="$$undefined",Mi="$$empty";function Ri(e){return{id:Pi,styles:e.styles,encapsulation:e.encapsulation,data:e.data}}let Fi=0;function Li(e,t,n,r){const i=e.oldValues;return!(!(2&e.state)&&L(i[t.bindingIndex+n],r))}function Vi(e,t,n,r){return!!Li(e,t,n,r)&&(e.oldValues[t.bindingIndex+n]=r,!0)}function ji(e,t,n,r){const i=e.oldValues[t.bindingIndex+n];if(1&e.state||!Z(i,r)){const s=t.bindings[n].name;throw xi(Ti.createDebugContext(e,t.nodeIndex),`${s}: ${i}`,`${s}: ${r}`,0!=(1&e.state))}}function Bi(e){let t=e;for(;t;)2&t.def.flags&&(t.state|=8),t=t.viewContainerParent||t.parent}function Ui(e,t){let n=e;for(;n&&n!==t;)n.state|=64,n=n.viewContainerParent||n.parent}function qi(e,t,n,r){try{return Bi(33554432&e.def.nodes[t].flags?wi(e,t).componentView:e),Ti.handleEvent(e,t,n,r)}catch(i){e.root.errorHandler.handleError(i)}}function $i(e){if(e.parent){return wi(e.parent,e.parentNodeDef.nodeIndex)}return null}function Hi(e){return e.parent?e.parentNodeDef.parent:null}function zi(e,t){switch(201347067&t.flags){case 1:return wi(e,t.nodeIndex).renderElement;case 2:return bi(e,t.nodeIndex).renderText}}function Wi(e){return!!e.parent&&!!(32768&e.parentNodeDef.flags)}function Ki(e){return!(!e.parent||32768&e.parentNodeDef.flags)}function Qi(e){return 1<<e%32}function Gi(e){const t={};let n=0;const r={};return e&&e.forEach(([e,i])=>{"number"==typeof e?(t[e]=i,n|=Qi(e)):r[e]=i}),{matchedQueries:t,references:r,matchedQueryIds:n}}function Xi(e,t){return e.map(e=>{let n,r;return Array.isArray(e)?[r,n]=e:(r=0,n=e),n&&("function"==typeof n||"object"==typeof n)&&t&&Object.defineProperty(n,ue,{value:t,configurable:!0}),{flags:r,token:n,tokenKey:Oi(n)}})}function Yi(e,t,n){let r=n.renderParent;return r?0==(1&r.flags)||0==(33554432&r.flags)||r.element.componentRendererType&&r.element.componentRendererType.encapsulation===I.Native?wi(e,n.renderParent.nodeIndex).renderElement:void 0:t}const Zi=new WeakMap;function Ji(e){let t=Zi.get(e);return t||((t=e(()=>Ii)).factory=e,Zi.set(e,t)),t}function es(e,t,n,r,i){3===t&&(n=e.renderer.parentNode(zi(e,e.def.lastRenderRootNode))),ts(e,t,0,e.def.nodes.length-1,n,r,i)}function ts(e,t,n,r,i,s,o){for(let a=n;a<=r;a++){const n=e.def.nodes[a];11&n.flags&&rs(e,n,t,i,s,o),a+=n.childCount}}function ns(e,t,n,r,i,s){let o=e;for(;o&&!Wi(o);)o=o.parent;const a=o.parent,u=Hi(o),c=u.nodeIndex+1,l=u.nodeIndex+u.childCount;for(let h=c;h<=l;h++){const e=a.def.nodes[h];e.ngContentIndex===t&&rs(a,e,n,r,i,s),h+=e.childCount}if(!a.parent){const o=e.root.projectableNodes[t];if(o)for(let t=0;t<o.length;t++)is(e,o[t],n,r,i,s)}}function rs(e,t,n,r,i,s){if(8&t.flags)ns(e,t.ngContent.index,n,r,i,s);else{const o=zi(e,t);if(3===n&&33554432&t.flags&&48&t.bindingFlags){if(16&t.bindingFlags&&is(e,o,n,r,i,s),32&t.bindingFlags){is(wi(e,t.nodeIndex).componentView,o,n,r,i,s)}}else is(e,o,n,r,i,s);if(16777216&t.flags){const o=wi(e,t.nodeIndex).viewContainer._embeddedViews;for(let e=0;e<o.length;e++)es(o[e],n,r,i,s)}1&t.flags&&!t.element.name&&ts(e,n,t.nodeIndex+1,t.nodeIndex+t.childCount,r,i,s)}}function is(e,t,n,r,i,s){const o=e.renderer;switch(n){case 1:o.appendChild(r,t);break;case 2:o.insertBefore(r,t,i);break;case 3:o.removeChild(r,t);break;case 0:s.push(t)}}const ss=/^:([^:]+):(.+)$/;function os(e){if(":"===e[0]){const t=e.match(ss);return[t[1],t[2]]}return["",e]}function as(e){let t=0;for(let n=0;n<e.length;n++)t|=e[n].flags;return t}function us(e,t){let n="";for(let r=0;r<2*e;r+=2)n=n+t[r]+ls(t[r+1]);return n+t[2*e]}function cs(e,t,n,r,i,s,o,a,u,c,l,h,d,p,f,m,g,y,v,_){switch(e){case 1:return t+ls(n)+r;case 2:return t+ls(n)+r+ls(i)+s;case 3:return t+ls(n)+r+ls(i)+s+ls(o)+a;case 4:return t+ls(n)+r+ls(i)+s+ls(o)+a+ls(u)+c;case 5:return t+ls(n)+r+ls(i)+s+ls(o)+a+ls(u)+c+ls(l)+h;case 6:return t+ls(n)+r+ls(i)+s+ls(o)+a+ls(u)+c+ls(l)+h+ls(d)+p;case 7:return t+ls(n)+r+ls(i)+s+ls(o)+a+ls(u)+c+ls(l)+h+ls(d)+p+ls(f)+m;case 8:return t+ls(n)+r+ls(i)+s+ls(o)+a+ls(u)+c+ls(l)+h+ls(d)+p+ls(f)+m+ls(g)+y;case 9:return t+ls(n)+r+ls(i)+s+ls(o)+a+ls(u)+c+ls(l)+h+ls(d)+p+ls(f)+m+ls(g)+y+ls(v)+_;default:throw new Error("Does not support more than 9 expressions")}}function ls(e){return null!=e?e.toString():""}const hs=[],ds={};function ps(e,t,n,r,i,s){e|=1;const{matchedQueries:o,references:a,matchedQueryIds:u}=Gi(t);return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,flags:e,checkIndex:-1,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:o,matchedQueryIds:u,references:a,ngContentIndex:n,childCount:r,bindings:[],bindingFlags:0,outputs:[],element:{ns:null,name:null,attrs:null,template:s?Ji(s):null,componentProvider:null,componentView:null,componentRendererType:null,publicProviders:null,allProviders:null,handleEvent:i||Ii},provider:null,text:null,query:null,ngContent:null}}function fs(e,t,n,r,i,s,o=[],a,u,c,l,h){c||(c=Ii);const{matchedQueries:d,references:p,matchedQueryIds:f}=Gi(n);let m=null,g=null;s&&([m,g]=os(s)),a=a||[];const y=new Array(a.length);for(let b=0;b<a.length;b++){const[e,t,n]=a[b],[r,i]=os(t);let s=void 0,o=void 0;switch(15&e){case 4:o=n;break;case 1:case 8:s=n}y[b]={flags:e,ns:r,name:i,nonMinifiedName:i,securityContext:s,suffix:o}}u=u||[];const v=new Array(u.length);for(let b=0;b<u.length;b++){const[e,t]=u[b];v[b]={type:0,target:e,eventName:t,propName:null}}const _=(o=o||[]).map(([e,t])=>{const[n,r]=os(e);return[n,r,t]});return h=function(e){if(e&&e.id===Pi){const t=null!=e.encapsulation&&e.encapsulation!==I.None||e.styles.length||Object.keys(e.data).length;e.id=t?`c${Fi++}`:Mi}return e&&e.id===Mi&&(e=null),e||null}(h),l&&(t|=33554432),{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:e,flags:t|=1,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:d,matchedQueryIds:f,references:p,ngContentIndex:r,childCount:i,bindings:y,bindingFlags:as(y),outputs:v,element:{ns:m,name:g,attrs:_,template:null,componentProvider:null,componentView:l||null,componentRendererType:h,publicProviders:null,allProviders:null,handleEvent:c||Ii},provider:null,text:null,query:null,ngContent:null}}function ms(e,t,n){const r=n.element,i=e.root.selectorOrNode,s=e.renderer;let o;if(e.parent||!i){o=r.name?s.createElement(r.name,r.ns):s.createComment("");const i=Yi(e,t,n);i&&s.appendChild(i,o)}else{const e=!!r.componentRendererType&&r.componentRendererType.encapsulation===I.ShadowDom;o=s.selectRootElement(i,e)}if(r.attrs)for(let a=0;a<r.attrs.length;a++){const[e,t,n]=r.attrs[a];s.setAttribute(o,t,n,e)}return o}function gs(e,t,n,r){for(let o=0;o<n.outputs.length;o++){const a=n.outputs[o],u=ys(e,n.nodeIndex,(i=a.target,s=a.eventName,i?`${i}:${s}`:s));let c=a.target,l=e;"component"===a.target&&(c=null,l=t);const h=l.renderer.listen(c||r,a.eventName,u);e.disposables[n.outputIndex+o]=h}var i,s}function ys(e,t,n){return r=>qi(e,t,n,r)}function vs(e,t,n,r){if(!Vi(e,t,n,r))return!1;const i=t.bindings[n],s=wi(e,t.nodeIndex),o=s.renderElement,a=i.name;switch(15&i.flags){case 1:!function(e,t,n,r,i,s){const o=t.securityContext;let a=o?e.root.sanitizer.sanitize(o,s):s;a=null!=a?a.toString():null;const u=e.renderer;null!=s?u.setAttribute(n,i,a,r):u.removeAttribute(n,i,r)}(e,i,o,i.ns,a,r);break;case 2:!function(e,t,n,r){const i=e.renderer;r?i.addClass(t,n):i.removeClass(t,n)}(e,o,a,r);break;case 4:!function(e,t,n,r,i){let s=e.root.sanitizer.sanitize(Ft.STYLE,i);if(null!=s){s=s.toString();const e=t.suffix;null!=e&&(s+=e)}else s=null;const o=e.renderer;null!=s?o.setStyle(n,r,s):o.removeStyle(n,r)}(e,i,o,a,r);break;case 8:!function(e,t,n,r,i){const s=t.securityContext;let o=s?e.root.sanitizer.sanitize(s,i):i;e.renderer.setProperty(n,r,o)}(33554432&t.flags&&32&i.flags?s.componentView:e,i,o,a,r)}return!0}const _s=new Object,bs=Oi(pe),ws=Oi(he),Es=Oi(Ne);function Cs(e,t,n,r){return n=ae(n),{index:-1,deps:Xi(r,V(t)),flags:e,token:t,value:n}}function Ss(e){const t={},n=[];let r=!1;for(let i=0;i<e.length;i++){const s=e[i];s.token===je&&!0===s.value&&(r=!0),1073741824&s.flags&&n.push(s.token),s.index=i,t[Oi(s.token)]=s}return{factory:null,providersByKey:t,providers:e,modules:n,isRoot:r}}function Ts(e,t,n=pe.THROW_IF_NOT_FOUND){const r=K(e);try{if(8&t.flags)return t.token;if(2&t.flags&&(n=null),1&t.flags)return e._parent.get(t.token,n);const o=t.tokenKey;switch(o){case bs:case ws:case Es:return e}const a=e._def.providersByKey[o];let u;if(a){let t=e._providers[a.index];return void 0===t&&(t=e._providers[a.index]=xs(e,a)),t===_s?void 0:t}if((u=f(t.token))&&(i=e,null!=(s=u).providedIn&&(function(e,t){return e._def.modules.indexOf(t)>-1}(i,s.providedIn)||"root"===s.providedIn&&i._def.isRoot))){const n=e._providers.length;return e._def.providersByKey[t.tokenKey]={flags:5120,value:u.factory,deps:[],index:n,token:t.token},e._providers[n]=_s,e._providers[n]=xs(e,e._def.providersByKey[t.tokenKey])}return 4&t.flags?n:e._parent.get(t.token,n)}finally{K(r)}var i,s}function xs(e,t){let n;switch(201347067&t.flags){case 512:n=function(e,t,n){const r=n.length;switch(r){case 0:return new t;case 1:return new t(Ts(e,n[0]));case 2:return new t(Ts(e,n[0]),Ts(e,n[1]));case 3:return new t(Ts(e,n[0]),Ts(e,n[1]),Ts(e,n[2]));default:const i=new Array(r);for(let t=0;t<r;t++)i[t]=Ts(e,n[t]);return new t(...i)}}(e,t.value,t.deps);break;case 1024:n=function(e,t,n){const r=n.length;switch(r){case 0:return t();case 1:return t(Ts(e,n[0]));case 2:return t(Ts(e,n[0]),Ts(e,n[1]));case 3:return t(Ts(e,n[0]),Ts(e,n[1]),Ts(e,n[2]));default:const i=Array(r);for(let t=0;t<r;t++)i[t]=Ts(e,n[t]);return t(...i)}}(e,t.value,t.deps);break;case 2048:n=Ts(e,t.deps[0]);break;case 256:n=t.value}return n===_s||null==n||"object"!=typeof n||131072&t.flags||"function"!=typeof n.ngOnDestroy||(t.flags|=131072),void 0===n?_s:n}function As(e,t,n,r){let i=t.viewContainer._embeddedViews;null==n&&(n=i.length),r.viewContainerParent=e,Os(i,n,r),function(e,t){const n=$i(t);if(!n||n===e||16&t.state)return;t.state|=16;let r=n.template._projectedViews;r||(r=n.template._projectedViews=[]);r.push(t),function(e,t){if(4&t.flags)return;e.nodeFlags|=4,t.flags|=4;let n=t.parent;for(;n;)n.childFlags|=4,n=n.parent}(t.parent.def,t.parentNodeDef)}(t,r),Ti.dirtyParentQueries(r),Is(t,n>0?i[n-1]:null,r)}function Ds(e,t){const n=e.viewContainer._embeddedViews;if((null==t||t>=n.length)&&(t=n.length-1),t<0)return null;const r=n[t];return r.viewContainerParent=null,ks(n,t),Ti.dirtyParentQueries(r),Ns(r),r}function Is(e,t,n){const r=t?zi(t,t.def.lastRenderRootNode):e.renderElement,i=n.renderer.parentNode(r),s=n.renderer.nextSibling(r);es(n,2,i,s,void 0)}function Ns(e){es(e,3,null,null,void 0)}function Os(e,t,n){t>=e.length?e.push(n):e.splice(t,0,n)}function ks(e,t){t>=e.length-1?e.pop():e.splice(t,1)}const Ps=new Object;function Ms(e,t,n,r,i,s){return new Rs(e,t,n,r,i,s)}class Rs extends Ue{constructor(e,t,n,r,i,s){super(),this.selector=e,this.componentType=t,this._inputs=r,this._outputs=i,this.ngContentSelectors=s,this.viewDefFactory=n}get inputs(){const e=[],t=this._inputs;for(let n in t){const r=t[n];e.push({propName:n,templateName:r})}return e}get outputs(){const e=[];for(let t in this._outputs){const n=this._outputs[t];e.push({propName:t,templateName:n})}return e}create(e,t,n,r){if(!r)throw new Error("ngModule should be provided");const i=Ji(this.viewDefFactory),s=i.nodes[0].element.componentProvider.nodeIndex,o=Ti.createRootView(e,t||[],n,i,r,Ps),a=Ei(o,s).instance;return n&&o.renderer.setAttribute(wi(o,0).renderElement,"ng-version",tt.full),new Fs(o,new Bs(o),a)}}class Fs extends Be{constructor(e,t,n){super(),this._view=e,this._viewRef=t,this._component=n,this._elDef=this._view.def.nodes[0],this.hostView=t,this.changeDetectorRef=t,this.instance=n}get location(){return new Ke(wi(this._view,this._elDef.nodeIndex).renderElement)}get injector(){return new Hs(this._view,this._elDef)}get componentType(){return this._component.constructor}destroy(){this._viewRef.destroy()}onDestroy(e){this._viewRef.onDestroy(e)}}function Ls(e,t,n){return new Vs(e,t,n)}class Vs{constructor(e,t,n){this._view=e,this._elDef=t,this._data=n,this._embeddedViews=[]}get element(){return new Ke(this._data.renderElement)}get injector(){return new Hs(this._view,this._elDef)}get parentInjector(){let e=this._view,t=this._elDef.parent;for(;!t&&e;)t=Hi(e),e=e.parent;return e?new Hs(e,t):new Hs(this._view,null)}clear(){for(let e=this._embeddedViews.length-1;e>=0;e--){const t=Ds(this._data,e);Ti.destroyView(t)}}get(e){const t=this._embeddedViews[e];if(t){const e=new Bs(t);return e.attachToViewContainerRef(this),e}return null}get length(){return this._embeddedViews.length}createEmbeddedView(e,t,n){const r=e.createEmbeddedView(t||{});return this.insert(r,n),r}createComponent(e,t,n,r,i){const s=n||this.parentInjector;i||e instanceof We||(i=s.get(Ne));const o=e.create(s,r,void 0,i);return this.insert(o.hostView,t),o}insert(e,t){if(e.destroyed)throw new Error("Cannot insert a destroyed View in a ViewContainer!");const n=e,r=n._view;return As(this._view,this._data,t,r),n.attachToViewContainerRef(this),e}move(e,t){if(e.destroyed)throw new Error("Cannot move a destroyed View in a ViewContainer!");const n=this._embeddedViews.indexOf(e._view);return function(e,t,n){const r=e.viewContainer._embeddedViews,i=r[t];ks(r,t),null==n&&(n=r.length),Os(r,n,i),Ti.dirtyParentQueries(i),Ns(i),Is(e,n>0?r[n-1]:null,i)}(this._data,n,t),e}indexOf(e){return this._embeddedViews.indexOf(e._view)}remove(e){const t=Ds(this._data,e);t&&Ti.destroyView(t)}detach(e){const t=Ds(this._data,e);return t?new Bs(t):null}}function js(e){return new Bs(e)}class Bs{constructor(e){this._view=e,this._viewContainerRef=null,this._appRef=null}get rootNodes(){return function(e){const t=[];return es(e,0,void 0,void 0,t),t}(this._view)}get context(){return this._view.context}get destroyed(){return 0!=(128&this._view.state)}markForCheck(){Bi(this._view)}detach(){this._view.state&=-5}detectChanges(){const e=this._view.root.rendererFactory;e.begin&&e.begin();try{Ti.checkAndUpdateView(this._view)}finally{e.end&&e.end()}}checkNoChanges(){Ti.checkNoChangesView(this._view)}reattach(){this._view.state|=4}onDestroy(e){this._view.disposables||(this._view.disposables=[]),this._view.disposables.push(e)}destroy(){this._appRef?this._appRef.detachView(this):this._viewContainerRef&&this._viewContainerRef.detach(this._viewContainerRef.indexOf(this)),Ti.destroyView(this._view)}detachFromAppRef(){this._appRef=null,Ns(this._view),Ti.dirtyParentQueries(this._view)}attachToAppRef(e){if(this._viewContainerRef)throw new Error("This view is already attached to a ViewContainer!");this._appRef=e}attachToViewContainerRef(e){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._viewContainerRef=e}}function Us(e,t){return new qs(e,t)}class qs extends Mt{constructor(e,t){super(),this._parentView=e,this._def=t}createEmbeddedView(e){return new Bs(Ti.createEmbeddedView(this._parentView,this._def,this._def.element.template,e))}get elementRef(){return new Ke(wi(this._parentView,this._def.nodeIndex).renderElement)}}function $s(e,t){return new Hs(e,t)}class Hs{constructor(e,t){this.view=e,this.elDef=t}get(e,t=pe.THROW_IF_NOT_FOUND){const n=!!this.elDef&&0!=(33554432&this.elDef.flags);return Ti.resolveDep(this.view,this.elDef,n,{flags:0,token:e,tokenKey:Oi(e)},t)}}function zs(e,t){const n=e.def.nodes[t];if(1&n.flags){const t=wi(e,n.nodeIndex);return n.element.template?t.template:t.renderElement}if(2&n.flags)return bi(e,n.nodeIndex).renderText;if(20240&n.flags)return Ei(e,n.nodeIndex).instance;throw new Error(`Illegal state: read nodeValue for node index ${t}`)}function Ws(e){return new Ks(e.renderer)}class Ks{constructor(e){this.delegate=e}selectRootElement(e){return this.delegate.selectRootElement(e)}createElement(e,t){const[n,r]=os(t),i=this.delegate.createElement(r,n);return e&&this.delegate.appendChild(e,i),i}createViewRoot(e){return e}createTemplateAnchor(e){const t=this.delegate.createComment("");return e&&this.delegate.appendChild(e,t),t}createText(e,t){const n=this.delegate.createText(t);return e&&this.delegate.appendChild(e,n),n}projectNodes(e,t){for(let n=0;n<t.length;n++)this.delegate.appendChild(e,t[n])}attachViewAfter(e,t){const n=this.delegate.parentNode(e),r=this.delegate.nextSibling(e);for(let i=0;i<t.length;i++)this.delegate.insertBefore(n,t[i],r)}detachView(e){for(let t=0;t<e.length;t++){const n=e[t],r=this.delegate.parentNode(n);this.delegate.removeChild(r,n)}}destroyView(e,t){for(let n=0;n<t.length;n++)this.delegate.destroyNode(t[n])}listen(e,t,n){return this.delegate.listen(e,t,n)}listenGlobal(e,t,n){return this.delegate.listen(e,t,n)}setElementProperty(e,t,n){this.delegate.setProperty(e,t,n)}setElementAttribute(e,t,n){const[r,i]=os(t);null!=n?this.delegate.setAttribute(e,i,n,r):this.delegate.removeAttribute(e,i,r)}setBindingDebugInfo(e,t,n){}setElementClass(e,t,n){n?this.delegate.addClass(e,t):this.delegate.removeClass(e,t)}setElementStyle(e,t,n){null!=n?this.delegate.setStyle(e,t,n):this.delegate.removeStyle(e,t)}invokeElementMethod(e,t,n){e[t].apply(e,n)}setText(e,t){this.delegate.setValue(e,t)}animate(){throw new Error("Renderer.animate is no longer supported!")}}function Qs(e,t,n,r){return new Gs(e,t,n,r)}class Gs{constructor(e,t,n,r){this._moduleType=e,this._parent=t,this._bootstrapComponents=n,this._def=r,this._destroyListeners=[],this._destroyed=!1,this.injector=this,function(e){const t=e._def,n=e._providers=new Array(t.providers.length);for(let r=0;r<t.providers.length;r++){const i=t.providers[r];4096&i.flags||void 0===n[r]&&(n[r]=xs(e,i))}}(this)}get(e,t=pe.THROW_IF_NOT_FOUND,n=H.Default){let r=0;return n&H.SkipSelf?r|=1:n&H.Self&&(r|=4),Ts(this,{token:e,tokenKey:Oi(e),flags:r},t)}get instance(){return this.get(this._moduleType)}get componentFactoryResolver(){return this.get(He)}destroy(){if(this._destroyed)throw new Error(`The ng module ${V(this.instance.constructor)} has already been destroyed.`);this._destroyed=!0,function(e,t){const n=e._def,r=new Set;for(let i=0;i<n.providers.length;i++)if(131072&n.providers[i].flags){const t=e._providers[i];if(t&&t!==_s){const e=t.ngOnDestroy;"function"!=typeof e||r.has(t)||(e.apply(t),r.add(t))}}}(this),this._destroyListeners.forEach(e=>e())}onDestroy(e){this._destroyListeners.push(e)}}const Xs=Oi(Ge),Ys=Oi(Ze),Zs=Oi(Ke),Js=Oi(Vr),eo=Oi(Mt),to=Oi(Br),no=Oi(pe),ro=Oi(he);function io(e,t,n,r,i,s,o,a){const u=[];if(o)for(let l in o){const[e,t]=o[l];u[e]={flags:8,name:l,nonMinifiedName:t,ns:null,securityContext:null,suffix:null}}const c=[];if(a)for(let l in a)c.push({type:1,propName:l,target:null,eventName:a[l]});return ao(e,t|=16384,n,r,i,i,s,u,c)}function so(e,t,n){return ao(-1,e|=16,null,0,t,t,n)}function oo(e,t,n,r,i){return ao(-1,e,t,0,n,r,i)}function ao(e,t,n,r,i,s,o,a,u){const{matchedQueries:c,references:l,matchedQueryIds:h}=Gi(n);u||(u=[]),a||(a=[]),s=ae(s);const d=Xi(o,V(i));return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:e,flags:t,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:c,matchedQueryIds:h,references:l,ngContentIndex:-1,childCount:r,bindings:a,bindingFlags:as(a),outputs:u,element:null,provider:{token:i,value:s,deps:d},text:null,query:null,ngContent:null}}function uo(e,t){return po(e,t)}function co(e,t){let n=e;for(;n.parent&&!Wi(n);)n=n.parent;return fo(n.parent,Hi(n),!0,t.provider.value,t.provider.deps)}function lo(e,t){const n=(32768&t.flags)>0,r=fo(e,t.parent,n,t.provider.value,t.provider.deps);if(t.outputs.length)for(let i=0;i<t.outputs.length;i++){const n=t.outputs[i],s=r[n.propName];if(!qn(s))throw new Error(`@Output ${n.propName} not initialized in '${r.constructor.name}'.`);{const r=s.subscribe(ho(e,t.parent.nodeIndex,n.eventName));e.disposables[t.outputIndex+i]=r.unsubscribe.bind(r)}}return r}function ho(e,t,n){return r=>qi(e,t,n,r)}function po(e,t){const n=(8192&t.flags)>0,r=t.provider;switch(201347067&t.flags){case 512:return fo(e,t.parent,n,r.value,r.deps);case 1024:return function(e,t,n,r,i){const s=i.length;switch(s){case 0:return r();case 1:return r(go(e,t,n,i[0]));case 2:return r(go(e,t,n,i[0]),go(e,t,n,i[1]));case 3:return r(go(e,t,n,i[0]),go(e,t,n,i[1]),go(e,t,n,i[2]));default:const o=Array(s);for(let r=0;r<s;r++)o[r]=go(e,t,n,i[r]);return r(...o)}}(e,t.parent,n,r.value,r.deps);case 2048:return go(e,t.parent,n,r.deps[0]);case 256:return r.value}}function fo(e,t,n,r,i){const s=i.length;switch(s){case 0:return new r;case 1:return new r(go(e,t,n,i[0]));case 2:return new r(go(e,t,n,i[0]),go(e,t,n,i[1]));case 3:return new r(go(e,t,n,i[0]),go(e,t,n,i[1]),go(e,t,n,i[2]));default:const o=new Array(s);for(let r=0;r<s;r++)o[r]=go(e,t,n,i[r]);return new r(...o)}}const mo={};function go(e,t,n,r,i=pe.THROW_IF_NOT_FOUND){if(8&r.flags)return r.token;const s=e;2&r.flags&&(i=null);const o=r.tokenKey;o===to&&(n=!(!t||!t.element.componentView)),t&&1&r.flags&&(n=!1,t=t.parent);let a=e;for(;a;){if(t)switch(o){case Xs:return Ws(yo(a,t,n));case Ys:return yo(a,t,n).renderer;case Zs:return new Ke(wi(a,t.nodeIndex).renderElement);case Js:return wi(a,t.nodeIndex).viewContainer;case eo:if(t.element.template)return wi(a,t.nodeIndex).template;break;case to:return js(yo(a,t,n));case no:case ro:return $s(a,t);default:const e=(n?t.element.allProviders:t.element.publicProviders)[o];if(e){let t=Ei(a,e.nodeIndex);return t||(t={instance:po(a,e)},a.nodes[e.nodeIndex]=t),t.instance}}n=Wi(a),t=Hi(a),a=a.parent,4&r.flags&&(a=null)}const u=s.root.injector.get(r.token,mo);return u!==mo||i===mo?u:s.root.ngModule.injector.get(r.token,i)}function yo(e,t,n){let r;if(n)r=wi(e,t.nodeIndex).componentView;else for(r=e;r.parent&&!Wi(r);)r=r.parent;return r}function vo(e,t,n,r,i,s){if(32768&n.flags){const t=wi(e,n.parent.nodeIndex).componentView;2&t.def.flags&&(t.state|=8)}const o=n.bindings[r].name;if(t.instance[o]=i,524288&n.flags){s=s||{};const t=J.unwrap(e.oldValues[n.bindingIndex+r]);s[n.bindings[r].nonMinifiedName]=new ee(t,i,0!=(2&e.state))}return e.oldValues[n.bindingIndex+r]=i,s}function _o(e,t){if(!(e.def.nodeFlags&t))return;const n=e.def.nodes;let r=0;for(let i=0;i<n.length;i++){const s=n[i];let o=s.parent;for(!o&&s.flags&t&&wo(e,i,s.flags&t,r++),0==(s.childFlags&t)&&(i+=s.childCount);o&&1&o.flags&&i===o.nodeIndex+o.childCount;)o.directChildFlags&t&&(r=bo(e,o,t,r)),o=o.parent}}function bo(e,t,n,r){for(let i=t.nodeIndex+1;i<=t.nodeIndex+t.childCount;i++){const t=e.def.nodes[i];t.flags&n&&wo(e,i,t.flags&n,r++),i+=t.childCount}return r}function wo(e,t,n,r){const i=Ei(e,t);if(!i)return;const s=i.instance;s&&(Ti.setCurrentNode(e,t),1048576&n&&_i(e,512,r)&&s.ngAfterContentInit(),2097152&n&&s.ngAfterContentChecked(),4194304&n&&_i(e,768,r)&&s.ngAfterViewInit(),8388608&n&&s.ngAfterViewChecked(),131072&n&&s.ngOnDestroy())}function Eo(e,t,n){let r=[];for(let i in n){const e=n[i];r.push({propName:i,bindingType:e})}return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:-1,flags:e,childFlags:0,directChildFlags:0,childMatchedQueries:0,ngContentIndex:-1,matchedQueries:{},matchedQueryIds:0,references:{},childCount:0,bindings:[],bindingFlags:0,outputs:[],element:null,provider:null,text:null,query:{id:t,filterId:Qi(t),bindings:r},ngContent:null}}function Co(e){const t=e.def.nodeMatchedQueries;for(;e.parent&&Ki(e);){let n=e.parentNodeDef;e=e.parent;const r=n.nodeIndex+n.childCount;for(let i=0;i<=r;i++){const r=e.def.nodes[i];67108864&r.flags&&536870912&r.flags&&(r.query.filterId&t)===r.query.filterId&&Si(e,i).setDirty(),!(1&r.flags&&i+r.childCount<n.nodeIndex)&&67108864&r.childFlags&&536870912&r.childFlags||(i+=r.childCount)}}if(134217728&e.def.nodeFlags)for(let n=0;n<e.def.nodes.length;n++){const t=e.def.nodes[n];134217728&t.flags&&536870912&t.flags&&Si(e,n).setDirty(),n+=t.childCount}}function So(e,t){const n=Si(e,t.nodeIndex);if(!n.dirty)return;let r,i=void 0;if(67108864&t.flags){const n=t.parent.parent;i=To(e,n.nodeIndex,n.nodeIndex+n.childCount,t.query,[]),r=Ei(e,t.parent.nodeIndex).instance}else 134217728&t.flags&&(i=To(e,0,e.def.nodes.length-1,t.query,[]),r=e.component);n.reset(i);const s=t.query.bindings;let o=!1;for(let a=0;a<s.length;a++){const e=s[a];let t;switch(e.bindingType){case 0:t=n.first;break;case 1:t=n,o=!0}r[e.propName]=t}o&&n.notifyOnChanges()}function To(e,t,n,r,i){for(let s=t;s<=n;s++){const t=e.def.nodes[s],n=t.matchedQueries[r.id];if(null!=n&&i.push(xo(e,t,n)),1&t.flags&&t.element.template&&(t.element.template.nodeMatchedQueries&r.filterId)===r.filterId){const n=wi(e,s);if((t.childMatchedQueries&r.filterId)===r.filterId&&(To(e,s+1,s+t.childCount,r,i),s+=t.childCount),16777216&t.flags){const e=n.viewContainer._embeddedViews;for(let t=0;t<e.length;t++){const s=e[t],o=$i(s);o&&o===n&&To(s,0,s.def.nodes.length-1,r,i)}}const o=n.template._projectedViews;if(o)for(let e=0;e<o.length;e++){const t=o[e];To(t,0,t.def.nodes.length-1,r,i)}}(t.childMatchedQueries&r.filterId)!==r.filterId&&(s+=t.childCount)}return i}function xo(e,t,n){if(null!=n)switch(n){case 1:return wi(e,t.nodeIndex).renderElement;case 0:return new Ke(wi(e,t.nodeIndex).renderElement);case 2:return wi(e,t.nodeIndex).template;case 3:return wi(e,t.nodeIndex).viewContainer;case 4:return Ei(e,t.nodeIndex).instance}}function Ao(e,t){return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:-1,flags:8,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:{},matchedQueryIds:0,references:{},ngContentIndex:e,childCount:0,bindings:[],bindingFlags:0,outputs:[],element:null,provider:null,text:null,query:null,ngContent:{index:t}}}function Do(e,t,n){const r=Yi(e,t,n);r&&ns(e,n.ngContent.index,1,r,null,void 0)}function Io(e,t){return ko(128,e,new Array(t+1))}function No(e,t){return ko(32,e,new Array(t))}function Oo(e,t){const n=Object.keys(t),r=n.length,i=new Array(r);for(let s=0;s<r;s++){const e=n[s];i[t[e]]=e}return ko(64,e,i)}function ko(e,t,n){const r=new Array(n.length);for(let i=0;i<n.length;i++){const e=n[i];r[i]={flags:8,name:e,ns:null,nonMinifiedName:e,securityContext:null,suffix:null}}return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:t,flags:e,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:{},matchedQueryIds:0,references:{},ngContentIndex:-1,childCount:0,bindings:r,bindingFlags:as(r),outputs:[],element:null,provider:null,text:null,query:null,ngContent:null}}function Po(e,t,n){const r=new Array(n.length-1);for(let i=1;i<n.length;i++)r[i-1]={flags:8,name:null,ns:null,nonMinifiedName:null,securityContext:null,suffix:n[i]};return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:e,flags:2,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:{},matchedQueryIds:0,references:{},ngContentIndex:t,childCount:0,bindings:r,bindingFlags:8,outputs:[],element:null,provider:null,text:{prefix:n[0]},query:null,ngContent:null}}function Mo(e,t,n){let r;const i=e.renderer;r=i.createText(n.text.prefix);const s=Yi(e,t,n);return s&&i.appendChild(s,r),{renderText:r}}function Ro(e,t){return(null!=e?e.toString():"")+t.suffix}function Fo(e,t,n,r){let i=0,s=0,o=0,a=0,u=0,c=null,l=null,h=!1,d=!1,p=null;for(let f=0;f<t.length;f++){const e=t[f];if(e.nodeIndex=f,e.parent=c,e.bindingIndex=i,e.outputIndex=s,e.renderParent=l,o|=e.flags,u|=e.matchedQueryIds,e.element){const t=e.element;t.publicProviders=c?c.element.publicProviders:Object.create(null),t.allProviders=t.publicProviders,h=!1,d=!1,e.element.template&&(u|=e.element.template.nodeMatchedQueries)}if(Vo(c,e,t.length),i+=e.bindings.length,s+=e.outputs.length,!l&&3&e.flags&&(p=e),20224&e.flags){h||(h=!0,c.element.publicProviders=Object.create(c.element.publicProviders),c.element.allProviders=c.element.publicProviders);const t=0!=(8192&e.flags),n=0!=(32768&e.flags);!t||n?c.element.publicProviders[Oi(e.provider.token)]=e:(d||(d=!0,c.element.allProviders=Object.create(c.element.publicProviders)),c.element.allProviders[Oi(e.provider.token)]=e),n&&(c.element.componentProvider=e)}if(c?(c.childFlags|=e.flags,c.directChildFlags|=e.flags,c.childMatchedQueries|=e.matchedQueryIds,e.element&&e.element.template&&(c.childMatchedQueries|=e.element.template.nodeMatchedQueries)):a|=e.flags,e.childCount>0)c=e,Lo(e)||(l=e);else for(;c&&f===c.nodeIndex+c.childCount;){const e=c.parent;e&&(e.childFlags|=c.childFlags,e.childMatchedQueries|=c.childMatchedQueries),l=(c=e)&&Lo(c)?c.renderParent:c}}return{factory:null,nodeFlags:o,rootNodeFlags:a,nodeMatchedQueries:u,flags:e,nodes:t,updateDirectives:n||Ii,updateRenderer:r||Ii,handleEvent:(e,n,r,i)=>t[n].element.handleEvent(e,r,i),bindingCount:i,outputCount:s,lastRenderRootNode:p}}function Lo(e){return 0!=(1&e.flags)&&null===e.element.name}function Vo(e,t,n){const r=t.element&&t.element.template;if(r){if(!r.lastRenderRootNode)throw new Error("Illegal State: Embedded templates without nodes are not allowed!");if(r.lastRenderRootNode&&16777216&r.lastRenderRootNode.flags)throw new Error(`Illegal State: Last root node of a template can't have embedded views, at index ${t.nodeIndex}!`)}if(20224&t.flags){if(0==(1&(e?e.flags:0)))throw new Error(`Illegal State: StaticProvider/Directive nodes need to be children of elements or anchors, at index ${t.nodeIndex}!`)}if(t.query){if(67108864&t.flags&&(!e||0==(16384&e.flags)))throw new Error(`Illegal State: Content Query nodes need to be children of directives, at index ${t.nodeIndex}!`);if(134217728&t.flags&&e)throw new Error(`Illegal State: View Query nodes have to be top level nodes, at index ${t.nodeIndex}!`)}if(t.childCount){const r=e?e.nodeIndex+e.childCount:n-1;if(t.nodeIndex<=r&&t.nodeIndex+t.childCount>r)throw new Error(`Illegal State: childCount of node leads outside of parent, at index ${t.nodeIndex}!`)}}function jo(e,t,n,r){const i=qo(e.root,e.renderer,e,t,n);return $o(i,e.component,r),Ho(i),i}function Bo(e,t,n){const r=qo(e,e.renderer,null,null,t);return $o(r,n,n),Ho(r),r}function Uo(e,t,n,r){const i=t.element.componentRendererType;let s;return s=i?e.root.rendererFactory.createRenderer(r,i):e.root.renderer,qo(e.root,s,e,t.element.componentProvider,n)}function qo(e,t,n,r,i){const s=new Array(i.nodes.length),o=i.outputCount?new Array(i.outputCount):null;return{def:i,parent:n,viewContainerParent:null,parentNodeDef:r,context:null,component:null,nodes:s,state:13,root:e,renderer:t,oldValues:new Array(i.bindingCount),disposables:o,initIndex:-1}}function $o(e,t,n){e.component=t,e.context=n}function Ho(e){let t;if(Wi(e)){const n=e.parentNodeDef;t=wi(e.parent,n.parent.nodeIndex).renderElement}const n=e.def,r=e.nodes;for(let i=0;i<n.nodes.length;i++){const s=n.nodes[i];let o;switch(Ti.setCurrentNode(e,i),201347067&s.flags){case 1:const n=ms(e,t,s);let a=void 0;if(33554432&s.flags){const t=Ji(s.element.componentView);a=Ti.createComponentView(e,s,t,n)}gs(e,a,s,n),o={renderElement:n,componentView:a,viewContainer:null,template:s.element.template?Us(e,s):void 0},16777216&s.flags&&(o.viewContainer=Ls(e,s,o));break;case 2:o=Mo(e,t,s);break;case 512:case 1024:case 2048:case 256:if(!((o=r[i])||4096&s.flags)){o={instance:uo(e,s)}}break;case 16:o={instance:co(e,s)};break;case 16384:if(!(o=r[i])){o={instance:lo(e,s)}}if(32768&s.flags){$o(wi(e,s.parent.nodeIndex).componentView,o.instance,o.instance)}break;case 32:case 64:case 128:o={value:void 0};break;case 67108864:case 134217728:o=new kr;break;case 8:Do(e,t,s),o=void 0}r[i]=o}Jo(e,Zo.CreateViewNodes),ra(e,201326592,268435456,0)}function zo(e){Qo(e),Ti.updateDirectives(e,1),ea(e,Zo.CheckNoChanges),Ti.updateRenderer(e,1),Jo(e,Zo.CheckNoChanges),e.state&=-97}function Wo(e){1&e.state?(e.state&=-2,e.state|=2):e.state&=-3,vi(e,0,256),Qo(e),Ti.updateDirectives(e,0),ea(e,Zo.CheckAndUpdate),ra(e,67108864,536870912,0);let t=vi(e,256,512);_o(e,2097152|(t?1048576:0)),Ti.updateRenderer(e,0),Jo(e,Zo.CheckAndUpdate),ra(e,134217728,536870912,0),_o(e,8388608|((t=vi(e,512,768))?4194304:0)),2&e.def.flags&&(e.state&=-9),e.state&=-97,vi(e,768,1024)}function Ko(e,t,n,r,i,s,o,a,u,c,l,h,d){return 0===n?function(e,t,n,r,i,s,o,a,u,c,l,h){switch(201347067&t.flags){case 1:return function(e,t,n,r,i,s,o,a,u,c,l,h){const d=t.bindings.length;let p=!1;return d>0&&vs(e,t,0,n)&&(p=!0),d>1&&vs(e,t,1,r)&&(p=!0),d>2&&vs(e,t,2,i)&&(p=!0),d>3&&vs(e,t,3,s)&&(p=!0),d>4&&vs(e,t,4,o)&&(p=!0),d>5&&vs(e,t,5,a)&&(p=!0),d>6&&vs(e,t,6,u)&&(p=!0),d>7&&vs(e,t,7,c)&&(p=!0),d>8&&vs(e,t,8,l)&&(p=!0),d>9&&vs(e,t,9,h)&&(p=!0),p}(e,t,n,r,i,s,o,a,u,c,l,h);case 2:return function(e,t,n,r,i,s,o,a,u,c,l,h){let d=!1;const p=t.bindings,f=p.length;if(f>0&&Vi(e,t,0,n)&&(d=!0),f>1&&Vi(e,t,1,r)&&(d=!0),f>2&&Vi(e,t,2,i)&&(d=!0),f>3&&Vi(e,t,3,s)&&(d=!0),f>4&&Vi(e,t,4,o)&&(d=!0),f>5&&Vi(e,t,5,a)&&(d=!0),f>6&&Vi(e,t,6,u)&&(d=!0),f>7&&Vi(e,t,7,c)&&(d=!0),f>8&&Vi(e,t,8,l)&&(d=!0),f>9&&Vi(e,t,9,h)&&(d=!0),d){let d=t.text.prefix;f>0&&(d+=Ro(n,p[0])),f>1&&(d+=Ro(r,p[1])),f>2&&(d+=Ro(i,p[2])),f>3&&(d+=Ro(s,p[3])),f>4&&(d+=Ro(o,p[4])),f>5&&(d+=Ro(a,p[5])),f>6&&(d+=Ro(u,p[6])),f>7&&(d+=Ro(c,p[7])),f>8&&(d+=Ro(l,p[8])),f>9&&(d+=Ro(h,p[9]));const m=bi(e,t.nodeIndex).renderText;e.renderer.setValue(m,d)}return d}(e,t,n,r,i,s,o,a,u,c,l,h);case 16384:return function(e,t,n,r,i,s,o,a,u,c,l,h){const d=Ei(e,t.nodeIndex),p=d.instance;let f=!1,m=void 0;const g=t.bindings.length;return g>0&&Li(e,t,0,n)&&(f=!0,m=vo(e,d,t,0,n,m)),g>1&&Li(e,t,1,r)&&(f=!0,m=vo(e,d,t,1,r,m)),g>2&&Li(e,t,2,i)&&(f=!0,m=vo(e,d,t,2,i,m)),g>3&&Li(e,t,3,s)&&(f=!0,m=vo(e,d,t,3,s,m)),g>4&&Li(e,t,4,o)&&(f=!0,m=vo(e,d,t,4,o,m)),g>5&&Li(e,t,5,a)&&(f=!0,m=vo(e,d,t,5,a,m)),g>6&&Li(e,t,6,u)&&(f=!0,m=vo(e,d,t,6,u,m)),g>7&&Li(e,t,7,c)&&(f=!0,m=vo(e,d,t,7,c,m)),g>8&&Li(e,t,8,l)&&(f=!0,m=vo(e,d,t,8,l,m)),g>9&&Li(e,t,9,h)&&(f=!0,m=vo(e,d,t,9,h,m)),m&&p.ngOnChanges(m),65536&t.flags&&_i(e,256,t.nodeIndex)&&p.ngOnInit(),262144&t.flags&&p.ngDoCheck(),f}(e,t,n,r,i,s,o,a,u,c,l,h);case 32:case 64:case 128:return function(e,t,n,r,i,s,o,a,u,c,l,h){const d=t.bindings;let p=!1;const f=d.length;if(f>0&&Vi(e,t,0,n)&&(p=!0),f>1&&Vi(e,t,1,r)&&(p=!0),f>2&&Vi(e,t,2,i)&&(p=!0),f>3&&Vi(e,t,3,s)&&(p=!0),f>4&&Vi(e,t,4,o)&&(p=!0),f>5&&Vi(e,t,5,a)&&(p=!0),f>6&&Vi(e,t,6,u)&&(p=!0),f>7&&Vi(e,t,7,c)&&(p=!0),f>8&&Vi(e,t,8,l)&&(p=!0),f>9&&Vi(e,t,9,h)&&(p=!0),p){const p=Ci(e,t.nodeIndex);let m;switch(201347067&t.flags){case 32:m=new Array(d.length),f>0&&(m[0]=n),f>1&&(m[1]=r),f>2&&(m[2]=i),f>3&&(m[3]=s),f>4&&(m[4]=o),f>5&&(m[5]=a),f>6&&(m[6]=u),f>7&&(m[7]=c),f>8&&(m[8]=l),f>9&&(m[9]=h);break;case 64:m={},f>0&&(m[d[0].name]=n),f>1&&(m[d[1].name]=r),f>2&&(m[d[2].name]=i),f>3&&(m[d[3].name]=s),f>4&&(m[d[4].name]=o),f>5&&(m[d[5].name]=a),f>6&&(m[d[6].name]=u),f>7&&(m[d[7].name]=c),f>8&&(m[d[8].name]=l),f>9&&(m[d[9].name]=h);break;case 128:const e=n;switch(f){case 1:m=e.transform(n);break;case 2:m=e.transform(r);break;case 3:m=e.transform(r,i);break;case 4:m=e.transform(r,i,s);break;case 5:m=e.transform(r,i,s,o);break;case 6:m=e.transform(r,i,s,o,a);break;case 7:m=e.transform(r,i,s,o,a,u);break;case 8:m=e.transform(r,i,s,o,a,u,c);break;case 9:m=e.transform(r,i,s,o,a,u,c,l);break;case 10:m=e.transform(r,i,s,o,a,u,c,l,h)}}p.value=m}return p}(e,t,n,r,i,s,o,a,u,c,l,h);default:throw"unreachable"}}(e,t,r,i,s,o,a,u,c,l,h,d):function(e,t,n){switch(201347067&t.flags){case 1:return function(e,t,n){let r=!1;for(let i=0;i<n.length;i++)vs(e,t,i,n[i])&&(r=!0);return r}(e,t,n);case 2:return function(e,t,n){const r=t.bindings;let i=!1;for(let s=0;s<n.length;s++)Vi(e,t,s,n[s])&&(i=!0);if(i){let i="";for(let e=0;e<n.length;e++)i+=Ro(n[e],r[e]);i=t.text.prefix+i;const s=bi(e,t.nodeIndex).renderText;e.renderer.setValue(s,i)}return i}(e,t,n);case 16384:return function(e,t,n){const r=Ei(e,t.nodeIndex),i=r.instance;let s=!1,o=void 0;for(let a=0;a<n.length;a++)Li(e,t,a,n[a])&&(s=!0,o=vo(e,r,t,a,n[a],o));return o&&i.ngOnChanges(o),65536&t.flags&&_i(e,256,t.nodeIndex)&&i.ngOnInit(),262144&t.flags&&i.ngDoCheck(),s}(e,t,n);case 32:case 64:case 128:return function(e,t,n){const r=t.bindings;let i=!1;for(let s=0;s<n.length;s++)Vi(e,t,s,n[s])&&(i=!0);if(i){const i=Ci(e,t.nodeIndex);let s;switch(201347067&t.flags){case 32:s=n;break;case 64:s={};for(let t=0;t<n.length;t++)s[r[t].name]=n[t];break;case 128:const e=n[0],i=n.slice(1);s=e.transform(...i)}i.value=s}return i}(e,t,n);default:throw"unreachable"}}(e,t,r)}function Qo(e){const t=e.def;if(4&t.nodeFlags)for(let n=0;n<t.nodes.length;n++){const r=t.nodes[n];if(4&r.flags){const t=wi(e,n).template._projectedViews;if(t)for(let n=0;n<t.length;n++){const r=t[n];r.state|=32,Ui(r,e)}}else 0==(4&r.childFlags)&&(n+=r.childCount)}}function Go(e,t,n,r,i,s,o,a,u,c,l,h,d){return 0===n?function(e,t,n,r,i,s,o,a,u,c,l,h){const d=t.bindings.length;d>0&&ji(e,t,0,n);d>1&&ji(e,t,1,r);d>2&&ji(e,t,2,i);d>3&&ji(e,t,3,s);d>4&&ji(e,t,4,o);d>5&&ji(e,t,5,a);d>6&&ji(e,t,6,u);d>7&&ji(e,t,7,c);d>8&&ji(e,t,8,l);d>9&&ji(e,t,9,h)}(e,t,r,i,s,o,a,u,c,l,h,d):function(e,t,n){for(let r=0;r<n.length;r++)ji(e,t,r,n[r])}(e,t,r),!1}function Xo(e,t){if(Si(e,t.nodeIndex).dirty)throw xi(Ti.createDebugContext(e,t.nodeIndex),`Query ${t.query.id} not dirty`,`Query ${t.query.id} dirty`,0!=(1&e.state))}function Yo(e){if(!(128&e.state)){if(ea(e,Zo.Destroy),Jo(e,Zo.Destroy),_o(e,131072),e.disposables)for(let t=0;t<e.disposables.length;t++)e.disposables[t]();!function(e){if(!(16&e.state))return;const t=$i(e);if(t){const n=t.template._projectedViews;n&&(ks(n,n.indexOf(e)),Ti.dirtyParentQueries(e))}}(e),e.renderer.destroyNode&&function(e){const t=e.def.nodes.length;for(let n=0;n<t;n++){const t=e.def.nodes[n];1&t.flags?e.renderer.destroyNode(wi(e,n).renderElement):2&t.flags?e.renderer.destroyNode(bi(e,n).renderText):(67108864&t.flags||134217728&t.flags)&&Si(e,n).destroy()}}(e),Wi(e)&&e.renderer.destroy(),e.state|=128}}var Zo={CreateViewNodes:0,CheckNoChanges:1,CheckNoChangesProjectedViews:2,CheckAndUpdate:3,CheckAndUpdateProjectedViews:4,Destroy:5};function Jo(e,t){const n=e.def;if(33554432&n.nodeFlags)for(let r=0;r<n.nodes.length;r++){const i=n.nodes[r];33554432&i.flags?ta(wi(e,r).componentView,t):0==(33554432&i.childFlags)&&(r+=i.childCount)}}function ea(e,t){const n=e.def;if(16777216&n.nodeFlags)for(let r=0;r<n.nodes.length;r++){const i=n.nodes[r];if(16777216&i.flags){const n=wi(e,r).viewContainer._embeddedViews;for(let e=0;e<n.length;e++)ta(n[e],t)}else 0==(16777216&i.childFlags)&&(r+=i.childCount)}}function ta(e,t){const n=e.state;switch(t){case Zo.CheckNoChanges:0==(128&n)&&(12==(12&n)?zo(e):64&n&&na(e,Zo.CheckNoChangesProjectedViews));break;case Zo.CheckNoChangesProjectedViews:0==(128&n)&&(32&n?zo(e):64&n&&na(e,t));break;case Zo.CheckAndUpdate:0==(128&n)&&(12==(12&n)?Wo(e):64&n&&na(e,Zo.CheckAndUpdateProjectedViews));break;case Zo.CheckAndUpdateProjectedViews:0==(128&n)&&(32&n?Wo(e):64&n&&na(e,t));break;case Zo.Destroy:Yo(e);break;case Zo.CreateViewNodes:Ho(e)}}function na(e,t){ea(e,t),Jo(e,t)}function ra(e,t,n,r){if(!(e.def.nodeFlags&t&&e.def.nodeFlags&n))return;const i=e.def.nodes.length;for(let s=0;s<i;s++){const i=e.def.nodes[s];if(i.flags&t&&i.flags&n)switch(Ti.setCurrentNode(e,i.nodeIndex),r){case 0:So(e,i);break;case 1:Xo(e,i)}i.childFlags&t&&i.childFlags&n||(s+=i.childCount)}}Zo[Zo.CreateViewNodes]="CreateViewNodes",Zo[Zo.CheckNoChanges]="CheckNoChanges",Zo[Zo.CheckNoChangesProjectedViews]="CheckNoChangesProjectedViews",Zo[Zo.CheckAndUpdate]="CheckAndUpdate",Zo[Zo.CheckAndUpdateProjectedViews]="CheckAndUpdateProjectedViews",Zo[Zo.Destroy]="Destroy";let ia=!1;function sa(){if(ia)return;ia=!0;const e=st()?{setCurrentNode:Da,createRootView:aa,createEmbeddedView:ca,createComponentView:la,createNgModuleRef:ha,overrideProvider:ma,overrideComponentView:ga,clearOverrides:ya,checkAndUpdateView:wa,checkNoChangesView:Ea,destroyView:Ca,createDebugContext:(e,t)=>new ja(e,t),handleEvent:Ia,updateDirectives:Na,updateRenderer:Oa}:{setCurrentNode:()=>{},createRootView:oa,createEmbeddedView:jo,createComponentView:Uo,createNgModuleRef:Qs,overrideProvider:Ii,overrideComponentView:Ii,clearOverrides:Ii,checkAndUpdateView:Wo,checkNoChangesView:zo,destroyView:Yo,createDebugContext:(e,t)=>new ja(e,t),handleEvent:(e,t,n,r)=>e.def.handleEvent(e,t,n,r),updateDirectives:(e,t)=>e.def.updateDirectives(0===t?_a:ba,e),updateRenderer:(e,t)=>e.def.updateRenderer(0===t?_a:ba,e)};Ti.setCurrentNode=e.setCurrentNode,Ti.createRootView=e.createRootView,Ti.createEmbeddedView=e.createEmbeddedView,Ti.createComponentView=e.createComponentView,Ti.createNgModuleRef=e.createNgModuleRef,Ti.overrideProvider=e.overrideProvider,Ti.overrideComponentView=e.overrideComponentView,Ti.clearOverrides=e.clearOverrides,Ti.checkAndUpdateView=e.checkAndUpdateView,Ti.checkNoChangesView=e.checkNoChangesView,Ti.destroyView=e.destroyView,Ti.resolveDep=go,Ti.createDebugContext=e.createDebugContext,Ti.handleEvent=e.handleEvent,Ti.updateDirectives=e.updateDirectives,Ti.updateRenderer=e.updateRenderer,Ti.dirtyParentQueries=Co}function oa(e,t,n,r,i,s){const o=i.injector.get(Xe);return Bo(ua(e,i,o,t,n),r,s)}function aa(e,t,n,r,i,s){const o=i.injector.get(Xe),a=ua(e,i,new $a(o),t,n),u=va(r);return Ua(Sa.create,Bo,null,[a,u,s])}function ua(e,t,n,r,i){const s=t.injector.get(Lt),o=t.injector.get(bn),a=n.createRenderer(null,null);return{ngModule:t,injector:e,projectableNodes:r,selectorOrNode:i,sanitizer:s,rendererFactory:n,renderer:a,errorHandler:o}}function ca(e,t,n,r){const i=va(n);return Ua(Sa.create,jo,null,[e,t,i,r])}function la(e,t,n,r){const i=fa.get(t.element.componentProvider.provider.token);return n=i||va(n),Ua(Sa.create,Uo,null,[e,t,n,r])}function ha(e,t,n,r){return Qs(e,t,n,function(e){const{hasOverrides:t,hasDeprecatedOverrides:n}=function(e){let t=!1,n=!1;if(0===da.size)return{hasOverrides:t,hasDeprecatedOverrides:n};return e.providers.forEach(e=>{const r=da.get(e.token);3840&e.flags&&r&&(t=!0,n=n||r.deprecatedBehavior)}),e.modules.forEach(e=>{pa.forEach((r,i)=>{f(i).providedIn===e&&(t=!0,n=n||r.deprecatedBehavior)})}),{hasOverrides:t,hasDeprecatedOverrides:n}}(e);if(!t)return e;return function(e){for(let t=0;t<e.providers.length;t++){const r=e.providers[t];n&&(r.flags|=4096);const i=da.get(r.token);i&&(r.flags=-3841&r.flags|i.flags,r.deps=Xi(i.deps),r.value=i.value)}if(pa.size>0){let t=new Set(e.modules);pa.forEach((r,i)=>{if(t.has(f(i).providedIn)){let t={token:i,flags:r.flags|(n?4096:0),deps:Xi(r.deps),value:r.value,index:e.providers.length};e.providers.push(t),e.providersByKey[Oi(i)]=t}})}}(e=e.factory(()=>Ii)),e}(r))}const da=new Map,pa=new Map,fa=new Map;function ma(e){let t;da.set(e.token,e),"function"==typeof e.token&&(t=f(e.token))&&"function"==typeof t.providedIn&&pa.set(e.token,e)}function ga(e,t){const n=Ji(t.viewDefFactory);const r=Ji(n.nodes[0].element.componentView);fa.set(e,r)}function ya(){da.clear(),pa.clear(),fa.clear()}function va(e){if(0===da.size)return e;const t=function(e){const t=[];let n=null;for(let r=0;r<e.nodes.length;r++){const i=e.nodes[r];1&i.flags&&(n=i),n&&3840&i.flags&&da.has(i.provider.token)&&(t.push(n.nodeIndex),n=null)}return t}(e);if(0===t.length)return e;e=e.factory(()=>Ii);for(let r=0;r<t.length;r++)n(e,t[r]);return e;function n(e,t){for(let n=t+1;n<e.nodes.length;n++){const t=e.nodes[n];if(1&t.flags)return;if(3840&t.flags){const e=t.provider,n=da.get(e.token);n&&(t.flags=-3841&t.flags|n.flags,e.deps=Xi(n.deps),e.value=n.value)}}}}function _a(e,t,n,r,i,s,o,a,u,c,l,h,d){const p=e.def.nodes[t];return Ko(e,p,n,r,i,s,o,a,u,c,l,h,d),224&p.flags?Ci(e,t).value:void 0}function ba(e,t,n,r,i,s,o,a,u,c,l,h,d){const p=e.def.nodes[t];return Go(e,p,n,r,i,s,o,a,u,c,l,h,d),224&p.flags?Ci(e,t).value:void 0}function wa(e){return Ua(Sa.detectChanges,Wo,null,[e])}function Ea(e){return Ua(Sa.checkNoChanges,zo,null,[e])}function Ca(e){return Ua(Sa.destroy,Yo,null,[e])}var Sa={create:0,detectChanges:1,checkNoChanges:2,destroy:3,handleEvent:4};let Ta,xa,Aa;function Da(e,t){xa=e,Aa=t}function Ia(e,t,n,r){return Da(e,t),Ua(Sa.handleEvent,e.def.handleEvent,null,[e,t,n,r])}function Na(e,t){if(128&e.state)throw Di(Sa[Ta]);return Da(e,La(e,0)),e.def.updateDirectives(function(e,n,r,...i){const s=e.def.nodes[n];0===t?ka(e,s,r,i):Pa(e,s,r,i);16384&s.flags&&Da(e,La(e,n));return 224&s.flags?Ci(e,s.nodeIndex).value:void 0},e)}function Oa(e,t){if(128&e.state)throw Di(Sa[Ta]);return Da(e,Va(e,0)),e.def.updateRenderer(function(e,n,r,...i){const s=e.def.nodes[n];0===t?ka(e,s,r,i):Pa(e,s,r,i);3&s.flags&&Da(e,Va(e,n));return 224&s.flags?Ci(e,s.nodeIndex).value:void 0},e)}function ka(e,t,n,r){if(Ko(e,t,n,...r)){const i=1===n?r[0]:r;if(16384&t.flags){const n={};for(let e=0;e<t.bindings.length;e++){const r=t.bindings[e],s=i[e];8&r.flags&&(n[Ma(r.nonMinifiedName)]=Fa(s))}const r=t.parent,s=wi(e,r.nodeIndex).renderElement;if(r.element.name)for(let t in n){const r=n[t];null!=r?e.renderer.setAttribute(s,t,r):e.renderer.removeAttribute(s,t)}else e.renderer.setValue(s,`bindings=${JSON.stringify(n,null,2)}`)}}}function Pa(e,t,n,r){Go(e,t,n,...r)}function Ma(e){var t;return t=e.replace(/[$@]/g,"_"),`ng-reflect-${e=t.replace(Ra,(...e)=>"-"+e[1].toLowerCase())}`}Sa[Sa.create]="create",Sa[Sa.detectChanges]="detectChanges",Sa[Sa.checkNoChanges]="checkNoChanges",Sa[Sa.destroy]="destroy",Sa[Sa.handleEvent]="handleEvent";const Ra=/([A-Z])/g;function Fa(e){try{return null!=e?e.toString().slice(0,30):e}catch(t){return"[ERROR] Exception while trying to serialize the value"}}function La(e,t){for(let n=t;n<e.def.nodes.length;n++){const t=e.def.nodes[n];if(16384&t.flags&&t.bindings&&t.bindings.length)return n}return null}function Va(e,t){for(let n=t;n<e.def.nodes.length;n++){const t=e.def.nodes[n];if(3&t.flags&&t.bindings&&t.bindings.length)return n}return null}class ja{constructor(e,t){this.view=e,this.nodeIndex=t,null==t&&(this.nodeIndex=t=0),this.nodeDef=e.def.nodes[t];let n=this.nodeDef,r=e;for(;n&&0==(1&n.flags);)n=n.parent;if(!n)for(;!n&&r;)n=Hi(r),r=r.parent;this.elDef=n,this.elView=r}get elOrCompView(){return wi(this.elView,this.elDef.nodeIndex).componentView||this.view}get injector(){return $s(this.elView,this.elDef)}get component(){return this.elOrCompView.component}get context(){return this.elOrCompView.context}get providerTokens(){const e=[];if(this.elDef)for(let t=this.elDef.nodeIndex+1;t<=this.elDef.nodeIndex+this.elDef.childCount;t++){const n=this.elView.def.nodes[t];20224&n.flags&&e.push(n.provider.token),t+=n.childCount}return e}get references(){const e={};if(this.elDef){Ba(this.elView,this.elDef,e);for(let t=this.elDef.nodeIndex+1;t<=this.elDef.nodeIndex+this.elDef.childCount;t++){const n=this.elView.def.nodes[t];20224&n.flags&&Ba(this.elView,n,e),t+=n.childCount}}return e}get componentRenderElement(){const e=function(e){for(;e&&!Wi(e);)e=e.parent;if(e.parent)return wi(e.parent,Hi(e).nodeIndex);return null}(this.elOrCompView);return e?e.renderElement:void 0}get renderNode(){return 2&this.nodeDef.flags?zi(this.view,this.nodeDef):zi(this.elView,this.elDef)}logError(e,...t){let n,r;2&this.nodeDef.flags?(n=this.view.def,r=this.nodeDef.nodeIndex):(n=this.elView.def,r=this.elDef.nodeIndex);const i=function(e,t){let n=-1;for(let r=0;r<=t;r++){const t=e.nodes[r];3&t.flags&&n++}return n}(n,r);let s=-1;n.factory(()=>++s===i?e.error.bind(e,...t):Ii),s<i&&(e.error("Illegal state: the ViewDefinitionFactory did not call the logger!"),e.error(...t))}}function Ba(e,t,n){for(let r in t.references)n[r]=xo(e,t,t.references[r])}function Ua(e,t,n,r){const i=Ta,s=xa,o=Aa;try{Ta=e;const u=t.apply(n,r);return xa=s,Aa=o,Ta=i,u}catch(a){if(yn(a)||!xa)throw a;throw function(e,t){return e instanceof Error||(e=new Error(e.toString())),Ai(e,t),e}(a,qa())}}function qa(){return xa?new ja(xa,Aa):null}class $a{constructor(e){this.delegate=e}createRenderer(e,t){return new Ha(this.delegate.createRenderer(e,t))}begin(){this.delegate.begin&&this.delegate.begin()}end(){this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.delegate.whenRenderingDone?this.delegate.whenRenderingDone():Promise.resolve(null)}}class Ha{constructor(e){this.delegate=e,this.debugContextFactory=qa,this.data=this.delegate.data}createDebugContext(e){return this.debugContextFactory(e)}destroyNode(e){!function(e){zr.delete(e.nativeNode)}(Wr(e)),this.delegate.destroyNode&&this.delegate.destroyNode(e)}destroy(){this.delegate.destroy()}createElement(e,t){const n=this.delegate.createElement(e,t),r=this.createDebugContext(n);if(r){const t=new Hr(n,null,r);t.name=e,Kr(t)}return n}createComment(e){const t=this.delegate.createComment(e),n=this.createDebugContext(t);return n&&Kr(new $r(t,null,n)),t}createText(e){const t=this.delegate.createText(e),n=this.createDebugContext(t);return n&&Kr(new $r(t,null,n)),t}appendChild(e,t){const n=Wr(e),r=Wr(t);n&&r&&n instanceof Hr&&n.addChild(r),this.delegate.appendChild(e,t)}insertBefore(e,t,n){const r=Wr(e),i=Wr(t),s=Wr(n);r&&i&&r instanceof Hr&&r.insertBefore(s,i),this.delegate.insertBefore(e,t,n)}removeChild(e,t){const n=Wr(e),r=Wr(t);n&&r&&n instanceof Hr&&n.removeChild(r),this.delegate.removeChild(e,t)}selectRootElement(e,t){const n=this.delegate.selectRootElement(e,t),r=qa()||(yi?this.createDebugContext(n):null);return r&&Kr(new Hr(n,null,r)),n}setAttribute(e,t,n,r){const i=Wr(e);if(i&&i instanceof Hr){const e=r?r+":"+t:t;i.attributes[e]=n}this.delegate.setAttribute(e,t,n,r)}removeAttribute(e,t,n){const r=Wr(e);if(r&&r instanceof Hr){const e=n?n+":"+t:t;r.attributes[e]=null}this.delegate.removeAttribute(e,t,n)}addClass(e,t){const n=Wr(e);n&&n instanceof Hr&&(n.classes[t]=!0),this.delegate.addClass(e,t)}removeClass(e,t){const n=Wr(e);n&&n instanceof Hr&&(n.classes[t]=!1),this.delegate.removeClass(e,t)}setStyle(e,t,n,r){const i=Wr(e);i&&i instanceof Hr&&(i.styles[t]=n),this.delegate.setStyle(e,t,n,r)}removeStyle(e,t,n){const r=Wr(e);r&&r instanceof Hr&&(r.styles[t]=null),this.delegate.removeStyle(e,t,n)}setProperty(e,t,n){const r=Wr(e);r&&r instanceof Hr&&(r.properties[t]=n),this.delegate.setProperty(e,t,n)}listen(e,t,n){if("string"!=typeof e){const r=Wr(e);r&&r.listeners.push(new qr(t,n))}return this.delegate.listen(e,t,n)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setValue(e,t){return this.delegate.setValue(e,t)}}function za(e,t,n){return new Wa(e,t,n)}class Wa extends Oe{constructor(e,t,n){super(),this.moduleType=e,this._bootstrapComponents=t,this._ngModuleDefFactory=n}create(e){sa();const t=function(e){const t=Array.from(e.providers),n=Array.from(e.modules),r={};for(const i in e.providersByKey)r[i]=e.providersByKey[i];return{factory:e.factory,isRoot:e.isRoot,providers:t,modules:n,providersByKey:r}}(Ji(this._ngModuleDefFactory));return Ti.createNgModuleRef(this.moduleType,e||pe.NULL,this._bootstrapComponents,t)}}},"9ppp":function(e,t,n){"use strict";function r(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}n.d(t,"a",function(){return i}),r.prototype=Object.create(Error.prototype);const i=r},CRDf:function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=n("kJWO");const i=e=>t=>{const n=e[r.a]();if("function"!=typeof n.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return n.subscribe(t)}},Cfvw:function(e,t,n){"use strict";var r=n("HDdC"),i=n("c2HN"),s=n("I55L"),o=n("kJWO");var a=n("Lhse");var u=n("yCtX"),c=n("quSY"),l=n("a7t3");var h=n("pLzU");var d=n("CRDf");var p=n("SeVD");function f(e,t){if(!t)return e instanceof r.a?e:new r.a(Object(p.a)(e));if(null!=e){if(function(e){return e&&"function"==typeof e[o.a]}(e))return function(e,t){return t?new r.a(n=>{const r=new c.a;return r.add(t.schedule(()=>{const i=e[o.a]();r.add(i.subscribe({next(e){r.add(t.schedule(()=>n.next(e)))},error(e){r.add(t.schedule(()=>n.error(e)))},complete(){r.add(t.schedule(()=>n.complete()))}}))})),r}):new r.a(Object(d.a)(e))}(e,t);if(Object(i.a)(e))return function(e,t){return t?new r.a(n=>{const r=new c.a;return r.add(t.schedule(()=>e.then(e=>{r.add(t.schedule(()=>{n.next(e),r.add(t.schedule(()=>n.complete()))}))},e=>{r.add(t.schedule(()=>n.error(e)))}))),r}):new r.a(Object(l.a)(e))}(e,t);if(Object(s.a)(e))return Object(u.a)(e,t);if(function(e){return e&&"function"==typeof e[a.a]}(e)||"string"==typeof e)return function(e,t){if(!e)throw new Error("Iterable cannot be null");return t?new r.a(n=>{const r=new c.a;let i;return r.add(()=>{i&&"function"==typeof i.return&&i.return()}),r.add(t.schedule(()=>{i=e[a.a](),r.add(t.schedule(function(){if(n.closed)return;let e,t;try{const s=i.next();e=s.value,t=s.done}catch(r){return void n.error(r)}t?n.complete():(n.next(e),this.schedule())}))})),r}):new r.a(Object(h.a)(e))}(e,t)}throw new TypeError((null!==e&&typeof e||e)+" is not observable")}n.d(t,"a",function(){return f})},CqG3:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}(n("g+7Q"))},DH7j:function(e,t,n){"use strict";n.d(t,"a",function(){return r});const r=Array.isArray||(e=>e&&"number"==typeof e.length)},DiaM:function(e,t){e.exports=".main-content {\n  position: relative;\n  height: 100vh;\n  overflow-x: hidden;\n  background-image: url('/test.front.junior/bg.52f6023688026984dc8f.jpg');\n  background-repeat: no-repeat;\n  background-position: top center;\n  background-size: cover; }\n  .main-content::before {\n    display: block;\n    content: '';\n    position: fixed;\n    top: 0;\n    bottom: 0;\n    left: 0;\n    right: 0;\n    background-color: rgba(0, 0, 0, 0.5); }\n  .main-content > .container {\n  margin-top: 0;\n  padding-bottom: 0;\n  position: relative;\n  z-index: 1; }\n  .main-content > .container > .grid {\n    align-items: center;\n    position: relative;\n    min-height: 100vh; }\n  .card-content {\n  color: #666; }\n  .presentation-section {\n  position: relative;\n  z-index: 1; }\n  .presentation-section .breadcrumb {\n    margin-left: -12px; }\n  .presentation-section .breadcrumb .breadcrumb-item {\n      color: #fff; }\n  .presentation-section h1, .presentation-section h2 {\n    color: #fff; }\n  .infos-section {\n  color: #fff;\n  background-color: rgba(111, 205, 210, 0.616);\n  min-height: 100vh;\n  height: 100%;\n  display: flex;\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  right: 0;\n  flex-direction: column;\n  justify-content: center; }\n  .infos-section .infos {\n    padding: 1rem; }\n  .infos-section .infos ul, .infos-section .infos li {\n      list-style: none; }\n  .infos-section .infos ul {\n      padding: 0; }\n  .infos-section .infos .tag {\n      background-color: #34a1a7;\n      color: white;\n      font-size: 14px;\n      padding: .1em .75em;\n      border-radius: 5px;\n      display: inline-block;\n      margin-top: .25em; }\n  .infos-section .infos .tag + .tag {\n        margin-left: .25em; }\n  @media only screen and (max-width: 768px) {\n  .presentation-section {\n    padding: 2rem 1rem 1rem; }\n  .infos-section {\n    height: auto; }\n    .infos-section app-destination-gallery {\n      -webkit-transform: none;\n              transform: none; } }\n"},EY2u:function(e,t,n){"use strict";n.d(t,"a",function(){return i}),n.d(t,"b",function(){return s});var r=n("HDdC");const i=new r.a(e=>e.complete());function s(e){return e?function(e){return new r.a(t=>e.schedule(()=>t.complete()))}(e):i}},HDdC:function(e,t,n){"use strict";var r=n("7o/Q");var i=n("2QA8"),s=n("gRHU");var o=n("kJWO"),a=n("mCNh"),u=n("2fFW");n.d(t,"a",function(){return c});class c{constructor(e){this._isScalar=!1,e&&(this._subscribe=e)}lift(e){const t=new c;return t.source=this,t.operator=e,t}subscribe(e,t,n){const{operator:o}=this,a=function(e,t,n){if(e){if(e instanceof r.a)return e;if(e[i.a])return e[i.a]()}return e||t||n?new r.a(e,t,n):new r.a(s.a)}(e,t,n);if(o?o.call(a,this.source):a.add(this.source||u.a.useDeprecatedSynchronousErrorHandling&&!a.syncErrorThrowable?this._subscribe(a):this._trySubscribe(a)),u.a.useDeprecatedSynchronousErrorHandling&&a.syncErrorThrowable&&(a.syncErrorThrowable=!1,a.syncErrorThrown))throw a.syncErrorValue;return a}_trySubscribe(e){try{return this._subscribe(e)}catch(t){u.a.useDeprecatedSynchronousErrorHandling&&(e.syncErrorThrown=!0,e.syncErrorValue=t),!function(e){for(;e;){const{closed:t,destination:n,isStopped:i}=e;if(t||i)return!1;e=n&&n instanceof r.a?n:null}return!0}(e)?console.warn(t):e.error(t)}}forEach(e,t){return new(t=l(t))((t,n)=>{let r;r=this.subscribe(t=>{try{e(t)}catch(i){n(i),r&&r.unsubscribe()}},n,t)})}_subscribe(e){const{source:t}=this;return t&&t.subscribe(e)}[o.a](){return this}pipe(...e){return 0===e.length?this:Object(a.b)(e)(this)}toPromise(e){return new(e=l(e))((e,t)=>{let n;this.subscribe(e=>n=e,e=>t(e),()=>e(n))})}}function l(e){if(e||(e=u.a.Promise||Promise),!e)throw new Error("no Promise impl found");return e}c.create=(e=>new c(e))},I55L:function(e,t,n){"use strict";n.d(t,"a",function(){return r});const r=e=>e&&"number"==typeof e.length&&"function"!=typeof e},IjjT:function(e,t,n){"use strict";class r{constructor(e,t=r.now){this.SchedulerAction=e,this.now=t}schedule(e,t=0,n){return new this.SchedulerAction(this,e).schedule(n,t)}}r.now=(()=>Date.now()),n.d(t,"a",function(){return i});class i extends r{constructor(e,t=r.now){super(e,()=>i.delegate&&i.delegate!==this?i.delegate.now():t()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(e,t=0,n){return i.delegate&&i.delegate!==this?i.delegate.schedule(e,t,n):super.schedule(e,t,n)}flush(e){const{actions:t}=this;if(this.active)return void t.push(e);let n;this.active=!0;do{if(n=e.execute(e.state,e.delay))break}while(e=t.shift());if(this.active=!1,n){for(;e=t.shift();)e.unsubscribe();throw n}}}},"Jyj+":function(e,t){e.exports='<header>\r\n\t<div class="container">\r\n\t\t<h1>Lucca Voyages</h1>\r\n\t\t<h4>\r\n\t\t\tClean modern travelblogger traveler simple organized, design traveler webdesign excursion. Colorful Travel pretty excursion, webdesign whimsical design excursion traveler cute blogger.\r\n\t\t</h4>\r\n\t\t<div class="card textfield mod-search mod-block searchbox">\r\n\t\t\t<input class="textfield-input" placeholder="Cherchez une destination" [formControl]="clueCtrl">\r\n\t\t</div>\r\n\t</div>\r\n</header>\r\n<main class="main-content">\r\n\t<section class="container">\r\n\t\t<h2>Destinations</h2>\r\n\t\t<div class="grid">\r\n\t\t\t<div class="grid-md4 grid-lg3" *ngFor="let destination of destinations$ | async">\r\n\t\t\t\t<app-destination-thumbnail [destination]="destination"></app-destination-thumbnail>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t</section>\r\n</main>\r\n'},Kqap:function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=n("7o/Q");function i(e,t){let n=!1;return arguments.length>=2&&(n=!0),function(r){return r.lift(new s(e,t,n))}}class s{constructor(e,t,n=!1){this.accumulator=e,this.seed=t,this.hasSeed=n}call(e,t){return t.subscribe(new o(e,this.accumulator,this.seed,this.hasSeed))}}class o extends r.a{constructor(e,t,n,r){super(e),this.accumulator=t,this._seed=n,this.hasSeed=r,this.index=0}get seed(){return this._seed}set seed(e){this.hasSeed=!0,this._seed=e}_next(e){if(this.hasSeed)return this._tryNext(e);this.seed=e,this.destination.next(e)}_tryNext(e){const t=this.index++;let n;try{n=this.accumulator(this.seed,e,t)}catch(r){this.destination.error(r)}this.seed=n,this.destination.next(n)}}},KqfI:function(e,t,n){"use strict";function r(){}n.d(t,"a",function(){return r})},LRne:function(e,t,n){"use strict";n.d(t,"a",function(){return a});var r=n("z+Ro"),i=n("yCtX"),s=n("EY2u"),o=n("XUOw");function a(...e){let t=e[e.length-1];switch(Object(r.a)(t)?e.pop():t=void 0,e.length){case 0:return Object(s.b)(t);case 1:return t?Object(i.a)(e,t):Object(o.a)(e[0]);default:return Object(i.a)(e,t)}}},Lhse:function(e,t,n){"use strict";n.d(t,"a",function(){return r});const r="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"},MMa0:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}(n("xs0t"))},N3Cr:function(e,t){e.exports=".card-image {\n  height: 180px;\n  overflow: hidden; }\n  .card-image img {\n    -o-object-fit: cover;\n       object-fit: cover;\n    width: 100%;\n    height: 100%; }\n  .card {\n  overflow: hidden;\n  height: 350px; }\n"},NJ4a:function(e,t,n){"use strict";function r(e){setTimeout(()=>{throw e})}n.d(t,"a",function(){return r})},"O/rq":function(e,t){e.exports='<div class="card mod-clickable" [routerLink]="[\'/destination\', destination?.id]">\r\n\t<div class="card-image">\r\n\t\t<img [src]="thumbnailImg" alt="destination">\r\n\t</div>\r\n\t<div class="card-content">\r\n\t\t<h2>{{destination.name}}</h2>\r\n\t\t<p>\r\n\t\t\t{{destination.description}}\r\n\t\t</p>\r\n\t</div>\r\n</div>\r\n'},SVse:function(e,t,n){"use strict";n.d(t,"n",function(){return ge}),n.d(t,"b",function(){return St}),n.d(t,"c",function(){return xt}),n.d(t,"m",function(){return At}),n.d(t,"k",function(){return It}),n.d(t,"l",function(){return Nt}),n.d(t,"j",function(){return Ot}),n.d(t,"i",function(){return i}),n.d(t,"e",function(){return s}),n.d(t,"g",function(){return o}),n.d(t,"a",function(){return a}),n.d(t,"d",function(){return l}),n.d(t,"h",function(){return h}),n.d(t,"f",function(){return u});var r=n("8Y7J");class i{}const s=new r.B("Location Initialized");class o{}const a=new r.B("appBaseHref");class u{constructor(e){this._subject=new r.v,this._platformStrategy=e;const t=this._platformStrategy.getBaseHref();this._baseHref=u.stripTrailingSlash(c(t)),this._platformStrategy.onPopState(e=>{this._subject.emit({url:this.path(!0),pop:!0,state:e.state,type:e.type})})}path(e=!1){return this.normalize(this._platformStrategy.path(e))}isCurrentPathEqualTo(e,t=""){return this.path()==this.normalize(e+u.normalizeQueryParams(t))}normalize(e){return u.stripTrailingSlash(function(e,t){return e&&t.startsWith(e)?t.substring(e.length):t}(this._baseHref,c(e)))}prepareExternalUrl(e){return e&&"/"!==e[0]&&(e="/"+e),this._platformStrategy.prepareExternalUrl(e)}go(e,t="",n=null){this._platformStrategy.pushState(n,"",e,t)}replaceState(e,t="",n=null){this._platformStrategy.replaceState(n,"",e,t)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}subscribe(e,t,n){return this._subject.subscribe({next:e,error:t,complete:n})}static normalizeQueryParams(e){return e&&"?"!==e[0]?"?"+e:e}static joinWithSlash(e,t){if(0==e.length)return t;if(0==t.length)return e;let n=0;return e.endsWith("/")&&n++,t.startsWith("/")&&n++,2==n?e+t.substring(1):1==n?e+t:e+"/"+t}static stripTrailingSlash(e){const t=e.match(/#|\?|$/),n=t&&t.index||e.length,r=n-("/"===e[n-1]?1:0);return e.slice(0,r)+e.slice(n)}}function c(e){return e.replace(/\/index.html$/,"")}u.decorators=[{type:r.A}],u.ctorParameters=(()=>[{type:o}]);class l extends o{constructor(e,t){super(),this._platformLocation=e,this._baseHref="",null!=t&&(this._baseHref=t)}onPopState(e){this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e)}getBaseHref(){return this._baseHref}path(e=!1){let t=this._platformLocation.hash;return null==t&&(t="#"),t.length>0?t.substring(1):t}prepareExternalUrl(e){const t=u.joinWithSlash(this._baseHref,e);return t.length>0?"#"+t:t}pushState(e,t,n,r){let i=this.prepareExternalUrl(n+u.normalizeQueryParams(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.pushState(e,t,i)}replaceState(e,t,n,r){let i=this.prepareExternalUrl(n+u.normalizeQueryParams(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.replaceState(e,t,i)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}}l.decorators=[{type:r.A}],l.ctorParameters=(()=>[{type:i},{type:String,decorators:[{type:r.O},{type:r.z,args:[a]}]}]);class h extends o{constructor(e,t){if(super(),this._platformLocation=e,null==t&&(t=this._platformLocation.getBaseHrefFromDOM()),null==t)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=t}onPopState(e){this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e)}getBaseHref(){return this._baseHref}prepareExternalUrl(e){return u.joinWithSlash(this._baseHref,e)}path(e=!1){const t=this._platformLocation.pathname+u.normalizeQueryParams(this._platformLocation.search),n=this._platformLocation.hash;return n&&e?`${t}${n}`:t}pushState(e,t,n,r){const i=this.prepareExternalUrl(n+u.normalizeQueryParams(r));this._platformLocation.pushState(e,t,i)}replaceState(e,t,n,r){const i=this.prepareExternalUrl(n+u.normalizeQueryParams(r));this._platformLocation.replaceState(e,t,i)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}}h.decorators=[{type:r.A}],h.ctorParameters=(()=>[{type:i},{type:String,decorators:[{type:r.O},{type:r.z,args:[a]}]}]);const d=void 0;var p=["en",[["a","p"],["AM","PM"],d],[["AM","PM"],d,d],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],d,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],d,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",d,"{1} 'at' {0}",d],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"$","US Dollar",{},function(e){let t=Math.floor(Math.abs(e)),n=e.toString().replace(/^[^.]*\.?/,"").length;return 1===t&&0===n?1:5}];const f={};const m={ADP:[void 0,void 0,0],AFN:[void 0,void 0,0],ALL:[void 0,void 0,0],AMD:[void 0,void 0,0],AOA:[void 0,"Kz"],ARS:[void 0,"$"],AUD:["A$","$"],BAM:[void 0,"KM"],BBD:[void 0,"$"],BDT:[void 0,"\u09f3"],BHD:[void 0,void 0,3],BIF:[void 0,void 0,0],BMD:[void 0,"$"],BND:[void 0,"$"],BOB:[void 0,"Bs"],BRL:["R$"],BSD:[void 0,"$"],BWP:[void 0,"P"],BYN:[void 0,"\u0440.",2],BYR:[void 0,void 0,0],BZD:[void 0,"$"],CAD:["CA$","$",2],CHF:[void 0,void 0,2],CLF:[void 0,void 0,4],CLP:[void 0,"$",0],CNY:["CN\xa5","\xa5"],COP:[void 0,"$",0],CRC:[void 0,"\u20a1",2],CUC:[void 0,"$"],CUP:[void 0,"$"],CZK:[void 0,"K\u010d",2],DJF:[void 0,void 0,0],DKK:[void 0,"kr",2],DOP:[void 0,"$"],EGP:[void 0,"E\xa3"],ESP:[void 0,"\u20a7",0],EUR:["\u20ac"],FJD:[void 0,"$"],FKP:[void 0,"\xa3"],GBP:["\xa3"],GEL:[void 0,"\u20be"],GIP:[void 0,"\xa3"],GNF:[void 0,"FG",0],GTQ:[void 0,"Q"],GYD:[void 0,"$",0],HKD:["HK$","$"],HNL:[void 0,"L"],HRK:[void 0,"kn"],HUF:[void 0,"Ft",2],IDR:[void 0,"Rp",0],ILS:["\u20aa"],INR:["\u20b9"],IQD:[void 0,void 0,0],IRR:[void 0,void 0,0],ISK:[void 0,"kr",0],ITL:[void 0,void 0,0],JMD:[void 0,"$"],JOD:[void 0,void 0,3],JPY:["\xa5",void 0,0],KHR:[void 0,"\u17db"],KMF:[void 0,"CF",0],KPW:[void 0,"\u20a9",0],KRW:["\u20a9",void 0,0],KWD:[void 0,void 0,3],KYD:[void 0,"$"],KZT:[void 0,"\u20b8"],LAK:[void 0,"\u20ad",0],LBP:[void 0,"L\xa3",0],LKR:[void 0,"Rs"],LRD:[void 0,"$"],LTL:[void 0,"Lt"],LUF:[void 0,void 0,0],LVL:[void 0,"Ls"],LYD:[void 0,void 0,3],MGA:[void 0,"Ar",0],MGF:[void 0,void 0,0],MMK:[void 0,"K",0],MNT:[void 0,"\u20ae",0],MRO:[void 0,void 0,0],MUR:[void 0,"Rs",0],MXN:["MX$","$"],MYR:[void 0,"RM"],NAD:[void 0,"$"],NGN:[void 0,"\u20a6"],NIO:[void 0,"C$"],NOK:[void 0,"kr",2],NPR:[void 0,"Rs"],NZD:["NZ$","$"],OMR:[void 0,void 0,3],PHP:[void 0,"\u20b1"],PKR:[void 0,"Rs",0],PLN:[void 0,"z\u0142"],PYG:[void 0,"\u20b2",0],RON:[void 0,"lei"],RSD:[void 0,void 0,0],RUB:[void 0,"\u20bd"],RUR:[void 0,"\u0440."],RWF:[void 0,"RF",0],SBD:[void 0,"$"],SEK:[void 0,"kr",2],SGD:[void 0,"$"],SHP:[void 0,"\xa3"],SLL:[void 0,void 0,0],SOS:[void 0,void 0,0],SRD:[void 0,"$"],SSP:[void 0,"\xa3"],STD:[void 0,void 0,0],STN:[void 0,"Db"],SYP:[void 0,"\xa3",0],THB:[void 0,"\u0e3f"],TMM:[void 0,void 0,0],TND:[void 0,void 0,3],TOP:[void 0,"T$"],TRL:[void 0,void 0,0],TRY:[void 0,"\u20ba"],TTD:[void 0,"$"],TWD:["NT$","$",2],TZS:[void 0,void 0,0],UAH:[void 0,"\u20b4"],UGX:[void 0,void 0,0],USD:["$"],UYI:[void 0,void 0,0],UYU:[void 0,"$"],UZS:[void 0,void 0,0],VEF:[void 0,"Bs"],VND:["\u20ab",void 0,0],VUV:[void 0,void 0,0],XAF:["FCFA",void 0,0],XCD:["EC$","$"],XOF:["CFA",void 0,0],XPF:["CFPF",void 0,0],YER:[void 0,void 0,0],ZAR:[void 0,"R"],ZMK:[void 0,void 0,0],ZMW:[void 0,"ZK"],ZWD:[void 0,void 0,0]};var g={Decimal:0,Percent:1,Currency:2,Scientific:3};g[g.Decimal]="Decimal",g[g.Percent]="Percent",g[g.Currency]="Currency",g[g.Scientific]="Scientific";var y={Zero:0,One:1,Two:2,Few:3,Many:4,Other:5};y[y.Zero]="Zero",y[y.One]="One",y[y.Two]="Two",y[y.Few]="Few",y[y.Many]="Many",y[y.Other]="Other";var v={Format:0,Standalone:1};v[v.Format]="Format",v[v.Standalone]="Standalone";var _={Narrow:0,Abbreviated:1,Wide:2,Short:3};_[_.Narrow]="Narrow",_[_.Abbreviated]="Abbreviated",_[_.Wide]="Wide",_[_.Short]="Short";var b={Short:0,Medium:1,Long:2,Full:3};b[b.Short]="Short",b[b.Medium]="Medium",b[b.Long]="Long",b[b.Full]="Full";var w={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};w[w.Decimal]="Decimal",w[w.Group]="Group",w[w.List]="List",w[w.PercentSign]="PercentSign",w[w.PlusSign]="PlusSign",w[w.MinusSign]="MinusSign",w[w.Exponential]="Exponential",w[w.SuperscriptingExponent]="SuperscriptingExponent",w[w.PerMille]="PerMille",w[w.Infinity]="Infinity",w[w.NaN]="NaN",w[w.TimeSeparator]="TimeSeparator",w[w.CurrencyDecimal]="CurrencyDecimal",w[w.CurrencyGroup]="CurrencyGroup";var E={Sunday:0,Monday:1,Tuesday:2,Wednesday:3,Thursday:4,Friday:5,Saturday:6};function C(e,t){return I(O(e)[10],t)}function S(e,t){return I(O(e)[11],t)}function T(e,t){return I(O(e)[12],t)}function x(e,t){const n=O(e),r=n[13][t];if(void 0===r){if(t===w.CurrencyDecimal)return n[13][w.Decimal];if(t===w.CurrencyGroup)return n[13][w.Group]}return r}function A(e,t){return O(e)[14][t]}function D(e){if(!e[19])throw new Error(`Missing extra locale data for the locale "${e[0]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function I(e,t){for(let n=t;n>-1;n--)if(void 0!==e[n])return e[n];throw new Error("Locale data API: locale data undefined")}function N(e){const[t,n]=e.split(":");return{hours:+t,minutes:+n}}function O(e){const t=e.toLowerCase().replace(/_/g,"-");let n=f[t];if(n)return n;const r=t.split("-")[0];if(n=f[r])return n;if("en"===r)return p;throw new Error(`Missing locale data for the locale "${e}".`)}function k(e,t,n="en"){const r=function(e){return O(e)[17]}(n)[e]||m[e]||[],i=r[1];return"narrow"===t&&"string"==typeof i?i:r[0]||e}E[E.Sunday]="Sunday",E[E.Monday]="Monday",E[E.Tuesday]="Tuesday",E[E.Wednesday]="Wednesday",E[E.Thursday]="Thursday",E[E.Friday]="Friday",E[E.Saturday]="Saturday";const P=2;const M=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,R={},F=/((?:[^GyMLwWdEabBhHmsSzZO']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;var L={Short:0,ShortGMT:1,Long:2,Extended:3};L[L.Short]="Short",L[L.ShortGMT]="ShortGMT",L[L.Long]="Long",L[L.Extended]="Extended";var V={FullYear:0,Month:1,Date:2,Hours:3,Minutes:4,Seconds:5,FractionalSeconds:6,Day:7};V[V.FullYear]="FullYear",V[V.Month]="Month",V[V.Date]="Date",V[V.Hours]="Hours",V[V.Minutes]="Minutes",V[V.Seconds]="Seconds",V[V.FractionalSeconds]="FractionalSeconds",V[V.Day]="Day";var j={DayPeriods:0,Days:1,Months:2,Eras:3};function B(e,t,n,r){let i=function(e){if(Z(e))return e;if("number"==typeof e&&!isNaN(e))return new Date(e);if("string"==typeof e){e=e.trim();const t=parseFloat(e);if(!isNaN(e-t))return new Date(t);if(/^(\d{4}-\d{1,2}-\d{1,2})$/.test(e)){const[t,n,r]=e.split("-").map(e=>+e);return new Date(t,n-1,r)}let n;if(n=e.match(M))return Y(n)}const t=new Date(e);if(!Z(t))throw new Error(`Unable to convert "${e}" into a date`);return t}(e);t=function e(t,n){const r=function(e){return O(e)[0]}(t);R[r]=R[r]||{};if(R[r][n])return R[r][n];let i="";switch(n){case"shortDate":i=C(t,b.Short);break;case"mediumDate":i=C(t,b.Medium);break;case"longDate":i=C(t,b.Long);break;case"fullDate":i=C(t,b.Full);break;case"shortTime":i=S(t,b.Short);break;case"mediumTime":i=S(t,b.Medium);break;case"longTime":i=S(t,b.Long);break;case"fullTime":i=S(t,b.Full);break;case"short":const r=e(t,"shortTime"),s=e(t,"shortDate");i=U(T(t,b.Short),[r,s]);break;case"medium":const o=e(t,"mediumTime"),a=e(t,"mediumDate");i=U(T(t,b.Medium),[o,a]);break;case"long":const u=e(t,"longTime"),c=e(t,"longDate");i=U(T(t,b.Long),[u,c]);break;case"full":const l=e(t,"fullTime"),h=e(t,"fullDate");i=U(T(t,b.Full),[l,h])}i&&(R[r][n]=i);return i}(n,t)||t;let s,o=[];for(;t;){if(!(s=F.exec(t))){o.push(t);break}{const e=(o=o.concat(s.slice(1))).pop();if(!e)break;t=e}}let a=i.getTimezoneOffset();r&&(a=X(r,a),i=function(e,t,n){const r=n?-1:1,i=e.getTimezoneOffset(),s=X(t,i);return function(e,t){return(e=new Date(e.getTime())).setMinutes(e.getMinutes()+t),e}(e,r*(s-i))}(i,r,!0));let u="";return o.forEach(e=>{const t=function(e){if(G[e])return G[e];let t;switch(e){case"G":case"GG":case"GGG":t=H(j.Eras,_.Abbreviated);break;case"GGGG":t=H(j.Eras,_.Wide);break;case"GGGGG":t=H(j.Eras,_.Narrow);break;case"y":t=$(V.FullYear,1,0,!1,!0);break;case"yy":t=$(V.FullYear,2,0,!0,!0);break;case"yyy":t=$(V.FullYear,3,0,!1,!0);break;case"yyyy":t=$(V.FullYear,4,0,!1,!0);break;case"M":case"L":t=$(V.Month,1,1);break;case"MM":case"LL":t=$(V.Month,2,1);break;case"MMM":t=H(j.Months,_.Abbreviated);break;case"MMMM":t=H(j.Months,_.Wide);break;case"MMMMM":t=H(j.Months,_.Narrow);break;case"LLL":t=H(j.Months,_.Abbreviated,v.Standalone);break;case"LLLL":t=H(j.Months,_.Wide,v.Standalone);break;case"LLLLL":t=H(j.Months,_.Narrow,v.Standalone);break;case"w":t=Q(1);break;case"ww":t=Q(2);break;case"W":t=Q(1,!0);break;case"d":t=$(V.Date,1);break;case"dd":t=$(V.Date,2);break;case"E":case"EE":case"EEE":t=H(j.Days,_.Abbreviated);break;case"EEEE":t=H(j.Days,_.Wide);break;case"EEEEE":t=H(j.Days,_.Narrow);break;case"EEEEEE":t=H(j.Days,_.Short);break;case"a":case"aa":case"aaa":t=H(j.DayPeriods,_.Abbreviated);break;case"aaaa":t=H(j.DayPeriods,_.Wide);break;case"aaaaa":t=H(j.DayPeriods,_.Narrow);break;case"b":case"bb":case"bbb":t=H(j.DayPeriods,_.Abbreviated,v.Standalone,!0);break;case"bbbb":t=H(j.DayPeriods,_.Wide,v.Standalone,!0);break;case"bbbbb":t=H(j.DayPeriods,_.Narrow,v.Standalone,!0);break;case"B":case"BB":case"BBB":t=H(j.DayPeriods,_.Abbreviated,v.Format,!0);break;case"BBBB":t=H(j.DayPeriods,_.Wide,v.Format,!0);break;case"BBBBB":t=H(j.DayPeriods,_.Narrow,v.Format,!0);break;case"h":t=$(V.Hours,1,-12);break;case"hh":t=$(V.Hours,2,-12);break;case"H":t=$(V.Hours,1);break;case"HH":t=$(V.Hours,2);break;case"m":t=$(V.Minutes,1);break;case"mm":t=$(V.Minutes,2);break;case"s":t=$(V.Seconds,1);break;case"ss":t=$(V.Seconds,2);break;case"S":t=$(V.FractionalSeconds,1);break;case"SS":t=$(V.FractionalSeconds,2);break;case"SSS":t=$(V.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":t=z(L.Short);break;case"ZZZZZ":t=z(L.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":t=z(L.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":t=z(L.Long);break;default:return null}return G[e]=t,t}(e);u+=t?t(i,n,a):"''"===e?"'":e.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),u}function U(e,t){return t&&(e=e.replace(/\{([^}]+)}/g,function(e,n){return null!=t&&n in t?t[n]:e})),e}function q(e,t,n="-",r,i){let s="";(e<0||i&&e<=0)&&(i?e=1-e:(e=-e,s=n));let o=String(e);for(;o.length<t;)o="0"+o;return r&&(o=o.substr(o.length-t)),s+o}function $(e,t,n=0,r=!1,i=!1){return function(s,o){let a=function(e,t){switch(e){case V.FullYear:return t.getFullYear();case V.Month:return t.getMonth();case V.Date:return t.getDate();case V.Hours:return t.getHours();case V.Minutes:return t.getMinutes();case V.Seconds:return t.getSeconds();case V.FractionalSeconds:return t.getMilliseconds();case V.Day:return t.getDay();default:throw new Error(`Unknown DateType value "${e}".`)}}(e,s);if((n>0||a>-n)&&(a+=n),e===V.Hours)0===a&&-12===n&&(a=12);else if(e===V.FractionalSeconds)return u=t,q(a,3).substr(0,u);var u;const c=x(o,w.MinusSign);return q(a,t,c,r,i)}}function H(e,t,n=v.Format,r=!1){return function(i,s){return function(e,t,n,r,i,s){switch(n){case j.Months:return function(e,t,n){const r=O(e),i=I([r[5],r[6]],t);return I(i,n)}(t,i,r)[e.getMonth()];case j.Days:return function(e,t,n){const r=O(e),i=I([r[3],r[4]],t);return I(i,n)}(t,i,r)[e.getDay()];case j.DayPeriods:const o=e.getHours(),a=e.getMinutes();if(s){const e=function(e){const t=O(e);return D(t),(t[19][2]||[]).map(e=>"string"==typeof e?N(e):[N(e[0]),N(e[1])])}(t),n=function(e,t,n){const r=O(e);D(r);const i=I([r[19][0],r[19][1]],t)||[];return I(i,n)||[]}(t,i,r);let s;if(e.forEach((e,t)=>{if(Array.isArray(e)){const{hours:r,minutes:i}=e[0],{hours:u,minutes:c}=e[1];o>=r&&a>=i&&(o<u||o===u&&a<c)&&(s=n[t])}else{const{hours:r,minutes:i}=e;r===o&&i===a&&(s=n[t])}}),s)return s}return function(e,t,n){const r=O(e),i=I([r[1],r[2]],t);return I(i,n)}(t,i,r)[o<12?0:1];case j.Eras:return function(e,t){return I(O(e)[7],t)}(t,r)[e.getFullYear()<=0?0:1];default:const u=n;throw new Error(`unexpected translation type ${u}`)}}(i,s,e,t,n,r)}}function z(e){return function(t,n,r){const i=-1*r,s=x(n,w.MinusSign),o=i>0?Math.floor(i/60):Math.ceil(i/60);switch(e){case L.Short:return(i>=0?"+":"")+q(o,2,s)+q(Math.abs(i%60),2,s);case L.ShortGMT:return"GMT"+(i>=0?"+":"")+q(o,1,s);case L.Long:return"GMT"+(i>=0?"+":"")+q(o,2,s)+":"+q(Math.abs(i%60),2,s);case L.Extended:return 0===r?"Z":(i>=0?"+":"")+q(o,2,s)+":"+q(Math.abs(i%60),2,s);default:throw new Error(`Unknown zone width "${e}"`)}}}j[j.DayPeriods]="DayPeriods",j[j.Days]="Days",j[j.Months]="Months",j[j.Eras]="Eras";const W=0,K=4;function Q(e,t=!1){return function(n,r){let i;if(t){const e=new Date(n.getFullYear(),n.getMonth(),1).getDay()-1,t=n.getDate();i=1+Math.floor((t+e)/7)}else{const e=function(e){const t=new Date(e,W,1).getDay();return new Date(e,0,1+(t<=K?K:K+7)-t)}(n.getFullYear()),t=(s=n,new Date(s.getFullYear(),s.getMonth(),s.getDate()+(K-s.getDay()))).getTime()-e.getTime();i=1+Math.round(t/6048e5)}var s;return q(i,e,x(r,w.MinusSign))}}const G={};function X(e,t){e=e.replace(/:/g,"");const n=Date.parse("Jan 01, 1970 00:00:00 "+e)/6e4;return isNaN(n)?t:n}function Y(e){const t=new Date(0);let n=0,r=0;const i=e[8]?t.setUTCFullYear:t.setFullYear,s=e[8]?t.setUTCHours:t.setHours;e[9]&&(n=Number(e[9]+e[10]),r=Number(e[9]+e[11])),i.call(t,Number(e[1]),Number(e[2])-1,Number(e[3]));const o=Number(e[4]||0)-n,a=Number(e[5]||0)-r,u=Number(e[6]||0),c=Math.round(1e3*parseFloat("0."+(e[7]||0)));return s.call(t,o,a,u,c),t}function Z(e){return e instanceof Date&&!isNaN(e.valueOf())}const J=/^(\d+)?\.((\d+)(-(\d+))?)?$/,ee=22,te=".",ne="0",re=";",ie=",",se="#",oe="\xa4",ae="%";function ue(e,t,n,r,i,s,o=!1){let a="",u=!1;if(isFinite(e)){let c=function(e){let t,n,r,i,s,o=Math.abs(e)+"",a=0;(n=o.indexOf(te))>-1&&(o=o.replace(te,""));(r=o.search(/e/i))>0?(n<0&&(n=r),n+=+o.slice(r+1),o=o.substring(0,r)):n<0&&(n=o.length);for(r=0;o.charAt(r)===ne;r++);if(r===(s=o.length))t=[0],n=1;else{for(s--;o.charAt(s)===ne;)s--;for(n-=r,t=[],i=0;r<=s;r++,i++)t[i]=Number(o.charAt(r))}n>ee&&(t=t.splice(0,ee-1),a=n-1,n=1);return{digits:t,exponent:a,integerLen:n}}(e);o&&(c=function(e){if(0===e.digits[0])return e;const t=e.digits.length-e.integerLen;e.exponent?e.exponent+=2:(0===t?e.digits.push(0,0):1===t&&e.digits.push(0),e.integerLen+=2);return e}(c));let l=t.minInt,h=t.minFrac,d=t.maxFrac;if(s){const e=s.match(J);if(null===e)throw new Error(`${s} is not a valid digit info`);const t=e[1],n=e[3],r=e[5];null!=t&&(l=he(t)),null!=n&&(h=he(n)),null!=r?d=he(r):null!=n&&h>d&&(d=h)}!function(e,t,n){if(t>n)throw new Error(`The minimum number of digits after fraction (${t}) is higher than the maximum (${n}).`);let r=e.digits,i=r.length-e.integerLen;const s=Math.min(Math.max(t,i),n);let o=s+e.integerLen,a=r[o];if(o>0){r.splice(Math.max(e.integerLen,o));for(let e=o;e<r.length;e++)r[e]=0}else{i=Math.max(0,i),e.integerLen=1,r.length=Math.max(1,o=s+1),r[0]=0;for(let e=1;e<o;e++)r[e]=0}if(a>=5)if(o-1<0){for(let t=0;t>o;t--)r.unshift(0),e.integerLen++;r.unshift(1),e.integerLen++}else r[o-1]++;for(;i<Math.max(0,s);i++)r.push(0);let u=0!==s;const c=t+e.integerLen,l=r.reduceRight(function(e,t,n,r){return t+=e,r[n]=t<10?t:t-10,u&&(0===r[n]&&n>=c?r.pop():u=!1),t>=10?1:0},0);l&&(r.unshift(l),e.integerLen++)}(c,h,d);let p=c.digits,f=c.integerLen;const m=c.exponent;let g=[];for(u=p.every(e=>!e);f<l;f++)p.unshift(0);for(;f<0;f++)p.unshift(0);f>0?g=p.splice(f,p.length):(g=p,p=[0]);const y=[];for(p.length>=t.lgSize&&y.unshift(p.splice(-t.lgSize,p.length).join(""));p.length>t.gSize;)y.unshift(p.splice(-t.gSize,p.length).join(""));p.length&&y.unshift(p.join("")),a=y.join(x(n,r)),g.length&&(a+=x(n,i)+g.join("")),m&&(a+=x(n,w.Exponential)+"+"+m)}else a=x(n,w.Infinity);return a=e<0&&!u?t.negPre+a+t.negSuf:t.posPre+a+t.posSuf}function ce(e,t,n,r,i){const s=le(A(t,g.Currency),x(t,w.MinusSign));return s.minFrac=function(e){let t;const n=m[e];return n&&(t=n[2]),"number"==typeof t?t:P}(r),s.maxFrac=s.minFrac,ue(e,s,t,w.CurrencyGroup,w.CurrencyDecimal,i).replace(oe,n).replace(oe,"")}function le(e,t="-"){const n={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},r=e.split(re),i=r[0],s=r[1],o=-1!==i.indexOf(te)?i.split(te):[i.substring(0,i.lastIndexOf(ne)+1),i.substring(i.lastIndexOf(ne)+1)],a=o[0],u=o[1]||"";n.posPre=a.substr(0,a.indexOf(se));for(let l=0;l<u.length;l++){const e=u.charAt(l);e===ne?n.minFrac=n.maxFrac=l+1:e===se?n.maxFrac=l+1:n.posSuf+=e}const c=a.split(ie);if(n.gSize=c[1]?c[1].length:0,n.lgSize=c[2]||c[1]?(c[2]||c[1]).length:0,s){const e=i.length-n.posPre.length-n.posSuf.length,t=s.indexOf(se);n.negPre=s.substr(0,t).replace(/'/g,""),n.negSuf=s.substr(t+e).replace(/'/g,"")}else n.negPre=t+n.posPre,n.negSuf=n.posSuf;return n}function he(e){const t=parseInt(e);if(isNaN(t))throw new Error("Invalid integer literal when parsing "+e);return t}const de=new r.B("UseV4Plurals");class pe{}function fe(e,t,n,r){let i=`=${e}`;if(t.indexOf(i)>-1)return i;if(i=n.getPluralCategory(e,r),t.indexOf(i)>-1)return i;if(t.indexOf("other")>-1)return"other";throw new Error(`No plural message found for value "${e}"`)}class me extends pe{constructor(e,t){super(),this.locale=e,this.deprecatedPluralFn=t}getPluralCategory(e,t){switch(this.deprecatedPluralFn?this.deprecatedPluralFn(t||this.locale,e):function(e){return O(e)[18]}(t||this.locale)(e)){case y.Zero:return"zero";case y.One:return"one";case y.Two:return"two";case y.Few:return"few";case y.Many:return"many";default:return"other"}}}function ge(e,t){t=encodeURIComponent(t);for(const n of e.split(";")){const e=n.indexOf("="),[r,i]=-1==e?[n,""]:[n.slice(0,e),n.slice(e+1)];if(r.trim()===t)return decodeURIComponent(i)}return null}me.decorators=[{type:r.A}],me.ctorParameters=(()=>[{type:String,decorators:[{type:r.z,args:[r.G]}]},{type:void 0,decorators:[{type:r.O},{type:r.z,args:[de]}]}]);class ye{constructor(e,t,n,r){this._iterableDiffers=e,this._keyValueDiffers=t,this._ngEl=n,this._renderer=r,this._initialClasses=[]}set klass(e){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof e?e.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(e){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof e?e.split(/\s+/):e,this._rawClass&&(Object(r.Nb)(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const e=this._iterableDiffer.diff(this._rawClass);e&&this._applyIterableChanges(e)}else if(this._keyValueDiffer){const e=this._keyValueDiffer.diff(this._rawClass);e&&this._applyKeyValueChanges(e)}}_applyKeyValueChanges(e){e.forEachAddedItem(e=>this._toggleClass(e.key,e.currentValue)),e.forEachChangedItem(e=>this._toggleClass(e.key,e.currentValue)),e.forEachRemovedItem(e=>{e.previousValue&&this._toggleClass(e.key,!1)})}_applyIterableChanges(e){e.forEachAddedItem(e=>{if("string"!=typeof e.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${Object(r.cc)(e.item)}`);this._toggleClass(e.item,!0)}),e.forEachRemovedItem(e=>this._toggleClass(e.item,!1))}_applyClasses(e){e&&(Array.isArray(e)||e instanceof Set?e.forEach(e=>this._toggleClass(e,!0)):Object.keys(e).forEach(t=>this._toggleClass(t,!!e[t])))}_removeClasses(e){e&&(Array.isArray(e)||e instanceof Set?e.forEach(e=>this._toggleClass(e,!1)):Object.keys(e).forEach(e=>this._toggleClass(e,!1)))}_toggleClass(e,t){(e=e.trim())&&e.split(/\s+/g).forEach(e=>{t?this._renderer.addClass(this._ngEl.nativeElement,e):this._renderer.removeClass(this._ngEl.nativeElement,e)})}}ye.decorators=[{type:r.s,args:[{selector:"[ngClass]"}]}],ye.ctorParameters=(()=>[{type:r.E},{type:r.F},{type:r.t},{type:r.W}]),ye.propDecorators={klass:[{type:r.D,args:["class"]}],ngClass:[{type:r.D}]};class ve{constructor(e){this._viewContainerRef=e,this._componentRef=null,this._moduleRef=null}ngOnChanges(e){if(this._viewContainerRef.clear(),this._componentRef=null,this.ngComponentOutlet){const t=this.ngComponentOutletInjector||this._viewContainerRef.parentInjector;if(e.ngComponentOutletNgModuleFactory)if(this._moduleRef&&this._moduleRef.destroy(),this.ngComponentOutletNgModuleFactory){const e=t.get(r.L);this._moduleRef=this.ngComponentOutletNgModuleFactory.create(e.injector)}else this._moduleRef=null;const n=(this._moduleRef?this._moduleRef.componentFactoryResolver:t.get(r.p)).resolveComponentFactory(this.ngComponentOutlet);this._componentRef=this._viewContainerRef.createComponent(n,this._viewContainerRef.length,t,this.ngComponentOutletContent)}}ngOnDestroy(){this._moduleRef&&this._moduleRef.destroy()}}ve.decorators=[{type:r.s,args:[{selector:"[ngComponentOutlet]"}]}],ve.ctorParameters=(()=>[{type:r.jb}]),ve.propDecorators={ngComponentOutlet:[{type:r.D}],ngComponentOutletInjector:[{type:r.D}],ngComponentOutletContent:[{type:r.D}],ngComponentOutletNgModuleFactory:[{type:r.D}]};class _e{constructor(e,t,n,r){this.$implicit=e,this.ngForOf=t,this.index=n,this.count=r}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}class be{constructor(e,t,n){this._viewContainer=e,this._template=t,this._differs=n,this._ngForOfDirty=!0,this._differ=null}set ngForOf(e){this._ngForOf=e,this._ngForOfDirty=!0}set ngForTrackBy(e){Object(r.sb)()&&null!=e&&"function"!=typeof e&&console&&console.warn&&console.warn(`trackBy must be a function, but received ${JSON.stringify(e)}. `+"See https://angular.io/docs/ts/latest/api/common/index/NgFor-directive.html#!#change-propagation for more information."),this._trackByFn=e}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(e){e&&(this._template=e)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const n=this._ngForOf;if(!this._differ&&n)try{this._differ=this._differs.find(n).create(this.ngForTrackBy)}catch(t){throw new Error(`Cannot find a differ supporting object '${n}' of type '${e=n,e.name||typeof e}'. NgFor only supports binding to Iterables such as Arrays.`)}}var e;if(this._differ){const e=this._differ.diff(this._ngForOf);e&&this._applyChanges(e)}}_applyChanges(e){const t=[];e.forEachOperation((e,n,r)=>{if(null==e.previousIndex){const n=this._viewContainer.createEmbeddedView(this._template,new _e(null,this._ngForOf,-1,-1),r),i=new we(e,n);t.push(i)}else if(null==r)this._viewContainer.remove(n);else{const i=this._viewContainer.get(n);this._viewContainer.move(i,r);const s=new we(e,i);t.push(s)}});for(let n=0;n<t.length;n++)this._perViewChange(t[n].view,t[n].record);for(let n=0,r=this._viewContainer.length;n<r;n++){const e=this._viewContainer.get(n);e.context.index=n,e.context.count=r,e.context.ngForOf=this._ngForOf}e.forEachIdentityChange(e=>{this._viewContainer.get(e.currentIndex).context.$implicit=e.item})}_perViewChange(e,t){e.context.$implicit=t.item}static ngTemplateContextGuard(e,t){return!0}}be.decorators=[{type:r.s,args:[{selector:"[ngFor][ngForOf]"}]}],be.ctorParameters=(()=>[{type:r.jb},{type:r.gb},{type:r.E}]),be.propDecorators={ngForOf:[{type:r.D}],ngForTrackBy:[{type:r.D}],ngForTemplate:[{type:r.D}]};class we{constructor(e,t){this.record=e,this.view=t}}class Ee{constructor(e,t){this._viewContainer=e,this._context=new Ce,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=t}set ngIf(e){this._context.$implicit=this._context.ngIf=e,this._updateView()}set ngIfThen(e){Se("ngIfThen",e),this._thenTemplateRef=e,this._thenViewRef=null,this._updateView()}set ngIfElse(e){Se("ngIfElse",e),this._elseTemplateRef=e,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateGuard_ngIf(e,t){return!0}}Ee.decorators=[{type:r.s,args:[{selector:"[ngIf]"}]}],Ee.ctorParameters=(()=>[{type:r.jb},{type:r.gb}]),Ee.propDecorators={ngIf:[{type:r.D}],ngIfThen:[{type:r.D}],ngIfElse:[{type:r.D}]};class Ce{constructor(){this.$implicit=null,this.ngIf=null}}function Se(e,t){if(!!(t&&!t.createEmbeddedView))throw new Error(`${e} must be a TemplateRef, but received '${Object(r.cc)(t)}'.`)}class Te{constructor(e,t){this._viewContainerRef=e,this._templateRef=t,this._created=!1}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(e){e&&!this._created?this.create():!e&&this._created&&this.destroy()}}class xe{constructor(){this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}set ngSwitch(e){this._ngSwitch=e,0===this._caseCount&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(e){this._defaultViews||(this._defaultViews=[]),this._defaultViews.push(e)}_matchCase(e){const t=e==this._ngSwitch;return this._lastCasesMatched=this._lastCasesMatched||t,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),t}_updateDefaultCases(e){if(this._defaultViews&&e!==this._defaultUsed){this._defaultUsed=e;for(let t=0;t<this._defaultViews.length;t++){this._defaultViews[t].enforceState(e)}}}}xe.decorators=[{type:r.s,args:[{selector:"[ngSwitch]"}]}],xe.propDecorators={ngSwitch:[{type:r.D}]};class Ae{constructor(e,t,n){this.ngSwitch=n,n._addCase(),this._view=new Te(e,t)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}}Ae.decorators=[{type:r.s,args:[{selector:"[ngSwitchCase]"}]}],Ae.ctorParameters=(()=>[{type:r.jb},{type:r.gb},{type:xe,decorators:[{type:r.w}]}]),Ae.propDecorators={ngSwitchCase:[{type:r.D}]};class De{constructor(e,t,n){n._addDefault(new Te(e,t))}}De.decorators=[{type:r.s,args:[{selector:"[ngSwitchDefault]"}]}],De.ctorParameters=(()=>[{type:r.jb},{type:r.gb},{type:xe,decorators:[{type:r.w}]}]);class Ie{constructor(e){this._localization=e,this._caseViews={}}set ngPlural(e){this._switchValue=e,this._updateView()}addCase(e,t){this._caseViews[e]=t}_updateView(){this._clearViews();const e=Object.keys(this._caseViews),t=fe(this._switchValue,e,this._localization);this._activateView(this._caseViews[t])}_clearViews(){this._activeView&&this._activeView.destroy()}_activateView(e){e&&(this._activeView=e,this._activeView.create())}}Ie.decorators=[{type:r.s,args:[{selector:"[ngPlural]"}]}],Ie.ctorParameters=(()=>[{type:pe}]),Ie.propDecorators={ngPlural:[{type:r.D}]};class Ne{constructor(e,t,n,r){this.value=e;const i=!isNaN(Number(e));r.addCase(i?`=${e}`:e,new Te(n,t))}}Ne.decorators=[{type:r.s,args:[{selector:"[ngPluralCase]"}]}],Ne.ctorParameters=(()=>[{type:String,decorators:[{type:r.h,args:["ngPluralCase"]}]},{type:r.gb},{type:r.jb},{type:Ie,decorators:[{type:r.w}]}]);class Oe{constructor(e,t,n){this._differs=e,this._ngEl=t,this._renderer=n}set ngStyle(e){this._ngStyle=e,!this._differ&&e&&(this._differ=this._differs.find(e).create())}ngDoCheck(){if(this._differ){const e=this._differ.diff(this._ngStyle);e&&this._applyChanges(e)}}_applyChanges(e){e.forEachRemovedItem(e=>this._setStyle(e.key,null)),e.forEachAddedItem(e=>this._setStyle(e.key,e.currentValue)),e.forEachChangedItem(e=>this._setStyle(e.key,e.currentValue))}_setStyle(e,t){const[n,r]=e.split(".");null!=(t=null!=t&&r?`${t}${r}`:t)?this._renderer.setStyle(this._ngEl.nativeElement,n,t):this._renderer.removeStyle(this._ngEl.nativeElement,n)}}Oe.decorators=[{type:r.s,args:[{selector:"[ngStyle]"}]}],Oe.ctorParameters=(()=>[{type:r.F},{type:r.t},{type:r.W}]),Oe.propDecorators={ngStyle:[{type:r.D}]};class ke{constructor(e){this._viewContainerRef=e}ngOnChanges(e){this._shouldRecreateView(e)?(this._viewRef&&this._viewContainerRef.remove(this._viewContainerRef.indexOf(this._viewRef)),this.ngTemplateOutlet&&(this._viewRef=this._viewContainerRef.createEmbeddedView(this.ngTemplateOutlet,this.ngTemplateOutletContext))):this._viewRef&&this.ngTemplateOutletContext&&this._updateExistingContext(this.ngTemplateOutletContext)}_shouldRecreateView(e){const t=e.ngTemplateOutletContext;return!!e.ngTemplateOutlet||t&&this._hasContextShapeChanged(t)}_hasContextShapeChanged(e){const t=Object.keys(e.previousValue||{}),n=Object.keys(e.currentValue||{});if(t.length===n.length){for(let e of n)if(-1===t.indexOf(e))return!0;return!1}return!0}_updateExistingContext(e){for(let t of Object.keys(e))this._viewRef.context[t]=this.ngTemplateOutletContext[t]}}ke.decorators=[{type:r.s,args:[{selector:"[ngTemplateOutlet]"}]}],ke.ctorParameters=(()=>[{type:r.jb}]),ke.propDecorators={ngTemplateOutletContext:[{type:r.D}],ngTemplateOutlet:[{type:r.D}]};const Pe=[ye,ve,be,Ee,ke,Oe,xe,Ae,De,Ie,Ne];function Me(e,t){return Error(`InvalidPipeArgument: '${t}' for pipe '${Object(r.cc)(e)}'`)}class Re{static format(e,t,n,r={}){const{minimumIntegerDigits:i,minimumFractionDigits:s,maximumFractionDigits:o,currency:a,currencyAsSymbol:u=!1}=r,c={minimumIntegerDigits:i,minimumFractionDigits:s,maximumFractionDigits:o,style:g[n].toLowerCase()};return n==g.Currency&&(c.currency="string"==typeof a?a:void 0,c.currencyDisplay=u?"symbol":"code"),new Intl.NumberFormat(t,c).format(e)}}const Fe=/((?:[^yMLdHhmsazZEwGjJ']+)|(?:'(?:[^']|'')*')|(?:E+|y+|M+|L+|d+|H+|h+|J+|j+|m+|s+|a|z|Z|G+|w+))(.*)/,Le={yMMMdjms:Qe(Ke([ze("year",1),We("month",3),ze("day",1),ze("hour",1),ze("minute",1),ze("second",1)])),yMdjm:Qe(Ke([ze("year",1),ze("month",1),ze("day",1),ze("hour",1),ze("minute",1)])),yMMMMEEEEd:Qe(Ke([ze("year",1),We("month",4),We("weekday",4),ze("day",1)])),yMMMMd:Qe(Ke([ze("year",1),We("month",4),ze("day",1)])),yMMMd:Qe(Ke([ze("year",1),We("month",3),ze("day",1)])),yMd:Qe(Ke([ze("year",1),ze("month",1),ze("day",1)])),jms:Qe(Ke([ze("hour",1),ze("second",1),ze("minute",1)])),jm:Qe(Ke([ze("hour",1),ze("minute",1)]))},Ve={yyyy:Qe(ze("year",4)),yy:Qe(ze("year",2)),y:Qe(ze("year",1)),MMMM:Qe(We("month",4)),MMM:Qe(We("month",3)),MM:Qe(ze("month",2)),M:Qe(ze("month",1)),LLLL:Qe(We("month",4)),L:Qe(We("month",1)),dd:Qe(ze("day",2)),d:Qe(ze("day",1)),HH:Be(Ue(Qe(He(ze("hour",2),!1)))),H:Ue(Qe(He(ze("hour",1),!1))),hh:Be(Ue(Qe(He(ze("hour",2),!0)))),h:Ue(Qe(He(ze("hour",1),!0))),jj:Qe(ze("hour",2)),j:Qe(ze("hour",1)),mm:Be(Qe(ze("minute",2))),m:Qe(ze("minute",1)),ss:Be(Qe(ze("second",2))),s:Qe(ze("second",1)),sss:Qe(ze("second",3)),EEEE:Qe(We("weekday",4)),EEE:Qe(We("weekday",3)),EE:Qe(We("weekday",2)),E:Qe(We("weekday",1)),a:(je=Qe(He(ze("hour",1),!0)),function(e,t){return je(e,t).split(" ")[1]}),Z:$e("short"),z:$e("long"),ww:Qe({}),w:Qe({}),G:Qe(We("era",1)),GG:Qe(We("era",2)),GGG:Qe(We("era",3)),GGGG:Qe(We("era",4))};var je;function Be(e){return function(t,n){const r=e(t,n);return 1==r.length?"0"+r:r}}function Ue(e){return function(t,n){return e(t,n).split(" ")[0]}}function qe(e,t,n){return new Intl.DateTimeFormat(t,n).format(e).replace(/[\u200e\u200f]/g,"")}function $e(e){const t={hour:"2-digit",hour12:!1,timeZoneName:e};return function(e,n){const r=qe(e,n,t);return r?r.substring(3):""}}function He(e,t){return e.hour12=t,e}function ze(e,t){const n={};return n[e]=2===t?"2-digit":"numeric",n}function We(e,t){const n={};return n[e]=t<4?t>1?"short":"narrow":"long",n}function Ke(e){return e.reduce((e,t)=>Object.assign({},e,t),{})}function Qe(e){return(t,n)=>qe(t,n,e)}const Ge=new Map;class Xe{static format(e,t,n){return function(e,t,n){const r=Le[e];if(r)return r(t,n);const i=e;let s=Ge.get(i);if(!s){let t;s=[],Fe.exec(e);let n=e;for(;n;)(t=Fe.exec(n))?n=(s=s.concat(t.slice(1))).pop():(s.push(n),n=null);Ge.set(i,s)}return s.reduce((e,r)=>{const i=Ve[r];return e+(i?i(t,n):function(e){return"''"===e?"'":e.replace(/(^'|'$)/g,"").replace(/''/g,"'")}(r))},"")}(n,e,t)}}class Ye{constructor(e){this._locale=e}transform(e,t="mediumDate"){if(null==e||""===e||e!=e)return null;let n;if("string"==typeof e&&(e=e.trim()),Ze(e))n=e;else if(isNaN(e-parseFloat(e)))if("string"==typeof e&&/^(\d{4}-\d{1,2}-\d{1,2})$/.test(e)){const[t,r,i]=e.split("-").map(e=>parseInt(e,10));n=new Date(t,r-1,i)}else n=new Date(e);else n=new Date(parseFloat(e));if(!Ze(n)){let t;if("string"!=typeof e||!(t=e.match(M)))throw Me(Ye,e);n=Y(t)}return Xe.format(n,this._locale,Ye._ALIASES[t]||t)}}function Ze(e){return e instanceof Date&&!isNaN(e.valueOf())}function Je(e,t,n,r,i,s=null,o=!1){if(null==n)return null;if("number"!=typeof(n="string"!=typeof n||isNaN(+n-parseFloat(n))?n:+n))throw Me(e,n);let a,u,c;if(r!==g.Currency&&(a=1,u=0,c=3),i){const e=i.match(J);if(null===e)throw new Error(`${i} is not a valid digit info for number pipes`);null!=e[1]&&(a=he(e[1])),null!=e[3]&&(u=he(e[3])),null!=e[5]&&(c=he(e[5]))}return Re.format(n,t,r,{minimumIntegerDigits:a,minimumFractionDigits:u,maximumFractionDigits:c,currency:s,currencyAsSymbol:o})}Ye._ALIASES={medium:"yMMMdjms",short:"yMdjm",fullDate:"yMMMMEEEEd",longDate:"yMMMMd",mediumDate:"yMMMd",shortDate:"yMd",mediumTime:"jms",shortTime:"jm"},Ye.decorators=[{type:r.T,args:[{name:"date",pure:!0}]}],Ye.ctorParameters=(()=>[{type:String,decorators:[{type:r.z,args:[r.G]}]}]);class et{constructor(e){this._locale=e}transform(e,t){return Je(et,this._locale,e,g.Decimal,t)}}et.decorators=[{type:r.T,args:[{name:"number"}]}],et.ctorParameters=(()=>[{type:String,decorators:[{type:r.z,args:[r.G]}]}]);class tt{constructor(e){this._locale=e}transform(e,t){return Je(tt,this._locale,e,g.Percent,t)}}tt.decorators=[{type:r.T,args:[{name:"percent"}]}],tt.ctorParameters=(()=>[{type:String,decorators:[{type:r.z,args:[r.G]}]}]);class nt{constructor(e){this._locale=e}transform(e,t="USD",n=!1,r){return Je(nt,this._locale,e,g.Currency,r,t,n)}}nt.decorators=[{type:r.T,args:[{name:"currency"}]}],nt.ctorParameters=(()=>[{type:String,decorators:[{type:r.z,args:[r.G]}]}]);const rt=[et,tt,nt,Ye];const it=new class{createSubscription(e,t){return e.then(t,e=>{throw e})}dispose(e){}onDestroy(e){}},st=new class{createSubscription(e,t){return e.subscribe({next:t,error:e=>{throw e}})}dispose(e){e.unsubscribe()}onDestroy(e){e.unsubscribe()}};class ot{constructor(e){this._ref=e,this._latestValue=null,this._latestReturnedValue=null,this._subscription=null,this._obj=null,this._strategy=null}ngOnDestroy(){this._subscription&&this._dispose()}transform(e){return this._obj?e!==this._obj?(this._dispose(),this.transform(e)):this._latestValue===this._latestReturnedValue?this._latestReturnedValue:(this._latestReturnedValue=this._latestValue,r.lb.wrap(this._latestValue)):(e&&this._subscribe(e),this._latestReturnedValue=this._latestValue,this._latestValue)}_subscribe(e){this._obj=e,this._strategy=this._selectStrategy(e),this._subscription=this._strategy.createSubscription(e,t=>this._updateLatestValue(e,t))}_selectStrategy(e){if(Object(r.Pb)(e))return it;if(Object(r.Ob)(e))return st;throw Me(ot,e)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._latestReturnedValue=null,this._subscription=null,this._obj=null}_updateLatestValue(e,t){e===this._obj&&(this._latestValue=t,this._ref.markForCheck())}}ot.decorators=[{type:r.T,args:[{name:"async",pure:!1}]}],ot.ctorParameters=(()=>[{type:r.k}]);class at{transform(e){if(!e)return e;if("string"!=typeof e)throw Me(at,e);return e.toLowerCase()}}at.decorators=[{type:r.T,args:[{name:"lowercase"}]}];const ut=/(?:[A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312E\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FEA\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC03-\uDC37\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDF00-\uDF19]|\uD806[\uDCA0-\uDCDF\uDCFF\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE83\uDE86-\uDE89\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50\uDF93-\uDF9F\uDFE0\uDFE1]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00-\uDD1E\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D])\S*/g;class ct{transform(e){if(!e)return e;if("string"!=typeof e)throw Me(ct,e);return e.replace(ut,e=>e[0].toUpperCase()+e.substr(1).toLowerCase())}}ct.decorators=[{type:r.T,args:[{name:"titlecase"}]}];class lt{transform(e){if(!e)return e;if("string"!=typeof e)throw Me(lt,e);return e.toUpperCase()}}lt.decorators=[{type:r.T,args:[{name:"uppercase"}]}];class ht{constructor(e){this.locale=e}transform(e,t="mediumDate",n,r){if(null==e||""===e||e!=e)return null;try{return B(e,t,r||this.locale,n)}catch(i){throw Me(ht,i.message)}}}ht.decorators=[{type:r.T,args:[{name:"date",pure:!0}]}],ht.ctorParameters=(()=>[{type:String,decorators:[{type:r.z,args:[r.G]}]}]);const dt=/#/g;class pt{constructor(e){this._localization=e}transform(e,t,n){if(null==e)return"";if("object"!=typeof t||null===t)throw Me(pt,t);return t[fe(e,Object.keys(t),this._localization,n)].replace(dt,e.toString())}}pt.decorators=[{type:r.T,args:[{name:"i18nPlural",pure:!0}]}],pt.ctorParameters=(()=>[{type:pe}]);class ft{transform(e,t){if(null==e)return"";if("object"!=typeof t||"string"!=typeof e)throw Me(ft,t);return t.hasOwnProperty(e)?t[e]:t.hasOwnProperty("other")?t.other:""}}ft.decorators=[{type:r.T,args:[{name:"i18nSelect",pure:!0}]}];class mt{transform(e){return JSON.stringify(e,null,2)}}mt.decorators=[{type:r.T,args:[{name:"json",pure:!1}]}];class gt{constructor(e){this.differs=e}transform(e,t=function(e,t){const n=e.key,r=t.key;if(n===r)return 0;if(void 0===n)return 1;if(void 0===r)return-1;if(null===n)return 1;if(null===r)return-1;if("string"==typeof n&&"string"==typeof r)return n<r?-1:1;if("number"==typeof n&&"number"==typeof r)return n-r;if("boolean"==typeof n&&"boolean"==typeof r)return n<r?-1:1;const i=String(n),s=String(r);return i==s?0:i<s?-1:1}){if(!e||!(e instanceof Map)&&"object"!=typeof e)return null;this.differ||(this.differ=this.differs.find(e).create());const n=this.differ.diff(e);return n&&(this.keyValues=[],n.forEachItem(e=>{this.keyValues.push(function(e,t){return{key:e,value:t}}(e.key,e.currentValue))}),this.keyValues.sort(t)),this.keyValues}}gt.decorators=[{type:r.T,args:[{name:"keyvalue",pure:!1}]}],gt.ctorParameters=(()=>[{type:r.F}]);class yt{constructor(e){this._locale=e}transform(e,t,n){if(bt(e))return null;n=n||this._locale;try{return function(e,t,n){return ue(e,le(A(t,g.Decimal),x(t,w.MinusSign)),t,w.Group,w.Decimal,n)}(wt(e),n,t)}catch(r){throw Me(yt,r.message)}}}yt.decorators=[{type:r.T,args:[{name:"number"}]}],yt.ctorParameters=(()=>[{type:String,decorators:[{type:r.z,args:[r.G]}]}]);class vt{constructor(e){this._locale=e}transform(e,t,n){if(bt(e))return null;n=n||this._locale;try{return function(e,t,n){return ue(e,le(A(t,g.Percent),x(t,w.MinusSign)),t,w.Group,w.Decimal,n,!0).replace(new RegExp(ae,"g"),x(t,w.PercentSign))}(wt(e),n,t)}catch(r){throw Me(vt,r.message)}}}vt.decorators=[{type:r.T,args:[{name:"percent"}]}],vt.ctorParameters=(()=>[{type:String,decorators:[{type:r.z,args:[r.G]}]}]);class _t{constructor(e){this._locale=e}transform(e,t,n="symbol",r,i){if(bt(e))return null;i=i||this._locale,"boolean"==typeof n&&(console&&console.warn&&console.warn('Warning: the currency pipe has been changed in Angular v5. The symbolDisplay option (third parameter) is now a string instead of a boolean. The accepted values are "code", "symbol" or "symbol-narrow".'),n=n?"symbol":"code");let s=t||"USD";"code"!==n&&(s="symbol"===n||"symbol-narrow"===n?k(s,"symbol"===n?"wide":"narrow",i):n);try{return ce(wt(e),i,s,t,r)}catch(o){throw Me(_t,o.message)}}}function bt(e){return null==e||""===e||e!=e}function wt(e){if("string"==typeof e&&!isNaN(Number(e)-parseFloat(e)))return Number(e);if("number"!=typeof e)throw new Error(`${e} is not a number`);return e}_t.decorators=[{type:r.T,args:[{name:"currency"}]}],_t.ctorParameters=(()=>[{type:String,decorators:[{type:r.z,args:[r.G]}]}]);class Et{transform(e,t,n){if(null==e)return e;if(!this.supports(e))throw Me(Et,e);return e.slice(t,n)}supports(e){return"string"==typeof e||Array.isArray(e)}}Et.decorators=[{type:r.T,args:[{name:"slice",pure:!1}]}];const Ct=[ot,lt,at,mt,Et,yt,vt,ct,_t,ht,pt,ft,gt];class St{}St.decorators=[{type:r.I,args:[{declarations:[Pe,Ct],exports:[Pe,Ct],providers:[{provide:pe,useClass:me}]}]}];const Tt=function(e,t){"string"==typeof t&&(t=parseInt(t,10));const n=t,r=n.toString().replace(/^[^.]*\.?/,""),i=Math.floor(Math.abs(n)),s=r.length,o=parseInt(r,10),a=parseInt(n.toString().replace(/^[^.]*\.?|0+$/g,""),10)||0;switch(e.split("-")[0].toLowerCase()){case"af":case"asa":case"az":case"bem":case"bez":case"bg":case"brx":case"ce":case"cgg":case"chr":case"ckb":case"ee":case"el":case"eo":case"es":case"eu":case"fo":case"fur":case"gsw":case"ha":case"haw":case"hu":case"jgo":case"jmc":case"ka":case"kk":case"kkj":case"kl":case"ks":case"ksb":case"ky":case"lb":case"lg":case"mas":case"mgo":case"ml":case"mn":case"nb":case"nd":case"ne":case"nn":case"nnh":case"nyn":case"om":case"or":case"os":case"ps":case"rm":case"rof":case"rwk":case"saq":case"seh":case"sn":case"so":case"sq":case"ta":case"te":case"teo":case"tk":case"tr":case"ug":case"uz":case"vo":case"vun":case"wae":case"xog":return 1===n?y.One:y.Other;case"ak":case"ln":case"mg":case"pa":case"ti":return n===Math.floor(n)&&n>=0&&n<=1?y.One:y.Other;case"am":case"as":case"bn":case"fa":case"gu":case"hi":case"kn":case"mr":case"zu":return 0===i||1===n?y.One:y.Other;case"ar":return 0===n?y.Zero:1===n?y.One:2===n?y.Two:n%100===Math.floor(n%100)&&n%100>=3&&n%100<=10?y.Few:n%100===Math.floor(n%100)&&n%100>=11&&n%100<=99?y.Many:y.Other;case"ast":case"ca":case"de":case"en":case"et":case"fi":case"fy":case"gl":case"it":case"nl":case"sv":case"sw":case"ur":case"yi":return 1===i&&0===s?y.One:y.Other;case"be":return n%10==1&&n%100!=11?y.One:n%10===Math.floor(n%10)&&n%10>=2&&n%10<=4&&!(n%100>=12&&n%100<=14)?y.Few:n%10==0||n%10===Math.floor(n%10)&&n%10>=5&&n%10<=9||n%100===Math.floor(n%100)&&n%100>=11&&n%100<=14?y.Many:y.Other;case"br":return n%10==1&&n%100!=11&&n%100!=71&&n%100!=91?y.One:n%10==2&&n%100!=12&&n%100!=72&&n%100!=92?y.Two:n%10===Math.floor(n%10)&&(n%10>=3&&n%10<=4||n%10==9)&&!(n%100>=10&&n%100<=19||n%100>=70&&n%100<=79||n%100>=90&&n%100<=99)?y.Few:0!==n&&n%1e6==0?y.Many:y.Other;case"bs":case"hr":case"sr":return 0===s&&i%10==1&&i%100!=11||o%10==1&&o%100!=11?y.One:0===s&&i%10===Math.floor(i%10)&&i%10>=2&&i%10<=4&&!(i%100>=12&&i%100<=14)||o%10===Math.floor(o%10)&&o%10>=2&&o%10<=4&&!(o%100>=12&&o%100<=14)?y.Few:y.Other;case"cs":case"sk":return 1===i&&0===s?y.One:i===Math.floor(i)&&i>=2&&i<=4&&0===s?y.Few:0!==s?y.Many:y.Other;case"cy":return 0===n?y.Zero:1===n?y.One:2===n?y.Two:3===n?y.Few:6===n?y.Many:y.Other;case"da":return 1===n||0!==a&&(0===i||1===i)?y.One:y.Other;case"dsb":case"hsb":return 0===s&&i%100==1||o%100==1?y.One:0===s&&i%100==2||o%100==2?y.Two:0===s&&i%100===Math.floor(i%100)&&i%100>=3&&i%100<=4||o%100===Math.floor(o%100)&&o%100>=3&&o%100<=4?y.Few:y.Other;case"ff":case"fr":case"hy":case"kab":return 0===i||1===i?y.One:y.Other;case"fil":return 0===s&&(1===i||2===i||3===i)||0===s&&i%10!=4&&i%10!=6&&i%10!=9||0!==s&&o%10!=4&&o%10!=6&&o%10!=9?y.One:y.Other;case"ga":return 1===n?y.One:2===n?y.Two:n===Math.floor(n)&&n>=3&&n<=6?y.Few:n===Math.floor(n)&&n>=7&&n<=10?y.Many:y.Other;case"gd":return 1===n||11===n?y.One:2===n||12===n?y.Two:n===Math.floor(n)&&(n>=3&&n<=10||n>=13&&n<=19)?y.Few:y.Other;case"gv":return 0===s&&i%10==1?y.One:0===s&&i%10==2?y.Two:0!==s||i%100!=0&&i%100!=20&&i%100!=40&&i%100!=60&&i%100!=80?0!==s?y.Many:y.Other:y.Few;case"he":return 1===i&&0===s?y.One:2===i&&0===s?y.Two:0!==s||n>=0&&n<=10||n%10!=0?y.Other:y.Many;case"is":return 0===a&&i%10==1&&i%100!=11||0!==a?y.One:y.Other;case"ksh":return 0===n?y.Zero:1===n?y.One:y.Other;case"kw":case"naq":case"se":case"smn":return 1===n?y.One:2===n?y.Two:y.Other;case"lag":return 0===n?y.Zero:0!==i&&1!==i||0===n?y.Other:y.One;case"lt":return n%10!=1||n%100>=11&&n%100<=19?n%10===Math.floor(n%10)&&n%10>=2&&n%10<=9&&!(n%100>=11&&n%100<=19)?y.Few:0!==o?y.Many:y.Other:y.One;case"lv":case"prg":return n%10==0||n%100===Math.floor(n%100)&&n%100>=11&&n%100<=19||2===s&&o%100===Math.floor(o%100)&&o%100>=11&&o%100<=19?y.Zero:n%10==1&&n%100!=11||2===s&&o%10==1&&o%100!=11||2!==s&&o%10==1?y.One:y.Other;case"mk":return 0===s&&i%10==1||o%10==1?y.One:y.Other;case"mt":return 1===n?y.One:0===n||n%100===Math.floor(n%100)&&n%100>=2&&n%100<=10?y.Few:n%100===Math.floor(n%100)&&n%100>=11&&n%100<=19?y.Many:y.Other;case"pl":return 1===i&&0===s?y.One:0===s&&i%10===Math.floor(i%10)&&i%10>=2&&i%10<=4&&!(i%100>=12&&i%100<=14)?y.Few:0===s&&1!==i&&i%10===Math.floor(i%10)&&i%10>=0&&i%10<=1||0===s&&i%10===Math.floor(i%10)&&i%10>=5&&i%10<=9||0===s&&i%100===Math.floor(i%100)&&i%100>=12&&i%100<=14?y.Many:y.Other;case"pt":return n===Math.floor(n)&&n>=0&&n<=2&&2!==n?y.One:y.Other;case"ro":return 1===i&&0===s?y.One:0!==s||0===n||1!==n&&n%100===Math.floor(n%100)&&n%100>=1&&n%100<=19?y.Few:y.Other;case"ru":case"uk":return 0===s&&i%10==1&&i%100!=11?y.One:0===s&&i%10===Math.floor(i%10)&&i%10>=2&&i%10<=4&&!(i%100>=12&&i%100<=14)?y.Few:0===s&&i%10==0||0===s&&i%10===Math.floor(i%10)&&i%10>=5&&i%10<=9||0===s&&i%100===Math.floor(i%100)&&i%100>=11&&i%100<=14?y.Many:y.Other;case"shi":return 0===i||1===n?y.One:n===Math.floor(n)&&n>=2&&n<=10?y.Few:y.Other;case"si":return 0===n||1===n||0===i&&1===o?y.One:y.Other;case"sl":return 0===s&&i%100==1?y.One:0===s&&i%100==2?y.Two:0===s&&i%100===Math.floor(i%100)&&i%100>=3&&i%100<=4||0!==s?y.Few:y.Other;case"tzm":return n===Math.floor(n)&&n>=0&&n<=1||n===Math.floor(n)&&n>=11&&n<=99?y.One:y.Other;default:return y.Other}};(class{}).decorators=[{type:r.I,args:[{declarations:[rt],exports:[rt],providers:[{provide:de,useValue:Tt}]}]}];const xt=new r.B("DocumentToken"),At="browser",Dt="server";function It(e){return e===At}function Nt(e){return e===Dt}new r.ib("7.1.1");class Ot{}Ot.ngInjectableDef=Object(r.nb)({providedIn:"root",factory:()=>new kt(Object(r.rb)(xt),window)});class kt{constructor(e,t){this.document=e,this.window=t,this.offset=(()=>[0,0])}setOffset(e){Array.isArray(e)?this.offset=(()=>e):this.offset=e}getScrollPosition(){return this.supportScrollRestoration()?[this.window.scrollX,this.window.scrollY]:[0,0]}scrollToPosition(e){this.supportScrollRestoration()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(this.supportScrollRestoration()){const t=this.document.querySelector(`#${e}`);if(t)return void this.scrollToElement(t);const n=this.document.querySelector(`[name='${e}']`);if(n)return void this.scrollToElement(n)}}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),n=t.left+this.window.pageXOffset,r=t.top+this.window.pageYOffset,i=this.offset();this.window.scrollTo(n-i[0],r-i[1])}supportScrollRestoration(){try{return!!this.window&&!!this.window.scrollTo}catch(e){return!1}}}},SeVD:function(e,t,n){"use strict";n.d(t,"a",function(){return p});var r=n("HDdC"),i=n("ngJS"),s=n("a7t3"),o=n("pLzU"),a=n("CRDf"),u=n("I55L"),c=n("c2HN"),l=n("XoHu"),h=n("Lhse"),d=n("kJWO");const p=e=>{if(e instanceof r.a)return t=>e._isScalar?(t.next(e.value),void t.complete()):e.subscribe(t);if(e&&"function"==typeof e[d.a])return Object(a.a)(e);if(Object(u.a)(e))return Object(i.a)(e);if(Object(c.a)(e))return Object(s.a)(e);if(e&&"function"==typeof e[h.a])return Object(o.a)(e);{const t=Object(l.a)(e)?"an invalid object":`'${e}'`;throw new TypeError(`You provided ${t} where a stream was expected.`+" You can provide an Observable, Promise, Array, or Iterable.")}}},SpAZ:function(e,t,n){"use strict";function r(e){return e}n.d(t,"a",function(){return r})},Uv6z:function(e,t){!function(e){"use strict";if(!e.fetch){var t={searchParams:"URLSearchParams"in e,iterable:"Symbol"in e&&"iterator"in Symbol,blob:"FileReader"in e&&"Blob"in e&&function(){try{return new Blob,!0}catch(e){return!1}}(),formData:"FormData"in e,arrayBuffer:"ArrayBuffer"in e};if(t.arrayBuffer)var n=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],r=function(e){return e&&DataView.prototype.isPrototypeOf(e)},i=ArrayBuffer.isView||function(e){return e&&n.indexOf(Object.prototype.toString.call(e))>-1};l.prototype.append=function(e,t){e=a(e),t=u(t);var n=this.map[e];this.map[e]=n?n+","+t:t},l.prototype.delete=function(e){delete this.map[a(e)]},l.prototype.get=function(e){return e=a(e),this.has(e)?this.map[e]:null},l.prototype.has=function(e){return this.map.hasOwnProperty(a(e))},l.prototype.set=function(e,t){this.map[a(e)]=u(t)},l.prototype.forEach=function(e,t){for(var n in this.map)this.map.hasOwnProperty(n)&&e.call(t,this.map[n],n,this)},l.prototype.keys=function(){var e=[];return this.forEach(function(t,n){e.push(n)}),c(e)},l.prototype.values=function(){var e=[];return this.forEach(function(t){e.push(t)}),c(e)},l.prototype.entries=function(){var e=[];return this.forEach(function(t,n){e.push([n,t])}),c(e)},t.iterable&&(l.prototype[Symbol.iterator]=l.prototype.entries);var s=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];g.prototype.clone=function(){return new g(this,{body:this._bodyInit})},m.call(g.prototype),m.call(v.prototype),v.prototype.clone=function(){return new v(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new l(this.headers),url:this.url})},v.error=function(){var e=new v(null,{status:0,statusText:""});return e.type="error",e};var o=[301,302,303,307,308];v.redirect=function(e,t){if(-1===o.indexOf(t))throw new RangeError("Invalid status code");return new v(null,{status:t,headers:{location:e}})},e.Headers=l,e.Request=g,e.Response=v,e.fetch=function(e,n){return new Promise(function(r,i){var s=new g(e,n),o=new XMLHttpRequest;o.onload=function(){var e,t,n={status:o.status,statusText:o.statusText,headers:(e=o.getAllResponseHeaders()||"",t=new l,e.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach(function(e){var n=e.split(":"),r=n.shift().trim();if(r){var i=n.join(":").trim();t.append(r,i)}}),t)};n.url="responseURL"in o?o.responseURL:n.headers.get("X-Request-URL");var i="response"in o?o.response:o.responseText;r(new v(i,n))},o.onerror=function(){i(new TypeError("Network request failed"))},o.ontimeout=function(){i(new TypeError("Network request failed"))},o.open(s.method,s.url,!0),"include"===s.credentials?o.withCredentials=!0:"omit"===s.credentials&&(o.withCredentials=!1),"responseType"in o&&t.blob&&(o.responseType="blob"),s.headers.forEach(function(e,t){o.setRequestHeader(t,e)}),o.send(void 0===s._bodyInit?null:s._bodyInit)})},e.fetch.polyfill=!0}function a(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(e))throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function u(e){return"string"!=typeof e&&(e=String(e)),e}function c(e){var n={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return t.iterable&&(n[Symbol.iterator]=function(){return n}),n}function l(e){this.map={},e instanceof l?e.forEach(function(e,t){this.append(t,e)},this):Array.isArray(e)?e.forEach(function(e){this.append(e[0],e[1])},this):e&&Object.getOwnPropertyNames(e).forEach(function(t){this.append(t,e[t])},this)}function h(e){if(e.bodyUsed)return Promise.reject(new TypeError("Already read"));e.bodyUsed=!0}function d(e){return new Promise(function(t,n){e.onload=function(){t(e.result)},e.onerror=function(){n(e.error)}})}function p(e){var t=new FileReader,n=d(t);return t.readAsArrayBuffer(e),n}function f(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function m(){return this.bodyUsed=!1,this._initBody=function(e){if(this._bodyInit=e,e)if("string"==typeof e)this._bodyText=e;else if(t.blob&&Blob.prototype.isPrototypeOf(e))this._bodyBlob=e;else if(t.formData&&FormData.prototype.isPrototypeOf(e))this._bodyFormData=e;else if(t.searchParams&&URLSearchParams.prototype.isPrototypeOf(e))this._bodyText=e.toString();else if(t.arrayBuffer&&t.blob&&r(e))this._bodyArrayBuffer=f(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer]);else{if(!t.arrayBuffer||!ArrayBuffer.prototype.isPrototypeOf(e)&&!i(e))throw new Error("unsupported BodyInit type");this._bodyArrayBuffer=f(e)}else this._bodyText="";this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):t.searchParams&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},t.blob&&(this.blob=function(){var e=h(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?h(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(p)}),this.text=function(){var e,t,n,r=h(this);if(r)return r;if(this._bodyBlob)return e=this._bodyBlob,t=new FileReader,n=d(t),t.readAsText(e),n;if(this._bodyArrayBuffer)return Promise.resolve(function(e){for(var t=new Uint8Array(e),n=new Array(t.length),r=0;r<t.length;r++)n[r]=String.fromCharCode(t[r]);return n.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},t.formData&&(this.formData=function(){return this.text().then(y)}),this.json=function(){return this.text().then(JSON.parse)},this}function g(e,t){var n,r,i=(t=t||{}).body;if(e instanceof g){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new l(e.headers)),this.method=e.method,this.mode=e.mode,i||null==e._bodyInit||(i=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"omit",!t.headers&&this.headers||(this.headers=new l(t.headers)),this.method=(n=t.method||this.method||"GET",r=n.toUpperCase(),s.indexOf(r)>-1?r:n),this.mode=t.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&i)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(i)}function y(e){var t=new FormData;return e.trim().split("&").forEach(function(e){if(e){var n=e.split("="),r=n.shift().replace(/\+/g," "),i=n.join("=").replace(/\+/g," ");t.append(decodeURIComponent(r),decodeURIComponent(i))}}),t}function v(e,t){t||(t={}),this.type="default",this.status=void 0===t.status?200:t.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in t?t.statusText:"OK",this.headers=new l(t.headers),this.url=t.url||"",this._initBody(e)}}("undefined"!=typeof self?self:this)},VRyK:function(e,t,n){"use strict";n.d(t,"a",function(){return a});var r=n("HDdC"),i=n("z+Ro"),s=n("bHdf"),o=n("yCtX");function a(...e){let t=Number.POSITIVE_INFINITY,n=null,a=e[e.length-1];return Object(i.a)(a)?(n=e.pop(),e.length>1&&"number"==typeof e[e.length-1]&&(t=e.pop())):"number"==typeof a&&(t=e.pop()),null===n&&1===e.length&&e[0]instanceof r.a?e[0]:Object(s.a)(t)(Object(o.a)(e,n))}},Wcq6:function(e,t,n){"use strict";n("lcbw");var r,i=(r=n("wj3C"))&&"object"==typeof r&&"default"in r?r.default:r;e.exports=i},XNiG:function(e,t,n){"use strict";var r=n("HDdC"),i=n("7o/Q"),s=n("quSY"),o=n("9ppp");class a extends s.a{constructor(e,t){super(),this.subject=e,this.subscriber=t,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const e=this.subject,t=e.observers;if(this.subject=null,!t||0===t.length||e.isStopped||e.closed)return;const n=t.indexOf(this.subscriber);-1!==n&&t.splice(n,1)}}var u=n("2QA8");n.d(t,"b",function(){return c}),n.d(t,"a",function(){return l});class c extends i.a{constructor(e){super(e),this.destination=e}}class l extends r.a{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[u.a](){return new c(this)}lift(e){const t=new h(this,this);return t.operator=e,t}next(e){if(this.closed)throw new o.a;if(!this.isStopped){const{observers:t}=this,n=t.length,r=t.slice();for(let i=0;i<n;i++)r[i].next(e)}}error(e){if(this.closed)throw new o.a;this.hasError=!0,this.thrownError=e,this.isStopped=!0;const{observers:t}=this,n=t.length,r=t.slice();for(let i=0;i<n;i++)r[i].error(e);this.observers.length=0}complete(){if(this.closed)throw new o.a;this.isStopped=!0;const{observers:e}=this,t=e.length,n=e.slice();for(let r=0;r<t;r++)n[r].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(e){if(this.closed)throw new o.a;return super._trySubscribe(e)}_subscribe(e){if(this.closed)throw new o.a;return this.hasError?(e.error(this.thrownError),s.a.EMPTY):this.isStopped?(e.complete(),s.a.EMPTY):(this.observers.push(e),new a(this,e))}asObservable(){const e=new r.a;return e.source=this,e}}l.create=((e,t)=>new h(e,t));class h extends l{constructor(e,t){super(),this.destination=e,this.source=t}next(e){const{destination:t}=this;t&&t.next&&t.next(e)}error(e){const{destination:t}=this;t&&t.error&&this.destination.error(e)}complete(){const{destination:e}=this;e&&e.complete&&this.destination.complete()}_subscribe(e){const{source:t}=this;return t?this.source.subscribe(e):s.a.EMPTY}}},XUOw:function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=n("HDdC");function i(e){const t=new r.a(t=>{t.next(e),t.complete()});return t._isScalar=!0,t.value=e,t}},XoHu:function(e,t,n){"use strict";function r(e){return null!=e&&"object"==typeof e}n.d(t,"a",function(){return r})},ZUHj:function(e,t,n){"use strict";n.d(t,"a",function(){return s});var r=n("51Dv"),i=n("SeVD");function s(e,t,n,s,o=new r.a(e,n,s)){if(!o.closed)return Object(i.a)(t)(o)}},a7t3:function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=n("NJ4a");const i=e=>t=>(e.then(e=>{t.closed||(t.next(e),t.complete())},e=>t.error(e)).then(null,r.a),t)},bHdf:function(e,t,n){"use strict";n.d(t,"a",function(){return s});var r=n("5+tZ"),i=n("SpAZ");function s(e=Number.POSITIVE_INFINITY){return Object(r.a)(i.a,e)}},bdh1:function(e,t){e.exports="header {\n  background-image: url('/test.front.junior/header.f0441896839c3ae1db2d.jpg');\n  background-position: bottom center;\n  background-repeat: no-repeat;\n  background-attachment: fixed;\n  background-size: cover; }\n  header .container {\n    position: relative;\n    margin-top: 0;\n    padding: 6rem 0 4rem;\n    text-align: center; }\n  header .container h1, header .container h4 {\n      color: white;\n      text-align: center;\n      margin: 0 auto 1rem;\n      text-shadow: 0 1px 1px rgba(0, 0, 0, 0.33);\n      max-width: 700px; }\n  header .container .searchbox {\n      position: absolute;\n      bottom: -1rem;\n      left: 50%;\n      -webkit-transform: translate(-50%, 50%);\n              transform: translate(-50%, 50%);\n      max-width: 700px; }\n  header .container .searchbox input {\n        padding: .95rem 2rem .95rem .95rem; }\n  header .container .searchbox::after {\n        bottom: .5rem;\n        right: .8rem; }\n"},c2HN:function(e,t,n){"use strict";function r(e){return e&&"function"!=typeof e.subscribe&&"function"==typeof e.then}n.d(t,"a",function(){return r})},c7zv:function(e,t){e.exports='<main class="main-content" [style.backgroundImage]="bgImg">\r\n\t<div class="container">\r\n\t\t<div class="grid">\r\n\t\t\t\t<section class="grid-md8 grid-lg7 presentation-section">\r\n\t\t\t\t\t\t<nav class="breadcrumb">\r\n\t\t\t\t\t\t\t<a href="#" class="breadcrumb-item">Destinations</a>\r\n\t\t\t\t\t\t\t<span class="breadcrumb-item is-active">{{destination.name}}</span>\r\n\t\t\t\t\t\t</nav>\r\n\t\t\t\t\t\t<h1>{{destination.name}}</h1>\r\n\t\t\t\t\t\t<div class="card">\r\n\t\t\t\t\t\t\t<div class="card-content">\r\n\t\t\t\t\t\t\t\t{{destination.description}}\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</section>\r\n\t\t\t\t\t<section class="grid-md4 grid-lg3 grid-lgOffset1 infos-section">\r\n\t\t\t\t\t\t<div class="infos">\r\n\t\t\t\t\t\t\t<ul>\r\n\t\t\t\t\t\t\t\t<li><b>Pays :</b> {{destination.country}}</li>\r\n\t\t\t\t\t\t\t\t<li><b>Prix :</b> {{destination.priceRange }}</li>\r\n\t\t\t\t\t\t\t\t<li><b>Note :</b>\r\n\t\t\t\t\t\t\t\t\t<i class="lucca-icon icon-star"></i>\r\n\t\t\t\t\t\t\t\t\t<i class="lucca-icon icon-star"></i>\r\n\t\t\t\t\t\t\t\t\t<i class="lucca-icon icon-star"></i>\r\n\t\t\t\t\t\t\t\t\t<i class="lucca-icon icon-star"></i>\r\n\t\t\t\t\t\t\t\t\t<i class="lucca-icon icon-unstared"></i></li>\r\n\t\t\t\t\t\t\t\t<li>\r\n\t\t\t\t\t\t\t\t\t<ul>\r\n\t\t\t\t\t\t\t\t\t\t\x3c!-- <b>Tags</b><br> --\x3e\r\n\t\t\t\t\t\t\t\t\t\t<li class="tag" *ngFor="let tag of destination.tags">{{tag}}</li>\r\n\t\t\t\t\t\t\t\t\t</ul>\r\n\t\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t</ul>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<app-destination-gallery [destination]="destination"></app-destination-gallery>\r\n\t\t\t\t\t</section>\r\n\t\t</div>\r\n\t</div>\r\n</main>\r\n'},crnd:function(e,t){function n(e){return Promise.resolve().then(function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t})}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id="crnd"},"g+7Q":function(e,t,n){"use strict";n.r(t);var r=n("8Y7J"),i=n("Cfvw"),s=n("LRne"),o=n("HDdC"),a=n("w1tV"),u=n("lJxs");function c(e){return function(e){return new o.a(t=>({unsubscribe:e.onSnapshot(t)}))}(e).pipe(Object(a.a)())}function l(e){return c(e).pipe(Object(u.a)(e=>({payload:e,type:"value"})))}function h(e){return c(e).pipe(Object(u.a)(e=>({payload:e,type:"query"})))}var d=n("pLZG"),p=n("Kqap");function f(e){return h(e).pipe(Object(u.a)(e=>e.payload.docChanges().map(e=>({type:e.type,payload:e}))))}function m(e,t){return h(e).pipe(Object(u.a)(e=>e.payload.docChanges()),Object(p.a)((e,n)=>g(e,n,t),[]),Object(u.a)(e=>e.map(e=>({type:e.type,payload:e}))))}function g(e,t,n){return t.forEach(t=>{n.indexOf(t.type)>-1&&(e=y(e,t))}),e}function y(e,t){switch(t.type){case"added":e[t.newIndex]&&e[t.newIndex].doc.id==t.doc.id||e.splice(t.newIndex,0,t);break;case"modified":null!=e[t.oldIndex]&&e[t.oldIndex].doc.id!=t.doc.id||(t.oldIndex!==t.newIndex?(e.splice(t.oldIndex,1),e.splice(t.newIndex,0,t)):e.splice(t.newIndex,1,t));break;case"removed":e[t.oldIndex]&&e[t.oldIndex].doc.id==t.doc.id&&e.splice(t.oldIndex,1)}return e}var v=n("xs0t");function _(e){return e&&0!==e.length||(e=["added","removed","modified"]),e}class b{constructor(e,t,n){this.ref=e,this.query=t,this.afs=n}stateChanges(e){return e&&0!==e.length?this.afs.scheduler.keepUnstableUntilFirst(this.afs.scheduler.runOutsideAngular(f(this.query))).pipe(Object(u.a)(t=>t.filter(t=>e.indexOf(t.type)>-1)),Object(d.a)(e=>e.length>0)):this.afs.scheduler.keepUnstableUntilFirst(this.afs.scheduler.runOutsideAngular(f(this.query)))}auditTrail(e){return this.stateChanges(e).pipe(Object(p.a)((e,t)=>[...e,...t],[]))}snapshotChanges(e){const t=_(e),n=m(this.query,t),r=this.afs.scheduler.runOutsideAngular(n);return this.afs.scheduler.keepUnstableUntilFirst(r)}valueChanges(){const e=h(this.query),t=this.afs.scheduler.runOutsideAngular(e);return this.afs.scheduler.keepUnstableUntilFirst(t).pipe(Object(u.a)(e=>e.payload.docs.map(e=>e.data())))}get(e){return Object(i.a)(this.query.get(e)).pipe(Object(v.runInZone)(this.afs.scheduler.zone))}add(e){return this.ref.add(e)}doc(e){return new w(this.ref.doc(e),this.afs)}}class w{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const n=this.ref.collection(e),{ref:r,query:i}=N(n,t);return new b(r,i,this.afs)}snapshotChanges(){const e=l(this.ref),t=this.afs.scheduler.runOutsideAngular(e);return this.afs.scheduler.keepUnstableUntilFirst(t)}valueChanges(){return this.snapshotChanges().pipe(Object(u.a)(e=>e.payload.data()))}get(e){return Object(i.a)(this.ref.get(e)).pipe(Object(v.runInZone)(this.afs.scheduler.zone))}}var E=n("SVse"),C=function(e,t,n,r){var i,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,n,o):i(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o},S=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},T=function(e,t){return function(n,r){t(n,r,e)}};const x=new r.B("angularfire2.enableFirestorePersistence"),A=new r.B("angularfire2.firestore.persistenceSettings"),D=new r.B("angularfire2.firestore.settings"),I={timestampsInSnapshots:!0};function N(e,t=(e=>e)){return{query:t(e),ref:e}}let O=class{constructor(e,t,n,r,o,a,u){if(this.scheduler=new v.FirebaseZoneScheduler(a,o),this.firestore=a.runOutsideAngular(()=>{const n=Object(v._firebaseAppFactory)(e,t).firestore();return n.settings(r||I),n}),n&&Object(E.k)(o)){const e=()=>{try{return Object(i.a)(this.firestore.enablePersistence(u||void 0).then(()=>!0,()=>!1))}catch(e){return Object(s.a)(!1)}};this.persistenceEnabled$=a.runOutsideAngular(e)}else this.persistenceEnabled$=Object(s.a)(!1)}collection(e,t){let n;n="string"==typeof e?this.firestore.collection(e):e;const{ref:r,query:i}=N(n,t);return new b(r,i,this)}doc(e){let t;return t="string"==typeof e?this.firestore.doc(e):e,new w(t,this)}createId(){return this.firestore.collection("_").doc().id}};O=C([Object(r.A)(),T(0,Object(r.z)(v.FirebaseOptionsToken)),T(1,Object(r.O)()),T(1,Object(r.z)(v.FirebaseNameOrConfigToken)),T(2,Object(r.O)()),T(2,Object(r.z)(x)),T(3,Object(r.O)()),T(3,Object(r.z)(D)),T(4,Object(r.z)(r.R)),T(6,Object(r.O)()),T(6,Object(r.z)(A)),S("design:paramtypes",[Object,Object,Boolean,Object,Object,r.N,Object])],O);var k;n("6Joi");let P=k=class{static enablePersistence(e){return{ngModule:k,providers:[{provide:x,useValue:!0},{provide:A,useValue:e}]}}};P=k=function(e,t,n,r){var i,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,n,o):i(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o}([Object(r.I)({providers:[O]})],P),n.d(t,"EnablePersistenceToken",function(){return x}),n.d(t,"PersistenceSettingsToken",function(){return A}),n.d(t,"FirestoreSettingsToken",function(){return D}),n.d(t,"DefaultFirestoreSettings",function(){return I}),n.d(t,"associateQuery",function(){return N}),n.d(t,"AngularFirestore",function(){return O}),n.d(t,"AngularFirestoreModule",function(){return P}),n.d(t,"validateEventsArray",function(){return _}),n.d(t,"AngularFirestoreCollection",function(){return b}),n.d(t,"AngularFirestoreDocument",function(){return w}),n.d(t,"docChanges",function(){return f}),n.d(t,"sortedChanges",function(){return m}),n.d(t,"combineChanges",function(){return g}),n.d(t,"combineChange",function(){return y}),n.d(t,"fromRef",function(){return c}),n.d(t,"fromDocRef",function(){return l}),n.d(t,"fromCollectionRef",function(){return h})},gRHU:function(e,t,n){"use strict";n.d(t,"a",function(){return s});var r=n("2fFW"),i=n("NJ4a");const s={closed:!0,next(e){},error(e){if(r.a.useDeprecatedSynchronousErrorHandling)throw e;Object(i.a)(e)},complete(){}}},kJWO:function(e,t,n){"use strict";n.d(t,"a",function(){return r});const r="function"==typeof Symbol&&Symbol.observable||"@@observable"},l7GE:function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=n("7o/Q");class i extends r.a{notifyNext(e,t,n,r,i){this.destination.next(t)}notifyError(e,t){this.destination.error(e)}notifyComplete(e){this.destination.complete()}}},lJxs:function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=n("7o/Q");function i(e,t){return function(n){if("function"!=typeof e)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new s(e,t))}}class s{constructor(e,t){this.project=e,this.thisArg=t}call(e,t){return t.subscribe(new o(e,this.project,this.thisArg))}}class o extends r.a{constructor(e,t,n){super(e),this.project=t,this.count=0,this.thisArg=n||this}_next(e){let t;try{t=this.project.call(this.thisArg,e,this.count++)}catch(n){return void this.destination.error(n)}this.destination.next(t)}}},lcbw:function(e,t,n){"use strict";n.r(t);n("Uv6z");var r=setTimeout;function i(){}function s(e){if(!(this instanceof s))throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],h(e,this)}function o(e,t){for(;3===e._state;)e=e._value;0!==e._state?(e._handled=!0,s._immediateFn(function(){var n=1===e._state?t.onFulfilled:t.onRejected;if(null!==n){var r;try{r=n(e._value)}catch(i){return void u(t.promise,i)}a(t.promise,r)}else(1===e._state?a:u)(t.promise,e._value)})):e._deferreds.push(t)}function a(e,t){try{if(t===e)throw new TypeError("A promise cannot be resolved with itself.");if(t&&("object"==typeof t||"function"==typeof t)){var n=t.then;if(t instanceof s)return e._state=3,e._value=t,void c(e);if("function"==typeof n)return void h((r=n,i=t,function(){r.apply(i,arguments)}),e)}e._state=1,e._value=t,c(e)}catch(o){u(e,o)}var r,i}function u(e,t){e._state=2,e._value=t,c(e)}function c(e){2===e._state&&0===e._deferreds.length&&s._immediateFn(function(){e._handled||s._unhandledRejectionFn(e._value)});for(var t=0,n=e._deferreds.length;t<n;t++)o(e,e._deferreds[t]);e._deferreds=null}function l(e,t,n){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.promise=n}function h(e,t){var n=!1;try{e(function(e){n||(n=!0,a(t,e))},function(e){n||(n=!0,u(t,e))})}catch(r){if(n)return;n=!0,u(t,r)}}s.prototype.catch=function(e){return this.then(null,e)},s.prototype.then=function(e,t){var n=new this.constructor(i);return o(this,new l(e,t,n)),n},s.prototype.finally=function(e){var t=this.constructor;return this.then(function(n){return t.resolve(e()).then(function(){return n})},function(n){return t.resolve(e()).then(function(){return t.reject(n)})})},s.all=function(e){return new s(function(t,n){if(!e||void 0===e.length)throw new TypeError("Promise.all accepts an array");var r=Array.prototype.slice.call(e);if(0===r.length)return t([]);var i=r.length;function s(e,o){try{if(o&&("object"==typeof o||"function"==typeof o)){var a=o.then;if("function"==typeof a)return void a.call(o,function(t){s(e,t)},n)}r[e]=o,0==--i&&t(r)}catch(u){n(u)}}for(var o=0;o<r.length;o++)s(o,r[o])})},s.resolve=function(e){return e&&"object"==typeof e&&e.constructor===s?e:new s(function(t){t(e)})},s.reject=function(e){return new s(function(t,n){n(e)})},s.race=function(e){return new s(function(t,n){for(var r=0,i=e.length;r<i;r++)e[r].then(t,n)})},s._immediateFn="function"==typeof setImmediate&&function(e){setImmediate(e)}||function(e){r(e,0)},s._unhandledRejectionFn=function(e){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",e)};var d=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw new Error("unable to locate global object")}();function p(e,t){return e(t={exports:{}},t.exports),t.exports}d.Promise||(d.Promise=s);var f=p(function(e){var t=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=t)}),m=p(function(e){var t=e.exports={version:"2.5.5"};"number"==typeof __e&&(__e=t)}),g=(m.version,function(e){return"object"==typeof e?null!==e:"function"==typeof e}),y=function(e){if(!g(e))throw TypeError(e+" is not an object!");return e},v=function(e){try{return!!e()}catch(t){return!0}},_=!v(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}),b=f.document,w=g(b)&&g(b.createElement),E=function(e){return w?b.createElement(e):{}},C=!_&&!v(function(){return 7!=Object.defineProperty(E("div"),"a",{get:function(){return 7}}).a}),S=function(e,t){if(!g(e))return e;var n,r;if(t&&"function"==typeof(n=e.toString)&&!g(r=n.call(e)))return r;if("function"==typeof(n=e.valueOf)&&!g(r=n.call(e)))return r;if(!t&&"function"==typeof(n=e.toString)&&!g(r=n.call(e)))return r;throw TypeError("Can't convert object to primitive value")},T=Object.defineProperty,x={f:_?Object.defineProperty:function(e,t,n){if(y(e),t=S(t,!0),y(n),C)try{return T(e,t,n)}catch(r){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}},A=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}},D=_?function(e,t,n){return x.f(e,t,A(1,n))}:function(e,t,n){return e[t]=n,e},I={}.hasOwnProperty,N=function(e,t){return I.call(e,t)},O=0,k=Math.random(),P=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++O+k).toString(36))},M=p(function(e){var t=P("src"),n=Function.toString,r=(""+n).split("toString");m.inspectSource=function(e){return n.call(e)},(e.exports=function(e,n,i,s){var o="function"==typeof i;o&&(N(i,"name")||D(i,"name",n)),e[n]!==i&&(o&&(N(i,t)||D(i,t,e[n]?""+e[n]:r.join(String(n)))),e===f?e[n]=i:s?e[n]?e[n]=i:D(e,n,i):(delete e[n],D(e,n,i)))})(Function.prototype,"toString",function(){return"function"==typeof this&&this[t]||n.call(this)})}),R=function(e,t,n){if(function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!")}(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,i){return e.call(t,n,r,i)}}return function(){return e.apply(t,arguments)}},F=function(e,t,n){var r,i,s,o,a=e&F.F,u=e&F.G,c=e&F.S,l=e&F.P,h=e&F.B,d=u?f:c?f[t]||(f[t]={}):(f[t]||{}).prototype,p=u?m:m[t]||(m[t]={}),g=p.prototype||(p.prototype={});for(r in u&&(n=t),n)s=((i=!a&&d&&void 0!==d[r])?d:n)[r],o=h&&i?R(s,f):l&&"function"==typeof s?R(Function.call,s):s,d&&M(d,r,s,e&F.U),p[r]!=s&&D(p,r,o),l&&g[r]!=s&&(g[r]=s)};f.core=m,F.F=1,F.G=2,F.S=4,F.P=8,F.B=16,F.W=32,F.U=64,F.R=128;var L=F,V={}.toString,j=function(e){return V.call(e).slice(8,-1)},B=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==j(e)?e.split(""):Object(e)},U=function(e){if(null==e)throw TypeError("Can't call method on  "+e);return e},q=function(e){return Object(U(e))},$=Math.ceil,H=Math.floor,z=function(e){return isNaN(e=+e)?0:(e>0?H:$)(e)},W=Math.min,K=function(e){return e>0?W(z(e),9007199254740991):0},Q=Array.isArray||function(e){return"Array"==j(e)},G=f["__core-js_shared__"]||(f["__core-js_shared__"]={}),X=function(e){return G[e]||(G[e]={})},Y=p(function(e){var t=X("wks"),n=f.Symbol,r="function"==typeof n;(e.exports=function(e){return t[e]||(t[e]=r&&n[e]||(r?n:P)("Symbol."+e))}).store=t}),Z=Y("species"),J=function(e,t){return new(function(e){var t;return Q(e)&&("function"!=typeof(t=e.constructor)||t!==Array&&!Q(t.prototype)||(t=void 0),g(t)&&null===(t=t[Z])&&(t=void 0)),void 0===t?Array:t}(e))(t)},ee=function(e,t){var n=1==e,r=2==e,i=3==e,s=4==e,o=6==e,a=5==e||o,u=t||J;return function(t,c,l){for(var h,d,p=q(t),f=B(p),m=R(c,l,3),g=K(f.length),y=0,v=n?u(t,g):r?u(t,0):void 0;g>y;y++)if((a||y in f)&&(d=m(h=f[y],y,p),e))if(n)v[y]=d;else if(d)switch(e){case 3:return!0;case 5:return h;case 6:return y;case 2:v.push(h)}else if(s)return!1;return o?-1:i||s?s:v}},te=Y("unscopables"),ne=Array.prototype;null==ne[te]&&D(ne,te,{});var re=function(e){ne[te][e]=!0},ie=ee(5),se=!0;"find"in[]&&Array(1).find(function(){se=!1}),L(L.P+L.F*se,"Array",{find:function(e){return ie(this,e,arguments.length>1?arguments[1]:void 0)}}),re("find");m.Array.find;var oe=ee(6),ae=!0;"findIndex"in[]&&Array(1).findIndex(function(){ae=!1}),L(L.P+L.F*ae,"Array",{findIndex:function(e){return oe(this,e,arguments.length>1?arguments[1]:void 0)}}),re("findIndex");m.Array.findIndex;var ue,ce=function(e){return B(U(e))},le=Math.max,he=Math.min,de=X("keys"),pe=function(e){return de[e]||(de[e]=P(e))},fe=(ue=!1,function(e,t,n){var r,i=ce(e),s=K(i.length),o=function(e,t){return(e=z(e))<0?le(e+t,0):he(e,t)}(n,s);if(ue&&t!=t){for(;s>o;)if((r=i[o++])!=r)return!0}else for(;s>o;o++)if((ue||o in i)&&i[o]===t)return ue||o||0;return!ue&&-1}),me=pe("IE_PROTO"),ge=function(e,t){var n,r=ce(e),i=0,s=[];for(n in r)n!=me&&N(r,n)&&s.push(n);for(;t.length>i;)N(r,n=t[i++])&&(~fe(s,n)||s.push(n));return s},ye="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(","),ve=Object.keys||function(e){return ge(e,ye)},_e={f:Object.getOwnPropertySymbols},be={f:{}.propertyIsEnumerable},we=Object.assign,Ee=!we||v(function(){var e={},t={},n=Symbol(),r="abcdefghijklmnopqrst";return e[n]=7,r.split("").forEach(function(e){t[e]=e}),7!=we({},e)[n]||Object.keys(we({},t)).join("")!=r})?function(e,t){for(var n=q(e),r=arguments.length,i=1,s=_e.f,o=be.f;r>i;)for(var a,u=B(arguments[i++]),c=s?ve(u).concat(s(u)):ve(u),l=c.length,h=0;l>h;)o.call(u,a=c[h++])&&(n[a]=u[a]);return n}:we;L(L.S+L.F,"Object",{assign:Ee});m.Object.assign;var Ce=Y("match"),Se=function(e,t,n){if(g(r=t)&&(void 0!==(i=r[Ce])?i:"RegExp"==j(r)))throw TypeError("String#"+n+" doesn't accept regex!");var r,i;return String(U(e))},Te=Y("match"),xe="".startsWith;L(L.P+L.F*function(e){var t=/./;try{"/./"[e](t)}catch(n){try{return t[Te]=!1,!"/./"[e](t)}catch(r){}}return!0}("startsWith"),"String",{startsWith:function(e){var t=Se(this,e,"startsWith"),n=K(Math.min(arguments.length>1?arguments[1]:void 0,t.length)),r=String(e);return xe?xe.call(t,r,n):t.slice(n,n+r.length)===r}});m.String.startsWith;L(L.P,"String",{repeat:function(e){var t=String(U(this)),n="",r=z(e);if(r<0||r==1/0)throw RangeError("Count can't be negative");for(;r>0;(r>>>=1)&&(t+=t))1&r&&(n+=t);return n}});m.String.repeat;var Ae=p(function(e){var t=P("meta"),n=x.f,r=0,i=Object.isExtensible||function(){return!0},s=!v(function(){return i(Object.preventExtensions({}))}),o=function(e){n(e,t,{value:{i:"O"+ ++r,w:{}}})},a=e.exports={KEY:t,NEED:!1,fastKey:function(e,n){if(!g(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!N(e,t)){if(!i(e))return"F";if(!n)return"E";o(e)}return e[t].i},getWeak:function(e,n){if(!N(e,t)){if(!i(e))return!0;if(!n)return!1;o(e)}return e[t].w},onFreeze:function(e){return s&&a.NEED&&i(e)&&!N(e,t)&&o(e),e}}}),De=(Ae.KEY,Ae.NEED,Ae.fastKey,Ae.getWeak,Ae.onFreeze,x.f),Ie=Y("toStringTag"),Ne=function(e,t,n){e&&!N(e=n?e:e.prototype,Ie)&&De(e,Ie,{configurable:!0,value:t})},Oe={f:Y},ke=x.f,Pe=function(e){var t=m.Symbol||(m.Symbol=f.Symbol||{});"_"==e.charAt(0)||e in t||ke(t,e,{value:Oe.f(e)})},Me=_?Object.defineProperties:function(e,t){y(e);for(var n,r=ve(t),i=r.length,s=0;i>s;)x.f(e,n=r[s++],t[n]);return e},Re=f.document,Fe=Re&&Re.documentElement,Le=pe("IE_PROTO"),Ve=function(){},je=function(){var e,t=E("iframe"),n=ye.length;for(t.style.display="none",Fe.appendChild(t),t.src="javascript:",(e=t.contentWindow.document).open(),e.write("<script>document.F=Object<\/script>"),e.close(),je=e.F;n--;)delete je.prototype[ye[n]];return je()},Be=Object.create||function(e,t){var n;return null!==e?(Ve.prototype=y(e),n=new Ve,Ve.prototype=null,n[Le]=e):n=je(),void 0===t?n:Me(n,t)},Ue=ye.concat("length","prototype"),qe={f:Object.getOwnPropertyNames||function(e){return ge(e,Ue)}},$e=qe.f,He={}.toString,ze="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],We={f:function(e){return ze&&"[object Window]"==He.call(e)?function(e){try{return $e(e)}catch(t){return ze.slice()}}(e):$e(ce(e))}},Ke=Object.getOwnPropertyDescriptor,Qe={f:_?Ke:function(e,t){if(e=ce(e),t=S(t,!0),C)try{return Ke(e,t)}catch(n){}if(N(e,t))return A(!be.f.call(e,t),e[t])}},Ge=Ae.KEY,Xe=Qe.f,Ye=x.f,Ze=We.f,Je=f.Symbol,et=f.JSON,tt=et&&et.stringify,nt=Y("_hidden"),rt=Y("toPrimitive"),it={}.propertyIsEnumerable,st=X("symbol-registry"),ot=X("symbols"),at=X("op-symbols"),ut=Object.prototype,ct="function"==typeof Je,lt=f.QObject,ht=!lt||!lt.prototype||!lt.prototype.findChild,dt=_&&v(function(){return 7!=Be(Ye({},"a",{get:function(){return Ye(this,"a",{value:7}).a}})).a})?function(e,t,n){var r=Xe(ut,t);r&&delete ut[t],Ye(e,t,n),r&&e!==ut&&Ye(ut,t,r)}:Ye,pt=function(e){var t=ot[e]=Be(Je.prototype);return t._k=e,t},ft=ct&&"symbol"==typeof Je.iterator?function(e){return"symbol"==typeof e}:function(e){return e instanceof Je},mt=function(e,t,n){return e===ut&&mt(at,t,n),y(e),t=S(t,!0),y(n),N(ot,t)?(n.enumerable?(N(e,nt)&&e[nt][t]&&(e[nt][t]=!1),n=Be(n,{enumerable:A(0,!1)})):(N(e,nt)||Ye(e,nt,A(1,{})),e[nt][t]=!0),dt(e,t,n)):Ye(e,t,n)},gt=function(e,t){y(e);for(var n,r=function(e){var t=ve(e),n=_e.f;if(n)for(var r,i=n(e),s=be.f,o=0;i.length>o;)s.call(e,r=i[o++])&&t.push(r);return t}(t=ce(t)),i=0,s=r.length;s>i;)mt(e,n=r[i++],t[n]);return e},yt=function(e){var t=it.call(this,e=S(e,!0));return!(this===ut&&N(ot,e)&&!N(at,e))&&(!(t||!N(this,e)||!N(ot,e)||N(this,nt)&&this[nt][e])||t)},vt=function(e,t){if(e=ce(e),t=S(t,!0),e!==ut||!N(ot,t)||N(at,t)){var n=Xe(e,t);return!n||!N(ot,t)||N(e,nt)&&e[nt][t]||(n.enumerable=!0),n}},_t=function(e){for(var t,n=Ze(ce(e)),r=[],i=0;n.length>i;)N(ot,t=n[i++])||t==nt||t==Ge||r.push(t);return r},bt=function(e){for(var t,n=e===ut,r=Ze(n?at:ce(e)),i=[],s=0;r.length>s;)!N(ot,t=r[s++])||n&&!N(ut,t)||i.push(ot[t]);return i};ct||(M((Je=function(){if(this instanceof Je)throw TypeError("Symbol is not a constructor!");var e=P(arguments.length>0?arguments[0]:void 0),t=function(n){this===ut&&t.call(at,n),N(this,nt)&&N(this[nt],e)&&(this[nt][e]=!1),dt(this,e,A(1,n))};return _&&ht&&dt(ut,e,{configurable:!0,set:t}),pt(e)}).prototype,"toString",function(){return this._k}),Qe.f=vt,x.f=mt,qe.f=We.f=_t,be.f=yt,_e.f=bt,_&&M(ut,"propertyIsEnumerable",yt,!0),Oe.f=function(e){return pt(Y(e))}),L(L.G+L.W+L.F*!ct,{Symbol:Je});for(var wt="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),Et=0;wt.length>Et;)Y(wt[Et++]);for(var Ct=ve(Y.store),St=0;Ct.length>St;)Pe(Ct[St++]);L(L.S+L.F*!ct,"Symbol",{for:function(e){return N(st,e+="")?st[e]:st[e]=Je(e)},keyFor:function(e){if(!ft(e))throw TypeError(e+" is not a symbol!");for(var t in st)if(st[t]===e)return t},useSetter:function(){ht=!0},useSimple:function(){ht=!1}}),L(L.S+L.F*!ct,"Object",{create:function(e,t){return void 0===t?Be(e):gt(Be(e),t)},defineProperty:mt,defineProperties:gt,getOwnPropertyDescriptor:vt,getOwnPropertyNames:_t,getOwnPropertySymbols:bt}),et&&L(L.S+L.F*(!ct||v(function(){var e=Je();return"[null]"!=tt([e])||"{}"!=tt({a:e})||"{}"!=tt(Object(e))})),"JSON",{stringify:function(e){for(var t,n,r=[e],i=1;arguments.length>i;)r.push(arguments[i++]);if(n=t=r[1],(g(t)||void 0!==e)&&!ft(e))return Q(t)||(t=function(e,t){if("function"==typeof n&&(t=n.call(this,e,t)),!ft(t))return t}),r[1]=t,tt.apply(et,r)}}),Je.prototype[rt]||D(Je.prototype,rt,Je.prototype.valueOf),Ne(Je,"Symbol"),Ne(Math,"Math",!0),Ne(f.JSON,"JSON",!0);var Tt=Y("toStringTag"),xt="Arguments"==j(function(){return arguments}()),At={};At[Y("toStringTag")]="z",At+""!="[object z]"&&M(Object.prototype,"toString",function(){return"[object "+(void 0===(e=this)?"Undefined":null===e?"Null":"string"==typeof(n=function(e,t){try{return e[t]}catch(n){}}(t=Object(e),Tt))?n:xt?j(t):"Object"==(r=j(t))&&"function"==typeof t.callee?"Arguments":r)+"]";var e,t,n,r},!0),Pe("asyncIterator"),Pe("observable");m.Symbol;var Dt={},It={};D(It,Y("iterator"),function(){return this});var Nt,Ot=function(e,t,n){e.prototype=Be(It,{next:A(1,n)}),Ne(e,t+" Iterator")},kt=pe("IE_PROTO"),Pt=Object.prototype,Mt=Object.getPrototypeOf||function(e){return e=q(e),N(e,kt)?e[kt]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?Pt:null},Rt=Y("iterator"),Ft=!([].keys&&"next"in[].keys()),Lt=function(){return this},Vt=function(e,t,n,r,i,s,o){Ot(n,t,r);var a,u,c,l=function(e){if(!Ft&&e in f)return f[e];switch(e){case"keys":case"values":return function(){return new n(this,e)}}return function(){return new n(this,e)}},h=t+" Iterator",d="values"==i,p=!1,f=e.prototype,m=f[Rt]||f["@@iterator"]||i&&f[i],g=m||l(i),y=i?d?l("entries"):g:void 0,v="Array"==t&&f.entries||m;if(v&&(c=Mt(v.call(new e)))!==Object.prototype&&c.next&&(Ne(c,h,!0),"function"!=typeof c[Rt]&&D(c,Rt,Lt)),d&&m&&"values"!==m.name&&(p=!0,g=function(){return m.call(this)}),(Ft||p||!f[Rt])&&D(f,Rt,g),Dt[t]=g,Dt[h]=Lt,i)if(a={values:d?g:l("values"),keys:s?g:l("keys"),entries:y},o)for(u in a)u in f||M(f,u,a[u]);else L(L.P+L.F*(Ft||p),t,a);return a},jt=(Nt=!0,function(e,t){var n,r,i=String(U(e)),s=z(t),o=i.length;return s<0||s>=o?Nt?"":void 0:(n=i.charCodeAt(s))<55296||n>56319||s+1===o||(r=i.charCodeAt(s+1))<56320||r>57343?Nt?i.charAt(s):n:Nt?i.slice(s,s+2):r-56320+(n-55296<<10)+65536});Vt(String,"String",function(e){this._t=String(e),this._i=0},function(){var e,t=this._t,n=this._i;return n>=t.length?{value:void 0,done:!0}:(e=jt(t,n),this._i+=e.length,{value:e,done:!1})});var Bt=function(e,t){return{value:t,done:!!e}},Ut=Vt(Array,"Array",function(e,t){this._t=ce(e),this._i=0,this._k=t},function(){var e=this._t,t=this._k,n=this._i++;return!e||n>=e.length?(this._t=void 0,Bt(1)):Bt(0,"keys"==t?n:"values"==t?e[n]:[n,e[n]])},"values");Dt.Arguments=Dt.Array,re("keys"),re("values"),re("entries");for(var qt=Y("iterator"),$t=Y("toStringTag"),Ht=Dt.Array,zt={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},Wt=ve(zt),Kt=0;Kt<Wt.length;Kt++){var Qt,Gt=Wt[Kt],Xt=zt[Gt],Yt=f[Gt],Zt=Yt&&Yt.prototype;if(Zt&&(Zt[qt]||D(Zt,qt,Ht),Zt[$t]||D(Zt,$t,Gt),Dt[Gt]=Ht,Xt))for(Qt in Ut)Zt[Qt]||M(Zt,Qt,Ut[Qt],!0)}Oe.f("iterator")},mCNh:function(e,t,n){"use strict";n.d(t,"a",function(){return i}),n.d(t,"b",function(){return s});var r=n("KqfI");function i(...e){return s(e)}function s(e){return e?1===e.length?e[0]:function(t){return e.reduce((e,t)=>t(e),t)}:r.a}},mfFw:function(e,t){e.exports=":host {\n  display: flex;\n  flex-wrap: nowrap;\n  justify-content: flex-end;\n  align-items: center;\n  -webkit-transform: translateX(50%);\n          transform: translateX(50%); }\n  :host img {\n    height: 200px;\n    margin-left: 1rem;\n    box-shadow: 0 0 20px rgba(0, 0, 0, 0.35); }\n"},n6bG:function(e,t,n){"use strict";function r(e){return"function"==typeof e}n.d(t,"a",function(){return r})},"nH/3":function(e,t){e.exports="<router-outlet></router-outlet>"},ngJS:function(e,t,n){"use strict";n.d(t,"a",function(){return r});const r=e=>t=>{for(let n=0,r=e.length;n<r&&!t.closed;n++)t.next(e[n]);t.closed||t.complete()}},os0x:function(e,t,n){"use strict";n.r(t),n.d(t,"__extends",function(){return i}),n.d(t,"__assign",function(){return s}),n.d(t,"__rest",function(){return o}),n.d(t,"__decorate",function(){return a}),n.d(t,"__param",function(){return u}),n.d(t,"__metadata",function(){return c}),n.d(t,"__awaiter",function(){return l}),n.d(t,"__generator",function(){return h}),n.d(t,"__exportStar",function(){return d}),n.d(t,"__values",function(){return p}),n.d(t,"__read",function(){return f}),n.d(t,"__spread",function(){return m}),n.d(t,"__await",function(){return g}),n.d(t,"__asyncGenerator",function(){return y}),n.d(t,"__asyncDelegator",function(){return v}),n.d(t,"__asyncValues",function(){return _}),n.d(t,"__makeTemplateObject",function(){return b}),n.d(t,"__importStar",function(){return w}),n.d(t,"__importDefault",function(){return E});var r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};function i(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var s=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e};function o(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&(n[r[i]]=e[r[i]])}return n}function a(e,t,n,r){var i,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,n,o):i(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o}function u(e,t){return function(n,r){t(n,r,e)}}function c(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function l(e,t,n,r){return new(n||(n=Promise))(function(i,s){function o(e){try{u(r.next(e))}catch(t){s(t)}}function a(e){try{u(r.throw(e))}catch(t){s(t)}}function u(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(o,a)}u((r=r.apply(e,t||[])).next())})}function h(e,t){var n,r,i,s,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=r[2&s[0]?"return":s[0]?"throw":"next"])&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[0,i.value]),s[0]){case 0:case 1:i=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,r=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===s[0]||2===s[0])){o=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){o.label=s[1];break}if(6===s[0]&&o.label<i[1]){o.label=i[1],i=s;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(s);break}i[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(a){s=[6,a],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,a])}}}function d(e,t){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}function p(e){var t="function"==typeof Symbol&&e[Symbol.iterator],n=0;return t?t.call(e):{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}}}function f(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,s=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(r=s.next()).done;)o.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=s.return)&&n.call(s)}finally{if(i)throw i.error}}return o}function m(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(f(arguments[t]));return e}function g(e){return this instanceof g?(this.v=e,this):new g(e)}function y(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=n.apply(e,t||[]),s=[];return r={},o("next"),o("throw"),o("return"),r[Symbol.asyncIterator]=function(){return this},r;function o(e){i[e]&&(r[e]=function(t){return new Promise(function(n,r){s.push([e,t,n,r])>1||a(e,t)})})}function a(e,t){try{(n=i[e](t)).value instanceof g?Promise.resolve(n.value.v).then(u,c):l(s[0][2],n)}catch(r){l(s[0][3],r)}var n}function u(e){a("next",e)}function c(e){a("throw",e)}function l(e,t){e(t),s.shift(),s.length&&a(s[0][0],s[0][1])}}function v(e){var t,n;return t={},r("next"),r("throw",function(e){throw e}),r("return"),t[Symbol.iterator]=function(){return this},t;function r(r,i){e[r]&&(t[r]=function(t){return(n=!n)?{value:g(e[r](t)),done:"return"===r}:i?i(t):t})}}function _(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator];return t?t.call(e):p(e)}function b(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}function w(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function E(e){return e&&e.__esModule?e:{default:e}}},pLZG:function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=n("7o/Q");function i(e,t){return function(n){return n.lift(new s(e,t))}}class s{constructor(e,t){this.predicate=e,this.thisArg=t}call(e,t){return t.subscribe(new o(e,this.predicate,this.thisArg))}}class o extends r.a{constructor(e,t,n){super(e),this.predicate=t,this.thisArg=n,this.count=0}_next(e){let t;try{t=this.predicate.call(this.thisArg,e,this.count++)}catch(n){return void this.destination.error(n)}t&&this.destination.next(e)}}},pLzU:function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=n("Lhse");const i=e=>t=>{const n=e[r.a]();for(;;){const e=n.next();if(e.done){t.complete();break}if(t.next(e.value),t.closed)break}return"function"==typeof n.return&&t.add(()=>{n.return&&n.return()}),t}},"q/0M":function(e,t,n){"use strict";n.r(t),n.d(t,"setLogLevel",function(){return u}),n.d(t,"Logger",function(){return a}),n.d(t,"LogLevel",function(){return r});var r,i=[];!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(r||(r={}));var s=r.INFO,o=function(e,t){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];if(!(t<e.logLevel)){var s=(new Date).toISOString();switch(t){case r.DEBUG:case r.VERBOSE:console.log.apply(console,["["+s+"]  "+e.name+":"].concat(n));break;case r.INFO:console.info.apply(console,["["+s+"]  "+e.name+":"].concat(n));break;case r.WARN:console.warn.apply(console,["["+s+"]  "+e.name+":"].concat(n));break;case r.ERROR:console.error.apply(console,["["+s+"]  "+e.name+":"].concat(n));break;default:throw new Error("Attempted to log a message with an invalid logType (value: "+t+")")}}},a=function(){function e(e){this.name=e,this._logLevel=s,this._logHandler=o,i.push(this)}return Object.defineProperty(e.prototype,"logLevel",{get:function(){return this._logLevel},set:function(e){if(!(e in r))throw new TypeError("Invalid value assigned to `logLevel`");this._logLevel=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"logHandler",{get:function(){return this._logHandler},set:function(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e},enumerable:!0,configurable:!0}),e.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._logHandler.apply(this,[this,r.DEBUG].concat(e))},e.prototype.log=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._logHandler.apply(this,[this,r.VERBOSE].concat(e))},e.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._logHandler.apply(this,[this,r.INFO].concat(e))},e.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._logHandler.apply(this,[this,r.WARN].concat(e))},e.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._logHandler.apply(this,[this,r.ERROR].concat(e))},e}();function u(e){i.forEach(function(t){t.logLevel=e})}},quSY:function(e,t,n){"use strict";var r=n("DH7j"),i=n("XoHu"),s=n("n6bG");const o={e:{}};let a;function u(){try{return a.apply(this,arguments)}catch(e){return o.e=e,o}}function c(e){return a=e,u}function l(e){return Error.call(this),this.message=e?`${e.length} errors occurred during unsubscription:\n${e.map((e,t)=>`${t+1}) ${e.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=e,this}l.prototype=Object.create(Error.prototype);const h=l;n.d(t,"a",function(){return d});class d{constructor(e){this.closed=!1,this._parent=null,this._parents=null,this._subscriptions=null,e&&(this._unsubscribe=e)}unsubscribe(){let e,t=!1;if(this.closed)return;let{_parent:n,_parents:a,_unsubscribe:u,_subscriptions:l}=this;this.closed=!0,this._parent=null,this._parents=null,this._subscriptions=null;let d=-1,p=a?a.length:0;for(;n;)n.remove(this),n=++d<p&&a[d]||null;if(Object(s.a)(u)){c(u).call(this)===o&&(t=!0,e=e||(o.e instanceof h?f(o.e.errors):[o.e]))}if(Object(r.a)(l))for(d=-1,p=l.length;++d<p;){const n=l[d];if(Object(i.a)(n)){if(c(n.unsubscribe).call(n)===o){t=!0,e=e||[];let n=o.e;n instanceof h?e=e.concat(f(n.errors)):e.push(n)}}}if(t)throw new h(e)}add(e){if(!e||e===d.EMPTY)return d.EMPTY;if(e===this)return this;let t=e;switch(typeof e){case"function":t=new d(e);case"object":if(t.closed||"function"!=typeof t.unsubscribe)return t;if(this.closed)return t.unsubscribe(),t;if("function"!=typeof t._addParent){const e=t;(t=new d)._subscriptions=[e]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}return(this._subscriptions||(this._subscriptions=[])).push(t),t._addParent(this),t}remove(e){const t=this._subscriptions;if(t){const n=t.indexOf(e);-1!==n&&t.splice(n,1)}}_addParent(e){let{_parent:t,_parents:n}=this;t&&t!==e?n?-1===n.indexOf(e)&&n.push(e):this._parents=[e]:this._parent=e}}var p;function f(e){return e.reduce((e,t)=>e.concat(t instanceof h?t.errors:t),[])}d.EMPTY=((p=new d).closed=!0,p)},w1tV:function(e,t,n){"use strict";var r=n("XNiG"),i=n("HDdC"),s=n("7o/Q"),o=n("quSY");function a(){return function(e){return e.lift(new u(e))}}class u{constructor(e){this.connectable=e}call(e,t){const{connectable:n}=this;n._refCount++;const r=new c(e,n),i=t.subscribe(r);return r.closed||(r.connection=n.connect()),i}}class c extends s.a{constructor(e,t){super(e),this.connectable=t}_unsubscribe(){const{connectable:e}=this;if(!e)return void(this.connection=null);this.connectable=null;const t=e._refCount;if(t<=0)return void(this.connection=null);if(e._refCount=t-1,t>1)return void(this.connection=null);const{connection:n}=this,r=e._connection;this.connection=null,!r||n&&r!==n||r.unsubscribe()}}const l=class extends i.a{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._refCount=0,this._isComplete=!1}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return e&&!e.isStopped||(this._subject=this.subjectFactory()),this._subject}connect(){let e=this._connection;return e||(this._isComplete=!1,(e=this._connection=new o.a).add(this.source.subscribe(new d(this.getSubject(),this))),e.closed?(this._connection=null,e=o.a.EMPTY):this._connection=e),e}refCount(){return a()(this)}}.prototype,h={operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:l._subscribe},_isComplete:{value:l._isComplete,writable:!0},getSubject:{value:l.getSubject},connect:{value:l.connect},refCount:{value:l.refCount}};class d extends r.b{constructor(e,t){super(e),this.connectable=t}_error(e){this._unsubscribe(),super._error(e)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const e=this.connectable;if(e){this.connectable=null;const t=e._connection;e._refCount=0,e._subject=null,e._connection=null,t&&t.unsubscribe()}}}class p{constructor(e,t){this.subjectFactory=e,this.selector=t}call(e,t){const{selector:n}=this,r=this.subjectFactory(),i=n(r).subscribe(e);return i.add(t.subscribe(r)),i}}function f(){return new r.a}function m(){return e=>a()(function(e,t){return function(n){let r;if(r="function"==typeof e?e:function(){return e},"function"==typeof t)return n.lift(new p(r,t));const i=Object.create(n,h);return i.source=n,i.subjectFactory=r,i}}(f)(e))}n.d(t,"a",function(){return m})},wj3C:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("zVF4"),i=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s="[DEFAULT]",o=[],a=function(){function e(e,t,n){this.firebase_=n,this.isDeleted_=!1,this.services_={},this.name_=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled||!1,this.options_=r.deepCopy(e),this.INTERNAL={getUid:function(){return null},getToken:function(){return Promise.resolve(null)},addAuthTokenListener:function(e){o.push(e),setTimeout(function(){return e(null)},0)},removeAuthTokenListener:function(e){o=o.filter(function(t){return t!==e})}}}return Object.defineProperty(e.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this._automaticDataCollectionEnabled},set:function(e){this.checkDestroyed_(),this._automaticDataCollectionEnabled=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!0,configurable:!0}),e.prototype.delete=function(){var e=this;return new Promise(function(t){e.checkDestroyed_(),t()}).then(function(){e.firebase_.INTERNAL.removeApp(e.name_);var t=[];return Object.keys(e.services_).forEach(function(n){Object.keys(e.services_[n]).forEach(function(r){t.push(e.services_[n][r])})}),Promise.all(t.map(function(e){return e.INTERNAL.delete()}))}).then(function(){e.isDeleted_=!0,e.services_={}})},e.prototype._getService=function(e,t){if(void 0===t&&(t=s),this.checkDestroyed_(),this.services_[e]||(this.services_[e]={}),!this.services_[e][t]){var n=t!==s?t:void 0,r=this.firebase_.INTERNAL.factories[e](this,this.extendApp.bind(this),n);this.services_[e][t]=r}return this.services_[e][t]},e.prototype.extendApp=function(e){var t=this;r.deepExtend(this,e),e.INTERNAL&&e.INTERNAL.addAuthTokenListener&&(o.forEach(function(e){t.INTERNAL.addAuthTokenListener(e)}),o=[])},e.prototype.checkDestroyed_=function(){this.isDeleted_&&u("app-deleted",{name:this.name_})},e}();function u(e,t){throw c.create(e,t)}a.prototype.name&&a.prototype.options||a.prototype.delete||console.log("dc");var c=new r.ErrorFactory("app","Firebase",{"no-app":"No Firebase App '{$name}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$name}","duplicate-app":"Firebase App named '{$name}' already exists","app-deleted":"Firebase App named '{$name}' already deleted","duplicate-service":"Firebase service named '{$name}' already registered","sa-not-supported":"Initializing the Firebase SDK with a service account is only allowed in a Node.js environment. On client devices, you should instead initialize the SDK with an api key and auth domain","invalid-app-argument":"firebase.{$name}() takes either no argument or a Firebase App instance."}),l=function e(){var t={},n={},o={},c={__esModule:!0,initializeApp:function(e,n){if(void 0===n&&(n={}),"object"!=typeof n||null===n){var r=n;n={name:r}}var o=n;void 0===o.name&&(o.name=s);var l=o.name;"string"==typeof l&&l||u("bad-app-name",{name:l+""}),i(t,l)&&u("duplicate-app",{name:l});var h=new a(e,o,c);return t[l]=h,d(h,"create"),h},app:l,apps:null,Promise,SDK_VERSION:"5.5.9",INTERNAL:{registerService:function(e,t,i,s,d){n[e]&&u("duplicate-service",{name:e}),n[e]=t,s&&(o[e]=s,h().forEach(function(e){s("create",e)}));var p=function(t){return void 0===t&&(t=l()),"function"!=typeof t[e]&&u("invalid-app-argument",{name:e}),t[e]()};return void 0!==i&&r.deepExtend(p,i),c[e]=p,a.prototype[e]=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return this._getService.bind(this,e).apply(this,d?t:[])},p},createFirebaseNamespace:e,extendNamespace:function(e){r.deepExtend(c,e)},createSubscribe:r.createSubscribe,ErrorFactory:r.ErrorFactory,removeApp:function(e){d(t[e],"delete"),delete t[e]},factories:n,useAsService:p,Promise,deepExtend:r.deepExtend}};function l(e){return i(t,e=e||s)||u("no-app",{name:e}),t[e]}function h(){return Object.keys(t).map(function(e){return t[e]})}function d(e,t){Object.keys(n).forEach(function(n){var r=p(e,n);null!==r&&o[r]&&o[r](t,e)})}function p(e,t){if("serverAuth"===t)return null;var n=t;return e.options,n}return r.patchProperty(c,"default",c),Object.defineProperty(c,"apps",{get:h}),r.patchProperty(l,"App",a),c}();t.firebase=l,t.default=l},x7I3:function(e,t,n){"use strict";n.r(t),n.d(t,"createWebChannelTransport",function(){return Pn}),n.d(t,"ErrorCode",function(){return Mn}),n.d(t,"EventType",function(){return Rn}),n.d(t,"WebChannel",function(){return Fn}),n.d(t,"XhrIoPool",function(){return Ln});var r,i="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},s=s||{},o=i;function a(e){return"string"==typeof e}function u(e,t){e=e.split("."),t=t||o;for(var n=0;n<e.length;n++)if(null==(t=t[e[n]]))return null;return t}function c(){}function l(e){var t=typeof e;if("object"==t){if(!e)return"null";if(e instanceof Array)return"array";if(e instanceof Object)return t;var n=Object.prototype.toString.call(e);if("[object Window]"==n)return"object";if("[object Array]"==n||"number"==typeof e.length&&void 0!==e.splice&&void 0!==e.propertyIsEnumerable&&!e.propertyIsEnumerable("splice"))return"array";if("[object Function]"==n||void 0!==e.call&&void 0!==e.propertyIsEnumerable&&!e.propertyIsEnumerable("call"))return"function"}else if("function"==t&&void 0===e.call)return"object";return t}function h(e){return"array"==l(e)}function d(e){var t=l(e);return"array"==t||"object"==t&&"number"==typeof e.length}function p(e){return"function"==l(e)}function f(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var m="closure_uid_"+(1e9*Math.random()>>>0),g=0;function y(e,t,n){return e.call.apply(e.bind,arguments)}function v(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function _(e,t,n){return(_=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?y:v).apply(null,arguments)}function b(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}var w=Date.now||function(){return+new Date};function E(e,t){function n(){}n.prototype=t.prototype,e.L=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.mh=function(e,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return t.prototype[n].apply(e,i)}}function C(e){if(Error.captureStackTrace)Error.captureStackTrace(this,C);else{var t=Error().stack;t&&(this.stack=t)}e&&(this.message=String(e))}function S(e,t){for(var n="",r=(e=e.split("%s")).length-1,i=0;i<r;i++)n+=e[i]+(i<t.length?t[i]:"%s");C.call(this,n+e[r])}function T(){0!=x&&(A[this[m]||(this[m]=++g)]=this),this.Ka=this.Ka,this.Qa=this.Qa}E(C,Error),C.prototype.name="CustomError",E(S,C),S.prototype.name="AssertionError";var x=0,A={};T.prototype.Ka=!1,T.prototype.bb=function(){if(!this.Ka&&(this.Ka=!0,this.F(),0!=x)){var e=this[m]||(this[m]=++g);if(0!=x&&this.Qa&&0<this.Qa.length)throw Error(this+" did not empty its onDisposeCallbacks queue. This probably means it overrode dispose() or disposeInternal() without calling the superclass' method.");delete A[e]}},T.prototype.F=function(){if(this.Qa)for(;this.Qa.length;)this.Qa.shift()()};var D=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if(a(e))return a(t)&&1==t.length?e.indexOf(t,0):-1;for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1},I=Array.prototype.lastIndexOf?function(e,t){return Array.prototype.lastIndexOf.call(e,t,e.length-1)}:function(e,t){var n=e.length-1;if(0>n&&(n=Math.max(0,e.length+n)),a(e))return a(t)&&1==t.length?e.lastIndexOf(t,n):-1;for(;0<=n;n--)if(n in e&&e[n]===t)return n;return-1},N=Array.prototype.forEach?function(e,t,n){Array.prototype.forEach.call(e,t,n)}:function(e,t,n){for(var r=e.length,i=a(e)?e.split(""):e,s=0;s<r;s++)s in i&&t.call(n,i[s],s,e)},O=Array.prototype.some?function(e,t){return Array.prototype.some.call(e,t,void 0)}:function(e,t){for(var n=e.length,r=a(e)?e.split(""):e,i=0;i<n;i++)if(i in r&&t.call(void 0,r[i],i,e))return!0;return!1};function k(e){if(!h(e))for(var t=e.length-1;0<=t;t--)delete e[t];e.length=0}function P(e,t){var n;return(n=0<=(t=D(e,t)))&&Array.prototype.splice.call(e,t,1),n}function M(e){return Array.prototype.concat.apply([],arguments)}function R(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}function F(e){return/^[\s\xa0]*$/.test(e)}var L,V=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]};function j(e,t){return e<t?-1:e>t?1:0}e:{var B=o.navigator;if(B){var U=B.userAgent;if(U){L=U;break e}}L=""}function q(e){return-1!=L.indexOf(e)}function $(e,t,n){for(var r in e)t.call(n,e[r],r,e)}function H(e){var t,n=[],r=0;for(t in e)n[r++]=e[t];return n}function z(e){var t,n=[],r=0;for(t in e)n[r++]=t;return n}function W(e){var t,n={};for(t in e)n[t]=e[t];return n}var K="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Q(e,t){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])e[n]=r[n];for(var s=0;s<K.length;s++)n=K[s],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function G(e){return G[" "](e),e}G[" "]=c;var X,Y,Z=q("Opera"),J=q("Trident")||q("MSIE"),ee=q("Edge"),te=ee||J,ne=q("Gecko")&&!(-1!=L.toLowerCase().indexOf("webkit")&&!q("Edge"))&&!(q("Trident")||q("MSIE"))&&!q("Edge"),re=-1!=L.toLowerCase().indexOf("webkit")&&!q("Edge");function ie(){var e=o.document;return e?e.documentMode:void 0}e:{var se="",oe=(Y=L,ne?/rv:([^\);]+)(\)|;)/.exec(Y):ee?/Edge\/([\d\.]+)/.exec(Y):J?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(Y):re?/WebKit\/(\S+)/.exec(Y):Z?/(?:Version)[ \/]?(\S+)/.exec(Y):void 0);if(oe&&(se=oe?oe[1]:""),J){var ae=ie();if(null!=ae&&ae>parseFloat(se)){X=String(ae);break e}}X=se}var ue,ce={};function le(e){return function(e,t){var n=ce;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,function(){for(var t=0,n=V(String(X)).split("."),r=V(String(e)).split("."),i=Math.max(n.length,r.length),s=0;0==t&&s<i;s++){var o=n[s]||"",a=r[s]||"";do{if(o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==o[0].length&&0==a[0].length)break;t=j(0==o[1].length?0:parseInt(o[1],10),0==a[1].length?0:parseInt(a[1],10))||j(0==o[2].length,0==a[2].length)||j(o[2],a[2]),o=o[3],a=a[3]}while(0==t)}return 0<=t})}var he=o.document;ue=he&&J?ie()||("CSS1Compat"==he.compatMode?parseInt(X,10):5):void 0;var de=Object.freeze||function(e){return e},pe=!J||9<=Number(ue),fe=J&&!le("9"),me=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{o.addEventListener("test",c,t),o.removeEventListener("test",c,t)}catch(n){}return e}();function ge(e,t){this.type=e,this.currentTarget=this.target=t,this.defaultPrevented=this.Ea=!1,this.Be=!0}function ye(e,t){ge.call(this,e?e.type:""),this.relatedTarget=this.currentTarget=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=this.offsetY=this.offsetX=0,this.key="",this.charCode=this.keyCode=0,this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.fb=null,e&&this.Kf(e,t)}ge.prototype.stopPropagation=function(){this.Ea=!0},ge.prototype.preventDefault=function(){this.defaultPrevented=!0,this.Be=!1},E(ye,ge);var ve=de({2:"touch",3:"pen",4:"mouse"});ye.prototype.Kf=function(e,t){var n=this.type=e.type,r=e.changedTouches?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.currentTarget=t,t=e.relatedTarget){if(ne){e:{try{G(t.nodeName);var i=!0;break e}catch(s){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,null===r?(this.offsetX=re||void 0!==e.offsetX?e.offsetX:e.layerX,this.offsetY=re||void 0!==e.offsetY?e.offsetY:e.layerY,this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0):(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0),this.button=e.button,this.keyCode=e.keyCode||0,this.key=e.key||"",this.charCode=e.charCode||("keypress"==n?e.keyCode:0),this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType=a(e.pointerType)?e.pointerType:ve[e.pointerType]||"",this.state=e.state,this.fb=e,e.defaultPrevented&&this.preventDefault()},ye.prototype.stopPropagation=function(){ye.L.stopPropagation.call(this),this.fb.stopPropagation?this.fb.stopPropagation():this.fb.cancelBubble=!0},ye.prototype.preventDefault=function(){ye.L.preventDefault.call(this);var e=this.fb;if(e.preventDefault)e.preventDefault();else if(e.returnValue=!1,fe)try{(e.ctrlKey||112<=e.keyCode&&123>=e.keyCode)&&(e.keyCode=-1)}catch(t){}};var _e="closure_listenable_"+(1e6*Math.random()|0);function be(e){return!(!e||!e[_e])}var we=0;function Ee(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.Ob=i,this.key=++we,this.Sa=this.Eb=!1}function Ce(e){this.src=e,this.J={},this.xb=0}function Se(e,t,n,r){for(var i=0;i<e.length;++i){var s=e[i];if(!s.Sa&&s.listener==t&&s.capture==!!n&&s.Ob==r)return i}return-1}Ee.prototype.Vb=function(){this.Sa=!0,this.Ob=this.src=this.proxy=this.listener=null},(r=Ce.prototype).add=function(e,t,n,r,i){var s=e.toString();(e=this.J[s])||(e=this.J[s]=[],this.xb++);var o=Se(e,t,r,i);return-1<o?(t=e[o],n||(t.Eb=!1)):((t=new Ee(t,this.src,s,!!r,i)).Eb=n,e.push(t)),t},r.remove=function(e,t,n,r){if(!((e=e.toString())in this.J))return!1;var i=this.J[e];return-1<(t=Se(i,t,n,r))&&(i[t].Vb(),Array.prototype.splice.call(i,t,1),0==i.length&&(delete this.J[e],this.xb--),!0)},r.ye=function(e){var t=e.type;t in this.J&&P(this.J[t],e)&&(e.Vb(),0==this.J[t].length&&(delete this.J[t],this.xb--))},r.pb=function(e){var t;for(t in e=e&&e.toString(),this.J)if(!e||t==e){for(var n=this.J[t],r=0;r<n.length;r++)n[r].Vb();delete this.J[t],this.xb--}},r.jb=function(e,t,n,r){var i=-1;return(e=this.J[e.toString()])&&(i=Se(e,t,n,r)),-1<i?e[i]:null};var Te="closure_lm_"+(1e6*Math.random()|0),xe={};function Ae(e,t,n,r,i){if(r&&r.once)return Ie(e,t,n,r,i);if(h(t)){for(var s=0;s<t.length;s++)Ae(e,t[s],n,r,i);return null}return n=Le(n),be(e)?e.nb(t,n,f(r)?!!r.capture:!!r,i):De(e,t,n,!1,r,i)}function De(e,t,n,r,i,s){if(!t)throw Error("Invalid event type");var o=f(i)?!!i.capture:!!i,a=Re(e);if(a||(e[Te]=a=new Ce(e)),(n=a.add(t,n,r,o,s)).proxy)return n;if(r=function(){var e=Me,t=pe?function(n){return e.call(t.src,t.listener,n)}:function(n){if(!(n=e.call(t.src,t.listener,n)))return n};return t}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)me||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(Oe(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function Ie(e,t,n,r,i){if(h(t)){for(var s=0;s<t.length;s++)Ie(e,t[s],n,r,i);return null}return n=Le(n),be(e)?e.Oc(t,n,f(r)?!!r.capture:!!r,i):De(e,t,n,!0,r,i)}function Ne(e){if("number"!=typeof e&&e&&!e.Sa){var t=e.src;if(be(t))t.Le(e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(Oe(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=Re(t))?(n.ye(e),0==n.xb&&(n.src=null,t[Te]=null)):e.Vb()}}}function Oe(e){return e in xe?xe[e]:xe[e]="on"+e}function ke(e,t,n,r){var i=!0;if((e=Re(e))&&(t=e.J[t.toString()]))for(t=t.concat(),e=0;e<t.length;e++){var s=t[e];s&&s.capture==n&&!s.Sa&&(s=Pe(s,r),i=i&&!1!==s)}return i}function Pe(e,t){var n=e.listener,r=e.Ob||e.src;return e.Eb&&Ne(e),n.call(r,t)}function Me(e,t){if(e.Sa)return!0;if(!pe){var n=t||u("window.event");t=new ye(n,this);var r=!0;if(!(0>n.keyCode||null!=n.returnValue)){e:{var i=!1;if(0==n.keyCode)try{n.keyCode=-1;break e}catch(o){i=!0}(i||null==n.returnValue)&&(n.returnValue=!0)}for(n=[],i=t.currentTarget;i;i=i.parentNode)n.push(i);for(e=e.type,i=n.length-1;!t.Ea&&0<=i;i--){t.currentTarget=n[i];var s=ke(n[i],e,!0,t);r=r&&s}for(i=0;!t.Ea&&i<n.length;i++)t.currentTarget=n[i],s=ke(n[i],e,!1,t),r=r&&s}return r}return Pe(e,new ye(t,this))}function Re(e){return(e=e[Te])instanceof Ce?e:null}var Fe="__closure_events_fn_"+(1e9*Math.random()>>>0);function Le(e){return p(e)?e:(e[Fe]||(e[Fe]=function(t){return e.handleEvent(t)}),e[Fe])}function Ve(){T.call(this),this.ka=new Ce(this),this.Pe=this,this.Uc=null}E(Ve,T),Ve.prototype[_e]=!0,(r=Ve.prototype).addEventListener=function(e,t,n,r){Ae(this,e,t,n,r)},r.removeEventListener=function(e,t,n,r){!function e(t,n,r,i,s){if(h(n))for(var o=0;o<n.length;o++)e(t,n[o],r,i,s);else i=f(i)?!!i.capture:!!i,r=Le(r),be(t)?t.ed(n,r,i,s):t&&(t=Re(t))&&(n=t.jb(n,r,i,s))&&Ne(n)}(this,e,t,n,r)},r.dispatchEvent=function(e){var t,n=this.Uc;if(n)for(t=[];n;n=n.Uc)t.push(n);n=this.Pe;var r=e.type||e;if(a(e))e=new ge(e,n);else if(e instanceof ge)e.target=e.target||n;else{var i=e;Q(e=new ge(r,n),i)}if(i=!0,t)for(var s=t.length-1;!e.Ea&&0<=s;s--){var o=e.currentTarget=t[s];i=o.Lb(r,!0,e)&&i}if(e.Ea||(i=(o=e.currentTarget=n).Lb(r,!0,e)&&i,e.Ea||(i=o.Lb(r,!1,e)&&i)),t)for(s=0;!e.Ea&&s<t.length;s++)i=(o=e.currentTarget=t[s]).Lb(r,!1,e)&&i;return i},r.F=function(){Ve.L.F.call(this),this.pg(),this.Uc=null},r.nb=function(e,t,n,r){return this.ka.add(String(e),t,!1,n,r)},r.Oc=function(e,t,n,r){return this.ka.add(String(e),t,!0,n,r)},r.ed=function(e,t,n,r){this.ka.remove(String(e),t,n,r)},r.Le=function(e){this.ka.ye(e)},r.pg=function(){this.ka&&this.ka.pb(void 0)},r.Lb=function(e,t,n){if(!(e=this.ka.J[String(e)]))return!0;e=e.concat();for(var r=!0,i=0;i<e.length;++i){var s=e[i];if(s&&!s.Sa&&s.capture==t){var o=s.listener,a=s.Ob||s.src;s.Eb&&this.Le(s),r=!1!==o.call(a,n)&&r}}return r&&0!=n.Be},r.jb=function(e,t,n,r){return this.ka.jb(String(e),t,n,r)};var je=o.JSON.stringify;function Be(e,t){this.Sf=100,this.ef=e,this.ug=t,this.Zb=0,this.Pb=null}function Ue(){this.lc=this.Va=null}Be.prototype.get=function(){if(0<this.Zb){this.Zb--;var e=this.Pb;this.Pb=e.next,e.next=null}else e=this.ef();return e},Be.prototype.put=function(e){this.ug(e),this.Zb<this.Sf&&(this.Zb++,e.next=this.Pb,this.Pb=e)};var qe,$e,He=new Be(function(){return new ze},function(e){e.reset()});function ze(){this.next=this.scope=this.Gc=null}function We(e){o.setTimeout(function(){throw e},0)}function Ke(){if(o.Promise&&o.Promise.resolve){var e=o.Promise.resolve(void 0);$e=function(){e.then(Xe)}}else $e=function(){var e=Xe;!p(o.setImmediate)||o.Window&&o.Window.prototype&&!q("Edge")&&o.Window.prototype.setImmediate==o.setImmediate?(qe||(qe=function(){var e=o.MessageChannel;if(void 0===e&&"undefined"!=typeof window&&window.postMessage&&window.addEventListener&&!q("Presto")&&(e=function(){var e=document.createElement("IFRAME");e.style.display="none",e.src="",document.documentElement.appendChild(e);var t=e.contentWindow;(e=t.document).open(),e.write(""),e.close();var n="callImmediate"+Math.random(),r="file:"==t.location.protocol?"*":t.location.protocol+"//"+t.location.host;e=_(function(e){"*"!=r&&e.origin!=r||e.data!=n||this.port1.onmessage()},this),t.addEventListener("message",e,!1),this.port1={},this.port2={postMessage:function(){t.postMessage(n,r)}}}),void 0!==e&&!q("Trident")&&!q("MSIE")){var t=new e,n={},r=n;return t.port1.onmessage=function(){if(void 0!==n.next){var e=(n=n.next).rd;n.rd=null,e()}},function(e){r.next={rd:e},r=r.next,t.port2.postMessage(0)}}return"undefined"!=typeof document&&"onreadystatechange"in document.createElement("SCRIPT")?function(e){var t=document.createElement("SCRIPT");t.onreadystatechange=function(){t.onreadystatechange=null,t.parentNode.removeChild(t),t=null,e(),e=null},document.documentElement.appendChild(t)}:function(e){o.setTimeout(e,0)}}()),qe(e)):o.setImmediate(e)}}Ue.prototype.add=function(e,t){var n=this.Af();n.set(e,t),this.lc?this.lc.next=n:this.Va=n,this.lc=n},Ue.prototype.remove=function(){var e=null;return this.Va&&(e=this.Va,this.Va=this.Va.next,this.Va||(this.lc=null),e.next=null),e},Ue.prototype.wg=function(e){He.put(e)},Ue.prototype.Af=function(){return He.get()},ze.prototype.set=function(e,t){this.Gc=e,this.scope=t,this.next=null},ze.prototype.reset=function(){this.next=this.scope=this.Gc=null};var Qe=!1,Ge=new Ue;function Xe(){for(var e;e=Ge.remove();){try{e.Gc.call(e.scope)}catch(t){We(t)}Ge.wg(e)}Qe=!1}function Ye(e,t){Ve.call(this),this.Na=e||1,this.wb=t||o,this.nd=_(this.Rg,this),this.ie=w()}function Ze(e,t,n){if(p(e))n&&(e=_(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=_(e.handleEvent,e)}return 2147483647<Number(t)?-1:o.setTimeout(e,t||0)}function Je(e,t,n){T.call(this),this.Uf=null!=n?_(e,n):e,this.Na=t,this.Xe=_(this.fg,this),this.qc=[]}function et(e){T.call(this),this.i=e,this.o={}}E(Ye,Ve),(r=Ye.prototype).enabled=!1,r.B=null,r.setInterval=function(e){this.Na=e,this.B&&this.enabled?(this.stop(),this.start()):this.B&&this.stop()},r.Rg=function(){if(this.enabled){var e=w()-this.ie;0<e&&e<.8*this.Na?this.B=this.wb.setTimeout(this.nd,this.Na-e):(this.B&&(this.wb.clearTimeout(this.B),this.B=null),this.ff(),this.enabled&&(this.stop(),this.start()))}},r.ff=function(){this.dispatchEvent("tick")},r.start=function(){this.enabled=!0,this.B||(this.B=this.wb.setTimeout(this.nd,this.Na),this.ie=w())},r.stop=function(){this.enabled=!1,this.B&&(this.wb.clearTimeout(this.B),this.B=null)},r.F=function(){Ye.L.F.call(this),this.stop(),delete this.wb},E(Je,T),(r=Je.prototype).Ta=!1,r.ob=0,r.B=null,r.mf=function(e){this.qc=arguments,this.B||this.ob?this.Ta=!0:this.Cc()},r.stop=function(){this.B&&(o.clearTimeout(this.B),this.B=null,this.Ta=!1,this.qc=[])},r.pause=function(){this.ob++},r.resume=function(){this.ob--,this.ob||!this.Ta||this.B||(this.Ta=!1,this.Cc())},r.F=function(){Je.L.F.call(this),this.stop()},r.fg=function(){this.B=null,this.Ta&&!this.ob&&(this.Ta=!1,this.Cc())},r.Cc=function(){this.B=Ze(this.Xe,this.Na),this.Uf.apply(null,this.qc)},E(et,T);var tt=[];function nt(e,t,n){this.reset(e,t,n,void 0,void 0)}function rt(e){this.pe=e,this.Zd=this.uc=this.mb=this.$b=null}function it(e,t){this.name=e,this.value=t}(r=et.prototype).nb=function(e,t,n,r){return this.Tf(e,t,n,r)},r.Tf=function(e,t,n,r){h(t)||(t&&(tt[0]=t.toString()),t=tt);for(var i=0;i<t.length;i++){var s=Ae(e,t[i],n||this.handleEvent,r||!1,this.i||this);if(!s)break;this.o[s.key]=s}return this},r.Oc=function(e,t,n,r){return this.je(e,t,n,r)},r.je=function(e,t,n,r,i){if(h(t))for(var s=0;s<t.length;s++)this.je(e,t[s],n,r,i);else{if(!(e=Ie(e,t,n||this.handleEvent,r,i||this.i||this)))return this;this.o[e.key]=e}return this},r.ed=function(e,t,n,r,i){if(h(t))for(var s=0;s<t.length;s++)this.ed(e,t[s],n,r,i);else n=n||this.handleEvent,r=f(r)?!!r.capture:!!r,i=i||this.i||this,n=Le(n),r=!!r,(t=be(e)?e.jb(t,n,r,i):e&&(e=Re(e))?e.jb(t,n,r,i):null)&&(Ne(t),delete this.o[t.key])},r.pb=function(){$(this.o,function(e,t){this.o.hasOwnProperty(t)&&Ne(e)},this),this.o={}},r.F=function(){et.L.F.call(this),this.pb()},r.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},nt.prototype.Md=null,nt.prototype.reset=function(e,t,n,r,i){this.mb=e,delete this.Md},nt.prototype.Bg=function(e){this.Md=e},nt.prototype.Ge=function(e){this.mb=e},it.prototype.toString=function(){return this.name};var st=new it("SEVERE",1e3),ot=new it("WARNING",900),at=new it("INFO",800),ut=new it("CONFIG",700),ct=new it("FINE",500);(r=rt.prototype).getName=function(){return this.pe},r.getParent=function(){return this.$b},r.pf=function(){return this.uc||(this.uc={}),this.uc},r.Ge=function(e){this.mb=e},r.Qd=function(){return this.mb?this.mb:this.$b?this.$b.Qd():(function(e,t){throw new S("Failure"+(e?": "+e:""),Array.prototype.slice.call(arguments,1))}("Root logger has no level set."),null)},r.Pf=function(e){return e.value>=this.Qd().value},r.log=function(e,t,n){this.Pf(e)&&(p(t)&&(t=t()),this.gf(this.uf(e,t,n)))},r.uf=function(e,t,n){return e=new nt(e,String(t),this.pe),n&&e.Bg(n),e},r.ca=function(e,t){this.log(st,e,t)},r.T=function(e,t){this.log(ot,e,t)},r.info=function(e,t){this.log(at,e,t)},r.lf=function(e){this.log(ct,e,void 0)},r.gf=function(e){for(var t=this;t;)t.We(e),t=t.getParent()},r.We=function(e){if(this.Zd)for(var t,n=0;t=this.Zd[n];n++)t(e)},r.Fg=function(e){this.$b=e},r.Qe=function(e,t){this.pf()[e]=t};var lt={},ht=null;function dt(e){var t;if(ht||(ht=new rt(""),lt[""]=ht,ht.Ge(ut)),!(t=lt[e])){t=new rt(e);var n=e.lastIndexOf("."),r=e.substr(n+1);(n=dt(e.substr(0,n))).Qe(r,t),t.Fg(n),lt[e]=t}return t}function pt(e,t){e&&e.info(t,void 0)}function ft(e,t){e&&e.lf(t)}function mt(){this.s=dt("goog.labs.net.webChannel.WebChannelDebug"),this.Wc=!0}(r=mt.prototype).Id=function(){this.Wc=!1},r.Tg=function(e,t,n,r,i){var s=this;this.info(function(){return"XMLHTTP REQ ("+n+") [attempt "+r+"]: "+e+"\n"+t+"\n"+s.Xf(i)})},r.Ug=function(e,t,n,r,i,s){this.info(function(){return"XMLHTTP RESP ("+n+") [ attempt "+r+"]: "+e+"\n"+t+"\n"+i+" "+s})},r.Wa=function(e,t,n){var r=this;this.info(function(){return"XMLHTTP TEXT ("+e+"): "+r.ng(t)+(n?" "+n:"")})},r.Sg=function(e){this.info(function(){return"TIMEOUT: "+e})},r.debug=function(e){ft(this.s,e)},r.cb=function(e,t){var n=this.s;n&&n.ca(t||"Exception",e)},r.info=function(e){pt(this.s,e)},r.T=function(e){var t=this.s;t&&t.T(e,void 0)},r.ca=function(e){var t=this.s;t&&t.ca(e,void 0)},r.ng=function(e){if(!this.Wc)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(var n=0;n<t.length;n++)h(t[n])&&this.Wf(t[n]);return je(t)}catch(r){return this.debug("Exception parsing expected JS array - probably was not JS"),e}},r.Wf=function(e){if(!(2>e.length||(e=e[1],!h(e)||1>e.length))){var t=e[0];if("noop"!=t&&"stop"!=t&&"close"!=t)for(t=1;t<e.length;t++)e[t]=""}},r.Xf=function(e){if(!this.Wc)return e;if(!e)return null;var t="";e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].split("=");if(1<r.length){var i=r[0];r=r[1];var s=i.split("_");t=2<=s.length&&"type"==s[1]?t+(i+"=")+r+"&":t+(i+"=redacted&")}}return t};var gt=new Ve;function yt(e){ge.call(this,"serverreachability",e)}function vt(e){gt.dispatchEvent(new yt(gt,e))}function _t(e,t){ge.call(this,"statevent",e),this.stat=t}function bt(e){gt.dispatchEvent(new _t(gt,e))}function wt(e,t,n){ge.call(this,"timingevent",e),this.size=t,this.rtt=n}function Et(e,t){if(!p(e))throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){e()},t)}E(yt,ge),E(_t,ge),E(wt,ge);var Ct={NO_ERROR:0,Vg:1,bh:2,ah:3,Yg:4,$g:5,dh:6,Ne:7,TIMEOUT:8,gh:9},St={Xg:"complete",kh:"success",Oe:"error",Ne:"abort",ih:"ready",jh:"readystatechange",TIMEOUT:"timeout",eh:"incrementaldata",hh:"progress",Zg:"downloadprogress",lh:"uploadprogress"};function Tt(){}function xt(){}Tt.prototype.pd=null,Tt.prototype.Vd=function(){return this.pd||(this.pd=this.Mf())};var At,Dt={OPEN:"a",Wg:"b",Oe:"c",fh:"d"};function It(){ge.call(this,"d")}function Nt(){ge.call(this,"c")}function Ot(){}function kt(e,t,n,r,i){this.b=e,this.a=t,this.ra=n,this.R=r,this.Xc=i||1,this.Fc=new et(this),this.Ua=Pt,e=te?125:void 0,this.Vc=new Ye(e),this.A=null,this.S=!1,this.Da=this.pa=this.ua=this.ic=this.qb=this.hd=this.Ga=null,this.ba=[],this.h=null,this.Bb=0,this.I=this.Fa=null,this.w=-1,this.Za=!1,this.Ra=0,this.ac=null,this.lb=this.Ed=this.yc=!1}E(It,ge),E(Nt,ge),E(Ot,Tt),Ot.prototype.Dd=function(){var e=this.Wd();return e?new ActiveXObject(e):new XMLHttpRequest},Ot.prototype.Mf=function(){var e={};return this.Wd()&&(e[0]=!0,e[1]=!0),e},Ot.prototype.Wd=function(){if(!this.be&&"undefined"==typeof XMLHttpRequest&&"undefined"!=typeof ActiveXObject){for(var e=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],t=0;t<e.length;t++){var n=e[t];try{return new ActiveXObject(n),this.be=n}catch(r){}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed")}return this.be},At=new Ot;var Pt=45e3;var Mt={},Rt={};function Ft(e){if(e.H&&"function"==typeof e.H)return e.H();if(a(e))return e.split("");if(d(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}return H(e)}function Lt(e,t,n){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,n);else if(d(e)||a(e))N(e,t,n);else{if(e.W&&"function"==typeof e.W)var r=e.W();else if(e.H&&"function"==typeof e.H)r=void 0;else if(d(e)||a(e)){r=[];for(var i=e.length,s=0;s<i;s++)r.push(s)}else r=z(e);s=(i=Ft(e)).length;for(var o=0;o<s;o++)t.call(n,i[o],r&&r[o],e)}}function Vt(e,t){this.D={},this.o=[],this.j=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else e&&this.addAll(e)}function jt(e,t){return Object.prototype.hasOwnProperty.call(e,t)}(r=kt.prototype).ga=function(e){this.A=e},r.setTimeout=function(e){this.Ua=e},r.He=function(e){this.Ra=e},r.Gg=function(e){this.ba=e},r.la=function(){return this.ba},r.kd=function(e,t){this.ic=1,this.ua=e.clone().Ub(),this.Da=t,this.yc=!0,this.Ce(null)},r.jd=function(e,t,n){this.ic=1,this.ua=e.clone().Ub(),this.Da=null,this.yc=t,this.Ce(n)},r.Ce=function(e){this.qb=w(),this.eb(),this.pa=this.ua.clone(),this.pa.dc("t",this.Xc),this.Bb=0,this.h=this.b.Jb(this.b.fc()?e:null),0<this.Ra&&(this.ac=new Je(_(this.Me,this,this.h),this.Ra)),this.Fc.nb(this.h,"readystatechange",this.mg),e=this.A?W(this.A):{},this.Da?(this.Fa||(this.Fa="POST"),e["Content-Type"]="application/x-www-form-urlencoded",this.h.send(this.pa,this.Fa,this.Da,e)):(this.Fa="GET",this.h.send(this.pa,this.Fa,null,e)),vt(1),this.a.Tg(this.Fa,this.pa,this.R,this.Xc,this.Da)},r.mg=function(e){e=e.target;var t=this.ac;t&&3==e.ma()?(this.a.debug("Throttling readystatechange."),t.mf()):this.Me(e)},r.Me=function(e){try{e==this.h?this.hg():this.a.T("Called back with an unexpected xmlhttp")}catch(n){if(this.a.debug("Failed call to OnXmlHttpReadyStateChanged_"),this.h&&this.h.ya()){var t=this;this.a.cb(n,function(){return"ResponseText: "+t.h.ya()})}else this.a.cb(n,"No response text")}},r.hg=function(){var e=this.h.ma(),t=this.h.Ud(),n=this.h.za();if(!(3>e||3==e&&!te&&!this.h.ya())){this.Za||4!=e||7==t||vt(8==t||0>=n?3:2),this.Fb();var r=this.h.za();if(this.w=r,!(t=this.h.ya())){var i=this;this.a.debug(function(){return"No response text for uri "+i.pa+" status "+r})}if(this.S=200==r,this.a.Ug(this.Fa,this.pa,this.R,this.Xc,e,r),this.S){if(this.Ig()){if(!(n=this.sf()))return this.S=!1,this.I=3,bt(12),this.a.T("XMLHTTP Missing X_HTTP_INITIAL_RESPONSE ("+this.R+")"),this.Ia(),void this.Kb();this.a.Wa(this.R,n,"Initial handshake response via X-HTTP-Initial-Response"),this.lb=!0,this.Yc(n)}this.yc?(this.Fd(e,t),te&&this.S&&3==e&&this.Ng()):(this.a.Wa(this.R,t,null),this.Yc(t)),4==e&&this.Ia(),this.S&&!this.Za&&(4==e?this.b.Tc(this):(this.S=!1,this.eb()))}else 400==r&&0<t.indexOf("Unknown SID")?(this.I=3,bt(12),this.a.T("XMLHTTP Unknown SID ("+this.R+")")):(this.I=0,bt(13),this.a.T("XMLHTTP Bad status "+r+" ("+this.R+")")),this.Ia(),this.Kb()}},r.Ig=function(){return this.Ed&&!this.lb},r.sf=function(){if(this.h){var e=this.h.kb("X-HTTP-Initial-Response");if(e&&!F(e))return e}return null},r.Ag=function(){this.Ed=!0},r.Fd=function(e,t){for(var n=!0;!this.Za&&this.Bb<t.length;){var r=this.vf(t);if(r==Rt){4==e&&(this.I=4,bt(14),n=!1),this.a.Wa(this.R,null,"[Incomplete Response]");break}if(r==Mt){this.I=4,bt(15),this.a.Wa(this.R,t,"[Invalid Chunk]"),n=!1;break}this.a.Wa(this.R,r,null),this.Yc(r)}4==e&&0==t.length&&(this.I=1,bt(16),n=!1),this.S=this.S&&n,n||(this.a.Wa(this.R,t,"[Invalid Chunked Response]"),this.Ia(),this.Kb())},r.kg=function(){if(this.h){var e=this.h.ma(),t=this.h.ya();this.Bb<t.length&&(this.Fb(),this.Fd(e,t),this.S&&4!=e&&this.eb())}},r.Ng=function(){this.Fc.nb(this.Vc,"tick",this.kg),this.Vc.start()},r.vf=function(e){var t=this.Bb,n=e.indexOf("\n",t);return-1==n?Rt:(t=Number(e.substring(t,n)),isNaN(t)?Mt:(n+=1)+t>e.length?Rt:(e=e.substr(n,t),this.Bb=n+t,e))},r.yg=function(e){this.ic=2,this.ua=e.clone().Ub(),e=!1,o.navigator&&o.navigator.sendBeacon&&(e=o.navigator.sendBeacon(this.ua.toString(),"")),!e&&o.Image&&((new Image).src=this.ua,e=!0),e||(this.h=this.b.Jb(null),this.h.send(this.ua)),this.qb=w(),this.eb()},r.cancel=function(){this.Za=!0,this.Ia()},r.tg=function(e){e&&this.setTimeout(e),this.Ga&&(this.Fb(),this.eb())},r.eb=function(){this.hd=w()+this.Ua,this.Ke(this.Ua)},r.Ke=function(e){if(null!=this.Ga)throw Error("WatchDog timer not null");this.Ga=Et(_(this.gg,this),e)},r.Fb=function(){this.Ga&&(o.clearTimeout(this.Ga),this.Ga=null)},r.gg=function(){this.Ga=null;var e=w();0<=e-this.hd?this.Df():(this.a.T("WatchDog timer called too early"),this.Ke(this.hd-e))},r.Df=function(){this.S&&this.a.ca("Received watchdog timeout even though request loaded successfully"),this.a.Sg(this.pa),2!=this.ic&&(vt(3),bt(17)),this.Ia(),this.I=2,this.Kb()},r.Kb=function(){this.b.de()||this.Za||this.b.Tc(this)},r.Ia=function(){this.Fb();var e=this.ac;e&&"function"==typeof e.bb&&e.bb(),this.ac=null,this.Vc.stop(),this.Fc.pb(),this.h&&(e=this.h,this.h=null,e.abort(),e.bb())},r.Hc=function(){return this.I},r.Yc=function(e){try{this.b.ue(this,e),vt(4)}catch(t){this.a.cb(t,"Error in httprequest callback")}},(r=Vt.prototype).C=function(){return this.j},r.H=function(){this.wc();for(var e=[],t=0;t<this.o.length;t++)e.push(this.D[this.o[t]]);return e},r.W=function(){return this.wc(),this.o.concat()},r.va=function(e){return jt(this.D,e)},r.X=function(){return 0==this.j},r.clear=function(){this.D={},this.j=this.o.length=0},r.remove=function(e){return!!jt(this.D,e)&&(delete this.D[e],this.j--,this.o.length>2*this.j&&this.wc(),!0)},r.wc=function(){if(this.j!=this.o.length){for(var e=0,t=0;e<this.o.length;){var n=this.o[e];jt(this.D,n)&&(this.o[t++]=n),e++}this.o.length=t}if(this.j!=this.o.length){var r={};for(t=e=0;e<this.o.length;)jt(r,n=this.o[e])||(this.o[t++]=n,r[n]=1),e++;this.o.length=t}},r.get=function(e,t){return jt(this.D,e)?this.D[e]:t},r.set=function(e,t){jt(this.D,e)||(this.j++,this.o.push(e)),this.D[e]=t},r.addAll=function(e){if(e instanceof Vt)for(var t=e.W(),n=0;n<t.length;n++)this.set(t[n],e.get(t[n]));else for(t in e)this.set(t,e[t])},r.forEach=function(e,t){for(var n=this.W(),r=0;r<n.length;r++){var i=n[r],s=this.get(i);e.call(t,s,i,this)}},r.clone=function(){return new Vt(this)};var Bt=/^(?:([^:\/?#.]+):)?(?:\/\/(?:([^\/?#]*)@)?([^\/#?]*?)(?::([0-9]+))?(?=[\/#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Ut(e,t){var n;this.xa=this.zb=this.qa="",this.Ca=null,this.ib=this.K="",this.O=this.Qf=!1,e instanceof Ut?(this.O=void 0!==t?t:e.O,this.tb(e.qa),this.cd(e.zb),this.rb(e.xa),this.sb(e.Ca),this.ec(e.K),this.bd(e.P.clone()),this.$c(e.ib)):e&&(n=String(e).match(Bt))?(this.O=!!t,this.tb(n[1]||"",!0),this.cd(n[2]||"",!0),this.rb(n[3]||"",!0),this.sb(n[4]),this.ec(n[5]||"",!0),this.bd(n[6]||"",!0),this.$c(n[7]||"",!0)):(this.O=!!t,this.P=new Xt(null,this.O))}function qt(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function $t(e,t,n){return a(e)?(e=encodeURI(e).replace(t,Ht),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function Ht(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}(r=Ut.prototype).toString=function(){var e=[],t=this.qa;t&&e.push($t(t,zt,!0),":");var n=this.xa;return(n||"file"==t)&&(e.push("//"),(t=this.zb)&&e.push($t(t,zt,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.Ca)&&e.push(":",String(n))),(n=this.K)&&(this.Ic()&&"/"!=n.charAt(0)&&e.push("/"),e.push($t(n,"/"==n.charAt(0)?Kt:Wt,!0))),(n=this.Rd())&&e.push("?",n),(n=this.ib)&&e.push("#",$t(n,Gt)),e.join("")},r.resolve=function(e){var t=this.clone(),n=e.Hf();n?t.tb(e.qa):n=e.If(),n?t.cd(e.zb):n=e.Ic(),n?t.rb(e.xa):n=e.Ff();var r=e.K;if(n)t.sb(e.Ca);else if(n=e.ae()){if("/"!=r.charAt(0))if(this.Ic()&&!this.ae())r="/"+r;else{var i=t.K.lastIndexOf("/");-1!=i&&(r=t.K.substr(0,i+1)+r)}if(".."==(i=r)||"."==i)r="";else if(-1!=i.indexOf("./")||-1!=i.indexOf("/.")){r=0==i.lastIndexOf("/",0),i=i.split("/");for(var s=[],o=0;o<i.length;){var a=i[o++];"."==a?r&&o==i.length&&s.push(""):".."==a?((1<s.length||1==s.length&&""!=s[0])&&s.pop(),r&&o==i.length&&s.push("")):(s.push(a),r=!0)}r=s.join("/")}else r=i}return n?t.ec(r):n=e.Gf(),n?t.bd(e.P.clone()):n=e.Ef(),n&&t.$c(e.ib),t},r.clone=function(){return new Ut(this)},r.tb=function(e,t){this.U(),(this.qa=t?qt(e,!0):e)&&(this.qa=this.qa.replace(/:$/,""))},r.Hf=function(){return!!this.qa},r.cd=function(e,t){this.U(),this.zb=t?qt(e):e},r.If=function(){return!!this.zb},r.rb=function(e,t){this.U(),this.xa=t?qt(e,!0):e},r.Ic=function(){return!!this.xa},r.sb=function(e){if(this.U(),e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);this.Ca=e}else this.Ca=null},r.Ff=function(){return null!=this.Ca},r.ec=function(e,t){this.U(),this.K=t?qt(e,!0):e},r.ae=function(){return!!this.K},r.Gf=function(){return""!==this.P.toString()},r.bd=function(e,t){this.U(),e instanceof Xt?(this.P=e,this.P.ad(this.O)):(t||(e=$t(e,Qt)),this.P=new Xt(e,this.O))},r.Rd=function(){return this.P.toString()},r.getQuery=function(){return this.Rd()},r.l=function(e,t){this.U(),this.P.set(e,t)},r.dc=function(e,t){this.U(),h(t)||(t=[String(t)]),this.P.Ie(e,t)},r.$c=function(e,t){this.U(),this.ib=t?qt(e):e},r.Ef=function(){return!!this.ib},r.Ub=function(){return this.U(),this.l("zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^w()).toString(36)),this},r.removeParameter=function(e){return this.U(),this.P.remove(e),this},r.U=function(){if(this.Qf)throw Error("Tried to modify a read-only Uri")},r.ad=function(e){this.O=e,this.P&&this.P.ad(e)};var zt=/[#\/\?@]/g,Wt=/[#\?:]/g,Kt=/[#\?]/g,Qt=/[#\?@]/g,Gt=/#/g;function Xt(e,t){this.j=this.m=null,this.ja=e||null,this.O=!!t}function Yt(e,t){this.b=e,this.a=t,this.f=this.A=null,this.bc=!1,this.K=null,this.w=-1,this.Ad=this.na=null}function Zt(){this.od=this.$d=null}function Jt(e){this.D=new Vt,e&&this.addAll(e)}function en(e){var t=typeof e;return"object"==t&&e||"function"==t?"o"+(e[m]||(e[m]=++g)):t.substr(0,1)+e}function tn(e,t){this.Pc=e,this.map=t,this.context=null}function nn(e){this.me=e||rn,o.PerformanceNavigationTiming?e=0<(e=o.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(o.vc&&o.vc.ke&&o.vc.ke()&&o.vc.ke().nh),this.Xb=e?this.me:1,this.v=null,1<this.Xb&&(this.v=new Jt),this.f=null,this.ba=[]}(r=Xt.prototype).$=function(){if(!this.m&&(this.m=new Vt,this.j=0,this.ja)){var e=this;!function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var s=e[n].substring(0,r);i=e[n].substring(r+1)}else s=e[n];t(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(this.ja,function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})}},r.C=function(){return this.$(),this.j},r.add=function(e,t){this.$(),this.Oa(),e=this.Ma(e);var n=this.m.get(e);return n||this.m.set(e,n=[]),n.push(t),this.j+=1,this},r.remove=function(e){return this.$(),e=this.Ma(e),!!this.m.va(e)&&(this.Oa(),this.j-=this.m.get(e).length,this.m.remove(e))},r.clear=function(){this.Oa(),this.m=null,this.j=0},r.X=function(){return this.$(),0==this.j},r.va=function(e){return this.$(),e=this.Ma(e),this.m.va(e)},r.forEach=function(e,t){this.$(),this.m.forEach(function(n,r){N(n,function(n){e.call(t,n,r,this)},this)},this)},r.W=function(){this.$();for(var e=this.m.H(),t=this.m.W(),n=[],r=0;r<t.length;r++)for(var i=e[r],s=0;s<i.length;s++)n.push(t[r]);return n},r.H=function(e){this.$();var t=[];if(a(e))this.va(e)&&(t=M(t,this.m.get(this.Ma(e))));else{e=this.m.H();for(var n=0;n<e.length;n++)t=M(t,e[n])}return t},r.set=function(e,t){return this.$(),this.Oa(),e=this.Ma(e),this.va(e)&&(this.j-=this.m.get(e).length),this.m.set(e,[t]),this.j+=1,this},r.get=function(e,t){return e&&0<(e=this.H(e)).length?String(e[0]):t},r.Ie=function(e,t){this.remove(e),0<t.length&&(this.Oa(),this.m.set(this.Ma(e),R(t)),this.j+=t.length)},r.toString=function(){if(this.ja)return this.ja;if(!this.m)return"";for(var e=[],t=this.m.W(),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r));r=this.H(r);for(var s=0;s<r.length;s++){var o=i;""!==r[s]&&(o+="="+encodeURIComponent(String(r[s]))),e.push(o)}}return this.ja=e.join("&")},r.Oa=function(){this.ja=null},r.clone=function(){var e=new Xt;return e.ja=this.ja,this.m&&(e.m=this.m.clone(),e.j=this.j),e},r.Ma=function(e){return e=String(e),this.O&&(e=e.toLowerCase()),e},r.ad=function(e){e&&!this.O&&(this.$(),this.Oa(),this.m.forEach(function(e,t){var n=t.toLowerCase();t!=n&&(this.remove(t),this.Ie(n,e))},this)),this.O=e},r.extend=function(e){for(var t=0;t<arguments.length;t++)Lt(arguments[t],function(e,t){this.add(t,e)},this)},E(function(){},function(){}),(r=Yt.prototype).g=null,r.ga=function(e){this.A=e},r.connect=function(e){this.K=e,e=this.b.Sd(this.K),bt(3);var t=this.b.Ib.$d;null!=t?(this.na=this.b.$a(t[0]),this.g=1,this.xd()):(e.dc("MODE","init"),!this.b.ta&&this.b.aa&&e.dc("X-HTTP-Session-Id",this.b.aa),this.f=new kt(this,this.a,void 0,void 0,void 0),this.f.ga(this.A),this.f.jd(e,!1,null),this.g=0)},r.xd=function(){this.a.debug("TestConnection: starting stage 2");var e=this.b.Ib.od;if(null!=e)this.a.debug(function(){return"Buffered"}),bt(4),e?(bt(10),this.b.ub(this,!1)):(bt(11),this.b.ub(this,!0));else{this.f=new kt(this,this.a,void 0,void 0,void 0),this.f.ga(this.A);var t=this.b.Pd(this.na,this.K);bt(4),t.dc("TYPE","xmlhttp");var n=this.b.aa,r=this.b.Kc;n&&r&&t.l(n,r),this.f.jd(t,!1,this.na)}},r.Jb=function(e){return this.b.Jb(e)},r.abort=function(){this.f&&(this.f.cancel(),this.f=null),this.w=-1},r.de=function(){return!1},r.ue=function(e,t){if(this.w=e.w,0==this.g)if(this.a.debug("TestConnection: Got data for stage 1"),this.pc(e),t){try{var n=this.b.kc.zc(t)}catch(r){return this.a.cb(r),void this.b.dd(this)}this.na=this.b.$a(n[0])}else this.a.debug("TestConnection: Null responseText"),this.b.dd(this);else 1==this.g&&(this.bc?bt(6):"11111"==t?(bt(5),this.bc=!0,this.Ze()&&(this.w=200,this.f.cancel(),this.a.debug("Test connection succeeded; using streaming connection"),bt(11),this.b.ub(this,!0))):(bt(7),this.bc=!1))},r.Tc=function(){this.w=this.f.w,this.f.S?0==this.g?(this.g=1,this.a.debug("TestConnection: request complete for initial check"),this.xd()):1==this.g&&(this.a.debug("TestConnection: request complete for stage 2"),this.bc?(this.a.debug("Test connection succeeded; using streaming connection"),bt(11),this.b.ub(this,!0)):(this.a.debug("Test connection failed; not using streaming"),bt(10),this.b.ub(this,!1))):(this.a.debug("TestConnection: request failed, in state "+this.g),0==this.g?bt(8):1==this.g&&bt(9),this.b.dd(this))},r.pc=function(e){if(!this.b.ta&&(e=e.h)){var t=e.kb("X-Client-Wire-Protocol");this.Ad=t||null,this.b.aa&&((e=e.kb("X-HTTP-Session-Id"))?this.b.Fe(e):this.a.T("Missing X_HTTP_SESSION_ID in the handshake response"))}},r.fc=function(){return this.b.fc()},r.Ba=function(){return this.b.Ba()},r.Ze=function(){return!J||10<=Number(ue)},(r=Jt.prototype).C=function(){return this.D.C()},r.add=function(e){this.D.set(en(e),e)},r.addAll=function(e){for(var t=(e=Ft(e)).length,n=0;n<t;n++)this.add(e[n])},r.pb=function(e){for(var t=(e=Ft(e)).length,n=0;n<t;n++)this.remove(e[n])},r.remove=function(e){return this.D.remove(en(e))},r.clear=function(){this.D.clear()},r.X=function(){return this.D.X()},r.contains=function(e){return this.D.va(en(e))},r.H=function(){return this.D.H()},r.clone=function(){return new Jt(this)};var rn=10;function sn(){this.xg=this.rg=void 0}function on(){this.jg=new sn}function an(e,t,n,r,i){try{e.debug(n),t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(s){e.cb(s)}}(r=nn.prototype).ld=function(e){this.v||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(this.Xb=this.me,this.v=new Jt,this.f&&(this.oc(this.f),this.f=null))},r.ee=function(){return!!this.f||!!this.v&&this.v.C()>=this.Xb},r.xf=function(){return this.f?1:this.v?this.v.C():0},r.Jc=function(e){return this.f?this.f==e:!!this.v&&this.v.contains(e)},r.oc=function(e){this.v?this.v.add(e):this.f=e},r.ze=function(e){this.f&&this.f==e?this.f=null:this.v&&this.v.contains(e)&&this.v.remove(e)},r.cancel=function(){this.ba=this.la(),this.f?(this.f.cancel(),this.f=null):this.v&&!this.v.X()&&(N(this.v.H(),function(e){e.cancel()}),this.v.clear())},r.la=function(){if(null!=this.f)return this.ba.concat(this.f.la());if(null!=this.v&&!this.v.X()){var e=this.ba;return N(this.v.H(),function(t){e=e.concat(t.la())}),e}return R(this.ba)},r.Re=function(e){this.ba=this.ba.concat(e)},r.$e=function(){this.ba.length=0},sn.prototype.stringify=function(e){return o.JSON.stringify(e,this.rg)},sn.prototype.parse=function(e){return o.JSON.parse(e,this.xg)},on.prototype.hf=function(e,t,n){var r=n||"";try{Lt(e,function(e,n){var i=e;f(e)&&(i=je(e)),t.push(r+n+"="+encodeURIComponent(i))})}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}},on.prototype.jf=function(e,t,n){for(var r=-1;;){var i=["count="+t];-1==r?0<t?(r=e[0].Pc,i.push("ofs="+r)):r=0:i.push("ofs="+r);for(var s=!0,o=0;o<t;o++){var a=e[o].Pc,u=e[o].map;if(0>(a-=r))r=Math.max(0,e[o].Pc-100),s=!1;else try{this.hf(u,i,"req"+a+"_")}catch(c){n&&n(u)}}if(s)return i.join("&")}},on.prototype.zc=function(e){return this.jg.parse(e)};var un=o.JSON.parse;function cn(e){Ve.call(this),this.headers=new Vt,this.Xa=e||null,this.ha=!1,this.mc=this.c=null,this.ge=this.Tb="",this.Pa=0,this.I="",this.Aa=this.Lc=this.Qb=this.Ec=!1,this.vb=0,this.hc=null,this.Ae=ln,this.jc=this.lg=this.Ab=!1}E(cn,Ve);var ln="";cn.prototype.s=dt("goog.net.XhrIo");var hn=/^https?$/i,dn=["POST","PUT"];function pn(e){return"content-type"==e.toLowerCase()}function fn(e,t){return{type:t,lengthComputable:e.lengthComputable,loaded:e.loaded,total:e.total}}function mn(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}if(r)return e;if(n=function(e){var t="";return $(e,function(e,n){t+=n,t+=":",t+=e,t+="\r\n"}),t}(n),a(e)){if(t=encodeURIComponent(String(t)),t+=n=null!=n?"="+encodeURIComponent(String(n)):""){if(0>(n=e.indexOf("#"))&&(n=e.length),0>(r=e.indexOf("?"))||r>n){r=n;var i=""}else i=e.substring(r+1,n);n=(e=[e.substr(0,r),i,e.substr(n)])[1],e[1]=t?n?n+"&"+t:t:n,e=e[0]+(e[1]?"?"+e[1]:"")+e[2]}return e}return e.l(t,n),e}function gn(e){this.Bd=22,this.De=0,this.M=[],this.a=new mt,this.Ib=new Zt,this.na=this.md=this.hb=this.K=this.u=this.Kc=this.aa=this.gb=this.N=this.Rb=this.A=null,this.Te=!0,this.ag=this.Yb=0,this.kf=!!u("internalChannelParams.failFast",e),this.fd=this.Ja=this.wa=this.ia=this.ea=this.i=null,this.Se=!0,this.w=this.he=this.Sb=-1,this.rc=this.Ha=this.La=0,this.Ve=u("internalChannelParams.baseRetryDelayMs",e)||5e3,this.vg=u("internalChannelParams.retryDelaySeedMs",e)||1e4,this.nf=u("internalChannelParams.forwardChannelMaxRetries",e)||2,this.Od=u("internalChannelParams.forwardChannelRequestTimeoutMs",e)||2e4,this.Xa=e&&e.oh||void 0,this.Db=void 0,this.Ra=0,this.gc=e&&e.supportsCrossDomainXhr||!1,this.ra="",this.G=new nn(e&&e.concurrentRequestLimit),this.kc=new on,this.ta=!e||void 0===e.backgroundChannelTest||e.backgroundChannelTest,(this.Nd=e&&e.fastHandshake||!1)&&!this.ta&&(this.a.T("Force backgroundChannelTest when fastHandshake is enabled."),this.ta=!0),e&&e.Id&&this.a.Id()}function yn(){}function vn(){if(J&&!(10<=Number(ue)))throw Error("Environmental error: no available transport.")}function _n(e,t){Ve.call(this),this.b=new gn(t),this.yb=e,this.Qg=t&&t.testUrl?t.testUrl:function(e){for(var t=arguments[0],n=1;n<arguments.length;n++){var r,i=arguments[n];0==i.lastIndexOf("/",0)?t=i:((r=""==t)||(r=0<=(r=t.length-1)&&t.indexOf("/",r)==r),t=r?t+i:t+"/"+i)}return t}(this.yb,"test"),this.s=dt("goog.labs.net.webChannel.WebChannelBaseTransport"),this.Rc=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.b.ga(e),e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.zd&&(e?e["X-WebChannel-Client-Profile"]=t.zd:e={"X-WebChannel-Client-Profile":t.zd}),this.b.Eg(e),(e=t&&t.httpHeadersOverwriteParam)&&!F(e)&&this.b.Cg(e),this.Og=t&&t.supportsCrossDomainXhr||!1,this.zg=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!F(t)&&(this.b.Dg(t),null!==(e=this.Rc)&&t in e&&(t in(e=this.Rc)&&delete e[t],(e=this.s)&&e.T("Ignore httpSessionIdParam also specified with messageUrlParams: "+t,void 0))),this.vd=new En(this)}function bn(e){It.call(this);var t=e.__sm__;if(t){e:{for(var n in t){e=n;break e}e=void 0}(this.ne=e)&&(e=this.ne,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function wn(e){Nt.call(this),this.status=1,this.errorCode=e}function En(e){this.b=e}(r=cn.prototype).Je=function(e){this.Ab=e},r.send=function(e,t,n,r){if(this.c)throw Error("[goog.net.XhrIo] Object is active with another request="+this.Tb+"; newUri="+e);t=t?t.toUpperCase():"GET",this.Tb=e,this.I="",this.Pa=0,this.ge=t,this.Ec=!1,this.ha=!0,this.c=this.df(),this.mc=this.Xa?this.Xa.Vd():At.Vd(),this.c.onreadystatechange=_(this.te,this),this.lg&&"onprogress"in this.c&&(this.c.onprogress=_(function(e){this.re(e,!0)},this),this.c.upload&&(this.c.upload.onprogress=_(this.re,this)));try{ft(this.s,this.da("Opening Xhr")),this.Lc=!0,this.c.open(t,String(e),!0),this.Lc=!1}catch(s){return ft(this.s,this.da("Error opening Xhr: "+s.message)),void this.Ld(s)}e=n||"";var i=this.headers.clone();r&&Lt(r,function(e,t){i.set(t,e)}),r=function(e){e:{for(var t=pn,n=e.length,r=a(e)?e.split(""):e,i=0;i<n;i++)if(i in r&&t.call(void 0,r[i],i,e)){t=i;break e}t=-1}return 0>t?null:a(e)?e.charAt(t):e[t]}(i.W()),n=o.FormData&&e instanceof o.FormData,!(0<=D(dn,t))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach(function(e,t){this.c.setRequestHeader(t,e)},this),this.Ae&&(this.c.responseType=this.Ae),"withCredentials"in this.c&&this.c.withCredentials!==this.Ab&&(this.c.withCredentials=this.Ab);try{this.yd(),0<this.vb&&(this.jc=function(e){return J&&le(9)&&"number"==typeof e.timeout&&void 0!==e.ontimeout}(this.c),ft(this.s,this.da("Will abort after "+this.vb+"ms if incomplete, xhr2 "+this.jc)),this.jc?(this.c.timeout=this.vb,this.c.ontimeout=_(this.Ua,this)):this.hc=Ze(this.Ua,this.vb,this)),ft(this.s,this.da("Sending request")),this.Qb=!0,this.c.send(e),this.Qb=!1}catch(s){ft(this.s,this.da("Send error: "+s.message)),this.Ld(s)}},r.df=function(){return this.Xa?this.Xa.Dd():At.Dd()},r.Ua=function(){void 0!==s&&this.c&&(this.I="Timed out after "+this.vb+"ms, aborting",this.Pa=8,ft(this.s,this.da(this.I)),this.dispatchEvent("timeout"),this.abort(8))},r.Ld=function(e){this.ha=!1,this.c&&(this.Aa=!0,this.c.abort(),this.Aa=!1),this.I=e,this.Pa=5,this.Jd(),this.Gb()},r.Jd=function(){this.Ec||(this.Ec=!0,this.dispatchEvent("complete"),this.dispatchEvent("error"))},r.abort=function(e){this.c&&this.ha&&(ft(this.s,this.da("Aborting")),this.ha=!1,this.Aa=!0,this.c.abort(),this.Aa=!1,this.Pa=e||7,this.dispatchEvent("complete"),this.dispatchEvent("abort"),this.Gb())},r.F=function(){this.c&&(this.ha&&(this.ha=!1,this.Aa=!0,this.c.abort(),this.Aa=!1),this.Gb(!0)),cn.L.F.call(this)},r.te=function(){this.Ka||(this.Lc||this.Qb||this.Aa?this.se():this.eg())},r.eg=function(){this.se()},r.se=function(){if(this.ha&&void 0!==s)if(this.mc[1]&&4==this.ma()&&2==this.za())ft(this.s,this.da("Local request error detected and ignored"));else if(this.Qb&&4==this.ma())Ze(this.te,0,this);else if(this.dispatchEvent("readystatechange"),this.Mc()){ft(this.s,this.da("Request complete")),this.ha=!1;try{this.Rf()?(this.dispatchEvent("complete"),this.dispatchEvent("success")):(this.Pa=6,this.I=this.Yd()+" ["+this.za()+"]",this.Jd())}finally{this.Gb()}}},r.re=function(e,t){this.dispatchEvent(fn(e,"progress")),this.dispatchEvent(fn(e,t?"downloadprogress":"uploadprogress"))},r.Gb=function(e){if(this.c){this.yd();var t=this.c,n=this.mc[0]?c:null;this.mc=this.c=null,e||this.dispatchEvent("ready");try{t.onreadystatechange=n}catch(r){(e=this.s)&&e.ca("Problem encountered resetting onreadystatechange: "+r.message,void 0)}}},r.yd=function(){this.c&&this.jc&&(this.c.ontimeout=null),this.hc&&(o.clearTimeout(this.hc),this.hc=null)},r.Ba=function(){return!!this.c},r.Mc=function(){return 4==this.ma()},r.Rf=function(){var e=this.za();e:switch(e){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}return t||0===e&&!this.Of()},r.Of=function(){var e=String(this.Tb).match(Bt)[1]||null;return!e&&o.self&&o.self.location&&(e=(e=o.self.location.protocol).substr(0,e.length-1)),hn.test(e?e.toLowerCase():"")},r.ma=function(){return this.c?this.c.readyState:0},r.za=function(){try{return 2<this.ma()?this.c.status:-1}catch(Y){return-1}},r.Yd=function(){try{return 2<this.ma()?this.c.statusText:""}catch(Y){return ft(this.s,"Can not get status: "+Y.message),""}},r.ya=function(){try{return this.c?this.c.responseText:""}catch(Y){return ft(this.s,"Can not get responseText: "+Y.message),""}},r.yf=function(e){if(this.c){var t=this.c.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),un(t)}},r.getResponseHeader=function(e){if(this.c&&this.Mc())return null===(e=this.c.getResponseHeader(e))?void 0:e},r.getAllResponseHeaders=function(){return this.c&&this.Mc()&&this.c.getAllResponseHeaders()||""},r.kb=function(e){return this.c?this.c.getResponseHeader(e):null},r.Ud=function(){return this.Pa},r.Hc=function(){return a(this.I)?this.I:String(this.I)},r.da=function(e){return e+" ["+this.ge+" "+this.Tb+" "+this.za()+"]"},(r=gn.prototype).tc=8,r.g=1,r.connect=function(e,t,n,r,i){this.a.debug("connect()"),bt(0),this.K=t,this.gb=n||{},r&&void 0!==i&&(this.gb.OSID=r,this.gb.OAID=i),this.ta&&(this.a.debug("connect() bypassed channel-test."),this.Ib.$d=[],this.Ib.od=!1),this.bf(e)},r.disconnect=function(){if(this.a.debug("disconnect()"),this.qd(),3==this.g){var e=this.Yb++,t=this.hb.clone();t.l("SID",this.ra),t.l("RID",e),t.l("TYPE","terminate"),this.Ya(t),new kt(this,this.a,this.ra,e,void 0).yg(t)}this.qe()},r.bf=function(e){this.a.debug("connectTest_()"),this.Ja=new Yt(this,this.a),null===this.N&&this.Ja.ga(this.A);var t=e;this.N&&this.A&&(t=mn(e,this.N,this.A)),this.Ja.connect(t)},r.af=function(){this.a.debug("connectChannel_()"),this.hb=this.Sd(this.K),this.Dc()},r.qd=function(){this.Ja&&(this.Ja.abort(),this.Ja=null),this.u&&(this.u.cancel(),this.u=null),this.ia&&(o.clearTimeout(this.ia),this.ia=null),this.Hb(),this.G.cancel(),this.ea&&(o.clearTimeout(this.ea),this.ea=null)},r.ga=function(e){this.A=e},r.Eg=function(e){this.Rb=e},r.Cg=function(e){this.N=e},r.Dg=function(e){this.aa=e},r.Fe=function(e){this.Kc=e},r.He=function(e){this.Ra=e},r.Hg=function(){this.gc=!0},r.Ee=function(e){this.i=e},r.Nf=function(){return!this.fd},r.Zc=function(e){1e3==this.M.length&&this.a.ca(function(){return"Already have 1000 queued maps upon queueing "+je(e)}),this.M.push(new tn(this.ag++,e)),3==this.g&&this.Dc()},r.qf=function(){return this.kf?0:this.nf},r.de=function(){return 0==this.g},r.getState=function(){return this.g},r.Dc=function(){this.G.ee()||this.ea||(this.ea=Et(_(this.we,this),0),this.La=0)},r.Yf=function(e){return this.G.xf()>=this.G.Xb-(this.ea?1:0)?(this.a.ca("Unexpected retry request is scheduled."),!1):this.ea?(this.a.debug("Use the retry request that is already scheduled."),this.M=e.la().concat(this.M),!0):!(1==this.g||2==this.g||this.La>=this.qf())&&(this.a.debug("Going to retry POST"),this.ea=Et(_(this.we,this,e),this.Xd(this.La)),this.La++,!0)},r.we=function(e){this.ea=null,this.Mg(e)},r.Mg=function(e){this.a.debug("startForwardChannel_"),1==this.g?e?this.a.ca("Not supposed to retry the open"):(this.ig(),this.g=2):3==this.g&&(e?this.le(e):0==this.M.length?this.a.debug("startForwardChannel_ returned: nothing to send"):this.G.ee()?this.a.ca("startForwardChannel_ returned: connection already in progress"):(this.le(),this.a.debug("startForwardChannel_ finished, sent request")))},r.ig=function(){this.a.debug("open_()"),this.Yb=Math.floor(1e5*Math.random());var e=this.Yb++,t=new kt(this,this.a,"",e,void 0),n=this.A;this.Rb&&(n?Q(n=W(n),this.Rb):n=this.Rb),null===this.N&&t.ga(n);var r=this.Hd(t),i=this.hb.clone();i.l("RID",e),0<this.Bd&&i.l("CVER",this.Bd),this.ta&&this.aa&&i.l("X-HTTP-Session-Id",this.aa),this.Ya(i),this.N&&n&&mn(i,this.N,n),this.G.oc(t),this.Nd?(i.l("$req",r),i.l("SID","null"),t.Ag(),t.kd(i,null)):t.kd(i,r)},r.le=function(e){var t=e?e.R:this.Yb++,n=this.hb.clone();n.l("SID",this.ra),n.l("RID",t),n.l("AID",this.Sb),this.Ya(n),this.N&&this.A&&mn(n,this.N,this.A),t=new kt(this,this.a,this.ra,t,this.La+1),null===this.N&&t.ga(this.A),e&&this.sg(e),e=this.Hd(t),t.setTimeout(Math.round(.5*this.Od)+Math.round(.5*this.Od*Math.random())),this.G.oc(t),t.kd(n,e)},r.Ya=function(e){this.i&&Lt({},function(t,n){e.l(n,t)})},r.Hd=function(e){var t=Math.min(this.M.length,1e3),n=this.i?_(this.i.Ue,this.i,this):null;return n=this.kc.jf(this.M,t,n),e.Gg(this.M.splice(0,t)),n},r.sg=function(e){this.M=e.la().concat(this.M)},r.Kd=function(){if(!this.u&&!this.ia){this.rc=1;var e=this.ve;$e||Ke(),Qe||($e(),Qe=!0),Ge.add(e,this),this.Ha=0}},r.Qc=function(){return this.u||this.ia?(this.a.ca("Request already in progress"),!1):!(3<=this.Ha)&&(this.a.debug("Going to retry GET"),this.rc++,this.ia=Et(_(this.ve,this),this.Xd(this.Ha)),this.Ha++,!0)},r.ve=function(){this.ia=null,this.Kg()},r.Kg=function(){this.a.debug("Creating new HttpRequest"),this.u=new kt(this,this.a,this.ra,"rpc",this.rc),null===this.N&&this.u.ga(this.A),this.u.He(this.Ra);var e=this.md.clone();e.l("RID","rpc"),e.l("SID",this.ra),e.l("CI",this.fd?"0":"1"),e.l("AID",this.Sb),this.Ya(e),e.l("TYPE","xmlhttp"),this.N&&this.A&&mn(e,this.N,this.A),this.Db&&this.u.setTimeout(this.Db),this.u.jd(e,!0,this.na),this.a.debug("New Request created")},r.ub=function(e,t){this.a.debug("Test Connection Finished");var n=e.Ad;n&&this.G.ld(n),this.fd=this.Se&&t,this.w=e.w,this.af()},r.dd=function(e){this.a.debug("Test Connection Failed"),this.w=e.w,this.sa(2)},r.ue=function(e,t){if(0!=this.g&&(this.u==e||this.G.Jc(e)))if(this.w=e.w,!e.lb&&this.G.Jc(e)&&3==this.g){try{var n=this.kc.zc(t)}catch(r){n=null}h(n)&&3==n.length?this.Cf(n,e):(this.a.debug("Bad POST response data returned"),this.sa(11))}else(e.lb||this.u==e)&&this.Hb(),F(t)||(n=this.kc.zc(t),this.dg(n,e))},r.Cf=function(e,t){0==e[0]?this.Bf(t):(this.he=e[1],0<(t=this.he-this.Sb)&&(e=e[2],this.a.debug(e+" bytes (in "+t+" arrays) are outstanding on the BackChannel"),this.Jg(e)&&!this.wa&&(this.wa=Et(_(this.bg,this),6e3))))},r.Bf=function(e){if(this.a.debug("Server claims our backchannel is missing."),this.ia)this.a.debug("But we are currently starting the request.");else{if(this.u){if(!(this.u.qb+3e3<e.qb))return;this.Hb(),this.u.cancel(),this.u=null}else this.a.T("We do not have a BackChannel established");this.Qc(),bt(18)}},r.Jg=function(e){return 37500>e&&!this.Nf()&&0==this.Ha},r.$a=function(e){return this.Te?this.i?this.i.$a(e):e:null},r.bg=function(){null!=this.wa&&(this.wa=null,this.u.cancel(),this.u=null,this.Qc(),bt(19))},r.Hb=function(){null!=this.wa&&(o.clearTimeout(this.wa),this.wa=null)},r.Tc=function(e){this.a.debug("Request complete");var t=null;if(this.u==e){this.Hb(),this.u=null;var n=2}else{if(!this.G.Jc(e))return;t=e.la(),this.G.ze(e),n=1}if(this.w=e.w,0!=this.g)if(e.S)1==n?(function(e,t,n){gt.dispatchEvent(new wt(gt,e,t,n))}(e.Da?e.Da.length:0,w()-e.qb,this.La),this.Dc()):this.Kd();else{var r=e.Hc();if(3==r||0==r&&0<this.w)this.a.debug("Not retrying due to error type");else{var i=this;if(this.a.debug(function(){return"Maybe retrying, last error: "+function(e,t){switch(e){case 0:return"Non-200 return code ("+t+")";case 1:return"XMLHTTP failure (no data)";case 2:return"HttpConnection timeout";default:return"Unknown error"}}(r,i.w)}),1==n&&this.Yf(e)||2==n&&this.Qc())return;this.a.debug("Exceeded max number of retries")}switch(t&&0<t.length&&this.G.Re(t),this.a.debug("Error: HTTP request failed"),r){case 1:this.sa(5);break;case 4:this.sa(10);break;case 3:this.sa(6);break;default:this.sa(2)}}},r.Xd=function(e){var t=this.Ve+Math.floor(Math.random()*this.vg);return this.Ba()||(this.a.debug("Inactive channel"),t*=2),t*e},r.pc=function(e){if(this.ta&&(e=e.h)){var t=e.kb("X-Client-Wire-Protocol");t&&this.G.ld(t),this.aa&&((e=e.kb("X-HTTP-Session-Id"))?(this.Fe(e),this.hb.l(this.aa,e)):this.a.T("Missing X_HTTP_SESSION_ID in the handshake response"))}},r.dg=function(e,t){for(var n=this.i&&this.i.sc?[]:null,r=0;r<e.length;r++){var i=e[r];if(this.Sb=i[0],i=i[1],2==this.g)if("c"==i[0]){this.ra=i[1],this.na=this.$a(i[2]);var s=i[3];null!=s&&(this.tc=s,this.a.info("VER="+this.tc)),null!=(s=i[4])&&(this.De=s,this.a.info("SVER="+this.De)),null!=(i=i[5])&&"number"==typeof i&&0<i&&(this.Db=i*=1.5,this.a.info("backChannelRequestTimeoutMs_="+i)),this.pc(t),this.g=3,this.i&&this.i.wd(),this.Lg(t)}else"stop"!=i[0]&&"close"!=i[0]||this.sa(7);else 3==this.g&&("stop"==i[0]||"close"==i[0]?(n&&0!=n.length&&(this.i.sc(this,n),n.length=0),"stop"==i[0]?this.sa(7):this.disconnect()):"noop"!=i[0]&&(n?n.push(i):this.i&&this.i.ud(i)),this.Ha=0)}n&&0!=n.length&&this.i.sc(this,n)},r.Lg=function(e){this.md=this.Pd(this.na,this.K),e.lb?(this.a.debug("Upgrade the handshake request to a backchannel."),this.G.ze(e),e.tg(this.Db),this.u=e):this.Kd()},r.sa=function(e){if(this.a.info("Error code "+e),2==e){var t=null;this.i&&(t=null);var n=_(this.Pg,this);t||(t=new Ut("//www.google.com/images/cleardot.gif"),o.location&&"http"==o.location.protocol||t.tb("https"),t.Ub()),function(e,t){var n=new mt;n.debug("TestLoadImage: loading "+e);var r=new Image;r.onload=b(an,n,r,"TestLoadImage: loaded",!0,t),r.onerror=b(an,n,r,"TestLoadImage: error",!1,t),r.onabort=b(an,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=b(an,n,r,"TestLoadImage: timeout",!1,t),o.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=e}(t.toString(),n)}else bt(2);this.cg(e)},r.Pg=function(e){e?(this.a.info("Successfully pinged google.com"),bt(2)):(this.a.info("Failed to ping google.com"),bt(1))},r.cg=function(e){this.a.debug("HttpChannel: error - "+e),this.g=0,this.i&&this.i.td(e),this.qe(),this.qd()},r.qe=function(){if(this.g=0,this.w=-1,this.i){var e=this.G.la();if(0!=e.length||0!=this.M.length){var t=this;this.a.debug(function(){return"Number of undelivered maps, pending: "+e.length+", outgoing: "+t.M.length}),this.G.$e(),R(this.M),this.M.length=0}this.i.sd()}},r.Sd=function(e){return e=this.Cd(null,e),this.a.debug("GetForwardChannelUri: "+e),e},r.Pd=function(e,t){return e=this.Cd(this.fc()?e:null,t),this.a.debug("GetBackChannelUri: "+e),e},r.Cd=function(e,t){var n=function(e){return e instanceof Ut?e.clone():new Ut(e,void 0)}(t);if(""!=n.xa)e&&n.rb(e+"."+n.xa),n.sb(n.Ca);else{var r=o.location;n=function(e,t,n,r){var i=new Ut(null,void 0);return e&&i.tb(e),t&&i.rb(t),n&&i.sb(n),r&&i.ec(r),i}(r.protocol,e?e+"."+r.hostname:r.hostname,+r.port,t)}return this.gb&&$(this.gb,function(e,t){n.l(t,e)}),e=this.aa,t=this.Kc,e&&t&&n.l(e,t),n.l("VER",this.tc),this.Ya(n),n},r.Jb=function(e){if(e&&!this.gc)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new cn(this.Xa)).Je(this.gc),e},r.Ba=function(){return!!this.i&&this.i.Ba()},r.fc=function(){return this.gc},(r=yn.prototype).sc=null,r.wd=function(){},r.ud=function(){},r.td=function(){},r.sd=function(){},r.Ba=function(){return!0},r.Ue=function(){},r.$a=function(e){return e},vn.prototype.cf=function(e,t){return new _n(e,t)},E(_n,Ve),(r=_n.prototype).addEventListener=function(e,t,n,r){_n.L.addEventListener.call(this,e,t,n,r)},r.removeEventListener=function(e,t,n,r){_n.L.removeEventListener.call(this,e,t,n,r)},r.open=function(){this.b.Ee(this.vd),this.Og&&this.b.Hg(),this.b.connect(this.Qg,this.yb,this.Rc||void 0)},r.close=function(){this.b.disconnect()},r.send=function(e){if(a(e)){var t={};t.__data__=e,this.b.Zc(t)}else this.zg?((t={}).__data__=je(e),this.b.Zc(t)):this.b.Zc(e)},r.F=function(){this.b.Ee(null),delete this.vd,this.b.disconnect(),delete this.b,_n.L.F.call(this)},E(bn,It),E(wn,Nt),E(En,yn),En.prototype.wd=function(){pt(this.b.s,"WebChannel opened on "+this.b.yb),this.b.dispatchEvent("a")},En.prototype.ud=function(e){this.b.dispatchEvent(new bn(e))},En.prototype.td=function(e){pt(this.b.s,"WebChannel aborted on "+this.b.yb+" due to channel error: "+e),this.b.dispatchEvent(new wn(e))},En.prototype.sd=function(){pt(this.b.s,"WebChannel closed on "+this.b.yb),this.b.dispatchEvent("b")};var Cn=b(function(e,t){function n(){}n.prototype=e.prototype;var r=new n;return e.apply(r,Array.prototype.slice.call(arguments,1)),r},vn);function Sn(){this.V=[],this.Z=[]}function Tn(e,t){if(T.call(this),this.oe=e||0,this.Wb=t||10,this.oe>this.Wb)throw Error(xn);this.fa=new Sn,this.oa=new Jt,this.Ac=0,this.Nc=null,this.Cb()}(r=Sn.prototype).Vf=function(){0==this.V.length&&(this.V=this.Z,this.V.reverse(),this.Z=[])},r.enqueue=function(e){this.Z.push(e)},r.ab=function(){return this.Vf(),this.V.pop()},r.C=function(){return this.V.length+this.Z.length},r.X=function(){return 0==this.V.length&&0==this.Z.length},r.clear=function(){this.V=[],this.Z=[]},r.contains=function(e){return 0<=D(this.V,e)||0<=D(this.Z,e)},r.remove=function(e){var t=this.V,n=I(t,e);return 0<=n?(Array.prototype.splice.call(t,n,1),t=!0):t=!1,t||P(this.Z,e)},r.H=function(){for(var e=[],t=this.V.length-1;0<=t;--t)e.push(this.V[t]);var n=this.Z.length;for(t=0;t<n;++t)e.push(this.Z[t]);return e},E(Tn,T);var xn="[goog.structs.Pool] Min can not be greater than max";function An(e,t){this.fe=e,this.gd=t}function Dn(e){this.Y=[],e&&this.Lf(e)}function In(){Dn.call(this)}function Nn(e,t){this.Gd=void 0,this.cc=new In,Tn.call(this,e,t)}function On(e,t,n,r){this.Jf=e,this.Ab=!!r,Nn.call(this,t,n)}(r=Tn.prototype).Mb=function(){var e=w();if(!(null!=this.Nc&&e-this.Nc<this.Ac)){var t=this.qg();return t&&(this.Nc=e,this.oa.add(t)),t}},r.og=function(e){return!!this.oa.remove(e)&&(this.nc(e),!0)},r.qg=function(){for(var e;0<this.Td()&&(e=this.fa.ab(),!this.Sc(e));)this.Cb();return!e&&this.C()<this.Wb&&(e=this.xc()),e},r.nc=function(e){this.oa.remove(e),this.Sc(e)&&this.C()<this.Wb?this.fa.enqueue(e):this.Bc(e)},r.Cb=function(){for(var e=this.fa;this.C()<this.oe;)e.enqueue(this.xc());for(;this.C()>this.Wb&&0<this.Td();)this.Bc(e.ab())},r.xc=function(){return{}},r.Bc=function(e){if("function"==typeof e.bb)e.bb();else for(var t in e)e[t]=null},r.Sc=function(e){return"function"!=typeof e.Ye||e.Ye()},r.contains=function(e){return this.fa.contains(e)||this.oa.contains(e)},r.C=function(){return this.fa.C()+this.oa.C()},r.rf=function(){return this.oa.C()},r.Td=function(){return this.fa.C()},r.X=function(){return this.fa.X()&&this.oa.X()},r.F=function(){if(Tn.L.F.call(this),0<this.rf())throw Error("[goog.structs.Pool] Objects not released");delete this.oa;for(var e=this.fa;!e.X();)this.Bc(e.ab());delete this.fa},An.prototype.getKey=function(){return this.fe},An.prototype.clone=function(){return new An(this.fe,this.gd)},(r=Dn.prototype).ce=function(e,t){var n=this.Y;n.push(new An(e,t)),this.$f(n.length-1)},r.Lf=function(e){if(e instanceof Dn){var t=e.W();if(e=e.H(),0>=this.C()){for(var n=this.Y,r=0;r<t.length;r++)n.push(new An(t[r],e[r]));return}}else t=z(e),e=H(e);for(r=0;r<t.length;r++)this.ce(t[r],e[r])},r.remove=function(){var e=this.Y,t=e.length,n=e[0];if(!(0>=t))return 1==t?k(e):(e[0]=e.pop(),this.Zf()),n.gd},r.Zf=function(){for(var e=0,t=this.Y,n=t.length,r=t[e];e<n>>1;){var i=this.tf(e),s=this.zf(e);if(i=s<n&&t[s].getKey()<t[i].getKey()?s:i,t[i].getKey()>r.getKey())break;t[e]=t[i],e=i}t[e]=r},r.$f=function(e){for(var t=this.Y,n=t[e];0<e;){var r=this.wf(e);if(!(t[r].getKey()>n.getKey()))break;t[e]=t[r],e=r}t[e]=n},r.tf=function(e){return 2*e+1},r.zf=function(e){return 2*e+2},r.wf=function(e){return e-1>>1},r.H=function(){for(var e=this.Y,t=[],n=e.length,r=0;r<n;r++)t.push(e[r].gd);return t},r.W=function(){for(var e=this.Y,t=[],n=e.length,r=0;r<n;r++)t.push(e[r].getKey());return t},r.va=function(e){return O(this.Y,function(t){return t.getKey()==e})},r.clone=function(){return new Dn(this)},r.C=function(){return this.Y.length},r.X=function(){return 0==this.Y.length},r.clear=function(){k(this.Y)},E(In,Dn),In.prototype.enqueue=function(e,t){this.ce(e,t)},In.prototype.ab=function(){return this.remove()},E(Nn,Tn),(r=Nn.prototype).Mb=function(e,t){if(!e)return(e=Nn.L.Mb.call(this))&&this.Ac&&(this.Gd=o.setTimeout(_(this.Nb,this),this.Ac)),e;this.cc.enqueue(void 0!==t?t:100,e),this.Nb()},r.Nb=function(){for(var e=this.cc;0<e.C();){var t=this.Mb();if(!t)break;e.ab().apply(this,[t])}},r.nc=function(e){Nn.L.nc.call(this,e),this.Nb()},r.Cb=function(){Nn.L.Cb.call(this),this.Nb()},r.F=function(){Nn.L.F.call(this),o.clearTimeout(this.Gd),this.cc.clear(),this.cc=null},E(On,Nn),On.prototype.xc=function(){var e=new cn,t=this.Jf;return t&&t.forEach(function(t,n){e.headers.set(n,t)}),this.Ab&&e.Je(!0),e},On.prototype.Sc=function(e){return!e.Ka&&!e.Ba()},vn.prototype.createWebChannel=vn.prototype.cf,_n.prototype.send=_n.prototype.send,_n.prototype.open=_n.prototype.open,_n.prototype.close=_n.prototype.close,Ct.NO_ERROR=0,Ct.TIMEOUT=8,Ct.HTTP_ERROR=6,St.COMPLETE="complete",xt.EventType=Dt,Dt.OPEN="a",Dt.CLOSE="b",Dt.ERROR="c",Dt.MESSAGE="d",Ve.prototype.listen=Ve.prototype.nb,On.prototype.getObject=On.prototype.Mb,On.prototype.releaseObject=On.prototype.og,cn.prototype.listenOnce=cn.prototype.Oc,cn.prototype.getLastError=cn.prototype.Hc,cn.prototype.getLastErrorCode=cn.prototype.Ud,cn.prototype.getStatus=cn.prototype.za,cn.prototype.getStatusText=cn.prototype.Yd,cn.prototype.getResponseJson=cn.prototype.yf,cn.prototype.getResponseText=cn.prototype.ya,cn.prototype.getResponseText=cn.prototype.ya,cn.prototype.send=cn.prototype.send;var kn={createWebChannelTransport:Cn,ErrorCode:Ct,EventType:St,WebChannel:xt,XhrIoPool:On},Pn=kn.createWebChannelTransport,Mn=kn.ErrorCode,Rn=kn.EventType,Fn=kn.WebChannel,Ln=kn.XhrIoPool;t.default=kn},xs0t:function(e,t,n){"use strict";n.r(t);var r=n("8Y7J"),i=n("SVse"),s=n("3N8a");var o=n("IjjT");const a=new class extends o.a{}(class extends s.a{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,n=0){return null!==n&&n>0||null===n&&this.delay>0?super.requestAsyncId(e,t,n):e.flush(this)}});var u=n("HDdC");const c=new r.B("angularfire2.realtimeDatabaseURL");class l{constructor(e,t){this.zone=e,this.platformId=t}schedule(...e){return this.zone.runGuarded(function(){return a.schedule.apply(a,e)})}keepUnstableUntilFirst(e){return Object(i.l)(this.platformId)?new u.a(t=>{const n=()=>{},r=Zone.current.scheduleMacroTask("firebaseZoneBlock",n,{},n,n);e.subscribe(e=>{"scheduled"===r.state&&r.invoke(),t.next(e)},e=>{"scheduled"===r.state&&r.invoke(),t.error(e)},()=>{"scheduled"===r.state&&r.invoke(),t.complete()})}):e}runOutsideAngular(e){return new u.a(t=>this.zone.runOutsideAngular(()=>e.subscribe(e=>this.zone.run(()=>t.next(e)),e=>this.zone.run(()=>t.error(e)),()=>this.zone.run(()=>t.complete()))))}}const h=e=>t=>new u.a(n=>e.runOutsideAngular(()=>{d(e)(t).subscribe(n)})),d=e=>t=>new u.a(n=>t.subscribe(t=>e.run(()=>n.next(t)),t=>e.run(()=>n.error(t)),()=>e.run(()=>n.complete())));var p,f=n("Wcq6"),m=n.n(f),g=function(e,t,n,r){var i,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,n,o):i(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o};const y=new r.B("angularfire2.app.options"),v=new r.B("angularfire2.app.nameOrConfig");class _{}function b(e,t){const n="string"==typeof t&&t||"[DEFAULT]",r="object"==typeof t&&t||{};return r.name=r.name||n,m.a.apps.filter(e=>e&&e.name===r.name)[0]||m.a.initializeApp(e,r)}const w={provide:_,useFactory:b,deps:[y,[new r.O,v]]};let E=p=class{static initializeApp(e,t){return{ngModule:p,providers:[{provide:y,useValue:e},{provide:v,useValue:t}]}}};E=p=g([Object(r.I)({providers:[w]})],E),n.d(t,"RealtimeDatabaseURL",function(){return c}),n.d(t,"FirebaseZoneScheduler",function(){return l}),n.d(t,"runOutsideAngular",function(){return h}),n.d(t,"runInZone",function(){return d}),n.d(t,"FirebaseOptionsToken",function(){return y}),n.d(t,"FirebaseNameOrConfigToken",function(){return v}),n.d(t,"FirebaseApp",function(){return _}),n.d(t,"_firebaseAppFactory",function(){return b}),n.d(t,"AngularFireModule",function(){return E})},yCtX:function(e,t,n){"use strict";n.d(t,"a",function(){return o});var r=n("HDdC"),i=n("quSY"),s=n("ngJS");function o(e,t){return t?new r.a(n=>{const r=new i.a;let s=0;return r.add(t.schedule(function(){s!==e.length?(n.next(e[s++]),n.closed||r.add(this.schedule())):n.complete()})),r}):new r.a(Object(s.a)(e))}},"z+Ro":function(e,t,n){"use strict";function r(e){return e&&"function"==typeof e.schedule}n.d(t,"a",function(){return r})},zUnb:function(e,t,n){"use strict";n.r(t);var r,i=n("8Y7J");function s(e){if(":"!=e[0])return[null,e];const t=e.indexOf(":",1);if(-1==t)throw new Error(`Unsupported format "${e}" expecting ":namespace:name"`);return[e.slice(1,t),e.slice(t+1)]}function o(e){return"ng-container"===s(e)[1]}function a(e){return"ng-content"===s(e)[1]}function u(e){return"ng-template"===s(e)[1]}function c(e){return null===e?null:s(e)[0]}function l(e,t){return e?`:${e}:${t}`:t}!function(e){e[e.RAW_TEXT=0]="RAW_TEXT",e[e.ESCAPABLE_RAW_TEXT=1]="ESCAPABLE_RAW_TEXT",e[e.PARSABLE_DATA=2]="PARSABLE_DATA"}(r||(r={}));const h={Aacute:"\xc1",aacute:"\xe1",Acirc:"\xc2",acirc:"\xe2",acute:"\xb4",AElig:"\xc6",aelig:"\xe6",Agrave:"\xc0",agrave:"\xe0",alefsym:"\u2135",Alpha:"\u0391",alpha:"\u03b1",amp:"&",and:"\u2227",ang:"\u2220",apos:"'",Aring:"\xc5",aring:"\xe5",asymp:"\u2248",Atilde:"\xc3",atilde:"\xe3",Auml:"\xc4",auml:"\xe4",bdquo:"\u201e",Beta:"\u0392",beta:"\u03b2",brvbar:"\xa6",bull:"\u2022",cap:"\u2229",Ccedil:"\xc7",ccedil:"\xe7",cedil:"\xb8",cent:"\xa2",Chi:"\u03a7",chi:"\u03c7",circ:"\u02c6",clubs:"\u2663",cong:"\u2245",copy:"\xa9",crarr:"\u21b5",cup:"\u222a",curren:"\xa4",dagger:"\u2020",Dagger:"\u2021",darr:"\u2193",dArr:"\u21d3",deg:"\xb0",Delta:"\u0394",delta:"\u03b4",diams:"\u2666",divide:"\xf7",Eacute:"\xc9",eacute:"\xe9",Ecirc:"\xca",ecirc:"\xea",Egrave:"\xc8",egrave:"\xe8",empty:"\u2205",emsp:"\u2003",ensp:"\u2002",Epsilon:"\u0395",epsilon:"\u03b5",equiv:"\u2261",Eta:"\u0397",eta:"\u03b7",ETH:"\xd0",eth:"\xf0",Euml:"\xcb",euml:"\xeb",euro:"\u20ac",exist:"\u2203",fnof:"\u0192",forall:"\u2200",frac12:"\xbd",frac14:"\xbc",frac34:"\xbe",frasl:"\u2044",Gamma:"\u0393",gamma:"\u03b3",ge:"\u2265",gt:">",harr:"\u2194",hArr:"\u21d4",hearts:"\u2665",hellip:"\u2026",Iacute:"\xcd",iacute:"\xed",Icirc:"\xce",icirc:"\xee",iexcl:"\xa1",Igrave:"\xcc",igrave:"\xec",image:"\u2111",infin:"\u221e",int:"\u222b",Iota:"\u0399",iota:"\u03b9",iquest:"\xbf",isin:"\u2208",Iuml:"\xcf",iuml:"\xef",Kappa:"\u039a",kappa:"\u03ba",Lambda:"\u039b",lambda:"\u03bb",lang:"\u27e8",laquo:"\xab",larr:"\u2190",lArr:"\u21d0",lceil:"\u2308",ldquo:"\u201c",le:"\u2264",lfloor:"\u230a",lowast:"\u2217",loz:"\u25ca",lrm:"\u200e",lsaquo:"\u2039",lsquo:"\u2018",lt:"<",macr:"\xaf",mdash:"\u2014",micro:"\xb5",middot:"\xb7",minus:"\u2212",Mu:"\u039c",mu:"\u03bc",nabla:"\u2207",nbsp:"\xa0",ndash:"\u2013",ne:"\u2260",ni:"\u220b",not:"\xac",notin:"\u2209",nsub:"\u2284",Ntilde:"\xd1",ntilde:"\xf1",Nu:"\u039d",nu:"\u03bd",Oacute:"\xd3",oacute:"\xf3",Ocirc:"\xd4",ocirc:"\xf4",OElig:"\u0152",oelig:"\u0153",Ograve:"\xd2",ograve:"\xf2",oline:"\u203e",Omega:"\u03a9",omega:"\u03c9",Omicron:"\u039f",omicron:"\u03bf",oplus:"\u2295",or:"\u2228",ordf:"\xaa",ordm:"\xba",Oslash:"\xd8",oslash:"\xf8",Otilde:"\xd5",otilde:"\xf5",otimes:"\u2297",Ouml:"\xd6",ouml:"\xf6",para:"\xb6",permil:"\u2030",perp:"\u22a5",Phi:"\u03a6",phi:"\u03c6",Pi:"\u03a0",pi:"\u03c0",piv:"\u03d6",plusmn:"\xb1",pound:"\xa3",prime:"\u2032",Prime:"\u2033",prod:"\u220f",prop:"\u221d",Psi:"\u03a8",psi:"\u03c8",quot:'"',radic:"\u221a",rang:"\u27e9",raquo:"\xbb",rarr:"\u2192",rArr:"\u21d2",rceil:"\u2309",rdquo:"\u201d",real:"\u211c",reg:"\xae",rfloor:"\u230b",Rho:"\u03a1",rho:"\u03c1",rlm:"\u200f",rsaquo:"\u203a",rsquo:"\u2019",sbquo:"\u201a",Scaron:"\u0160",scaron:"\u0161",sdot:"\u22c5",sect:"\xa7",shy:"\xad",Sigma:"\u03a3",sigma:"\u03c3",sigmaf:"\u03c2",sim:"\u223c",spades:"\u2660",sub:"\u2282",sube:"\u2286",sum:"\u2211",sup:"\u2283",sup1:"\xb9",sup2:"\xb2",sup3:"\xb3",supe:"\u2287",szlig:"\xdf",Tau:"\u03a4",tau:"\u03c4",there4:"\u2234",Theta:"\u0398",theta:"\u03b8",thetasym:"\u03d1",thinsp:"\u2009",THORN:"\xde",thorn:"\xfe",tilde:"\u02dc",times:"\xd7",trade:"\u2122",Uacute:"\xda",uacute:"\xfa",uarr:"\u2191",uArr:"\u21d1",Ucirc:"\xdb",ucirc:"\xfb",Ugrave:"\xd9",ugrave:"\xf9",uml:"\xa8",upsih:"\u03d2",Upsilon:"\u03a5",upsilon:"\u03c5",Uuml:"\xdc",uuml:"\xfc",weierp:"\u2118",Xi:"\u039e",xi:"\u03be",Yacute:"\xdd",yacute:"\xfd",yen:"\xa5",yuml:"\xff",Yuml:"\u0178",Zeta:"\u0396",zeta:"\u03b6",zwj:"\u200d",zwnj:"\u200c"},d="\ue500";h.ngsp=d;class p{constructor({closedByChildren:e,requiredParents:t,implicitNamespacePrefix:n,contentType:i=r.PARSABLE_DATA,closedByParent:s=!1,isVoid:o=!1,ignoreFirstLf:a=!1}={}){this.closedByChildren={},this.closedByParent=!1,this.canSelfClose=!1,e&&e.length>0&&e.forEach(e=>this.closedByChildren[e]=!0),this.isVoid=o,this.closedByParent=s||o,t&&t.length>0&&(this.requiredParents={},this.parentToAdd=t[0],t.forEach(e=>this.requiredParents[e]=!0)),this.implicitNamespacePrefix=n||null,this.contentType=i,this.ignoreFirstLf=a}requireExtraParent(e){if(!this.requiredParents)return!1;if(!e)return!0;const t=e.toLowerCase();return!("template"===t||"ng-template"===e)&&1!=this.requiredParents[t]}isClosedByChild(e){return this.isVoid||e.toLowerCase()in this.closedByChildren}}let f,m;function g(e){return m||(f=new p,m={base:new p({isVoid:!0}),meta:new p({isVoid:!0}),area:new p({isVoid:!0}),embed:new p({isVoid:!0}),link:new p({isVoid:!0}),img:new p({isVoid:!0}),input:new p({isVoid:!0}),param:new p({isVoid:!0}),hr:new p({isVoid:!0}),br:new p({isVoid:!0}),source:new p({isVoid:!0}),track:new p({isVoid:!0}),wbr:new p({isVoid:!0}),p:new p({closedByChildren:["address","article","aside","blockquote","div","dl","fieldset","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","main","nav","ol","p","pre","section","table","ul"],closedByParent:!0}),thead:new p({closedByChildren:["tbody","tfoot"]}),tbody:new p({closedByChildren:["tbody","tfoot"],closedByParent:!0}),tfoot:new p({closedByChildren:["tbody"],closedByParent:!0}),tr:new p({closedByChildren:["tr"],requiredParents:["tbody","tfoot","thead"],closedByParent:!0}),td:new p({closedByChildren:["td","th"],closedByParent:!0}),th:new p({closedByChildren:["td","th"],closedByParent:!0}),col:new p({requiredParents:["colgroup"],isVoid:!0}),svg:new p({implicitNamespacePrefix:"svg"}),math:new p({implicitNamespacePrefix:"math"}),li:new p({closedByChildren:["li"],closedByParent:!0}),dt:new p({closedByChildren:["dt","dd"]}),dd:new p({closedByChildren:["dt","dd"],closedByParent:!0}),rb:new p({closedByChildren:["rb","rt","rtc","rp"],closedByParent:!0}),rt:new p({closedByChildren:["rb","rt","rtc","rp"],closedByParent:!0}),rtc:new p({closedByChildren:["rb","rtc","rp"],closedByParent:!0}),rp:new p({closedByChildren:["rb","rt","rtc","rp"],closedByParent:!0}),optgroup:new p({closedByChildren:["optgroup"],closedByParent:!0}),option:new p({closedByChildren:["option","optgroup"],closedByParent:!0}),pre:new p({ignoreFirstLf:!0}),listing:new p({ignoreFirstLf:!0}),style:new p({contentType:r.RAW_TEXT}),script:new p({contentType:r.RAW_TEXT}),title:new p({contentType:r.ESCAPABLE_RAW_TEXT}),textarea:new p({contentType:r.ESCAPABLE_RAW_TEXT,ignoreFirstLf:!0})}),m[e.toLowerCase()]||f}const y=new RegExp("(\\:not\\()|([-\\w]+)|(?:\\.([-\\w]+))|(?:\\[([-.\\w*]+)(?:=([\"']?)([^\\]\"']*)\\5)?\\])|(\\))|(\\s*,\\s*)","g");class v{constructor(){this.element=null,this.classNames=[],this.attrs=[],this.notSelectors=[]}static parse(e){const t=[],n=(e,t)=>{t.notSelectors.length>0&&!t.element&&0==t.classNames.length&&0==t.attrs.length&&(t.element="*"),e.push(t)};let r,i=new v,s=i,o=!1;for(y.lastIndex=0;r=y.exec(e);){if(r[1]){if(o)throw new Error("Nesting :not is not allowed in a selector");o=!0,s=new v,i.notSelectors.push(s)}if(r[2]&&s.setElement(r[2]),r[3]&&s.addClassName(r[3]),r[4]&&s.addAttribute(r[4],r[6]),r[7]&&(o=!1,s=i),r[8]){if(o)throw new Error("Multiple selectors in :not are not supported");n(t,i),i=s=new v}}return n(t,i),t}isElementSelector(){return this.hasElementSelector()&&0==this.classNames.length&&0==this.attrs.length&&0===this.notSelectors.length}hasElementSelector(){return!!this.element}setElement(e=null){this.element=e}getMatchingElementTemplate(){const e=this.element||"div",t=this.classNames.length>0?` class="${this.classNames.join(" ")}"`:"";let n="";for(let r=0;r<this.attrs.length;r+=2){n+=` ${this.attrs[r]}${""!==this.attrs[r+1]?`="${this.attrs[r+1]}"`:""}`}return g(e).isVoid?`<${e}${t}${n}/>`:`<${e}${t}${n}></${e}>`}getAttrs(){const e=[];return this.classNames.length>0&&e.push("class",this.classNames.join(" ")),e.concat(this.attrs)}addAttribute(e,t=""){this.attrs.push(e,t&&t.toLowerCase()||"")}addClassName(e){this.classNames.push(e.toLowerCase())}toString(){let e=this.element||"";if(this.classNames&&this.classNames.forEach(t=>e+=`.${t}`),this.attrs)for(let t=0;t<this.attrs.length;t+=2){const n=this.attrs[t],r=this.attrs[t+1];e+=`[${n}${r?"="+r:""}]`}return this.notSelectors.forEach(t=>e+=`:not(${t})`),e}}class _{constructor(){this._elementMap=new Map,this._elementPartialMap=new Map,this._classMap=new Map,this._classPartialMap=new Map,this._attrValueMap=new Map,this._attrValuePartialMap=new Map,this._listContexts=[]}static createNotMatcher(e){const t=new _;return t.addSelectables(e,null),t}addSelectables(e,t){let n=null;e.length>1&&(n=new b(e),this._listContexts.push(n));for(let r=0;r<e.length;r++)this._addSelectable(e[r],t,n)}_addSelectable(e,t,n){let r=this;const i=e.element,s=e.classNames,o=e.attrs,a=new w(e,t,n);if(i){0===o.length&&0===s.length?this._addTerminal(r._elementMap,i,a):r=this._addPartial(r._elementPartialMap,i)}if(s)for(let u=0;u<s.length;u++){const e=0===o.length&&u===s.length-1,t=s[u];e?this._addTerminal(r._classMap,t,a):r=this._addPartial(r._classPartialMap,t)}if(o)for(let u=0;u<o.length;u+=2){const e=u===o.length-2,t=o[u],n=o[u+1];if(e){const e=r._attrValueMap;let i=e.get(t);i||(i=new Map,e.set(t,i)),this._addTerminal(i,n,a)}else{const e=r._attrValuePartialMap;let i=e.get(t);i||(i=new Map,e.set(t,i)),r=this._addPartial(i,n)}}}_addTerminal(e,t,n){let r=e.get(t);r||(r=[],e.set(t,r)),r.push(n)}_addPartial(e,t){let n=e.get(t);return n||(n=new _,e.set(t,n)),n}match(e,t){let n=!1;const r=e.element,i=e.classNames,s=e.attrs;for(let o=0;o<this._listContexts.length;o++)this._listContexts[o].alreadyMatched=!1;if(n=this._matchTerminal(this._elementMap,r,e,t)||n,n=this._matchPartial(this._elementPartialMap,r,e,t)||n,i)for(let o=0;o<i.length;o++){const r=i[o];n=this._matchTerminal(this._classMap,r,e,t)||n,n=this._matchPartial(this._classPartialMap,r,e,t)||n}if(s)for(let o=0;o<s.length;o+=2){const r=s[o],i=s[o+1],a=this._attrValueMap.get(r);i&&(n=this._matchTerminal(a,"",e,t)||n),n=this._matchTerminal(a,i,e,t)||n;const u=this._attrValuePartialMap.get(r);i&&(n=this._matchPartial(u,"",e,t)||n),n=this._matchPartial(u,i,e,t)||n}return n}_matchTerminal(e,t,n,r){if(!e||"string"!=typeof t)return!1;let i=e.get(t)||[];const s=e.get("*");if(s&&(i=i.concat(s)),0===i.length)return!1;let o,a=!1;for(let u=0;u<i.length;u++)a=(o=i[u]).finalize(n,r)||a;return a}_matchPartial(e,t,n,r){if(!e||"string"!=typeof t)return!1;const i=e.get(t);return!!i&&i.match(n,r)}}class b{constructor(e){this.selectors=e,this.alreadyMatched=!1}}class w{constructor(e,t,n){this.selector=e,this.cbContext=t,this.listContext=n,this.notSelectors=e.notSelectors}finalize(e,t){let n=!0;if(this.notSelectors.length>0&&(!this.listContext||!this.listContext.alreadyMatched)){n=!_.createNotMatcher(this.notSelectors).match(e,null)}return!n||!t||this.listContext&&this.listContext.alreadyMatched||(this.listContext&&(this.listContext.alreadyMatched=!0),t(this.selector,this.cbContext)),n}}const E=G("Inject",e=>({token:e})),C=G("InjectionToken",e=>({_desc:e,ngInjectableDef:void 0})),S=G("Attribute",e=>({attributeName:e})),T=G("ContentChildren",(e,t={})=>Object.assign({selector:e,first:!1,isViewQuery:!1,descendants:!1},t)),x=G("ContentChild",(e,t={})=>Object.assign({selector:e,first:!0,isViewQuery:!1,descendants:!0},t)),A=G("ViewChildren",(e,t={})=>Object.assign({selector:e,first:!1,isViewQuery:!0,descendants:!0},t)),D=G("ViewChild",(e,t)=>Object.assign({selector:e,first:!0,isViewQuery:!0,descendants:!0},t)),I=G("Directive",(e={})=>e);var N,O;!function(e){e[e.Emulated=0]="Emulated",e[e.Native=1]="Native",e[e.None=2]="None",e[e.ShadowDom=3]="ShadowDom"}(N||(N={})),function(e){e[e.OnPush=0]="OnPush",e[e.Default=1]="Default"}(O||(O={}));const k=G("Component",(e={})=>Object.assign({changeDetection:O.Default},e)),P=G("Pipe",e=>Object.assign({pure:!0},e)),M=G("Input",e=>({bindingPropertyName:e})),R=G("Output",e=>({bindingPropertyName:e})),F=G("HostBinding",e=>({hostPropertyName:e})),L=G("HostListener",(e,t)=>({eventName:e,args:t})),V=G("NgModule",e=>e),j=G("Injectable",(e={})=>e),B={name:"custom-elements"},U={name:"no-errors-schema"},q=G("Optional"),$=G("Self"),H=G("SkipSelf"),z=G("Host"),W=Function;var K,Q;function G(e,t){const n=(...n)=>{const r=t?t(...n):{};return Object.assign({ngMetadataName:e},r)};return n.isTypeOf=(t=>t&&t.ngMetadataName===e),n.ngMetadataName=e,n}function X(e){const t=function(e){const t=e.classNames&&e.classNames.length?[8,...e.classNames]:[];return[e.element&&"*"!==e.element?e.element:"",...e.attrs,...t]}(e),n=e.notSelectors&&e.notSelectors.length?e.notSelectors.map(e=>(function(e){const t=e.classNames&&e.classNames.length?[8,...e.classNames]:[];return e.element?[5,e.element,...e.attrs,...t]:e.attrs.length?[3,...e.attrs,...t]:e.classNames&&e.classNames.length?[9,...e.classNames]:[]})(e)):[];return t.concat(...n)}function Y(e){return v.parse(e).map(X)}!function(e){e[e.NONE=0]="NONE",e[e.HTML=1]="HTML",e[e.STYLE=2]="STYLE",e[e.SCRIPT=3]="SCRIPT",e[e.URL=4]="URL",e[e.RESOURCE_URL=5]="RESOURCE_URL"}(K||(K={})),function(e){e[e.Error=0]="Error",e[e.Warning=1]="Warning",e[e.Ignore=2]="Ignore"}(Q||(Q={}));var Z,J;!function(e){e[e.Const=0]="Const"}(Z||(Z={}));class ee{constructor(e=null){this.modifiers=e,e||(this.modifiers=[])}hasModifier(e){return-1!==this.modifiers.indexOf(e)}}!function(e){e[e.Dynamic=0]="Dynamic",e[e.Bool=1]="Bool",e[e.String=2]="String",e[e.Int=3]="Int",e[e.Number=4]="Number",e[e.Function=5]="Function",e[e.Inferred=6]="Inferred",e[e.None=7]="None"}(J||(J={}));class te extends ee{constructor(e,t=null){super(t),this.name=e}visitType(e,t){return e.visitBuiltinType(this,t)}}class ne extends ee{constructor(e,t=null,n=null){super(t),this.value=e,this.typeParams=n}visitType(e,t){return e.visitExpressionType(this,t)}}class re extends ee{constructor(e,t=null){super(t),this.of=e}visitType(e,t){return e.visitArrayType(this,t)}}class ie extends ee{constructor(e,t=null){super(t),this.valueType=e||null}visitType(e,t){return e.visitMapType(this,t)}}const se=new te(J.Dynamic),oe=new te(J.Inferred),ae=new te(J.Bool),ue=(new te(J.Int),new te(J.Number)),ce=(new te(J.String),new te(J.Function),new te(J.None));var le,he,de;function pe(e,t){return null==e||null==t?e==t:e.isEquivalent(t)}function fe(e,t){const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(!e[r].isEquivalent(t[r]))return!1;return!0}!function(e){e[e.Equals=0]="Equals",e[e.NotEquals=1]="NotEquals",e[e.Identical=2]="Identical",e[e.NotIdentical=3]="NotIdentical",e[e.Minus=4]="Minus",e[e.Plus=5]="Plus",e[e.Divide=6]="Divide",e[e.Multiply=7]="Multiply",e[e.Modulo=8]="Modulo",e[e.And=9]="And",e[e.Or=10]="Or",e[e.BitwiseAnd=11]="BitwiseAnd",e[e.Lower=12]="Lower",e[e.LowerEquals=13]="LowerEquals",e[e.Bigger=14]="Bigger",e[e.BiggerEquals=15]="BiggerEquals"}(le||(le={}));class me{constructor(e,t){this.type=e||null,this.sourceSpan=t||null}prop(e,t){return new Me(this,e,null,t)}key(e,t,n){return new Re(this,e,t,n)}callMethod(e,t,n){return new Ee(this,e,t,null,n)}callFn(e,t){return new Ce(this,e,null,t)}instantiate(e,t,n){return new Se(this,e,t,n)}conditional(e,t=null,n){return new Ae(this,e,t,null,n)}equals(e,t){return new Pe(le.Equals,this,e,null,t)}notEquals(e,t){return new Pe(le.NotEquals,this,e,null,t)}identical(e,t){return new Pe(le.Identical,this,e,null,t)}notIdentical(e,t){return new Pe(le.NotIdentical,this,e,null,t)}minus(e,t){return new Pe(le.Minus,this,e,null,t)}plus(e,t){return new Pe(le.Plus,this,e,null,t)}divide(e,t){return new Pe(le.Divide,this,e,null,t)}multiply(e,t){return new Pe(le.Multiply,this,e,null,t)}modulo(e,t){return new Pe(le.Modulo,this,e,null,t)}and(e,t){return new Pe(le.And,this,e,null,t)}bitwiseAnd(e,t,n=!0){return new Pe(le.BitwiseAnd,this,e,null,t,n)}or(e,t){return new Pe(le.Or,this,e,null,t)}lower(e,t){return new Pe(le.Lower,this,e,null,t)}lowerEquals(e,t){return new Pe(le.LowerEquals,this,e,null,t)}bigger(e,t){return new Pe(le.Bigger,this,e,null,t)}biggerEquals(e,t){return new Pe(le.BiggerEquals,this,e,null,t)}isBlank(e){return this.equals(Ue,e)}cast(e,t){return new Ne(this,e,t)}toStmt(){return new We(this,null)}}!function(e){e[e.This=0]="This",e[e.Super=1]="Super",e[e.CatchError=2]="CatchError",e[e.CatchStack=3]="CatchStack"}(he||(he={}));class ge extends me{constructor(e,t,n){super(t,n),"string"==typeof e?(this.name=e,this.builtin=null):(this.name=null,this.builtin=e)}isEquivalent(e){return e instanceof ge&&this.name===e.name&&this.builtin===e.builtin}isConstant(){return!1}visitExpression(e,t){return e.visitReadVarExpr(this,t)}set(e){if(!this.name)throw new Error(`Built in variable ${this.builtin} can not be assigned to.`);return new _e(this.name,e,null,this.sourceSpan)}}class ye extends me{constructor(e,t,n){super(t,n),this.expr=e}visitExpression(e,t){return e.visitTypeofExpr(this,t)}isEquivalent(e){return e instanceof ye&&e.expr.isEquivalent(this.expr)}isConstant(){return this.expr.isConstant()}}class ve extends me{constructor(e,t,n){super(t,n),this.node=e}isEquivalent(e){return e instanceof ve&&this.node===e.node}isConstant(){return!1}visitExpression(e,t){return e.visitWrappedNodeExpr(this,t)}}class _e extends me{constructor(e,t,n,r){super(n||t.type,r),this.name=e,this.value=t}isEquivalent(e){return e instanceof _e&&this.name===e.name&&this.value.isEquivalent(e.value)}isConstant(){return!1}visitExpression(e,t){return e.visitWriteVarExpr(this,t)}toDeclStmt(e,t){return new He(this.name,this.value,e,t,this.sourceSpan)}toConstDecl(){return this.toDeclStmt(oe,[qe.Final])}}class be extends me{constructor(e,t,n,r,i){super(r||n.type,i),this.receiver=e,this.index=t,this.value=n}isEquivalent(e){return e instanceof be&&this.receiver.isEquivalent(e.receiver)&&this.index.isEquivalent(e.index)&&this.value.isEquivalent(e.value)}isConstant(){return!1}visitExpression(e,t){return e.visitWriteKeyExpr(this,t)}}class we extends me{constructor(e,t,n,r,i){super(r||n.type,i),this.receiver=e,this.name=t,this.value=n}isEquivalent(e){return e instanceof we&&this.receiver.isEquivalent(e.receiver)&&this.name===e.name&&this.value.isEquivalent(e.value)}isConstant(){return!1}visitExpression(e,t){return e.visitWritePropExpr(this,t)}}!function(e){e[e.ConcatArray=0]="ConcatArray",e[e.SubscribeObservable=1]="SubscribeObservable",e[e.Bind=2]="Bind"}(de||(de={}));class Ee extends me{constructor(e,t,n,r,i){super(r,i),this.receiver=e,this.args=n,"string"==typeof t?(this.name=t,this.builtin=null):(this.name=null,this.builtin=t)}isEquivalent(e){return e instanceof Ee&&this.receiver.isEquivalent(e.receiver)&&this.name===e.name&&this.builtin===e.builtin&&fe(this.args,e.args)}isConstant(){return!1}visitExpression(e,t){return e.visitInvokeMethodExpr(this,t)}}class Ce extends me{constructor(e,t,n,r,i=!1){super(n,r),this.fn=e,this.args=t,this.pure=i}isEquivalent(e){return e instanceof Ce&&this.fn.isEquivalent(e.fn)&&fe(this.args,e.args)&&this.pure===e.pure}isConstant(){return!1}visitExpression(e,t){return e.visitInvokeFunctionExpr(this,t)}}class Se extends me{constructor(e,t,n,r){super(n,r),this.classExpr=e,this.args=t}isEquivalent(e){return e instanceof Se&&this.classExpr.isEquivalent(e.classExpr)&&fe(this.args,e.args)}isConstant(){return!1}visitExpression(e,t){return e.visitInstantiateExpr(this,t)}}class Te extends me{constructor(e,t,n){super(t,n),this.value=e}isEquivalent(e){return e instanceof Te&&this.value===e.value}isConstant(){return!0}visitExpression(e,t){return e.visitLiteralExpr(this,t)}}class xe extends me{constructor(e,t,n=null,r){super(t,r),this.value=e,this.typeParams=n}isEquivalent(e){return e instanceof xe&&this.value.name===e.value.name&&this.value.moduleName===e.value.moduleName&&this.value.runtime===e.value.runtime}isConstant(){return!1}visitExpression(e,t){return e.visitExternalExpr(this,t)}}class Ae extends me{constructor(e,t,n=null,r,i){super(r||t.type,i),this.condition=e,this.falseCase=n,this.trueCase=t}isEquivalent(e){return e instanceof Ae&&this.condition.isEquivalent(e.condition)&&this.trueCase.isEquivalent(e.trueCase)&&pe(this.falseCase,e.falseCase)}isConstant(){return!1}visitExpression(e,t){return e.visitConditionalExpr(this,t)}}class De extends me{constructor(e,t){super(ae,t),this.condition=e}isEquivalent(e){return e instanceof De&&this.condition.isEquivalent(e.condition)}isConstant(){return!1}visitExpression(e,t){return e.visitNotExpr(this,t)}}class Ie extends me{constructor(e,t){super(e.type,t),this.condition=e}isEquivalent(e){return e instanceof Ie&&this.condition.isEquivalent(e.condition)}isConstant(){return!1}visitExpression(e,t){return e.visitAssertNotNullExpr(this,t)}}class Ne extends me{constructor(e,t,n){super(t,n),this.value=e}isEquivalent(e){return e instanceof Ne&&this.value.isEquivalent(e.value)}isConstant(){return!1}visitExpression(e,t){return e.visitCastExpr(this,t)}}class Oe{constructor(e,t=null){this.name=e,this.type=t}isEquivalent(e){return this.name===e.name}}class ke extends me{constructor(e,t,n,r,i){super(n,r),this.params=e,this.statements=t,this.name=i}isEquivalent(e){return e instanceof ke&&fe(this.params,e.params)&&fe(this.statements,e.statements)}isConstant(){return!1}visitExpression(e,t){return e.visitFunctionExpr(this,t)}toDeclStmt(e,t=null){return new ze(e,this.params,this.statements,this.type,t,this.sourceSpan)}}class Pe extends me{constructor(e,t,n,r,i,s=!0){super(r||t.type,i),this.operator=e,this.rhs=n,this.parens=s,this.lhs=t}isEquivalent(e){return e instanceof Pe&&this.operator===e.operator&&this.lhs.isEquivalent(e.lhs)&&this.rhs.isEquivalent(e.rhs)}isConstant(){return!1}visitExpression(e,t){return e.visitBinaryOperatorExpr(this,t)}}class Me extends me{constructor(e,t,n,r){super(n,r),this.receiver=e,this.name=t}isEquivalent(e){return e instanceof Me&&this.receiver.isEquivalent(e.receiver)&&this.name===e.name}isConstant(){return!1}visitExpression(e,t){return e.visitReadPropExpr(this,t)}set(e){return new we(this.receiver,this.name,e,null,this.sourceSpan)}}class Re extends me{constructor(e,t,n,r){super(n,r),this.receiver=e,this.index=t}isEquivalent(e){return e instanceof Re&&this.receiver.isEquivalent(e.receiver)&&this.index.isEquivalent(e.index)}isConstant(){return!1}visitExpression(e,t){return e.visitReadKeyExpr(this,t)}set(e){return new be(this.receiver,this.index,e,null,this.sourceSpan)}}class Fe extends me{constructor(e,t,n){super(t,n),this.entries=e}isConstant(){return this.entries.every(e=>e.isConstant())}isEquivalent(e){return e instanceof Fe&&fe(this.entries,e.entries)}visitExpression(e,t){return e.visitLiteralArrayExpr(this,t)}}class Le{constructor(e,t,n){this.key=e,this.value=t,this.quoted=n}isEquivalent(e){return this.key===e.key&&this.value.isEquivalent(e.value)}}class Ve extends me{constructor(e,t,n){super(t,n),this.entries=e,this.valueType=null,t&&(this.valueType=t.valueType)}isEquivalent(e){return e instanceof Ve&&fe(this.entries,e.entries)}isConstant(){return this.entries.every(e=>e.value.isConstant())}visitExpression(e,t){return e.visitLiteralMapExpr(this,t)}}class je extends me{constructor(e,t){super(e[e.length-1].type,t),this.parts=e}isEquivalent(e){return e instanceof je&&fe(this.parts,e.parts)}isConstant(){return!1}visitExpression(e,t){return e.visitCommaExpr(this,t)}}new ge(he.This,null,null),new ge(he.Super,null,null),new ge(he.CatchError,null,null),new ge(he.CatchStack,null,null);const Be=new Te(null,null,null),Ue=new Te(null,oe,null);var qe;!function(e){e[e.Final=0]="Final",e[e.Private=1]="Private",e[e.Exported=2]="Exported",e[e.Static=3]="Static"}(qe||(qe={}));class $e{constructor(e,t){this.modifiers=e||[],this.sourceSpan=t||null}hasModifier(e){return-1!==this.modifiers.indexOf(e)}}class He extends $e{constructor(e,t,n,r=null,i){super(r,i),this.name=e,this.value=t,this.type=n||t&&t.type||null}isEquivalent(e){return e instanceof He&&this.name===e.name&&(this.value?!!e.value&&this.value.isEquivalent(e.value):!e.value)}visitStatement(e,t){return e.visitDeclareVarStmt(this,t)}}class ze extends $e{constructor(e,t,n,r,i=null,s){super(i,s),this.name=e,this.params=t,this.statements=n,this.type=r||null}isEquivalent(e){return e instanceof ze&&fe(this.params,e.params)&&fe(this.statements,e.statements)}visitStatement(e,t){return e.visitDeclareFunctionStmt(this,t)}}class We extends $e{constructor(e,t){super(null,t),this.expr=e}isEquivalent(e){return e instanceof We&&this.expr.isEquivalent(e.expr)}visitStatement(e,t){return e.visitExpressionStmt(this,t)}}class Ke extends $e{constructor(e,t){super(null,t),this.value=e}isEquivalent(e){return e instanceof Ke&&this.value.isEquivalent(e.value)}visitStatement(e,t){return e.visitReturnStmt(this,t)}}class Qe{constructor(e,t){this.modifiers=t,t||(this.modifiers=[]),this.type=e||null}hasModifier(e){return-1!==this.modifiers.indexOf(e)}}class Ge extends Qe{constructor(e,t,n,r,i=null){super(r,i),this.name=e,this.params=t,this.body=n}isEquivalent(e){return this.name===e.name&&fe(this.body,e.body)}}class Xe extends Qe{constructor(e,t,n,r=null){super(n,r),this.name=e,this.body=t}isEquivalent(e){return this.name===e.name&&fe(this.body,e.body)}}class Ye extends $e{constructor(e,t,n,r,i,s,o=null,a){super(o,a),this.name=e,this.parent=t,this.fields=n,this.getters=r,this.constructorMethod=i,this.methods=s}isEquivalent(e){return e instanceof Ye&&this.name===e.name&&pe(this.parent,e.parent)&&fe(this.fields,e.fields)&&fe(this.getters,e.getters)&&this.constructorMethod.isEquivalent(e.constructorMethod)&&fe(this.methods,e.methods)}visitStatement(e,t){return e.visitDeclareClassStmt(this,t)}}class Ze extends $e{constructor(e,t,n=[],r){super(null,r),this.condition=e,this.trueCase=t,this.falseCase=n}isEquivalent(e){return e instanceof Ze&&this.condition.isEquivalent(e.condition)&&fe(this.trueCase,e.trueCase)&&fe(this.falseCase,e.falseCase)}visitStatement(e,t){return e.visitIfStmt(this,t)}}class Je extends $e{constructor(e=[],t){super(null,t),this.tags=e}isEquivalent(e){return e instanceof Je&&this.toString()===e.toString()}visitStatement(e,t){return e.visitJSDocCommentStmt(this,t)}toString(){return function(e){if(0===e.length)return"";let t="*\n";for(const n of e)t+=" *",t+=vt(n).replace(/\n/g,"\n * "),t+="\n";return t+=" "}(this.tags)}}class et extends $e{constructor(e,t,n){super(null,n),this.bodyStmts=e,this.catchStmts=t}isEquivalent(e){return e instanceof et&&fe(this.bodyStmts,e.bodyStmts)&&fe(this.catchStmts,e.catchStmts)}visitStatement(e,t){return e.visitTryCatchStmt(this,t)}}class tt extends $e{constructor(e,t){super(null,t),this.error=e}isEquivalent(e){return e instanceof et&&this.error.isEquivalent(e.error)}visitStatement(e,t){return e.visitThrowStmt(this,t)}}class nt{transformExpr(e,t){return e}transformStmt(e,t){return e}visitReadVarExpr(e,t){return this.transformExpr(e,t)}visitWrappedNodeExpr(e,t){return this.transformExpr(e,t)}visitTypeofExpr(e,t){return this.transformExpr(new ye(e.expr.visitExpression(this,t),e.type,e.sourceSpan),t)}visitWriteVarExpr(e,t){return this.transformExpr(new _e(e.name,e.value.visitExpression(this,t),e.type,e.sourceSpan),t)}visitWriteKeyExpr(e,t){return this.transformExpr(new be(e.receiver.visitExpression(this,t),e.index.visitExpression(this,t),e.value.visitExpression(this,t),e.type,e.sourceSpan),t)}visitWritePropExpr(e,t){return this.transformExpr(new we(e.receiver.visitExpression(this,t),e.name,e.value.visitExpression(this,t),e.type,e.sourceSpan),t)}visitInvokeMethodExpr(e,t){const n=e.builtin||e.name;return this.transformExpr(new Ee(e.receiver.visitExpression(this,t),n,this.visitAllExpressions(e.args,t),e.type,e.sourceSpan),t)}visitInvokeFunctionExpr(e,t){return this.transformExpr(new Ce(e.fn.visitExpression(this,t),this.visitAllExpressions(e.args,t),e.type,e.sourceSpan),t)}visitInstantiateExpr(e,t){return this.transformExpr(new Se(e.classExpr.visitExpression(this,t),this.visitAllExpressions(e.args,t),e.type,e.sourceSpan),t)}visitLiteralExpr(e,t){return this.transformExpr(e,t)}visitExternalExpr(e,t){return this.transformExpr(e,t)}visitConditionalExpr(e,t){return this.transformExpr(new Ae(e.condition.visitExpression(this,t),e.trueCase.visitExpression(this,t),e.falseCase.visitExpression(this,t),e.type,e.sourceSpan),t)}visitNotExpr(e,t){return this.transformExpr(new De(e.condition.visitExpression(this,t),e.sourceSpan),t)}visitAssertNotNullExpr(e,t){return this.transformExpr(new Ie(e.condition.visitExpression(this,t),e.sourceSpan),t)}visitCastExpr(e,t){return this.transformExpr(new Ne(e.value.visitExpression(this,t),e.type,e.sourceSpan),t)}visitFunctionExpr(e,t){return this.transformExpr(new ke(e.params,this.visitAllStatements(e.statements,t),e.type,e.sourceSpan),t)}visitBinaryOperatorExpr(e,t){return this.transformExpr(new Pe(e.operator,e.lhs.visitExpression(this,t),e.rhs.visitExpression(this,t),e.type,e.sourceSpan),t)}visitReadPropExpr(e,t){return this.transformExpr(new Me(e.receiver.visitExpression(this,t),e.name,e.type,e.sourceSpan),t)}visitReadKeyExpr(e,t){return this.transformExpr(new Re(e.receiver.visitExpression(this,t),e.index.visitExpression(this,t),e.type,e.sourceSpan),t)}visitLiteralArrayExpr(e,t){return this.transformExpr(new Fe(this.visitAllExpressions(e.entries,t),e.type,e.sourceSpan),t)}visitLiteralMapExpr(e,t){const n=e.entries.map(e=>new Le(e.key,e.value.visitExpression(this,t),e.quoted)),r=new ie(e.valueType,null);return this.transformExpr(new Ve(n,r,e.sourceSpan),t)}visitCommaExpr(e,t){return this.transformExpr(new je(this.visitAllExpressions(e.parts,t),e.sourceSpan),t)}visitAllExpressions(e,t){return e.map(e=>e.visitExpression(this,t))}visitDeclareVarStmt(e,t){const n=e.value&&e.value.visitExpression(this,t);return this.transformStmt(new He(e.name,n,e.type,e.modifiers,e.sourceSpan),t)}visitDeclareFunctionStmt(e,t){return this.transformStmt(new ze(e.name,e.params,this.visitAllStatements(e.statements,t),e.type,e.modifiers,e.sourceSpan),t)}visitExpressionStmt(e,t){return this.transformStmt(new We(e.expr.visitExpression(this,t),e.sourceSpan),t)}visitReturnStmt(e,t){return this.transformStmt(new Ke(e.value.visitExpression(this,t),e.sourceSpan),t)}visitDeclareClassStmt(e,t){const n=e.parent.visitExpression(this,t),r=e.getters.map(e=>new Xe(e.name,this.visitAllStatements(e.body,t),e.type,e.modifiers)),i=e.constructorMethod&&new Ge(e.constructorMethod.name,e.constructorMethod.params,this.visitAllStatements(e.constructorMethod.body,t),e.constructorMethod.type,e.constructorMethod.modifiers),s=e.methods.map(e=>new Ge(e.name,e.params,this.visitAllStatements(e.body,t),e.type,e.modifiers));return this.transformStmt(new Ye(e.name,n,e.fields,r,i,s,e.modifiers,e.sourceSpan),t)}visitIfStmt(e,t){return this.transformStmt(new Ze(e.condition.visitExpression(this,t),this.visitAllStatements(e.trueCase,t),this.visitAllStatements(e.falseCase,t),e.sourceSpan),t)}visitTryCatchStmt(e,t){return this.transformStmt(new et(this.visitAllStatements(e.bodyStmts,t),this.visitAllStatements(e.catchStmts,t),e.sourceSpan),t)}visitThrowStmt(e,t){return this.transformStmt(new tt(e.error.visitExpression(this,t),e.sourceSpan),t)}visitCommentStmt(e,t){return this.transformStmt(e,t)}visitJSDocCommentStmt(e,t){return this.transformStmt(e,t)}visitAllStatements(e,t){return e.map(e=>e.visitStatement(this,t))}}class rt{visitType(e,t){return e}visitExpression(e,t){return e.type&&e.type.visitType(this,t),e}visitBuiltinType(e,t){return this.visitType(e,t)}visitExpressionType(e,t){return e.value.visitExpression(this,t),null!==e.typeParams&&e.typeParams.forEach(e=>this.visitType(e,t)),this.visitType(e,t)}visitArrayType(e,t){return this.visitType(e,t)}visitMapType(e,t){return this.visitType(e,t)}visitWrappedNodeExpr(e,t){return e}visitTypeofExpr(e,t){return this.visitExpression(e,t)}visitReadVarExpr(e,t){return this.visitExpression(e,t)}visitWriteVarExpr(e,t){return e.value.visitExpression(this,t),this.visitExpression(e,t)}visitWriteKeyExpr(e,t){return e.receiver.visitExpression(this,t),e.index.visitExpression(this,t),e.value.visitExpression(this,t),this.visitExpression(e,t)}visitWritePropExpr(e,t){return e.receiver.visitExpression(this,t),e.value.visitExpression(this,t),this.visitExpression(e,t)}visitInvokeMethodExpr(e,t){return e.receiver.visitExpression(this,t),this.visitAllExpressions(e.args,t),this.visitExpression(e,t)}visitInvokeFunctionExpr(e,t){return e.fn.visitExpression(this,t),this.visitAllExpressions(e.args,t),this.visitExpression(e,t)}visitInstantiateExpr(e,t){return e.classExpr.visitExpression(this,t),this.visitAllExpressions(e.args,t),this.visitExpression(e,t)}visitLiteralExpr(e,t){return this.visitExpression(e,t)}visitExternalExpr(e,t){return e.typeParams&&e.typeParams.forEach(e=>e.visitType(this,t)),this.visitExpression(e,t)}visitConditionalExpr(e,t){return e.condition.visitExpression(this,t),e.trueCase.visitExpression(this,t),e.falseCase.visitExpression(this,t),this.visitExpression(e,t)}visitNotExpr(e,t){return e.condition.visitExpression(this,t),this.visitExpression(e,t)}visitAssertNotNullExpr(e,t){return e.condition.visitExpression(this,t),this.visitExpression(e,t)}visitCastExpr(e,t){return e.value.visitExpression(this,t),this.visitExpression(e,t)}visitFunctionExpr(e,t){return this.visitAllStatements(e.statements,t),this.visitExpression(e,t)}visitBinaryOperatorExpr(e,t){return e.lhs.visitExpression(this,t),e.rhs.visitExpression(this,t),this.visitExpression(e,t)}visitReadPropExpr(e,t){return e.receiver.visitExpression(this,t),this.visitExpression(e,t)}visitReadKeyExpr(e,t){return e.receiver.visitExpression(this,t),e.index.visitExpression(this,t),this.visitExpression(e,t)}visitLiteralArrayExpr(e,t){return this.visitAllExpressions(e.entries,t),this.visitExpression(e,t)}visitLiteralMapExpr(e,t){return e.entries.forEach(e=>e.value.visitExpression(this,t)),this.visitExpression(e,t)}visitCommaExpr(e,t){return this.visitAllExpressions(e.parts,t),this.visitExpression(e,t)}visitAllExpressions(e,t){e.forEach(e=>e.visitExpression(this,t))}visitDeclareVarStmt(e,t){return e.value&&e.value.visitExpression(this,t),e.type&&e.type.visitType(this,t),e}visitDeclareFunctionStmt(e,t){return this.visitAllStatements(e.statements,t),e.type&&e.type.visitType(this,t),e}visitExpressionStmt(e,t){return e.expr.visitExpression(this,t),e}visitReturnStmt(e,t){return e.value.visitExpression(this,t),e}visitDeclareClassStmt(e,t){return e.parent.visitExpression(this,t),e.getters.forEach(e=>this.visitAllStatements(e.body,t)),e.constructorMethod&&this.visitAllStatements(e.constructorMethod.body,t),e.methods.forEach(e=>this.visitAllStatements(e.body,t)),e}visitIfStmt(e,t){return e.condition.visitExpression(this,t),this.visitAllStatements(e.trueCase,t),this.visitAllStatements(e.falseCase,t),e}visitTryCatchStmt(e,t){return this.visitAllStatements(e.bodyStmts,t),this.visitAllStatements(e.catchStmts,t),e}visitThrowStmt(e,t){return e.error.visitExpression(this,t),e}visitCommentStmt(e,t){return e}visitJSDocCommentStmt(e,t){return e}visitAllStatements(e,t){e.forEach(e=>e.visitStatement(this,t))}}function it(e){const t=new st;return t.visitAllStatements(e,null),t.varNames}class st extends rt{constructor(){super(...arguments),this.varNames=new Set}visitDeclareFunctionStmt(e,t){return e}visitDeclareClassStmt(e,t){return e}visitReadVarExpr(e,t){return e.name&&this.varNames.add(e.name),null}}function ot(e,t){if(!t)return e;const n=new ut(t);return e.visitStatement(n,null)}function at(e,t){if(!t)return e;const n=new ut(t);return e.visitExpression(n,null)}class ut extends nt{constructor(e){super(),this.sourceSpan=e}_clone(e){const t=Object.create(e.constructor.prototype);for(let n in e)t[n]=e[n];return t}transformExpr(e,t){return e.sourceSpan||((e=this._clone(e)).sourceSpan=this.sourceSpan),e}transformStmt(e,t){return e.sourceSpan||((e=this._clone(e)).sourceSpan=this.sourceSpan),e}}function ct(e,t,n){return new ge(e,t,n)}function lt(e,t=null,n){return new xe(e,null,t,n)}function ht(e,t=null,n=null){return null!=e?dt(lt(e,t,null),n):null}function dt(e,t=null,n=null){return new ne(e,t,n)}function pt(e,t,n){return new Fe(e,t,n)}function ft(e,t=null){return new Ve(e.map(e=>new Le(e.key,e.value,e.quoted)),t,null)}function mt(e,t,n,r,i){return new ke(e,t,n,r,i)}function gt(e,t,n){return new Ze(e,t,n)}function yt(e,t,n){return new Te(e,t,n)}function vt(e){let t="";if(e.tagName&&(t+=` @${e.tagName}`),e.text){if(e.text.match(/\/\*|\*\//))throw new Error('JSDoc text cannot contain "/*" and "*/"');t+=" "+e.text.replace(/@/g,"\\@")}return t}const _t=/-+([a-z0-9])/g;function bt(e,t){return wt(e,":",t)}function wt(e,t,n){const r=e.indexOf(t);return-1==r?n:[e.slice(0,r).trim(),e.slice(r+1).trim()]}function Et(e,t,n){return Array.isArray(e)?t.visitArray(e,n):"object"==typeof(r=e)&&null!==r&&Object.getPrototypeOf(r)===kt?t.visitStringMap(e,n):null==e||"string"==typeof e||"number"==typeof e||"boolean"==typeof e?t.visitPrimitive(e,n):t.visitOther(e,n);var r}function Ct(e){return null!=e}function St(e){return void 0===e?null:e}class Tt{visitArray(e,t){return e.map(e=>Et(e,this,t))}visitStringMap(e,t){const n={};return Object.keys(e).forEach(r=>{n[r]=Et(e[r],this,t)}),n}visitPrimitive(e,t){return e}visitOther(e,t){return e}}const xt={assertSync:e=>{if(Ft(e))throw new Error("Illegal state: value cannot be a promise");return e},then:(e,t)=>Ft(e)?e.then(t):t(e),all:e=>e.some(Ft)?Promise.all(e):e};function At(e){throw new Error(`Internal Error: ${e}`)}function Dt(e,t){const n=Error(e);return n[It]=!0,t&&(n[Nt]=t),n}const It="ngSyntaxError",Nt="ngParseErrors";function Ot(e){return e.replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1")}const kt=Object.getPrototypeOf({});function Pt(e){let t="";for(let n=0;n<e.length;n++){let r=e.charCodeAt(n);if(r>=55296&&r<=56319&&e.length>n+1){const t=e.charCodeAt(n+1);t>=56320&&t<=57343&&(n++,r=(r-55296<<10)+t-56320+65536)}r<=127?t+=String.fromCharCode(r):r<=2047?t+=String.fromCharCode(r>>6&31|192,63&r|128):r<=65535?t+=String.fromCharCode(r>>12|224,r>>6&63|128,63&r|128):r<=2097151&&(t+=String.fromCharCode(r>>18&7|240,r>>12&63|128,r>>6&63|128,63&r|128))}return t}function Mt(e){if("string"==typeof e)return e;if(e instanceof Array)return"["+e.map(Mt).join(", ")+"]";if(null==e)return""+e;if(e.overriddenName)return`${e.overriddenName}`;if(e.name)return`${e.name}`;const t=e.toString();if(null==t)return""+t;const n=t.indexOf("\n");return-1===n?t:t.substring(0,n)}function Rt(e){return"function"==typeof e&&e.hasOwnProperty("__forward_ref__")?e():e}function Ft(e){return!!e&&"function"==typeof e.then}const Lt="undefined"!=typeof window&&window,Vt="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,jt="undefined"!=typeof global&&global||Lt||Vt,Bt="_c",Ut={};class qt extends me{constructor(e){super(e.type),this.resolved=e,this.original=e}visitExpression(e,t){return t===Ut?this.original.visitExpression(e,t):this.resolved.visitExpression(e,t)}isEquivalent(e){return e instanceof qt&&this.resolved.isEquivalent(e.resolved)}isConstant(){return!0}fixup(e){this.resolved=e,this.shared=!0}}class $t{constructor(){this.statements=[],this.literals=new Map,this.literalFactories=new Map,this.injectorDefinitions=new Map,this.directiveDefinitions=new Map,this.componentDefinitions=new Map,this.pipeDefinitions=new Map,this.nextNameIndex=0}getConstLiteral(e,t){if(e instanceof Te||e instanceof qt)return e;const n=this.keyOf(e);let r=this.literals.get(n),i=!1;if(r||(r=new qt(e),this.literals.set(n,r),i=!0),!i&&!r.shared||i&&t){const t=this.freshName();this.statements.push(ct(t).set(e).toDeclStmt(oe,[qe.Final])),r.fixup(ct(t))}return r}getDefinition(e,t,n,r=!1){const i=this.definitionsOf(t);let s=i.get(e),o=!1;if(!s){const r=this.propertyNameOf(t);s=new qt(n.importExpr(e).prop(r)),i.set(e,s),o=!0}if(!o&&!s.shared||o&&r){const e=this.freshName();this.statements.push(ct(e).set(s.resolved).toDeclStmt(oe,[qe.Final])),s.fixup(ct(e))}return s}getLiteralFactory(e){if(e instanceof Fe){const t=e.entries.map(e=>e.isConstant()?e:yt(null)),n=this.keyOf(pt(t));return this._getLiteralFactory(n,e.entries,e=>pt(e))}{const t=ft(e.entries.map(e=>({key:e.key,value:e.value.isConstant()?e.value:yt(null),quoted:e.quoted}))),n=this.keyOf(t);return this._getLiteralFactory(n,e.entries.map(e=>e.value),t=>ft(t.map((t,n)=>({key:e.entries[n].key,value:t,quoted:e.entries[n].quoted}))))}}_getLiteralFactory(e,t,n){let r=this.literalFactories.get(e);const i=t.filter(e=>!e.isConstant());if(!r){const i=t.map((e,t)=>e.isConstant()?this.getConstLiteral(e,!0):ct(`a${t}`)),s=mt(i.filter(Wt).map(e=>new Oe(e.name,se)),[new Ke(n(i))],oe),o=this.freshName();this.statements.push(ct(o).set(s).toDeclStmt(oe,[qe.Final])),r=ct(o),this.literalFactories.set(e,r)}return{literalFactory:r,literalFactoryArguments:i}}uniqueName(e){return`${e}${this.nextNameIndex++}`}definitionsOf(e){switch(e){case 2:return this.componentDefinitions;case 1:return this.directiveDefinitions;case 0:return this.injectorDefinitions;case 3:return this.pipeDefinitions}return At(`Unknown definition kind ${e}`),this.componentDefinitions}propertyNameOf(e){switch(e){case 2:return"ngComponentDef";case 1:return"ngDirectiveDef";case 0:return"ngInjectorDef";case 3:return"ngPipeDef"}return At(`Unknown definition kind ${e}`),"<unknown>"}freshName(){return this.uniqueName(Bt)}keyOf(e){return e.visitExpression(new Ht,Ut)}}class Ht{constructor(){this.visitWrappedNodeExpr=zt,this.visitWriteVarExpr=zt,this.visitWriteKeyExpr=zt,this.visitWritePropExpr=zt,this.visitInvokeMethodExpr=zt,this.visitInvokeFunctionExpr=zt,this.visitInstantiateExpr=zt,this.visitConditionalExpr=zt,this.visitNotExpr=zt,this.visitAssertNotNullExpr=zt,this.visitCastExpr=zt,this.visitFunctionExpr=zt,this.visitBinaryOperatorExpr=zt,this.visitReadPropExpr=zt,this.visitReadKeyExpr=zt,this.visitCommaExpr=zt}visitLiteralExpr(e){return`${"string"==typeof e.value?'"'+e.value+'"':e.value}`}visitLiteralArrayExpr(e,t){return`[${e.entries.map(e=>e.visitExpression(this,t)).join(",")}]`}visitLiteralMapExpr(e,t){return`{${e.entries.map(e=>`${(e=>{const t=e.quoted?'"':"";return`${t}${e.key}${t}`})(e)}:${e.value.visitExpression(this,t)}`).join(",")}`}visitExternalExpr(e){return e.value.moduleName?`EX:${e.value.moduleName}:${e.value.name}`:`EX:${e.value.runtime.name}`}visitReadVarExpr(e){return`VAR:${e.name}`}visitTypeofExpr(e,t){return`TYPEOF:${e.expr.visitExpression(this,t)}`}}function zt(e){throw new Error(`Invalid state: Visitor ${this.constructor.name} doesn't handle ${e.constructor.name}`)}function Wt(e){return e instanceof ge}const Kt="@angular/core";class Qt{}function Gt(e){return{identifier:{reference:e}}}function Xt(e,t){return Gt(e.resolveExternalReference(t))}Qt.ANALYZE_FOR_ENTRY_COMPONENTS={name:"ANALYZE_FOR_ENTRY_COMPONENTS",moduleName:Kt},Qt.ElementRef={name:"ElementRef",moduleName:Kt},Qt.NgModuleRef={name:"NgModuleRef",moduleName:Kt},Qt.ViewContainerRef={name:"ViewContainerRef",moduleName:Kt},Qt.ChangeDetectorRef={name:"ChangeDetectorRef",moduleName:Kt},Qt.QueryList={name:"QueryList",moduleName:Kt},Qt.TemplateRef={name:"TemplateRef",moduleName:Kt},Qt.Renderer2={name:"Renderer2",moduleName:Kt},Qt.CodegenComponentFactoryResolver={name:"\u0275CodegenComponentFactoryResolver",moduleName:Kt},Qt.ComponentFactoryResolver={name:"ComponentFactoryResolver",moduleName:Kt},Qt.ComponentFactory={name:"ComponentFactory",moduleName:Kt},Qt.ComponentRef={name:"ComponentRef",moduleName:Kt},Qt.NgModuleFactory={name:"NgModuleFactory",moduleName:Kt},Qt.createModuleFactory={name:"\u0275cmf",moduleName:Kt},Qt.moduleDef={name:"\u0275mod",moduleName:Kt},Qt.moduleProviderDef={name:"\u0275mpd",moduleName:Kt},Qt.RegisterModuleFactoryFn={name:"\u0275registerModuleFactory",moduleName:Kt},Qt.inject={name:"inject",moduleName:Kt},Qt.INJECTOR={name:"INJECTOR",moduleName:Kt},Qt.Injector={name:"Injector",moduleName:Kt},Qt.defineInjectable={name:"defineInjectable",moduleName:Kt},Qt.InjectableDef={name:"\u0275InjectableDef",moduleName:Kt},Qt.ViewEncapsulation={name:"ViewEncapsulation",moduleName:Kt},Qt.ChangeDetectionStrategy={name:"ChangeDetectionStrategy",moduleName:Kt},Qt.SecurityContext={name:"SecurityContext",moduleName:Kt},Qt.LOCALE_ID={name:"LOCALE_ID",moduleName:Kt},Qt.TRANSLATIONS_FORMAT={name:"TRANSLATIONS_FORMAT",moduleName:Kt},Qt.inlineInterpolate={name:"\u0275inlineInterpolate",moduleName:Kt},Qt.interpolate={name:"\u0275interpolate",moduleName:Kt},Qt.EMPTY_ARRAY={name:"\u0275EMPTY_ARRAY",moduleName:Kt},Qt.EMPTY_MAP={name:"\u0275EMPTY_MAP",moduleName:Kt},Qt.Renderer={name:"Renderer",moduleName:Kt},Qt.viewDef={name:"\u0275vid",moduleName:Kt},Qt.elementDef={name:"\u0275eld",moduleName:Kt},Qt.anchorDef={name:"\u0275and",moduleName:Kt},Qt.textDef={name:"\u0275ted",moduleName:Kt},Qt.directiveDef={name:"\u0275did",moduleName:Kt},Qt.providerDef={name:"\u0275prd",moduleName:Kt},Qt.queryDef={name:"\u0275qud",moduleName:Kt},Qt.pureArrayDef={name:"\u0275pad",moduleName:Kt},Qt.pureObjectDef={name:"\u0275pod",moduleName:Kt},Qt.purePipeDef={name:"\u0275ppd",moduleName:Kt},Qt.pipeDef={name:"\u0275pid",moduleName:Kt},Qt.nodeValue={name:"\u0275nov",moduleName:Kt},Qt.ngContentDef={name:"\u0275ncd",moduleName:Kt},Qt.unwrapValue={name:"\u0275unv",moduleName:Kt},Qt.createRendererType2={name:"\u0275crt",moduleName:Kt},Qt.RendererType2={name:"RendererType2",moduleName:Kt},Qt.ViewDefinition={name:"\u0275ViewDefinition",moduleName:Kt},Qt.createComponentFactory={name:"\u0275ccf",moduleName:Kt},Qt.setClassMetadata={name:"\u0275setClassMetadata",moduleName:Kt};class Yt{constructor(e,t,n){this.filePath=e,this.name=t,this.members=n}assertNoMembers(){if(this.members.length)throw new Error(`Illegal state: symbol without members expected, but got ${JSON.stringify(this)}.`)}}class Zt{constructor(){this.cache=new Map}get(e,t,n){const r=`"${e}".${t}${(n=n||[]).length?`.${n.join(".")}`:""}`;let i=this.cache.get(r);return i||(i=new Yt(e,t,n),this.cache.set(r,i)),i}}const Jt=/^(?:(?:\[([^\]]+)\])|(?:\(([^\)]+)\)))|(\@[-\w]+)$/;function en(e){return e.replace(/\W/g,"_")}let tn=0;function nn(e){if(!e||!e.reference)return null;const t=e.reference;if(t instanceof Yt)return t.name;if(t.__anonymousType)return t.__anonymousType;let n=Mt(t);return n.indexOf("(")>=0?(n=`anonymous_${tn++}`,t.__anonymousType=n):n=en(n),n}function rn(e){const t=e.reference;return t instanceof Yt?t.filePath:`./${Mt(t)}`}function sn(e,t){return`View_${nn({reference:e})}_${t}`}function on(e){return`RenderType_${nn({reference:e})}`}function an(e){return`${nn({reference:e})}NgFactory`}var un;function cn(e){return null!=e.value?en(e.value):nn(e.identifier)}function ln(e){return null!=e.identifier?e.identifier.reference:e.value}!function(e){e[e.Pipe=0]="Pipe",e[e.Directive=1]="Directive",e[e.NgModule=2]="NgModule",e[e.Injectable=3]="Injectable"}(un||(un={}));class hn{constructor({moduleUrl:e,styles:t,styleUrls:n}={}){this.moduleUrl=e||null,this.styles=yn(t),this.styleUrls=yn(n)}}class dn{constructor({encapsulation:e,template:t,templateUrl:n,htmlAst:r,styles:i,styleUrls:s,externalStylesheets:o,animations:a,ngContentSelectors:u,interpolation:c,isInline:l,preserveWhitespaces:h}){if(this.encapsulation=e,this.template=t,this.templateUrl=n,this.htmlAst=r,this.styles=yn(i),this.styleUrls=yn(s),this.externalStylesheets=yn(o),this.animations=a?_n(a):[],this.ngContentSelectors=u||[],c&&2!=c.length)throw new Error("'interpolation' should have a start and an end symbol.");this.interpolation=c,this.isInline=l,this.preserveWhitespaces=h}toSummary(){return{ngContentSelectors:this.ngContentSelectors,encapsulation:this.encapsulation,styles:this.styles,animations:this.animations}}}class pn{static create({isHost:e,type:t,isComponent:n,selector:r,exportAs:i,changeDetection:s,inputs:o,outputs:a,host:u,providers:c,viewProviders:l,queries:h,guards:d,viewQueries:p,entryComponents:f,template:m,componentViewType:g,rendererType:y,componentFactory:v}){const _={},b={},w={};null!=u&&Object.keys(u).forEach(e=>{const t=u[e],n=e.match(Jt);null===n?w[e]=t:null!=n[1]?b[n[1]]=t:null!=n[2]&&(_[n[2]]=t)});const E={};null!=o&&o.forEach(e=>{const t=bt(e,[e,e]);E[t[0]]=t[1]});const C={};return null!=a&&a.forEach(e=>{const t=bt(e,[e,e]);C[t[0]]=t[1]}),new pn({isHost:e,type:t,isComponent:!!n,selector:r,exportAs:i,changeDetection:s,inputs:E,outputs:C,hostListeners:_,hostProperties:b,hostAttributes:w,providers:c,viewProviders:l,queries:h,guards:d,viewQueries:p,entryComponents:f,template:m,componentViewType:g,rendererType:y,componentFactory:v})}constructor({isHost:e,type:t,isComponent:n,selector:r,exportAs:i,changeDetection:s,inputs:o,outputs:a,hostListeners:u,hostProperties:c,hostAttributes:l,providers:h,viewProviders:d,queries:p,guards:f,viewQueries:m,entryComponents:g,template:y,componentViewType:v,rendererType:_,componentFactory:b}){this.isHost=!!e,this.type=t,this.isComponent=n,this.selector=r,this.exportAs=i,this.changeDetection=s,this.inputs=o,this.outputs=a,this.hostListeners=u,this.hostProperties=c,this.hostAttributes=l,this.providers=yn(h),this.viewProviders=yn(d),this.queries=yn(p),this.guards=f,this.viewQueries=yn(m),this.entryComponents=yn(g),this.template=y,this.componentViewType=v,this.rendererType=_,this.componentFactory=b}toSummary(){return{summaryKind:un.Directive,type:this.type,isComponent:this.isComponent,selector:this.selector,exportAs:this.exportAs,inputs:this.inputs,outputs:this.outputs,hostListeners:this.hostListeners,hostProperties:this.hostProperties,hostAttributes:this.hostAttributes,providers:this.providers,viewProviders:this.viewProviders,queries:this.queries,guards:this.guards,viewQueries:this.viewQueries,entryComponents:this.entryComponents,changeDetection:this.changeDetection,template:this.template&&this.template.toSummary(),componentViewType:this.componentViewType,rendererType:this.rendererType,componentFactory:this.componentFactory}}}class fn{constructor({type:e,name:t,pure:n}){this.type=e,this.name=t,this.pure=!!n}toSummary(){return{summaryKind:un.Pipe,type:this.type,name:this.name,pure:this.pure}}}class mn{constructor({type:e,providers:t,declaredDirectives:n,exportedDirectives:r,declaredPipes:i,exportedPipes:s,entryComponents:o,bootstrapComponents:a,importedModules:u,exportedModules:c,schemas:l,transitiveModule:h,id:d}){this.type=e||null,this.declaredDirectives=yn(n),this.exportedDirectives=yn(r),this.declaredPipes=yn(i),this.exportedPipes=yn(s),this.providers=yn(t),this.entryComponents=yn(o),this.bootstrapComponents=yn(a),this.importedModules=yn(u),this.exportedModules=yn(c),this.schemas=yn(l),this.id=d||null,this.transitiveModule=h||null}toSummary(){const e=this.transitiveModule;return{summaryKind:un.NgModule,type:this.type,entryComponents:e.entryComponents,providers:e.providers,modules:e.modules,exportedDirectives:e.exportedDirectives,exportedPipes:e.exportedPipes}}}class gn{constructor(){this.directivesSet=new Set,this.directives=[],this.exportedDirectivesSet=new Set,this.exportedDirectives=[],this.pipesSet=new Set,this.pipes=[],this.exportedPipesSet=new Set,this.exportedPipes=[],this.modulesSet=new Set,this.modules=[],this.entryComponentsSet=new Set,this.entryComponents=[],this.providers=[]}addProvider(e,t){this.providers.push({provider:e,module:t})}addDirective(e){this.directivesSet.has(e.reference)||(this.directivesSet.add(e.reference),this.directives.push(e))}addExportedDirective(e){this.exportedDirectivesSet.has(e.reference)||(this.exportedDirectivesSet.add(e.reference),this.exportedDirectives.push(e))}addPipe(e){this.pipesSet.has(e.reference)||(this.pipesSet.add(e.reference),this.pipes.push(e))}addExportedPipe(e){this.exportedPipesSet.has(e.reference)||(this.exportedPipesSet.add(e.reference),this.exportedPipes.push(e))}addModule(e){this.modulesSet.has(e.reference)||(this.modulesSet.add(e.reference),this.modules.push(e))}addEntryComponent(e){this.entryComponentsSet.has(e.componentType)||(this.entryComponentsSet.add(e.componentType),this.entryComponents.push(e))}}function yn(e){return e||[]}class vn{constructor(e,{useClass:t,useValue:n,useExisting:r,useFactory:i,deps:s,multi:o}){this.token=e,this.useClass=t||null,this.useValue=n,this.useExisting=r,this.useFactory=i||null,this.dependencies=s||null,this.multi=!!o}}function _n(e){return e.reduce((e,t)=>{const n=Array.isArray(t)?_n(t):t;return e.concat(n)},[])}function bn(e){return e.replace(/(\w+:\/\/[\w:-]+)?(\/+)?/,"ng:///")}function wn(e,t,n){let r;return r=n.isInline?t.type.reference instanceof Yt?`${t.type.reference.filePath}.${t.type.reference.name}.html`:`${nn(e)}/${nn(t.type)}.html`:n.templateUrl,t.type.reference instanceof Yt?r:bn(r)}const En="@angular/core";class Cn{}Cn.NEW_METHOD="factory",Cn.TRANSFORM_METHOD="transform",Cn.PATCH_DEPS="patchedDeps",Cn.namespaceHTML={name:"\u0275namespaceHTML",moduleName:En},Cn.namespaceMathML={name:"\u0275namespaceMathML",moduleName:En},Cn.namespaceSVG={name:"\u0275namespaceSVG",moduleName:En},Cn.element={name:"\u0275element",moduleName:En},Cn.elementStart={name:"\u0275elementStart",moduleName:En},Cn.elementEnd={name:"\u0275elementEnd",moduleName:En},Cn.elementProperty={name:"\u0275elementProperty",moduleName:En},Cn.elementAttribute={name:"\u0275elementAttribute",moduleName:En},Cn.elementClassProp={name:"\u0275elementClassProp",moduleName:En},Cn.elementContainerStart={name:"\u0275elementContainerStart",moduleName:En},Cn.elementContainerEnd={name:"\u0275elementContainerEnd",moduleName:En},Cn.elementStyling={name:"\u0275elementStyling",moduleName:En},Cn.elementStylingMap={name:"\u0275elementStylingMap",moduleName:En},Cn.elementStyleProp={name:"\u0275elementStyleProp",moduleName:En},Cn.elementStylingApply={name:"\u0275elementStylingApply",moduleName:En},Cn.containerCreate={name:"\u0275container",moduleName:En},Cn.nextContext={name:"\u0275nextContext",moduleName:En},Cn.templateCreate={name:"\u0275template",moduleName:En},Cn.text={name:"\u0275text",moduleName:En},Cn.textBinding={name:"\u0275textBinding",moduleName:En},Cn.bind={name:"\u0275bind",moduleName:En},Cn.enableBindings={name:"\u0275enableBindings",moduleName:En},Cn.disableBindings={name:"\u0275disableBindings",moduleName:En},Cn.getCurrentView={name:"\u0275getCurrentView",moduleName:En},Cn.restoreView={name:"\u0275restoreView",moduleName:En},Cn.interpolation1={name:"\u0275interpolation1",moduleName:En},Cn.interpolation2={name:"\u0275interpolation2",moduleName:En},Cn.interpolation3={name:"\u0275interpolation3",moduleName:En},Cn.interpolation4={name:"\u0275interpolation4",moduleName:En},Cn.interpolation5={name:"\u0275interpolation5",moduleName:En},Cn.interpolation6={name:"\u0275interpolation6",moduleName:En},Cn.interpolation7={name:"\u0275interpolation7",moduleName:En},Cn.interpolation8={name:"\u0275interpolation8",moduleName:En},Cn.interpolationV={name:"\u0275interpolationV",moduleName:En},Cn.pureFunction0={name:"\u0275pureFunction0",moduleName:En},Cn.pureFunction1={name:"\u0275pureFunction1",moduleName:En},Cn.pureFunction2={name:"\u0275pureFunction2",moduleName:En},Cn.pureFunction3={name:"\u0275pureFunction3",moduleName:En},Cn.pureFunction4={name:"\u0275pureFunction4",moduleName:En},Cn.pureFunction5={name:"\u0275pureFunction5",moduleName:En},Cn.pureFunction6={name:"\u0275pureFunction6",moduleName:En},Cn.pureFunction7={name:"\u0275pureFunction7",moduleName:En},Cn.pureFunction8={name:"\u0275pureFunction8",moduleName:En},Cn.pureFunctionV={name:"\u0275pureFunctionV",moduleName:En},Cn.pipeBind1={name:"\u0275pipeBind1",moduleName:En},Cn.pipeBind2={name:"\u0275pipeBind2",moduleName:En},Cn.pipeBind3={name:"\u0275pipeBind3",moduleName:En},Cn.pipeBind4={name:"\u0275pipeBind4",moduleName:En},Cn.pipeBindV={name:"\u0275pipeBindV",moduleName:En},Cn.i18n={name:"\u0275i18n",moduleName:En},Cn.i18nAttributes={name:"\u0275i18nAttributes",moduleName:En},Cn.i18nExp={name:"\u0275i18nExp",moduleName:En},Cn.i18nStart={name:"\u0275i18nStart",moduleName:En},Cn.i18nEnd={name:"\u0275i18nEnd",moduleName:En},Cn.i18nApply={name:"\u0275i18nApply",moduleName:En},Cn.i18nPostprocess={name:"\u0275i18nPostprocess",moduleName:En},Cn.load={name:"\u0275load",moduleName:En},Cn.loadQueryList={name:"\u0275loadQueryList",moduleName:En},Cn.pipe={name:"\u0275pipe",moduleName:En},Cn.projection={name:"\u0275projection",moduleName:En},Cn.projectionDef={name:"\u0275projectionDef",moduleName:En},Cn.reference={name:"\u0275reference",moduleName:En},Cn.inject={name:"inject",moduleName:En},Cn.injectAttribute={name:"\u0275injectAttribute",moduleName:En},Cn.directiveInject={name:"\u0275directiveInject",moduleName:En},Cn.templateRefExtractor={name:"\u0275templateRefExtractor",moduleName:En},Cn.defineBase={name:"\u0275defineBase",moduleName:En},Cn.BaseDef={name:"\u0275BaseDef",moduleName:En},Cn.defineComponent={name:"\u0275defineComponent",moduleName:En},Cn.ComponentDefWithMeta={name:"\u0275ComponentDefWithMeta",moduleName:En},Cn.defineDirective={name:"\u0275defineDirective",moduleName:En},Cn.DirectiveDefWithMeta={name:"\u0275DirectiveDefWithMeta",moduleName:En},Cn.InjectorDef={name:"\u0275InjectorDef",moduleName:En},Cn.defineInjector={name:"defineInjector",moduleName:En},Cn.NgModuleDefWithMeta={name:"\u0275NgModuleDefWithMeta",moduleName:En},Cn.defineNgModule={name:"\u0275defineNgModule",moduleName:En},Cn.PipeDefWithMeta={name:"\u0275PipeDefWithMeta",moduleName:En},Cn.definePipe={name:"\u0275definePipe",moduleName:En},Cn.query={name:"\u0275query",moduleName:En},Cn.queryRefresh={name:"\u0275queryRefresh",moduleName:En},Cn.registerContentQuery={name:"\u0275registerContentQuery",moduleName:En},Cn.NgOnChangesFeature={name:"\u0275NgOnChangesFeature",moduleName:En},Cn.InheritDefinitionFeature={name:"\u0275InheritDefinitionFeature",moduleName:En},Cn.ProvidersFeature={name:"\u0275ProvidersFeature",moduleName:En},Cn.listener={name:"\u0275listener",moduleName:En},Cn.getFactoryOf={name:"\u0275getFactoryOf",moduleName:En},Cn.getInheritedFactory={name:"\u0275getInheritedFactory",moduleName:En},Cn.sanitizeHtml={name:"\u0275sanitizeHtml",moduleName:En},Cn.sanitizeStyle={name:"\u0275sanitizeStyle",moduleName:En},Cn.defaultStyleSanitizer={name:"\u0275defaultStyleSanitizer",moduleName:En},Cn.sanitizeResourceUrl={name:"\u0275sanitizeResourceUrl",moduleName:En},Cn.sanitizeScript={name:"\u0275sanitizeScript",moduleName:En},Cn.sanitizeUrl={name:"\u0275sanitizeUrl",moduleName:En};class Sn{constructor(e,t,n,r,i,s){this.nodes=e,this.placeholders=t,this.placeholderToMessage=n,this.meaning=r,this.description=i,this.id=s,e.length?this.sources=[{filePath:e[0].sourceSpan.start.file.url,startLine:e[0].sourceSpan.start.line+1,startCol:e[0].sourceSpan.start.col+1,endLine:e[e.length-1].sourceSpan.end.line+1,endCol:e[0].sourceSpan.start.col+1}]:this.sources=[]}}class Tn{constructor(e,t){this.value=e,this.sourceSpan=t}visit(e,t){return e.visitText(this,t)}}class xn{constructor(e,t){this.children=e,this.sourceSpan=t}visit(e,t){return e.visitContainer(this,t)}}class An{constructor(e,t,n,r){this.expression=e,this.type=t,this.cases=n,this.sourceSpan=r}visit(e,t){return e.visitIcu(this,t)}}class Dn{constructor(e,t,n,r,i,s,o){this.tag=e,this.attrs=t,this.startName=n,this.closeName=r,this.children=i,this.isVoid=s,this.sourceSpan=o}visit(e,t){return e.visitTagPlaceholder(this,t)}}class In{constructor(e,t,n){this.value=e,this.name=t,this.sourceSpan=n}visit(e,t){return e.visitPlaceholder(this,t)}}class Nn{constructor(e,t,n){this.value=e,this.name=t,this.sourceSpan=n}visit(e,t){return e.visitIcuPlaceholder(this,t)}}class On{visitText(e,t){}visitContainer(e,t){e.children.forEach(e=>e.visit(this))}visitIcu(e,t){Object.keys(e.cases).forEach(t=>{e.cases[t].visit(this)})}visitTagPlaceholder(e,t){e.children.forEach(e=>e.visit(this))}visitPlaceholder(e,t){}visitIcuPlaceholder(e,t){}}function kn(e){return e.id||function(e){const t=Pt(e),n=function(e,t){const n=Array(e.length+3>>>2);for(let r=0;r<n.length;r++)n[r]=Kn(e,4*r,t);return n}(t,Un.Big),r=8*t.length,i=new Array(80);let[s,o,a,u,c]=[1732584193,4023233417,2562383102,271733878,3285377520];n[r>>5]|=128<<24-r%32,n[15+(r+64>>9<<4)]=r;for(let l=0;l<n.length;l+=16){const[e,t,r,h,d]=[s,o,a,u,c];for(let p=0;p<80;p++){i[p]=p<16?n[l+p]:zn(i[p-3]^i[p-8]^i[p-14]^i[p-16],1);const[e,t]=Ln(p,o,a,u),r=[zn(s,5),e,c,t,i[p]].reduce(qn);[c,u,a,o,s]=[u,a,zn(o,30),s,r]}[s,o,a,u,c]=[qn(s,e),qn(o,t),qn(a,r),qn(u,h),qn(c,d)]}return function(e){let t="";for(let n=0;n<e.length;n++){const r=Wn(e,n);t+=(r>>>4).toString(16)+(15&r).toString(16)}return t.toLowerCase()}(Qn([s,o,a,u,c]))}((t=e.nodes,t.map(e=>e.visit(Rn,null))).join("")+`[${e.meaning}]`);var t}function Pn(e){if(e.id)return e.id;const t=new Fn;return function(e,t){let[n,r]=Vn(e);if(t){const[e,i]=Vn(t);[n,r]=function([e,t],[n,r]){const[i,s]=$n(t,r);return[qn(qn(e,n),i),s]}(function([e,t],n){return[e<<n|t>>>32-n,t<<n|e>>>32-n]}([n,r],1),[e,i])}return function(e){let t="",n="1";for(let r=e.length-1;r>=0;r--)t=Gn(t,Xn(Wn(e,r),n)),n=Xn(256,n);return t.split("").reverse().join("")}(Qn([2147483647&n,r]))}(e.nodes.map(e=>e.visit(t,null)).join(""),e.meaning)}class Mn{visitText(e,t){return e.value}visitContainer(e,t){return`[${e.children.map(e=>e.visit(this)).join(", ")}]`}visitIcu(e,t){const n=Object.keys(e.cases).map(t=>`${t} {${e.cases[t].visit(this)}}`);return`{${e.expression}, ${e.type}, ${n.join(", ")}}`}visitTagPlaceholder(e,t){return e.isVoid?`<ph tag name="${e.startName}"/>`:`<ph tag name="${e.startName}">${e.children.map(e=>e.visit(this)).join(", ")}</ph name="${e.closeName}">`}visitPlaceholder(e,t){return e.value?`<ph name="${e.name}">${e.value}</ph>`:`<ph name="${e.name}"/>`}visitIcuPlaceholder(e,t){return`<ph icu name="${e.name}">${e.value.visit(this)}</ph>`}}const Rn=new Mn;class Fn extends Mn{visitIcu(e,t){let n=Object.keys(e.cases).map(t=>`${t} {${e.cases[t].visit(this)}}`);return`{${e.type}, ${n.join(", ")}}`}}function Ln(e,t,n,r){return e<20?[t&n|~t&r,1518500249]:e<40?[t^n^r,1859775393]:e<60?[t&n|t&r|n&r,2400959708]:[t^n^r,3395469782]}function Vn(e){const t=Pt(e);let[n,r]=[jn(t,0),jn(t,102072)];return 0!=n||0!=r&&1!=r||(n^=319790063,r^=-1801410264),[n,r]}function jn(e,t){let n,[r,i]=[2654435769,2654435769];const s=e.length;for(n=0;n+12<=s;n+=12)r=qn(r,Kn(e,n,Un.Little)),i=qn(i,Kn(e,n+4,Un.Little)),t=qn(t,Kn(e,n+8,Un.Little)),[r,i,t]=Bn([r,i,t]);return r=qn(r,Kn(e,n,Un.Little)),i=qn(i,Kn(e,n+4,Un.Little)),t=qn(t,s),Bn([r,i,t=qn(t,Kn(e,n+8,Un.Little)<<8)])[2]}function Bn([e,t,n]){return e=Hn(e,t),e=Hn(e,n),e^=n>>>13,t=Hn(t,n),t=Hn(t,e),t^=e<<8,n=Hn(n,e),n=Hn(n,t),n^=t>>>13,e=Hn(e,t),e=Hn(e,n),e^=n>>>12,t=Hn(t,n),t=Hn(t,e),t^=e<<16,n=Hn(n,e),n=Hn(n,t),n^=t>>>5,e=Hn(e,t),e=Hn(e,n),e^=n>>>3,t=Hn(t,n),t=Hn(t,e),t^=e<<10,n=Hn(n,e),n=Hn(n,t),[e,t,n^=t>>>15]}var Un;function qn(e,t){return $n(e,t)[1]}function $n(e,t){const n=(65535&e)+(65535&t),r=(e>>>16)+(t>>>16)+(n>>>16);return[r>>>16,r<<16|65535&n]}function Hn(e,t){const n=(65535&e)-(65535&t);return(e>>16)-(t>>16)+(n>>16)<<16|65535&n}function zn(e,t){return e<<t|e>>>32-t}function Wn(e,t){return t>=e.length?0:255&e.charCodeAt(t)}function Kn(e,t,n){let r=0;if(n===Un.Big)for(let i=0;i<4;i++)r+=Wn(e,t+i)<<24-8*i;else for(let i=0;i<4;i++)r+=Wn(e,t+i)<<8*i;return r}function Qn(e){return e.reduce((e,t)=>e+function(e){let t="";for(let n=0;n<4;n++)t+=String.fromCharCode(e>>>8*(3-n)&255);return t}(t),"")}function Gn(e,t){let n="";const r=Math.max(e.length,t.length);for(let i=0,s=0;i<r||s;i++){const r=s+ +(e[i]||0)+ +(t[i]||0);r>=10?(s=1,n+=r-10):(s=0,n+=r)}return n}function Xn(e,t){let n="",r=t;for(;0!==e;e>>>=1)1&e&&(n=Gn(n,r)),r=Gn(r,r);return n}!function(e){e[e.Little=0]="Little",e[e.Big=1]="Big"}(Un||(Un={}));class Yn{createNameMapper(e){return null}}class Zn extends On{constructor(e,t){super(),this.mapName=t,this.internalToPublic={},this.publicToNextId={},this.publicToInternal={},e.nodes.forEach(e=>e.visit(this))}toPublicName(e){return this.internalToPublic.hasOwnProperty(e)?this.internalToPublic[e]:null}toInternalName(e){return this.publicToInternal.hasOwnProperty(e)?this.publicToInternal[e]:null}visitText(e,t){return null}visitTagPlaceholder(e,t){this.visitPlaceholderName(e.startName),super.visitTagPlaceholder(e,t),this.visitPlaceholderName(e.closeName)}visitPlaceholder(e,t){this.visitPlaceholderName(e.name)}visitIcuPlaceholder(e,t){this.visitPlaceholderName(e.name)}visitPlaceholderName(e){if(!e||this.internalToPublic.hasOwnProperty(e))return;let t=this.mapName(e);if(this.publicToInternal.hasOwnProperty(t)){const e=this.publicToNextId[t];this.publicToNextId[t]=e+1,t=`${t}_${e}`}else this.publicToNextId[t]=1;this.internalToPublic[e]=t,this.publicToInternal[t]=e}}const Jn=new class{visitTag(e){const t=this._serializeAttributes(e.attrs);if(0==e.children.length)return`<${e.name}${t}/>`;const n=e.children.map(e=>e.visit(this));return`<${e.name}${t}>${n.join("")}</${e.name}>`}visitText(e){return e.value}visitDeclaration(e){return`<?xml${this._serializeAttributes(e.attrs)} ?>`}_serializeAttributes(e){const t=Object.keys(e).map(t=>`${t}="${e[t]}"`).join(" ");return t.length>0?" "+t:""}visitDoctype(e){return`<!DOCTYPE ${e.rootTag} [\n${e.dtd}\n]>`}};function er(e){return e.map(e=>e.visit(Jn)).join("")}class tr{constructor(e){this.attrs={},Object.keys(e).forEach(t=>{this.attrs[t]=ar(e[t])})}visit(e){return e.visitDeclaration(this)}}class nr{constructor(e,t){this.rootTag=e,this.dtd=t}visit(e){return e.visitDoctype(this)}}class rr{constructor(e,t={},n=[]){this.name=e,this.children=n,this.attrs={},Object.keys(t).forEach(e=>{this.attrs[e]=ar(t[e])})}visit(e){return e.visitTag(this)}}class ir{constructor(e){this.value=ar(e)}visit(e){return e.visitText(this)}}class sr extends ir{constructor(e=0){super(`\n${new Array(e+1).join(" ")}`)}}const or=[[/&/g,"&amp;"],[/"/g,"&quot;"],[/'/g,"&apos;"],[/</g,"&lt;"],[/>/g,"&gt;"]];function ar(e){return or.reduce((e,t)=>e.replace(t[0],t[1]),e)}const ur="messagebundle",cr="msg",lr="ph",hr="ex",dr="source",pr='<!ELEMENT messagebundle (msg)*>\n<!ATTLIST messagebundle class CDATA #IMPLIED>\n\n<!ELEMENT msg (#PCDATA|ph|source)*>\n<!ATTLIST msg id CDATA #IMPLIED>\n<!ATTLIST msg seq CDATA #IMPLIED>\n<!ATTLIST msg name CDATA #IMPLIED>\n<!ATTLIST msg desc CDATA #IMPLIED>\n<!ATTLIST msg meaning CDATA #IMPLIED>\n<!ATTLIST msg obsolete (obsolete) #IMPLIED>\n<!ATTLIST msg xml:space (default|preserve) "default">\n<!ATTLIST msg is_hidden CDATA #IMPLIED>\n\n<!ELEMENT source (#PCDATA)>\n\n<!ELEMENT ph (#PCDATA|ex)*>\n<!ATTLIST ph name CDATA #REQUIRED>\n\n<!ELEMENT ex (#PCDATA)>';class fr extends Yn{write(e,t){const n=new yr,r=new mr;let i=new rr(ur);return e.forEach(e=>{const t={id:e.id};e.description&&(t.desc=e.description),e.meaning&&(t.meaning=e.meaning);let n=[];e.sources.forEach(e=>{n.push(new rr(dr,{},[new ir(`${e.filePath}:${e.startLine}${e.endLine!==e.startLine?","+e.endLine:""}`)]))}),i.children.push(new sr(2),new rr(cr,t,[...n,...r.serialize(e.nodes)]))}),i.children.push(new sr),er([new tr({version:"1.0",encoding:"UTF-8"}),new sr,new nr(ur,pr),new sr,n.addDefaultExamples(i),new sr])}load(e,t){throw new Error("Unsupported")}digest(e){return gr(e)}createNameMapper(e){return new Zn(e,vr)}}class mr{visitText(e,t){return[new ir(e.value)]}visitContainer(e,t){const n=[];return e.children.forEach(e=>n.push(...e.visit(this))),n}visitIcu(e,t){const n=[new ir(`{${e.expressionPlaceholder}, ${e.type}, `)];return Object.keys(e.cases).forEach(t=>{n.push(new ir(`${t} {`),...e.cases[t].visit(this),new ir("} "))}),n.push(new ir("}")),n}visitTagPlaceholder(e,t){const n=new ir(`<${e.tag}>`),r=new rr(hr,{},[n]),i=new rr(lr,{name:e.startName},[r,n]);if(e.isVoid)return[i];const s=new ir(`</${e.tag}>`),o=new rr(hr,{},[s]),a=new rr(lr,{name:e.closeName},[o,s]);return[i,...this.serialize(e.children),a]}visitPlaceholder(e,t){const n=new ir(`{{${e.value}}}`),r=new rr(hr,{},[n]);return[new rr(lr,{name:e.name},[r,n])]}visitIcuPlaceholder(e,t){const n=e.value.expression,r=e.value.type,i=Object.keys(e.value.cases).map(e=>e+" {...}").join(" "),s=new ir(`{${n}, ${r}, ${i}}`),o=new rr(hr,{},[s]);return[new rr(lr,{name:e.name},[o,s])]}serialize(e){return[].concat(...e.map(e=>e.visit(this)))}}function gr(e){return Pn(e)}class yr{addDefaultExamples(e){return e.visit(this),e}visitTag(e){if(e.name===lr){if(!e.children||0==e.children.length){const t=new ir(e.attrs.name||"...");e.children=[new rr(hr,{},[t])]}}else e.children&&e.children.forEach(e=>e.visit(this))}visitText(e){}visitDeclaration(e){}visitDoctype(e){}}function vr(e){return e.toUpperCase().replace(/[^A-Z0-9_]/g,"_")}function _r(e,t=!1){return ft(Object.keys(e).map(n=>({key:n,quoted:t,value:e[n]})))}const br="MSG_",wr="goog.getMsg",Er="BACKUP_MESSAGE_ID",Cr=new RegExp(Er),Sr="|",Tr="@@",xr="i18n",Ar="i18n-",Dr="VAR_",Ir="I18N_EXP_",Nr="\ufffd";function Or(e,t,n){const r=[yt(t)];n&&Object.keys(n).length&&r.push(_r(n,!0));const i=ct(wr).callFn(r);return e.set(i).toDeclStmt(oe,[qe.Final])}function kr(e){return e===xr||e.startsWith(Ar)}function Pr(e){return e instanceof Sn}function Mr(e){return Pr(e)&&1===e.nodes.length&&e.nodes[0]instanceof An}function Rr(e){return{id:e.id||"",meaning:e.meaning||"",description:e.description||""}}function Fr(e){return e.nodes[0]}function Lr(e,t=0){return`${Nr}${e}${t>0?`:${t}`:""}${Nr}`}function Vr(e){const t={};return e.forEach((e,n)=>{t[n]=yt(e.length>1?`[${e.join("|")}]`:e[0])}),t}function jr(e,t,...n){const r=e.get(t)||[];r.push(...n),e.set(t,r)}function Br(e,t=0,n=0){const r=t,i=new Map,s=e instanceof Sn?e.nodes.find(e=>e instanceof xn):e;return s&&s.children.filter(e=>e instanceof In).forEach((e,t)=>{const s=Lr(r+t,n);jr(i,e.name,s)}),i}function Ur(e){const t=vr(e).split("_");if(1===t.length)return e.toLowerCase();let n;/^\d+$/.test(t[t.length-1])&&(n=t.pop());let r=t.shift().toLowerCase();return t.length&&(r+=t.map(e=>e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()).join("")),n?`${r}_${n}`:r}function qr(e,t,n,r={},i){const s=[],o=function(e){const t=[],{id:n,description:r,meaning:i}=e;if(n||r){const e=!!r&&Cr.test(r),i=n&&!e?`[${Er}:${n}] ${r||""}`:r;t.push({tagName:"desc",text:i.trim()})}return i&&t.push({tagName:"meaning",text:i}),0==t.length?null:new Je(t)}(n);if(o&&s.push(o),i){const n=ct(`${e.name}_RAW`);s.push(Or(n,t,r)),s.push(e.set(i(n)).toDeclStmt(oe,[qe.Final]))}else s.push(Or(e,t,r));return s}const $r="_t",Hr="ctx",zr="rf",Wr="_r",Kr="$implicit",Qr="ngNonBindable";function Gr(e,t){let n=null;return()=>(n||(e.push(new He($r,void 0,se)),n=ct(t)),n)}function Xr(e){if(this)throw new Error(`Builder ${this.constructor.name} doesn't support ${e} yet`);throw new Error(`Feature ${e} is not supported yet`)}function Yr(e){throw new Error(`Invalid state: Visitor ${this.constructor.name} doesn't handle undefined`)}function Zr(e){return Array.isArray(e)?pt(e.map(Zr)):yt(e,oe)}function Jr(e){return Object.getOwnPropertyNames(e).length>0?function(e,t=!1){return ft(Object.getOwnPropertyNames(e).map(n=>({key:n,quoted:t,value:Zr(e[n])})))}(e):null}function ei(e){for(;(t=e[e.length-1])instanceof Te&&null===t.value;)e.pop();var t;return e}class ti{constructor(){this.values=[]}set(e,t){t&&this.values.push({key:e,value:t,quoted:!1})}toLiteralMap(){return ft(this.values)}}function ni(e){const t={};return e.attributes.forEach(e=>{kr(e.name)||(t[e.name]=e.value)}),e.inputs.forEach(e=>{t[e.name]=""}),e.outputs.forEach(e=>{t[e.name]=""}),t}var ri,ii;function si(e){const t=ct("t"),n=[],r=ai(e)?t:new Pe(le.Or,t,e.type);let i=null;if(null!==e.deps)i=new Se(r,oi(e.deps,e.injectFn));else{const t=ct(`\u0275${e.name}_BaseFactory`),s=lt(Cn.getInheritedFactory),o=t.set(s.callFn([e.type])).toDeclStmt(oe,[qe.Exported,qe.Final]);n.push(o),i=t.callFn([r])}const s=i,o=[];let a=null;function u(e){const n=ct("r");return o.push(n.set(Be).toDeclStmt()),o.push(gt(t,[n.set(s).toStmt()],[n.set(e).toStmt()])),n}if(ai(e)&&e.delegateType===ri.Factory){const t=ct(`\u0275${e.name}_BaseFactory`),r=lt(Cn.getFactoryOf);if(e.delegate.isEquivalent(e.type))throw new Error("Illegal state: compiling factory that delegates to itself");const i=t.set(r.callFn([e.delegate])).toDeclStmt(oe,[qe.Exported,qe.Final]);n.push(i),a=u(t.callFn([]))}else if(ai(e)){const t=oi(e.delegateDeps,e.injectFn);a=u(new(e.delegateType===ri.Class?Se:Ce)(e.delegate,t))}else if(function(e){return void 0!==e.expression}(e))a=u(e.expression);else if(e.extraStatementFn){const e=ct("f");o.push(e.set(i).toDeclStmt()),a=e}else a=i;if(e.extraStatementFn){const t=e.extraStatementFn(a);o.push(...t)}return{factory:mt([new Oe("t",se)],[...o,new Ke(a)],oe,void 0,`${e.name}_Factory`),statements:n}}function oi(e,t){return e.map(e=>(function(e,t){switch(e.resolved){case ii.Token:{const n=0|(e.self?2:0)|(e.skipSelf?4:0)|(e.host?1:0)|(e.optional?8:0),r=[e.token];return(0!==n||e.optional)&&r.push(yt(n)),lt(t).callFn(r)}case ii.Attribute:return lt(Cn.injectAttribute).callFn([e.token]);default:return Xr(`Unknown R3ResolvedDependencyType: ${ii[e.resolved]}`)}})(e,t))}function ai(e){return void 0!==e.delegateType}function ui(e){return ft(Object.keys(e).map(t=>({key:t,value:e[t],quoted:!1})))}!function(e){e[e.Class=0]="Class",e[e.Function=1]="Function",e[e.Factory=2]="Factory"}(ri||(ri={})),function(e){e[e.Token=0]="Token",e[e.Attribute=1]="Attribute"}(ii||(ii={}));const ci=3,li="# sourceMappingURL=data:application/json;base64,";class hi{constructor(e=null){this.file=e,this.sourcesContent=new Map,this.lines=[],this.lastCol0=0,this.hasMappings=!1}addSource(e,t=null){return this.sourcesContent.has(e)||this.sourcesContent.set(e,t),this}addLine(){return this.lines.push([]),this.lastCol0=0,this}addMapping(e,t,n,r){if(!this.currentLine)throw new Error("A line must be added before mappings can be added");if(null!=t&&!this.sourcesContent.has(t))throw new Error(`Unknown source file "${t}"`);if(null==e)throw new Error("The column in the generated code must be provided");if(e<this.lastCol0)throw new Error("Mapping should be added in output order");if(t&&(null==n||null==r))throw new Error("The source location must be provided when a source url is provided");return this.hasMappings=!0,this.lastCol0=e,this.currentLine.push({col0:e,sourceUrl:t,sourceLine0:n,sourceCol0:r}),this}get currentLine(){return this.lines.slice(-1)[0]}toJSON(){if(!this.hasMappings)return null;const e=new Map,t=[],n=[];Array.from(this.sourcesContent.keys()).forEach((r,i)=>{e.set(r,i),t.push(r),n.push(this.sourcesContent.get(r)||null)});let r="",i=0,s=0,o=0,a=0;return this.lines.forEach(t=>{i=0,r+=t.map(t=>{let n=di(t.col0-i);return i=t.col0,null!=t.sourceUrl&&(n+=di(e.get(t.sourceUrl)-s),s=e.get(t.sourceUrl),n+=di(t.sourceLine0-o),o=t.sourceLine0,n+=di(t.sourceCol0-a),a=t.sourceCol0),n}).join(","),r+=";"}),r=r.slice(0,-1),{file:this.file||"",version:ci,sourceRoot:"",sources:t,sourcesContent:n,mappings:r}}toJsComment(){return this.hasMappings?"//"+li+function(e){let t="";e=Pt(e);for(let n=0;n<e.length;){const r=e.charCodeAt(n++),i=e.charCodeAt(n++),s=e.charCodeAt(n++);t+=fi(r>>2),t+=fi((3&r)<<4|(isNaN(i)?0:i>>4)),t+=isNaN(i)?"=":fi((15&i)<<2|s>>6),t+=isNaN(i)||isNaN(s)?"=":fi(63&s)}return t}(JSON.stringify(this,null,0)):""}}function di(e){e=e<0?1+(-e<<1):e<<1;let t="";do{let n=31&e;(e>>=5)>0&&(n|=32),t+=fi(n)}while(e>0);return t}const pi="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";function fi(e){if(e<0||e>=64)throw new Error("Can only encode value in the range [0, 63]");return pi[e]}const mi=/'|\\|\n|\r|\$/g,gi=/^[$A-Z_][0-9A-Z_$]*$/i,yi="  ",vi=ct("error",null,null),_i=ct("stack",null,null);class bi{constructor(e){this.indent=e,this.partsLength=0,this.parts=[],this.srcSpans=[]}}class wi{constructor(e){this._indent=e,this._classes=[],this._preambleLineCount=0,this._lines=[new bi(e)]}static createRoot(){return new wi(0)}get _currentLine(){return this._lines[this._lines.length-1]}println(e,t=""){this.print(e||null,t,!0)}lineIsEmpty(){return 0===this._currentLine.parts.length}lineLength(){return this._currentLine.indent*yi.length+this._currentLine.partsLength}print(e,t,n=!1){t.length>0&&(this._currentLine.parts.push(t),this._currentLine.partsLength+=t.length,this._currentLine.srcSpans.push(e&&e.sourceSpan||null)),n&&this._lines.push(new bi(this._indent))}removeEmptyLastLine(){this.lineIsEmpty()&&this._lines.pop()}incIndent(){this._indent++,this.lineIsEmpty()&&(this._currentLine.indent=this._indent)}decIndent(){this._indent--,this.lineIsEmpty()&&(this._currentLine.indent=this._indent)}pushClass(e){this._classes.push(e)}popClass(){return this._classes.pop()}get currentClass(){return this._classes.length>0?this._classes[this._classes.length-1]:null}toSource(){return this.sourceLines.map(e=>e.parts.length>0?Si(e.indent)+e.parts.join(""):"").join("\n")}toSourceMapGenerator(e,t=0){const n=new hi(e);let r=!1;const i=()=>{r||(n.addSource(e," ").addMapping(0,e,0,0),r=!0)};for(let s=0;s<t;s++)n.addLine(),i();return this.sourceLines.forEach((e,t)=>{n.addLine();const s=e.srcSpans,o=e.parts;let a=e.indent*yi.length,u=0;for(;u<s.length&&!s[u];)a+=o[u].length,u++;for(u<s.length&&0===t&&0===a?r=!0:i();u<s.length;){const e=s[u],t=e.start.file,r=e.start.line,i=e.start.col;for(n.addSource(t.url,t.content).addMapping(a,t.url,r,i),a+=o[u].length,u++;u<s.length&&(e===s[u]||!s[u]);)a+=o[u].length,u++}}),n}setPreambleLineCount(e){return this._preambleLineCount=e}spanOf(e,t){const n=this._lines[e-this._preambleLineCount];if(n){let e=t-Si(n.indent).length;for(let t=0;t<n.parts.length;t++){const r=n.parts[t];if(r.length>e)return n.srcSpans[t];e-=r.length}}return null}get sourceLines(){return this._lines.length&&0===this._lines[this._lines.length-1].parts.length?this._lines.slice(0,-1):this._lines}}class Ei{constructor(e){this._escapeDollarInStrings=e}visitExpressionStmt(e,t){return e.expr.visitExpression(this,t),t.println(e,";"),null}visitReturnStmt(e,t){return t.print(e,"return "),e.value.visitExpression(this,t),t.println(e,";"),null}visitIfStmt(e,t){t.print(e,"if ("),e.condition.visitExpression(this,t),t.print(e,") {");const n=null!=e.falseCase&&e.falseCase.length>0;return e.trueCase.length<=1&&!n?(t.print(e," "),this.visitAllStatements(e.trueCase,t),t.removeEmptyLastLine(),t.print(e," ")):(t.println(),t.incIndent(),this.visitAllStatements(e.trueCase,t),t.decIndent(),n&&(t.println(e,"} else {"),t.incIndent(),this.visitAllStatements(e.falseCase,t),t.decIndent())),t.println(e,"}"),null}visitThrowStmt(e,t){return t.print(e,"throw "),e.error.visitExpression(this,t),t.println(e,";"),null}visitCommentStmt(e,t){return e.multiline?t.println(e,`/* ${e.comment} */`):e.comment.split("\n").forEach(n=>{t.println(e,`// ${n}`)}),null}visitJSDocCommentStmt(e,t){return t.println(e,`/*${e.toString()}*/`),null}visitWriteVarExpr(e,t){const n=t.lineIsEmpty();return n||t.print(e,"("),t.print(e,`${e.name} = `),e.value.visitExpression(this,t),n||t.print(e,")"),null}visitWriteKeyExpr(e,t){const n=t.lineIsEmpty();return n||t.print(e,"("),e.receiver.visitExpression(this,t),t.print(e,"["),e.index.visitExpression(this,t),t.print(e,"] = "),e.value.visitExpression(this,t),n||t.print(e,")"),null}visitWritePropExpr(e,t){const n=t.lineIsEmpty();return n||t.print(e,"("),e.receiver.visitExpression(this,t),t.print(e,`.${e.name} = `),e.value.visitExpression(this,t),n||t.print(e,")"),null}visitInvokeMethodExpr(e,t){e.receiver.visitExpression(this,t);let n=e.name;return null!=e.builtin&&null==(n=this.getBuiltinMethodName(e.builtin))?null:(t.print(e,`.${n}(`),this.visitAllExpressions(e.args,t,","),t.print(e,")"),null)}visitInvokeFunctionExpr(e,t){return e.fn.visitExpression(this,t),t.print(e,"("),this.visitAllExpressions(e.args,t,","),t.print(e,")"),null}visitWrappedNodeExpr(e,t){throw new Error("Abstract emitter cannot visit WrappedNodeExpr.")}visitTypeofExpr(e,t){t.print(e,"typeof "),e.expr.visitExpression(this,t)}visitReadVarExpr(e,t){let n=e.name;if(null!=e.builtin)switch(e.builtin){case he.Super:n="super";break;case he.This:n="this";break;case he.CatchError:n=vi.name;break;case he.CatchStack:n=_i.name;break;default:throw new Error(`Unknown builtin variable ${e.builtin}`)}return t.print(e,n),null}visitInstantiateExpr(e,t){return t.print(e,"new "),e.classExpr.visitExpression(this,t),t.print(e,"("),this.visitAllExpressions(e.args,t,","),t.print(e,")"),null}visitLiteralExpr(e,t){const n=e.value;return"string"==typeof n?t.print(e,Ci(n,this._escapeDollarInStrings)):t.print(e,`${n}`),null}visitConditionalExpr(e,t){return t.print(e,"("),e.condition.visitExpression(this,t),t.print(e,"? "),e.trueCase.visitExpression(this,t),t.print(e,": "),e.falseCase.visitExpression(this,t),t.print(e,")"),null}visitNotExpr(e,t){return t.print(e,"!"),e.condition.visitExpression(this,t),null}visitAssertNotNullExpr(e,t){return e.condition.visitExpression(this,t),null}visitBinaryOperatorExpr(e,t){let n;switch(e.operator){case le.Equals:n="==";break;case le.Identical:n="===";break;case le.NotEquals:n="!=";break;case le.NotIdentical:n="!==";break;case le.And:n="&&";break;case le.BitwiseAnd:n="&";break;case le.Or:n="||";break;case le.Plus:n="+";break;case le.Minus:n="-";break;case le.Divide:n="/";break;case le.Multiply:n="*";break;case le.Modulo:n="%";break;case le.Lower:n="<";break;case le.LowerEquals:n="<=";break;case le.Bigger:n=">";break;case le.BiggerEquals:n=">=";break;default:throw new Error(`Unknown operator ${e.operator}`)}return e.parens&&t.print(e,"("),e.lhs.visitExpression(this,t),t.print(e,` ${n} `),e.rhs.visitExpression(this,t),e.parens&&t.print(e,")"),null}visitReadPropExpr(e,t){return e.receiver.visitExpression(this,t),t.print(e,"."),t.print(e,e.name),null}visitReadKeyExpr(e,t){return e.receiver.visitExpression(this,t),t.print(e,"["),e.index.visitExpression(this,t),t.print(e,"]"),null}visitLiteralArrayExpr(e,t){return t.print(e,"["),this.visitAllExpressions(e.entries,t,","),t.print(e,"]"),null}visitLiteralMapExpr(e,t){return t.print(e,"{"),this.visitAllObjects(n=>{t.print(e,`${Ci(n.key,this._escapeDollarInStrings,n.quoted)}:`),n.value.visitExpression(this,t)},e.entries,t,","),t.print(e,"}"),null}visitCommaExpr(e,t){return t.print(e,"("),this.visitAllExpressions(e.parts,t,","),t.print(e,")"),null}visitAllExpressions(e,t,n){this.visitAllObjects(e=>e.visitExpression(this,t),e,t,n)}visitAllObjects(e,t,n,r){let i=!1;for(let s=0;s<t.length;s++)s>0&&(n.lineLength()>80?(n.print(null,r,!0),i||(n.incIndent(),n.incIndent(),i=!0)):n.print(null,r,!1)),e(t[s]);i&&(n.decIndent(),n.decIndent())}visitAllStatements(e,t){e.forEach(e=>e.visitStatement(this,t))}}function Ci(e,t,n=!0){if(null==e)return null;const r=e.replace(mi,(...e)=>"$"==e[0]?t?"\\$":"$":"\n"==e[0]?"\\n":"\r"==e[0]?"\\r":`\\${e[0]}`);return n||!gi.test(r)?`'${r}'`:r}function Si(e){let t="";for(let n=0;n<e;n++)t+=yi;return t}class Ti extends Ei{constructor(){super(!1)}visitDeclareClassStmt(e,t){return t.pushClass(e),this._visitClassConstructor(e,t),null!=e.parent&&(t.print(e,`${e.name}.prototype = Object.create(`),e.parent.visitExpression(this,t),t.println(e,".prototype);")),e.getters.forEach(n=>this._visitClassGetter(e,n,t)),e.methods.forEach(n=>this._visitClassMethod(e,n,t)),t.popClass(),null}_visitClassConstructor(e,t){t.print(e,`function ${e.name}(`),null!=e.constructorMethod&&this._visitParams(e.constructorMethod.params,t),t.println(e,") {"),t.incIndent(),null!=e.constructorMethod&&e.constructorMethod.body.length>0&&(t.println(e,"var self = this;"),this.visitAllStatements(e.constructorMethod.body,t)),t.decIndent(),t.println(e,"}")}_visitClassGetter(e,t,n){n.println(e,`Object.defineProperty(${e.name}.prototype, '${t.name}', { get: function() {`),n.incIndent(),t.body.length>0&&(n.println(e,"var self = this;"),this.visitAllStatements(t.body,n)),n.decIndent(),n.println(e,"}});")}_visitClassMethod(e,t,n){n.print(e,`${e.name}.prototype.${t.name} = function(`),this._visitParams(t.params,n),n.println(e,") {"),n.incIndent(),t.body.length>0&&(n.println(e,"var self = this;"),this.visitAllStatements(t.body,n)),n.decIndent(),n.println(e,"};")}visitWrappedNodeExpr(e,t){throw new Error("Cannot emit a WrappedNodeExpr in Javascript.")}visitReadVarExpr(e,t){if(e.builtin===he.This)t.print(e,"self");else{if(e.builtin===he.Super)throw new Error("'super' needs to be handled at a parent ast node, not at the variable level!");super.visitReadVarExpr(e,t)}return null}visitDeclareVarStmt(e,t){return t.print(e,`var ${e.name}`),e.value&&(t.print(e," = "),e.value.visitExpression(this,t)),t.println(e,";"),null}visitCastExpr(e,t){return e.value.visitExpression(this,t),null}visitInvokeFunctionExpr(e,t){const n=e.fn;return n instanceof ge&&n.builtin===he.Super?(t.currentClass.parent.visitExpression(this,t),t.print(e,".call(this"),e.args.length>0&&(t.print(e,", "),this.visitAllExpressions(e.args,t,",")),t.print(e,")")):super.visitInvokeFunctionExpr(e,t),null}visitFunctionExpr(e,t){return t.print(e,`function${e.name?" "+e.name:""}(`),this._visitParams(e.params,t),t.println(e,") {"),t.incIndent(),this.visitAllStatements(e.statements,t),t.decIndent(),t.print(e,"}"),null}visitDeclareFunctionStmt(e,t){return t.print(e,`function ${e.name}(`),this._visitParams(e.params,t),t.println(e,") {"),t.incIndent(),this.visitAllStatements(e.statements,t),t.decIndent(),t.println(e,"}"),null}visitTryCatchStmt(e,t){t.println(e,"try {"),t.incIndent(),this.visitAllStatements(e.bodyStmts,t),t.decIndent(),t.println(e,`} catch (${vi.name}) {`),t.incIndent();const n=[_i.set(vi.prop("stack")).toDeclStmt(null,[qe.Final])].concat(e.catchStmts);return this.visitAllStatements(n,t),t.decIndent(),t.println(e,"}"),null}_visitParams(e,t){this.visitAllObjects(e=>t.print(null,e.name),e,t,",")}getBuiltinMethodName(e){let t;switch(e){case de.ConcatArray:t="concat";break;case de.SubscribeObservable:t="subscribe";break;case de.Bind:t="bind";break;default:throw new Error(`Unknown builtin method: ${e}`)}return t}}function xi(e,t,n,r){const i=new Ai(n),s=wi.createRoot();return i.visitAllStatements(t,s),i.createReturnStmt(s),function(e,t,n,r){let i=`${t.toSource()}\n//# sourceURL=${e}`;const s=[],o=[];for(const a in n)s.push(a),o.push(n[a]);if(r){const n=new Function(...s.concat("return null;")).toString(),r=n.slice(0,n.indexOf("return null;")).split("\n").length-1;i+=`\n${t.toSourceMapGenerator(e,r).toJsComment()}`}return new Function(...s.concat(i))(...o)}(e,s,i.getArgs(),r)}class Ai extends Ti{constructor(e){super(),this.reflector=e,this._evalArgNames=[],this._evalArgValues=[],this._evalExportedVars=[]}createReturnStmt(e){new Ke(new Ve(this._evalExportedVars.map(e=>new Le(e,ct(e),!1)))).visitStatement(this,e)}getArgs(){const e={};for(let t=0;t<this._evalArgNames.length;t++)e[this._evalArgNames[t]]=this._evalArgValues[t];return e}visitExternalExpr(e,t){return this._emitReferenceToExternal(e,this.reflector.resolveExternalReference(e.value),t),null}visitWrappedNodeExpr(e,t){return this._emitReferenceToExternal(e,e.node,t),null}visitDeclareVarStmt(e,t){return e.hasModifier(qe.Exported)&&this._evalExportedVars.push(e.name),super.visitDeclareVarStmt(e,t)}visitDeclareFunctionStmt(e,t){return e.hasModifier(qe.Exported)&&this._evalExportedVars.push(e.name),super.visitDeclareFunctionStmt(e,t)}visitDeclareClassStmt(e,t){return e.hasModifier(qe.Exported)&&this._evalExportedVars.push(e.name),super.visitDeclareClassStmt(e,t)}_emitReferenceToExternal(e,t,n){let r=this._evalArgValues.indexOf(t);if(-1===r){r=this._evalArgValues.length,this._evalArgValues.push(t);const e=nn({reference:t})||"val";this._evalArgNames.push(`jit_${e}_${r}`)}n.print(e,this._evalArgNames[r])}}class Di{constructor(e){this.context=e}resolveExternalReference(e){if("@angular/core"!==e.moduleName)throw new Error(`Cannot resolve external reference to ${e.moduleName}, only references to @angular/core are supported.`);if(!this.context.hasOwnProperty(e.name))throw new Error(`No value provided for @angular/core symbol '${e.name}'.`);return this.context[e.name]}parameters(e){throw new Error("Not implemented.")}annotations(e){throw new Error("Not implemented.")}shallowAnnotations(e){throw new Error("Not implemented.")}tryAnnotations(e){throw new Error("Not implemented.")}propMetadata(e){throw new Error("Not implemented.")}hasLifecycleHook(e,t){throw new Error("Not implemented.")}guards(e){throw new Error("Not implemented.")}componentModuleUrl(e,t){throw new Error("Not implemented.")}}function Ii(e,t,n,r){return xi(n,[...r,new He("$def",e,void 0,[qe.Exported])],new Di(t),!1).$def}function Ni(e){const t=e.map(e=>(function(e){return new ye(e)})(e.type));return e.length>0?dt(pt(t)):ce}function Oi(e){const t=[];t.push({key:"name",value:yt(e.pipeName),quoted:!1}),t.push({key:"type",value:e.type,quoted:!1});const n=si({name:e.name,type:e.type,deps:e.deps,injectFn:Cn.directiveInject,extraStatementFn:null});return t.push({key:"factory",value:n.factory,quoted:!1}),t.push({key:"pure",value:yt(e.pure),quoted:!1}),{expression:lt(Cn.definePipe).callFn([ft(t)]),type:new ne(lt(Cn.PipeDefWithMeta,[new ne(e.type),new ne(new Te(e.pipeName))])),statements:n.statements}}class ki{constructor(e,t,n,r){this.input=t,this.errLocation=n,this.ctxLocation=r,this.message=`Parser Error: ${e} ${n} [${t}] in ${r}`}}class Pi{constructor(e,t){this.start=e,this.end=t}}class Mi{constructor(e){this.span=e}visit(e,t=null){return null}toString(){return"AST"}}class Ri extends Mi{constructor(e,t,n,r){super(e),this.prefix=t,this.uninterpretedExpression=n,this.location=r}visit(e,t=null){return e.visitQuote(this,t)}toString(){return"Quote"}}class Fi extends Mi{visit(e,t=null){}}class Li extends Mi{visit(e,t=null){return e.visitImplicitReceiver(this,t)}}class Vi extends Mi{constructor(e,t){super(e),this.expressions=t}visit(e,t=null){return e.visitChain(this,t)}}class ji extends Mi{constructor(e,t,n,r){super(e),this.condition=t,this.trueExp=n,this.falseExp=r}visit(e,t=null){return e.visitConditional(this,t)}}class Bi extends Mi{constructor(e,t,n){super(e),this.receiver=t,this.name=n}visit(e,t=null){return e.visitPropertyRead(this,t)}}class Ui extends Mi{constructor(e,t,n,r){super(e),this.receiver=t,this.name=n,this.value=r}visit(e,t=null){return e.visitPropertyWrite(this,t)}}class qi extends Mi{constructor(e,t,n){super(e),this.receiver=t,this.name=n}visit(e,t=null){return e.visitSafePropertyRead(this,t)}}class $i extends Mi{constructor(e,t,n){super(e),this.obj=t,this.key=n}visit(e,t=null){return e.visitKeyedRead(this,t)}}class Hi extends Mi{constructor(e,t,n,r){super(e),this.obj=t,this.key=n,this.value=r}visit(e,t=null){return e.visitKeyedWrite(this,t)}}class zi extends Mi{constructor(e,t,n,r){super(e),this.exp=t,this.name=n,this.args=r}visit(e,t=null){return e.visitPipe(this,t)}}class Wi extends Mi{constructor(e,t){super(e),this.value=t}visit(e,t=null){return e.visitLiteralPrimitive(this,t)}}class Ki extends Mi{constructor(e,t){super(e),this.expressions=t}visit(e,t=null){return e.visitLiteralArray(this,t)}}class Qi extends Mi{constructor(e,t,n){super(e),this.keys=t,this.values=n}visit(e,t=null){return e.visitLiteralMap(this,t)}}class Gi extends Mi{constructor(e,t,n){super(e),this.strings=t,this.expressions=n}visit(e,t=null){return e.visitInterpolation(this,t)}}class Xi extends Mi{constructor(e,t,n,r){super(e),this.operation=t,this.left=n,this.right=r}visit(e,t=null){return e.visitBinary(this,t)}}class Yi extends Mi{constructor(e,t){super(e),this.expression=t}visit(e,t=null){return e.visitPrefixNot(this,t)}}class Zi extends Mi{constructor(e,t){super(e),this.expression=t}visit(e,t=null){return e.visitNonNullAssert(this,t)}}class Ji extends Mi{constructor(e,t,n,r){super(e),this.receiver=t,this.name=n,this.args=r}visit(e,t=null){return e.visitMethodCall(this,t)}}class es extends Mi{constructor(e,t,n,r){super(e),this.receiver=t,this.name=n,this.args=r}visit(e,t=null){return e.visitSafeMethodCall(this,t)}}class ts extends Mi{constructor(e,t,n){super(e),this.target=t,this.args=n}visit(e,t=null){return e.visitFunctionCall(this,t)}}class ns extends Mi{constructor(e,t,n,r){super(new Pi(0,null==t?0:t.length)),this.ast=e,this.source=t,this.location=n,this.errors=r}visit(e,t=null){return this.ast.visit(e,t)}toString(){return`${this.source} in ${this.location}`}}class rs{constructor(e,t,n,r,i){this.span=e,this.key=t,this.keyIsVar=n,this.name=r,this.expression=i}}class is{visitBinary(e,t){return e.left.visit(this),e.right.visit(this),null}visitChain(e,t){return this.visitAll(e.expressions,t)}visitConditional(e,t){return e.condition.visit(this),e.trueExp.visit(this),e.falseExp.visit(this),null}visitPipe(e,t){return e.exp.visit(this),this.visitAll(e.args,t),null}visitFunctionCall(e,t){return e.target.visit(this),this.visitAll(e.args,t),null}visitImplicitReceiver(e,t){return null}visitInterpolation(e,t){return this.visitAll(e.expressions,t)}visitKeyedRead(e,t){return e.obj.visit(this),e.key.visit(this),null}visitKeyedWrite(e,t){return e.obj.visit(this),e.key.visit(this),e.value.visit(this),null}visitLiteralArray(e,t){return this.visitAll(e.expressions,t)}visitLiteralMap(e,t){return this.visitAll(e.values,t)}visitLiteralPrimitive(e,t){return null}visitMethodCall(e,t){return e.receiver.visit(this),this.visitAll(e.args,t)}visitPrefixNot(e,t){return e.expression.visit(this),null}visitNonNullAssert(e,t){return e.expression.visit(this),null}visitPropertyRead(e,t){return e.receiver.visit(this),null}visitPropertyWrite(e,t){return e.receiver.visit(this),e.value.visit(this),null}visitSafePropertyRead(e,t){return e.receiver.visit(this),null}visitSafeMethodCall(e,t){return e.receiver.visit(this),this.visitAll(e.args,t)}visitAll(e,t){return e.forEach(e=>e.visit(this,t)),null}visitQuote(e,t){return null}}class ss{visitImplicitReceiver(e,t){return e}visitInterpolation(e,t){return new Gi(e.span,e.strings,this.visitAll(e.expressions))}visitLiteralPrimitive(e,t){return new Wi(e.span,e.value)}visitPropertyRead(e,t){return new Bi(e.span,e.receiver.visit(this),e.name)}visitPropertyWrite(e,t){return new Ui(e.span,e.receiver.visit(this),e.name,e.value.visit(this))}visitSafePropertyRead(e,t){return new qi(e.span,e.receiver.visit(this),e.name)}visitMethodCall(e,t){return new Ji(e.span,e.receiver.visit(this),e.name,this.visitAll(e.args))}visitSafeMethodCall(e,t){return new es(e.span,e.receiver.visit(this),e.name,this.visitAll(e.args))}visitFunctionCall(e,t){return new ts(e.span,e.target.visit(this),this.visitAll(e.args))}visitLiteralArray(e,t){return new Ki(e.span,this.visitAll(e.expressions))}visitLiteralMap(e,t){return new Qi(e.span,e.keys,this.visitAll(e.values))}visitBinary(e,t){return new Xi(e.span,e.operation,e.left.visit(this),e.right.visit(this))}visitPrefixNot(e,t){return new Yi(e.span,e.expression.visit(this))}visitNonNullAssert(e,t){return new Zi(e.span,e.expression.visit(this))}visitConditional(e,t){return new ji(e.span,e.condition.visit(this),e.trueExp.visit(this),e.falseExp.visit(this))}visitPipe(e,t){return new zi(e.span,e.exp.visit(this),e.name,this.visitAll(e.args))}visitKeyedRead(e,t){return new $i(e.span,e.obj.visit(this),e.key.visit(this))}visitKeyedWrite(e,t){return new Hi(e.span,e.obj.visit(this),e.key.visit(this),e.value.visit(this))}visitAll(e){const t=new Array(e.length);for(let n=0;n<e.length;++n)t[n]=e[n].visit(this);return t}visitChain(e,t){return new Vi(e.span,this.visitAll(e.expressions))}visitQuote(e,t){return new Ri(e.span,e.prefix,e.uninterpretedExpression,e.location)}}class os{visitImplicitReceiver(e,t){return e}visitInterpolation(e,t){const n=this.visitAll(e.expressions);return n!==e.expressions?new Gi(e.span,e.strings,n):e}visitLiteralPrimitive(e,t){return e}visitPropertyRead(e,t){const n=e.receiver.visit(this);return n!==e.receiver?new Bi(e.span,n,e.name):e}visitPropertyWrite(e,t){const n=e.receiver.visit(this),r=e.value.visit(this);return n!==e.receiver||r!==e.value?new Ui(e.span,n,e.name,r):e}visitSafePropertyRead(e,t){const n=e.receiver.visit(this);return n!==e.receiver?new qi(e.span,n,e.name):e}visitMethodCall(e,t){const n=e.receiver.visit(this);return n!==e.receiver?new Ji(e.span,n,e.name,this.visitAll(e.args)):e}visitSafeMethodCall(e,t){const n=e.receiver.visit(this),r=this.visitAll(e.args);return n!==e.receiver||r!==e.args?new es(e.span,n,e.name,r):e}visitFunctionCall(e,t){const n=e.target&&e.target.visit(this),r=this.visitAll(e.args);return n!==e.target||r!==e.args?new ts(e.span,n,r):e}visitLiteralArray(e,t){const n=this.visitAll(e.expressions);return n!==e.expressions?new Ki(e.span,n):e}visitLiteralMap(e,t){const n=this.visitAll(e.values);return n!==e.values?new Qi(e.span,e.keys,n):e}visitBinary(e,t){const n=e.left.visit(this),r=e.right.visit(this);return n!==e.left||r!==e.right?new Xi(e.span,e.operation,n,r):e}visitPrefixNot(e,t){const n=e.expression.visit(this);return n!==e.expression?new Yi(e.span,n):e}visitNonNullAssert(e,t){const n=e.expression.visit(this);return n!==e.expression?new Zi(e.span,n):e}visitConditional(e,t){const n=e.condition.visit(this),r=e.trueExp.visit(this),i=e.falseExp.visit(this);return n!==e.condition||r!==e.trueExp||i!=i?new ji(e.span,n,r,i):e}visitPipe(e,t){const n=e.exp.visit(this),r=this.visitAll(e.args);return n!==e.exp||r!==e.args?new zi(e.span,n,e.name,r):e}visitKeyedRead(e,t){const n=e.obj.visit(this),r=e.key.visit(this);return n!==e.obj||r!==e.key?new $i(e.span,n,r):e}visitKeyedWrite(e,t){const n=e.obj.visit(this),r=e.key.visit(this),i=e.value.visit(this);return n!==e.obj||r!==e.key||i!==e.value?new Hi(e.span,n,r,i):e}visitAll(e){const t=new Array(e.length);let n=!1;for(let r=0;r<e.length;++r){const i=e[r],s=i.visit(this);t[r]=s,n=n||s!==i}return n?t:e}visitChain(e,t){const n=this.visitAll(e.expressions);return n!==e.expressions?new Vi(e.span,n):e}visitQuote(e,t){return e}}class as{constructor(e,t,n,r){this.name=e,this.expression=t,this.type=n,this.sourceSpan=r,this.isLiteral=this.type===us.LITERAL_ATTR,this.isAnimation=this.type===us.ANIMATION}}var us,cs,ls,hs;!function(e){e[e.DEFAULT=0]="DEFAULT",e[e.LITERAL_ATTR=1]="LITERAL_ATTR",e[e.ANIMATION=2]="ANIMATION"}(us||(us={}));class ds{constructor(e,t,n,r,i){this.name=e,this.targetOrPhase=t,this.type=n,this.handler=r,this.sourceSpan=i}}class ps{constructor(e,t,n){this.name=e,this.value=t,this.sourceSpan=n}}class fs{constructor(e,t,n,r,i,s){this.name=e,this.type=t,this.securityContext=n,this.value=r,this.unit=i,this.sourceSpan=s}}class ms{}ms.event=ct("$event");class gs{constructor(e,t){this.stmts=e,this.allowDefault=t,this.render3Stmts=e.map(e=>{if(e instanceof He&&e.name==t.name&&e.value instanceof Pe){const t=e.value.lhs;return new Ke(t.value)}return e})}}function ys(e,t,n,r,i){e||(e=new As);const s=vs({createLiteralArrayConverter:e=>e=>pt(e),createLiteralMapConverter:e=>t=>{return ft(e.map((e,n)=>({key:e.key,value:t[n],quoted:e.quoted})))},createPipeConverter:e=>{throw new Error(`Illegal State: Actions are not allowed to contain pipes. Pipe: ${e}`)}},n),o=new xs(e,t,r,i),a=[];!function e(t,n){Array.isArray(t)?t.forEach(t=>e(t,n)):n.push(t)}(s.visit(o,ls.Statement),a),function(e,t,n){for(let r=e-1;r>=0;r--)n.unshift(Es(t,r))}(o.temporaryCount,r,a);const u=a.length-1;let c=null;if(u>=0){const e=function(e){if(e instanceof We)return e.expr;if(e instanceof Ke)return e.value;return null}(a[u]);e&&(c=function(e){return ct(`pd_${e}`)}(r),a[u]=c.set(e.cast(se).notIdentical(yt(!1))).toDeclStmt(null,[qe.Final]))}return new gs(a,c)}function vs(e,t){return function(e,t){const n=new Ts(e);return t.visit(n)}(e,t)}class _s{constructor(e,t){this.stmts=e,this.currValExpr=t}}function bs(e,t,n,r,i,s){e||(e=new As);const o=function(e){return ct(`currVal_${e}`)}(r),a=[],u=new xs(e,t,r,s),c=n.visit(u,ls.Expression);if(u.temporaryCount)for(let l=0;l<u.temporaryCount;l++)a.push(Es(r,l));else if(i==cs.TrySimple)return new _s([],c);return a.push(o.set(c).toDeclStmt(se,[qe.Final])),new _s(a,o)}function ws(e,t){return`tmp_${e}_${t}`}function Es(e,t){return new He(ws(e,t),Be)}function Cs(e,t){if(e!==ls.Expression)throw new Error(`Expected an expression, but saw ${t}`)}function Ss(e,t){return e===ls.Statement?t.toStmt():t}!function(e){e[e.General=0]="General",e[e.TrySimple=1]="TrySimple"}(cs||(cs={})),function(e){e[e.Statement=0]="Statement",e[e.Expression=1]="Expression"}(ls||(ls={}));class Ts extends ss{constructor(e){super(),this._converterFactory=e}visitPipe(e,t){const n=[e.exp,...e.args].map(e=>e.visit(this,t));return new Ds(e.span,n,this._converterFactory.createPipeConverter(e.name,n.length))}visitLiteralArray(e,t){const n=e.expressions.map(e=>e.visit(this,t));return new Ds(e.span,n,this._converterFactory.createLiteralArrayConverter(e.expressions.length))}visitLiteralMap(e,t){const n=e.values.map(e=>e.visit(this,t));return new Ds(e.span,n,this._converterFactory.createLiteralMapConverter(e.keys))}}class xs{constructor(e,t,n,r){this._localResolver=e,this._implicitReceiver=t,this.bindingId=n,this.interpolationFunction=r,this._nodeMap=new Map,this._resultMap=new Map,this._currentTemporary=0,this.temporaryCount=0}visitBinary(e,t){let n;switch(e.operation){case"+":n=le.Plus;break;case"-":n=le.Minus;break;case"*":n=le.Multiply;break;case"/":n=le.Divide;break;case"%":n=le.Modulo;break;case"&&":n=le.And;break;case"||":n=le.Or;break;case"==":n=le.Equals;break;case"!=":n=le.NotEquals;break;case"===":n=le.Identical;break;case"!==":n=le.NotIdentical;break;case"<":n=le.Lower;break;case">":n=le.Bigger;break;case"<=":n=le.LowerEquals;break;case">=":n=le.BiggerEquals;break;default:throw new Error(`Unsupported operation ${e.operation}`)}return Ss(t,new Pe(n,this._visit(e.left,ls.Expression),this._visit(e.right,ls.Expression)))}visitChain(e,t){return function(e,t){if(e!==ls.Statement)throw new Error(`Expected a statement, but saw ${t}`)}(t,e),this.visitAll(e.expressions,t)}visitConditional(e,t){return Ss(t,this._visit(e.condition,ls.Expression).conditional(this._visit(e.trueExp,ls.Expression),this._visit(e.falseExp,ls.Expression)))}visitPipe(e,t){throw new Error(`Illegal state: Pipes should have been converted into functions. Pipe: ${e.name}`)}visitFunctionCall(e,t){const n=this.visitAll(e.args,ls.Expression);let r;return Ss(t,r=e instanceof Ds?e.converter(n):this._visit(e.target,ls.Expression).callFn(n))}visitImplicitReceiver(e,t){return Cs(t,e),this._implicitReceiver}visitInterpolation(e,t){Cs(t,e);const n=[yt(e.expressions.length)];for(let r=0;r<e.strings.length-1;r++)n.push(yt(e.strings[r])),n.push(this._visit(e.expressions[r],ls.Expression));return n.push(yt(e.strings[e.strings.length-1])),this.interpolationFunction?this.interpolationFunction(n):e.expressions.length<=9?lt(Qt.inlineInterpolate).callFn(n):lt(Qt.interpolate).callFn([n[0],pt(n.slice(1))])}visitKeyedRead(e,t){const n=this.leftMostSafeNode(e);return n?this.convertSafeAccess(e,n,t):Ss(t,this._visit(e.obj,ls.Expression).key(this._visit(e.key,ls.Expression)))}visitKeyedWrite(e,t){const n=this._visit(e.obj,ls.Expression),r=this._visit(e.key,ls.Expression),i=this._visit(e.value,ls.Expression);return Ss(t,n.key(r).set(i))}visitLiteralArray(e,t){throw new Error("Illegal State: literal arrays should have been converted into functions")}visitLiteralMap(e,t){throw new Error("Illegal State: literal maps should have been converted into functions")}visitLiteralPrimitive(e,t){const n=null===e.value||void 0===e.value||!0===e.value||!0===e.value?oe:void 0;return Ss(t,yt(e.value,n))}_getLocal(e){return this._localResolver.getLocal(e)}visitMethodCall(e,t){if(e.receiver instanceof Li&&"$any"==e.name){const t=this.visitAll(e.args,ls.Expression);if(1!=t.length)throw new Error(`Invalid call to $any, expected 1 argument but received ${t.length||"none"}`);return t[0].cast(se)}const n=this.leftMostSafeNode(e);if(n)return this.convertSafeAccess(e,n,t);{const n=this.visitAll(e.args,ls.Expression);let r=null;const i=this._visit(e.receiver,ls.Expression);if(i===this._implicitReceiver){const t=this._getLocal(e.name);t&&(r=t.callFn(n))}return null==r&&(r=i.callMethod(e.name,n)),Ss(t,r)}}visitPrefixNot(e,t){return Ss(t,(n=this._visit(e.expression,ls.Expression),new De(n,r)));var n,r}visitNonNullAssert(e,t){return Ss(t,(n=this._visit(e.expression,ls.Expression),new Ie(n,r)));var n,r}visitPropertyRead(e,t){const n=this.leftMostSafeNode(e);if(n)return this.convertSafeAccess(e,n,t);{let n=null;const r=this._visit(e.receiver,ls.Expression);return r===this._implicitReceiver&&(n=this._getLocal(e.name)),null==n&&(n=r.prop(e.name)),Ss(t,n)}}visitPropertyWrite(e,t){const n=this._visit(e.receiver,ls.Expression);let r=null;if(n===this._implicitReceiver){const t=this._getLocal(e.name);if(t){if(!(t instanceof Me))throw new Error("Cannot assign to a reference or variable!");r=t}}return null===r&&(r=n.prop(e.name)),Ss(t,r.set(this._visit(e.value,ls.Expression)))}visitSafePropertyRead(e,t){return this.convertSafeAccess(e,this.leftMostSafeNode(e),t)}visitSafeMethodCall(e,t){return this.convertSafeAccess(e,this.leftMostSafeNode(e),t)}visitAll(e,t){return e.map(e=>this._visit(e,t))}visitQuote(e,t){throw new Error(`Quotes are not supported for evaluation!\n        Statement: ${e.uninterpretedExpression} located at ${e.location}`)}_visit(e,t){const n=this._resultMap.get(e);return n||(this._nodeMap.get(e)||e).visit(this,t)}convertSafeAccess(e,t,n){let r=this._visit(t.receiver,ls.Expression),i=void 0;this.needsTemporary(t.receiver)&&(r=(i=this.allocateTemporary()).set(r),this._resultMap.set(t.receiver,i));const s=r.isBlank();t instanceof es?this._nodeMap.set(t,new Ji(t.span,t.receiver,t.name,t.args)):this._nodeMap.set(t,new Bi(t.span,t.receiver,t.name));const o=this._visit(e,ls.Expression);return this._nodeMap.delete(t),i&&this.releaseTemporary(i),Ss(n,s.conditional(yt(null),o))}leftMostSafeNode(e){const t=(e,t)=>(this._nodeMap.get(t)||t).visit(e);return e.visit({visitBinary:e=>null,visitChain:e=>null,visitConditional:e=>null,visitFunctionCall:e=>null,visitImplicitReceiver:e=>null,visitInterpolation:e=>null,visitKeyedRead(e){return t(this,e.obj)},visitKeyedWrite:e=>null,visitLiteralArray:e=>null,visitLiteralMap:e=>null,visitLiteralPrimitive:e=>null,visitMethodCall(e){return t(this,e.receiver)},visitPipe:e=>null,visitPrefixNot:e=>null,visitNonNullAssert:e=>null,visitPropertyRead(e){return t(this,e.receiver)},visitPropertyWrite:e=>null,visitQuote:e=>null,visitSafeMethodCall(e){return t(this,e.receiver)||e},visitSafePropertyRead(e){return t(this,e.receiver)||e}})}needsTemporary(e){const t=(e,t)=>t&&(this._nodeMap.get(t)||t).visit(e);return e.visit({visitBinary(e){return t(this,e.left)||t(this,e.right)},visitChain:e=>!1,visitConditional(e){return t(this,e.condition)||t(this,e.trueExp)||t(this,e.falseExp)},visitFunctionCall:e=>!0,visitImplicitReceiver:e=>!1,visitInterpolation(e){return((e,n)=>n.some(n=>t(e,n)))(this,e.expressions)},visitKeyedRead:e=>!1,visitKeyedWrite:e=>!1,visitLiteralArray:e=>!0,visitLiteralMap:e=>!0,visitLiteralPrimitive:e=>!1,visitMethodCall:e=>!0,visitPipe:e=>!0,visitPrefixNot(e){return t(this,e.expression)},visitNonNullAssert(e){return t(this,e.expression)},visitPropertyRead:e=>!1,visitPropertyWrite:e=>!1,visitQuote:e=>!1,visitSafeMethodCall:e=>!0,visitSafePropertyRead:e=>!1})}allocateTemporary(){const e=this._currentTemporary++;return this.temporaryCount=Math.max(this._currentTemporary,this.temporaryCount),new ge(ws(this.bindingId,e))}releaseTemporary(e){if(this._currentTemporary--,e.name!=ws(this.bindingId,this._currentTemporary))throw new Error(`Temporary ${e.name} released out of order`)}}class As{getLocal(e){return e===ms.event.name?ms.event:null}}class Ds extends ts{constructor(e,t,n){super(e,null,t),this.args=t,this.converter=n}}!function(e){e[e.OnInit=0]="OnInit",e[e.OnDestroy=1]="OnDestroy",e[e.DoCheck=2]="DoCheck",e[e.OnChanges=3]="OnChanges",e[e.AfterContentInit=4]="AfterContentInit",e[e.AfterContentChecked=5]="AfterContentChecked",e[e.AfterViewInit=6]="AfterViewInit",e[e.AfterViewChecked=7]="AfterViewChecked"}(hs||(hs={}));const Is=[hs.OnInit,hs.OnDestroy,hs.DoCheck,hs.OnChanges,hs.AfterContentInit,hs.AfterContentChecked,hs.AfterViewInit,hs.AfterViewChecked];function Ns(e,t,n){return e.hasLifecycleHook(n,function(e){switch(e){case hs.OnInit:return"ngOnInit";case hs.OnDestroy:return"ngOnDestroy";case hs.DoCheck:return"ngDoCheck";case hs.OnChanges:return"ngOnChanges";case hs.AfterContentInit:return"ngAfterContentInit";case hs.AfterContentChecked:return"ngAfterContentChecked";case hs.AfterViewInit:return"ngAfterViewInit";case hs.AfterViewChecked:return"ngAfterViewChecked";default:const t=e;throw new Error(`unexpected ${t}`)}}(t))}const Os=0,ks=9,Ps=10,Ms=11,Rs=12,Fs=13,Ls=32,Vs=33,js=34,Bs=35,Us=36,qs=37,$s=38,Hs=39,zs=40,Ws=41,Ks=42,Qs=43,Gs=44,Xs=45,Ys=46,Zs=47,Js=58,eo=59,to=60,no=61,ro=62,io=63,so=48,oo=57,ao=65,uo=69,co=70,lo=88,ho=90,po=91,fo=92,mo=93,go=94,yo=95,vo=97,_o=101,bo=102,wo=110,Eo=114,Co=116,So=117,To=118,xo=120,Ao=122,Do=123,Io=124,No=125,Oo=160,ko=96;function Po(e){return e>=ks&&e<=Ls||e==Oo}function Mo(e){return so<=e&&e<=oo}function Ro(e){return e>=vo&&e<=Ao||e>=ao&&e<=ho}class Fo{constructor(e,t,n,r){this.file=e,this.offset=t,this.line=n,this.col=r}toString(){return null!=this.offset?`${this.file.url}@${this.line}:${this.col}`:this.file.url}moveBy(e){const t=this.file.content,n=t.length;let r=this.offset,i=this.line,s=this.col;for(;r>0&&e<0;){if(r--,e++,t.charCodeAt(r)==Ps){i--;const e=t.substr(0,r-1).lastIndexOf(String.fromCharCode(Ps));s=e>0?r-e:r}else s--}for(;r<n&&e>0;){const n=t.charCodeAt(r);r++,e--,n==Ps?(i++,s=0):s++}return new Fo(this.file,r,i,s)}getContext(e,t){const n=this.file.content;let r=this.offset;if(null!=r){r>n.length-1&&(r=n.length-1);let i=r,s=0,o=0;for(;s<e&&r>0&&(s++,"\n"!=n[--r]||++o!=t););for(s=0,o=0;s<e&&i<n.length-1&&(s++,"\n"!=n[++i]||++o!=t););return{before:n.substring(r,this.offset),after:n.substring(this.offset,i+1)}}return null}}class Lo{constructor(e,t){this.content=e,this.url=t}}class Vo{constructor(e,t,n=null){this.start=e,this.end=t,this.details=n}toString(){return this.start.file.content.substring(this.start.offset,this.end.offset)}}var jo;!function(e){e[e.WARNING=0]="WARNING",e[e.ERROR=1]="ERROR"}(jo||(jo={}));class Bo{constructor(e,t,n=jo.ERROR){this.span=e,this.msg=t,this.level=n}contextualMessage(){const e=this.span.start.getContext(100,3);return e?`${this.msg} ("${e.before}[${jo[this.level]} ->]${e.after}")`:this.msg}toString(){const e=this.span.details?`, ${this.span.details}`:"";return`${this.contextualMessage()}: ${this.span.start}${e}`}}function Uo(e,t){const n=rn(t),r=null!=n?`in ${e} ${nn(t)} in ${n}`:`in ${e} ${nn(t)}`,i=new Lo("",r);return new Vo(new Fo(i,-1,-1,-1),new Fo(i,-1,-1,-1))}class qo{constructor(){this.strictStyling=!0}shimCssText(e,t,n=""){const r=e.match(aa)||[];return e=function(e){return e.replace(oa,"")}(e),e=this._insertDirectives(e),[this._scopeCssText(e,t,n),...r].join("\n")}_insertDirectives(e){return e=this._insertPolyfillDirectivesInCssText(e),this._insertPolyfillRulesInCssText(e)}_insertPolyfillDirectivesInCssText(e){return e.replace(Ho,function(...e){return e[2]+"{"})}_insertPolyfillRulesInCssText(e){return e.replace(zo,(...e)=>{const t=e[0].replace(e[1],"").replace(e[2],"");return e[4]+t})}_scopeCssText(e,t,n){const r=this._extractUnscopedRulesFromCssText(e);return e=this._insertPolyfillHostInCssText(e),e=this._convertColonHost(e),e=this._convertColonHostContext(e),e=this._convertShadowDOMSelectors(e),t&&(e=this._scopeSelectors(e,t,n)),(e=e+"\n"+r).trim()}_extractUnscopedRulesFromCssText(e){let t,n="";for(Wo.lastIndex=0;null!==(t=Wo.exec(e));){n+=t[0].replace(t[2],"").replace(t[1],t[4])+"\n\n"}return n}_convertColonHost(e){return this._convertColonRule(e,Xo,this._colonHostPartReplacer)}_convertColonHostContext(e){return this._convertColonRule(e,Yo,this._colonHostContextPartReplacer)}_convertColonRule(e,t,n){return e.replace(t,function(...e){if(e[2]){const t=e[2].split(","),r=[];for(let i=0;i<t.length;i++){const s=t[i].trim();if(!s)break;r.push(n(Zo,s,e[3]))}return r.join(",")}return Zo+e[3]})}_colonHostContextPartReplacer(e,t,n){return t.indexOf(Ko)>-1?this._colonHostPartReplacer(e,t,n):e+t+n+", "+t+" "+e+n}_colonHostPartReplacer(e,t,n){return e+t.replace(Ko,"")+n}_convertShadowDOMSelectors(e){return ea.reduce((e,t)=>e.replace(t," "),e)}_scopeSelectors(e,t,n){return function(e,t){const n=function(e){const t=e.split(ca),n=[],r=[];let i=0,s=[];for(let o=0;o<t.length;o++){const e=t[o];e==ha&&i--,i>0?s.push(e):(s.length>0&&(r.push(s.join("")),n.push(da),s=[]),n.push(e)),e==la&&i++}s.length>0&&(r.push(s.join("")),n.push(da));return new fa(n.join(""),r)}(e);let r=0;return n.escapedString.replace(ua,function(...e){const i=e[2];let s="",o=e[4],a="";o&&o.startsWith("{"+da)&&(s=n.blocks[r++],o=o.substring(da.length+1),a="{");const u=t(new pa(i,s));return`${e[1]}${u.selector}${e[3]}${a}${u.content}${o}`})}(e,e=>{let r=e.selector,i=e.content;return"@"!=e.selector[0]?r=this._scopeSelector(e.selector,t,n,this.strictStyling):(e.selector.startsWith("@media")||e.selector.startsWith("@supports")||e.selector.startsWith("@page")||e.selector.startsWith("@document"))&&(i=this._scopeSelectors(e.content,t,n)),new pa(r,i)})}_scopeSelector(e,t,n,r){return e.split(",").map(e=>e.trim().split(ta)).map(e=>{const[i,...s]=e;return[(e=>this._selectorNeedsScoping(e,t)?r?this._applyStrictSelectorScope(e,t,n):this._applySelectorScope(e,t,n):e)(i),...s].join(" ")}).join(", ")}_selectorNeedsScoping(e,t){return!this._makeScopeMatcher(t).test(e)}_makeScopeMatcher(e){return e=e.replace(/\[/g,"\\[").replace(/\]/g,"\\]"),new RegExp("^("+e+")"+na,"m")}_applySelectorScope(e,t,n){return this._applySimpleSelectorScope(e,t,n)}_applySimpleSelectorScope(e,t,n){if(ra.lastIndex=0,ra.test(e)){const r=this.strictStyling?`[${n}]`:t;return e.replace(Jo,(e,t)=>t.replace(/([^:]*)(:*)(.*)/,(e,t,n,i)=>t+r+n+i)).replace(ra,r+" ")}return t+" "+e}_applyStrictSelectorScope(e,t,n){const r="["+(t=t.replace(/\[is=([^\]]*)\]/g,(e,...t)=>t[0]))+"]",i=e=>{let i=e.trim();if(!i)return"";if(e.indexOf(Zo)>-1)i=this._applySimpleSelectorScope(e,t,n);else{const t=e.replace(ra,"");if(t.length>0){const e=t.match(/([^:]*)(:*)(.*)/);e&&(i=e[1]+r+e[2]+e[3])}}return i},s=new $o(e);let o,a="",u=0;const c=/( |>|\+|~(?!=))\s*/g;let l=!((e=s.content()).indexOf(Zo)>-1);for(;null!==(o=c.exec(e));){const t=o[1],n=e.slice(u,o.index).trim();a+=`${(l=l||n.indexOf(Zo)>-1)?i(n):n} ${t} `,u=c.lastIndex}const h=e.substring(u);return a+=(l=l||h.indexOf(Zo)>-1)?i(h):h,s.restore(a)}_insertPolyfillHostInCssText(e){return e.replace(sa,Qo).replace(ia,Ko)}}class $o{constructor(e){this.placeholders=[],this.index=0,e=e.replace(/(\[[^\]]*\])/g,(e,t)=>{const n=`__ph-${this.index}__`;return this.placeholders.push(t),this.index++,n}),this._content=e.replace(/(:nth-[-\w]+)(\([^)]+\))/g,(e,t,n)=>{const r=`__ph-${this.index}__`;return this.placeholders.push(n),this.index++,t+r})}restore(e){return e.replace(/__ph-(\d+)__/g,(e,t)=>this.placeholders[+t])}content(){return this._content}}const Ho=/polyfill-next-selector[^}]*content:[\s]*?(['"])(.*?)\1[;\s]*}([^{]*?){/gim,zo=/(polyfill-rule)[^}]*(content:[\s]*(['"])(.*?)\3)[;\s]*[^}]*}/gim,Wo=/(polyfill-unscoped-rule)[^}]*(content:[\s]*(['"])(.*?)\3)[;\s]*[^}]*}/gim,Ko="-shadowcsshost",Qo="-shadowcsscontext",Go=")(?:\\(((?:\\([^)(]*\\)|[^)(]*)+?)\\))?([^,{]*)",Xo=new RegExp("("+Ko+Go,"gim"),Yo=new RegExp("("+Qo+Go,"gim"),Zo=Ko+"-no-combinator",Jo=/-shadowcsshost-no-combinator([^\s]*)/,ea=[/::shadow/g,/::content/g,/\/shadow-deep\//g,/\/shadow\//g],ta=/(?:>>>)|(?:\/deep\/)|(?:::ng-deep)/g,na="([>\\s~+[.,{:][\\s\\S]*)?$",ra=/-shadowcsshost/gim,ia=/:host/gim,sa=/:host-context/gim,oa=/\/\*\s*[\s\S]*?\*\//g;const aa=/\/\*\s*#\s*source(Mapping)?URL=[\s\S]+?\*\//g;const ua=/(\s*)([^;\{\}]+?)(\s*)((?:{%BLOCK%}?\s*;?)|(?:\s*;))/g,ca=/([{}])/g,la="{",ha="}",da="%BLOCK%";class pa{constructor(e,t){this.selector=e,this.content=t}}class fa{constructor(e,t){this.escapedString=e,this.blocks=t}}const ma="_nghost-%COMP%",ga="_ngcontent-%COMP%";class ya{constructor(e,t,n){this.name=e,this.moduleUrl=t,this.setValue=n}}class va{constructor(e,t,n,r,i){this.outputCtx=e,this.stylesVar=t,this.dependencies=n,this.isShimmed=r,this.meta=i}}class _a{constructor(e){this._urlResolver=e,this._shadowCss=new qo}compileComponent(e,t){const n=t.template;return this._compileStyles(e,t,new hn({styles:n.styles,styleUrls:n.styleUrls,moduleUrl:rn(t.type)}),this.needsStyleShim(t),!0)}compileStyles(e,t,n,r=this.needsStyleShim(t)){return this._compileStyles(e,t,n,r,!1)}needsStyleShim(e){return e.template.encapsulation===N.Emulated}_compileStyles(e,t,n,r,i){const s=n.styles.map(e=>yt(this._shimIfNeeded(e,r))),o=[];n.styleUrls.forEach(t=>{const n=s.length;s.push(null),o.push(new ya(ba(null),t,t=>s[n]=e.importExpr(t)))});const a=ba(i?t:null),u=ct(a).set(pt(s,new re(se,[Z.Const]))).toDeclStmt(null,i?[qe.Final]:[qe.Final,qe.Exported]);return e.statements.push(u),new va(e,a,o,r,n)}_shimIfNeeded(e,t){return t?this._shadowCss.shimCssText(e,ga,ma):e}}function ba(e){let t="styles";return e&&(t+=`_${nn(e.type)}`),t}function wa(e){const t=e.charCodeAt(0);if(t==e.charCodeAt(e.length-1)&&(39==t||34==t)){const t=e.substring(1,e.length-1);-1==t.indexOf("'")&&-1==t.indexOf('"')&&(e=t)}return e}function Ea(e){return e.replace(/[a-z][A-Z]/g,e=>e.charAt(0)+"-"+e.charAt(1)).toLowerCase()}class Ca{constructor(e,t){this._elementIndexExpr=e,this._directiveIndexExpr=t,this.hasBindingsOrInitialValues=!1,this._classMapInput=null,this._styleMapInput=null,this._singleStyleInputs=null,this._singleClassInputs=null,this._lastStylingInput=null,this._stylesIndex=new Map,this._classesIndex=new Map,this._initialStyleValues={},this._initialClassValues={},this._useDefaultSanitizer=!1,this._applyFnRequired=!1}registerBoundInput(e){const t=e.name;let n=null;switch(e.type){case 0:"style"==t?n=this.registerStyleInput(null,e.value,"",e.sourceSpan):function(e){return"className"==e||"class"==e}(e.name)&&(n=this.registerClassInput(null,e.value,e.sourceSpan));break;case 3:n=this.registerStyleInput(e.name,e.value,e.unit,e.sourceSpan);break;case 2:n=this.registerClassInput(e.name,e.value,e.sourceSpan)}return!!n}registerStyleInput(e,t,n,r){const i={name:e,unit:n,value:t,sourceSpan:r};var s;return e?((this._singleStyleInputs=this._singleStyleInputs||[]).push(i),this._useDefaultSanitizer=this._useDefaultSanitizer||("background-image"===(s=e)||"background"===s||"border-image"===s||"filter"===s||"list-style"===s||"list-style-image"===s),Sa(this._stylesIndex,e),this.hasBindingsOrInitialValues=!0):(this._useDefaultSanitizer=!0,this._styleMapInput=i),this._lastStylingInput=i,this.hasBindingsOrInitialValues=!0,this._applyFnRequired=!0,i}registerClassInput(e,t,n){const r={name:e,value:t,sourceSpan:n};return e?((this._singleClassInputs=this._singleClassInputs||[]).push(r),this.hasBindingsOrInitialValues=!0,Sa(this._classesIndex,e)):this._classMapInput=r,this._lastStylingInput=r,this.hasBindingsOrInitialValues=!0,this._applyFnRequired=!0,r}registerStyleAttr(e){this._initialStyleValues=function(e){const t={};let n=0,r=0,i=0,s=0,o=0,a=null,u=!1;for(;n<e.length;)switch(e.charCodeAt(n++)){case 40:r++;break;case 41:r--;break;case 39:u=u||s>0,0===i?i=39:39===i&&92!==e.charCodeAt(n-1)&&(i=0);break;case 34:u=u||s>0,0===i?i=34:34===i&&92!==e.charCodeAt(n-1)&&(i=0);break;case 58:a||0!==r||0!==i||(a=Ea(e.substring(o,n-1).trim()),s=n);break;case 59:if(a&&s>0&&0===r&&0===i){const r=e.substring(s,n-1).trim();t[a]=u?wa(r):r,o=n,s=0,a=null,u=!1}}if(a&&s){const n=e.substr(s).trim();t[a]=u?wa(n):n}return t}(e),Object.keys(this._initialStyleValues).forEach(e=>{Sa(this._stylesIndex,e),this.hasBindingsOrInitialValues=!0})}registerClassAttr(e){this._initialClassValues={},e.split(/\s+/g).forEach(e=>{this._initialClassValues[e]=!0,Sa(this._classesIndex,e),this.hasBindingsOrInitialValues=!0})}_buildInitExpr(e,t){const n=[],r=[];return e.forEach((e,i)=>{const s=yt(i);n.push(s);const o=t[i];o&&r.push(s,yt(o))}),r.length&&(n.push(yt(1)),n.push(...r)),n.length?pt(n):null}buildCreateLevelInstruction(e,t){if(this.hasBindingsOrInitialValues){const n=this._buildInitExpr(this._classesIndex,this._initialClassValues),r=this._buildInitExpr(this._stylesIndex,this._initialStyleValues),i=this._useDefaultSanitizer,s=[];return n?s.push(t.getConstLiteral(n,!0)):(r||i)&&s.push(Be),r?s.push(t.getConstLiteral(r,!0)):(i||this._directiveIndexExpr)&&s.push(Be),(i||this._directiveIndexExpr)&&(s.push(i?lt(Cn.defaultStyleSanitizer):Be),this._directiveIndexExpr&&s.push(this._directiveIndexExpr)),{sourceSpan:e,reference:Cn.elementStyling,buildParams:()=>s}}return null}_buildStylingMap(e){if(this._classMapInput||this._styleMapInput){const t=this._classMapInput||this._styleMapInput,n=this._classMapInput?this._classMapInput.value.visit(e):null,r=this._styleMapInput?this._styleMapInput.value.visit(e):null;return{sourceSpan:t.sourceSpan,reference:Cn.elementStylingMap,buildParams:e=>{const t=[this._elementIndexExpr];return n?t.push(e(n)):this._styleMapInput&&t.push(Be),r?t.push(e(r)):this._directiveIndexExpr&&t.push(Be),this._directiveIndexExpr&&t.push(this._directiveIndexExpr),t}}}return null}_buildSingleInputs(e,t,n,r,i){return t.map(t=>{const s=n.get(t.name),o=t.value.visit(i);return{sourceSpan:t.sourceSpan,reference:e,buildParams:e=>{const n=[this._elementIndexExpr,yt(s),e(o)];return r&&(t.unit?n.push(yt(t.unit)):this._directiveIndexExpr&&n.push(Be)),this._directiveIndexExpr&&n.push(this._directiveIndexExpr),n}}})}_buildClassInputs(e){return this._singleClassInputs?this._buildSingleInputs(Cn.elementClassProp,this._singleClassInputs,this._classesIndex,!1,e):[]}_buildStyleInputs(e){return this._singleStyleInputs?this._buildSingleInputs(Cn.elementStyleProp,this._singleStyleInputs,this._stylesIndex,!0,e):[]}_buildApplyFn(){return{sourceSpan:this._lastStylingInput?this._lastStylingInput.sourceSpan:null,reference:Cn.elementStylingApply,buildParams:()=>{const e=[this._elementIndexExpr];return this._directiveIndexExpr&&e.push(this._directiveIndexExpr),e}}}buildUpdateLevelInstructions(e){const t=[];if(this.hasBindingsOrInitialValues){const n=this._buildStylingMap(e);n&&t.push(n),t.push(...this._buildStyleInputs(e)),t.push(...this._buildClassInputs(e)),this._applyFnRequired&&t.push(this._buildApplyFn())}return t}}function Sa(e,t){e.has(t)||e.set(t,e.size)}var Ta;!function(e){e[e.Character=0]="Character",e[e.Identifier=1]="Identifier",e[e.Keyword=2]="Keyword",e[e.String=3]="String",e[e.Operator=4]="Operator",e[e.Number=5]="Number",e[e.Error=6]="Error"}(Ta||(Ta={}));const xa=["var","let","as","null","undefined","true","false","if","else","this"];class Aa{tokenize(e){const t=new ka(e),n=[];let r=t.scanToken();for(;null!=r;)n.push(r),r=t.scanToken();return n}}class Da{constructor(e,t,n,r){this.index=e,this.type=t,this.numValue=n,this.strValue=r}isCharacter(e){return this.type==Ta.Character&&this.numValue==e}isNumber(){return this.type==Ta.Number}isString(){return this.type==Ta.String}isOperator(e){return this.type==Ta.Operator&&this.strValue==e}isIdentifier(){return this.type==Ta.Identifier}isKeyword(){return this.type==Ta.Keyword}isKeywordLet(){return this.type==Ta.Keyword&&"let"==this.strValue}isKeywordAs(){return this.type==Ta.Keyword&&"as"==this.strValue}isKeywordNull(){return this.type==Ta.Keyword&&"null"==this.strValue}isKeywordUndefined(){return this.type==Ta.Keyword&&"undefined"==this.strValue}isKeywordTrue(){return this.type==Ta.Keyword&&"true"==this.strValue}isKeywordFalse(){return this.type==Ta.Keyword&&"false"==this.strValue}isKeywordThis(){return this.type==Ta.Keyword&&"this"==this.strValue}isError(){return this.type==Ta.Error}toNumber(){return this.type==Ta.Number?this.numValue:-1}toString(){switch(this.type){case Ta.Character:case Ta.Identifier:case Ta.Keyword:case Ta.Operator:case Ta.String:case Ta.Error:return this.strValue;case Ta.Number:return this.numValue.toString();default:return null}}}function Ia(e,t){return new Da(e,Ta.Character,t,String.fromCharCode(t))}function Na(e,t){return new Da(e,Ta.Operator,0,t)}const Oa=new Da(-1,Ta.Character,0,"");class ka{constructor(e){this.input=e,this.peek=0,this.index=-1,this.length=e.length,this.advance()}advance(){this.peek=++this.index>=this.length?Os:this.input.charCodeAt(this.index)}scanToken(){const e=this.input,t=this.length;let n=this.peek,r=this.index;for(;n<=Ls;){if(++r>=t){n=Os;break}n=e.charCodeAt(r)}if(this.peek=n,this.index=r,r>=t)return null;if(Pa(n))return this.scanIdentifier();if(Mo(n))return this.scanNumber(r);const i=r;switch(n){case Ys:return this.advance(),Mo(this.peek)?this.scanNumber(i):Ia(i,Ys);case zs:case Ws:case Do:case No:case po:case mo:case Gs:case Js:case eo:return this.scanCharacter(i,n);case Hs:case js:return this.scanString();case Bs:case Qs:case Xs:case Ks:case Zs:case qs:case go:return this.scanOperator(i,String.fromCharCode(n));case io:return this.scanComplexOperator(i,"?",Ys,".");case to:case ro:return this.scanComplexOperator(i,String.fromCharCode(n),no,"=");case Vs:case no:return this.scanComplexOperator(i,String.fromCharCode(n),no,"=",no,"=");case $s:return this.scanComplexOperator(i,"&",$s,"&");case Io:return this.scanComplexOperator(i,"|",Io,"|");case Oo:for(;Po(this.peek);)this.advance();return this.scanToken()}return this.advance(),this.error(`Unexpected character [${String.fromCharCode(n)}]`,0)}scanCharacter(e,t){return this.advance(),Ia(e,t)}scanOperator(e,t){return this.advance(),Na(e,t)}scanComplexOperator(e,t,n,r,i,s){this.advance();let o=t;return this.peek==n&&(this.advance(),o+=r),null!=i&&this.peek==i&&(this.advance(),o+=s),Na(e,o)}scanIdentifier(){const e=this.index;for(this.advance();Ma(this.peek);)this.advance();const t=this.input.substring(e,this.index);return xa.indexOf(t)>-1?(n=t,new Da(e,Ta.Keyword,0,n)):function(e,t){return new Da(e,Ta.Identifier,0,t)}(e,t);var n}scanNumber(e){let t=this.index===e;for(this.advance();;){if(Mo(this.peek));else if(this.peek==Ys)t=!1;else{if((n=this.peek)!=_o&&n!=uo)break;if(this.advance(),Ra(this.peek)&&this.advance(),!Mo(this.peek))return this.error("Invalid exponent",-1);t=!1}this.advance()}var n;const r=this.input.substring(e,this.index),i=t?function(e){const t=parseInt(e);if(isNaN(t))throw new Error("Invalid integer literal when parsing "+e);return t}(r):parseFloat(r);return s=i,new Da(e,Ta.Number,s,"");var s}scanString(){const e=this.index,t=this.peek;this.advance();let n="",r=this.index;const i=this.input;for(;this.peek!=t;)if(this.peek==fo){let e;if(n+=i.substring(r,this.index),this.advance(),this.peek=this.peek,this.peek==So){const t=i.substring(this.index+1,this.index+5);if(!/^[0-9a-f]+$/i.test(t))return this.error(`Invalid unicode escape [\\u${t}]`,0);e=parseInt(t,16);for(let e=0;e<5;e++)this.advance()}else e=Fa(this.peek),this.advance();n+=String.fromCharCode(e),r=this.index}else{if(this.peek==Os)return this.error("Unterminated quote",0);this.advance()}const s=i.substring(r,this.index);return this.advance(),o=n+s,new Da(e,Ta.String,0,o);var o}error(e,t){const n=this.index+t;return function(e,t){return new Da(e,Ta.Error,0,t)}(n,`Lexer Error: ${e} at column ${n} in expression [${this.input}]`)}}function Pa(e){return vo<=e&&e<=Ao||ao<=e&&e<=ho||e==yo||e==Us}function Ma(e){return Ro(e)||Mo(e)||e==yo||e==Us}function Ra(e){return e==Xs||e==Qs}function Fa(e){switch(e){case wo:return Ps;case bo:return Rs;case Eo:return Fs;case Co:return ks;case To:return Ms;default:return e}}function La(e,t){if(null!=t){if(!Array.isArray(t))throw new Error(`Expected '${e}' to be an array of strings.`);for(let n=0;n<t.length;n+=1)if("string"!=typeof t[n])throw new Error(`Expected '${e}' to be an array of strings.`)}}const Va=[/^\s*$/,/[<>]/,/^[{}]$/,/&(#|[a-z])/i,/^\/\//];function ja(e,t){if(!(null==t||Array.isArray(t)&&2==t.length))throw new Error(`Expected '${e}' to be an array, [start, end].`);if(null!=t){const e=t[0],n=t[1];Va.forEach(t=>{if(t.test(e)||t.test(n))throw new Error(`['${e}', '${n}'] contains unusable interpolation symbol.`)})}}class Ba{constructor(e,t){this.start=e,this.end=t}static fromArray(e){return e?(ja("interpolation",e),new Ba(e[0],e[1])):Ua}}const Ua=new Ba("{{","}}");class qa{constructor(e,t,n){this.strings=e,this.expressions=t,this.offsets=n}}class $a{constructor(e,t,n){this.templateBindings=e,this.warnings=t,this.errors=n}}function Ha(e){const t=Ot(e.start)+"([\\s\\S]*?)"+Ot(e.end);return new RegExp(t,"g")}class za{constructor(e){this._lexer=e,this.errors=[]}parseAction(e,t,n=Ua){this._checkNoInterpolation(e,t,n);const r=this._stripComments(e),i=this._lexer.tokenize(this._stripComments(e)),s=new Wa(e,t,i,r.length,!0,this.errors,e.length-r.length).parseChain();return new ns(s,e,t,this.errors)}parseBinding(e,t,n=Ua){const r=this._parseBindingAst(e,t,n);return new ns(r,e,t,this.errors)}parseSimpleBinding(e,t,n=Ua){const r=this._parseBindingAst(e,t,n),i=Ka.check(r);return i.length>0&&this._reportError(`Host binding expression cannot contain ${i.join(" ")}`,e,t),new ns(r,e,t,this.errors)}_reportError(e,t,n,r){this.errors.push(new ki(e,t,n,r))}_parseBindingAst(e,t,n){const r=this._parseQuote(e,t);if(null!=r)return r;this._checkNoInterpolation(e,t,n);const i=this._stripComments(e),s=this._lexer.tokenize(i);return new Wa(e,t,s,i.length,!1,this.errors,e.length-i.length).parseChain()}_parseQuote(e,t){if(null==e)return null;const n=e.indexOf(":");if(-1==n)return null;const r=e.substring(0,n).trim();if(!function(e){if(0==e.length)return!1;const t=new ka(e);if(!Pa(t.peek))return!1;for(t.advance();t.peek!==Os;){if(!Ma(t.peek))return!1;t.advance()}return!0}(r))return null;const i=e.substring(n+1);return new Ri(new Pi(0,e.length),r,i,t)}parseTemplateBindings(e,t,n){const r=this._lexer.tokenize(t);return new Wa(t,n,r,t.length,!1,this.errors,0).parseTemplateBindings(e)}parseInterpolation(e,t,n=Ua){const r=this.splitInterpolation(e,t,n);if(null==r)return null;const i=[];for(let s=0;s<r.expressions.length;++s){const n=r.expressions[s],o=this._stripComments(n),a=this._lexer.tokenize(o),u=new Wa(e,t,a,o.length,!1,this.errors,r.offsets[s]+(n.length-o.length)).parseChain();i.push(u)}return new ns(new Gi(new Pi(0,null==e?0:e.length),r.strings,i),e,t,this.errors)}splitInterpolation(e,t,n=Ua){const r=Ha(n),i=e.split(r);if(i.length<=1)return null;const s=[],o=[],a=[];let u=0;for(let c=0;c<i.length;c++){const r=i[c];c%2==0?(s.push(r),u+=r.length):r.trim().length>0?(u+=n.start.length,o.push(r),a.push(u),u+=r.length+n.end.length):(this._reportError("Blank expressions are not allowed in interpolated strings",e,`at column ${this._findInterpolationErrorColumn(i,c,n)} in`,t),o.push("$implict"),a.push(u))}return new qa(s,o,a)}wrapLiteralPrimitive(e,t){return new ns(new Wi(new Pi(0,null==e?0:e.length),e),e,t,this.errors)}_stripComments(e){const t=this._commentStart(e);return null!=t?e.substring(0,t).trim():e}_commentStart(e){let t=null;for(let r=0;r<e.length-1;r++){const i=e.charCodeAt(r),s=e.charCodeAt(r+1);if(i===Zs&&s==Zs&&null==t)return r;t===i?t=null:null==t&&((n=i)===Hs||n===js||n===ko)&&(t=i)}var n;return null}_checkNoInterpolation(e,t,n){const r=Ha(n),i=e.split(r);i.length>1&&this._reportError(`Got interpolation (${n.start}${n.end}) where expression was expected`,e,`at column ${this._findInterpolationErrorColumn(i,1,n)} in`,t)}_findInterpolationErrorColumn(e,t,n){let r="";for(let i=0;i<t;i++)r+=i%2==0?e[i]:`${n.start}${e[i]}${n.end}`;return r.length}}class Wa{constructor(e,t,n,r,i,s,o){this.input=e,this.location=t,this.tokens=n,this.inputLength=r,this.parseAction=i,this.errors=s,this.offset=o,this.rparensExpected=0,this.rbracketsExpected=0,this.rbracesExpected=0,this.index=0}peek(e){const t=this.index+e;return t<this.tokens.length?this.tokens[t]:Oa}get next(){return this.peek(0)}get inputIndex(){return this.index<this.tokens.length?this.next.index+this.offset:this.inputLength+this.offset}span(e){return new Pi(e,this.inputIndex)}advance(){this.index++}optionalCharacter(e){return!!this.next.isCharacter(e)&&(this.advance(),!0)}peekKeywordLet(){return this.next.isKeywordLet()}peekKeywordAs(){return this.next.isKeywordAs()}expectCharacter(e){this.optionalCharacter(e)||this.error(`Missing expected ${String.fromCharCode(e)}`)}optionalOperator(e){return!!this.next.isOperator(e)&&(this.advance(),!0)}expectOperator(e){this.optionalOperator(e)||this.error(`Missing expected operator ${e}`)}expectIdentifierOrKeyword(){const e=this.next;return e.isIdentifier()||e.isKeyword()?(this.advance(),e.toString()):(this.error(`Unexpected token ${e}, expected identifier or keyword`),"")}expectIdentifierOrKeywordOrString(){const e=this.next;return e.isIdentifier()||e.isKeyword()||e.isString()?(this.advance(),e.toString()):(this.error(`Unexpected token ${e}, expected identifier, keyword, or string`),"")}parseChain(){const e=[],t=this.inputIndex;for(;this.index<this.tokens.length;){const t=this.parsePipe();if(e.push(t),this.optionalCharacter(eo))for(this.parseAction||this.error("Binding expression cannot contain chained expression");this.optionalCharacter(eo););else this.index<this.tokens.length&&this.error(`Unexpected token '${this.next}'`)}return 0==e.length?new Fi(this.span(t)):1==e.length?e[0]:new Vi(this.span(t),e)}parsePipe(){let e=this.parseExpression();if(this.optionalOperator("|")){this.parseAction&&this.error("Cannot have a pipe in an action expression");do{const t=this.expectIdentifierOrKeyword(),n=[];for(;this.optionalCharacter(Js);)n.push(this.parseExpression());e=new zi(this.span(e.span.start),e,t,n)}while(this.optionalOperator("|"))}return e}parseExpression(){return this.parseConditional()}parseConditional(){const e=this.inputIndex,t=this.parseLogicalOr();if(this.optionalOperator("?")){const n=this.parsePipe();let r;if(this.optionalCharacter(Js))r=this.parsePipe();else{const t=this.inputIndex,n=this.input.substring(e,t);this.error(`Conditional expression ${n} requires all 3 expressions`),r=new Fi(this.span(e))}return new ji(this.span(e),t,n,r)}return t}parseLogicalOr(){let e=this.parseLogicalAnd();for(;this.optionalOperator("||");){const t=this.parseLogicalAnd();e=new Xi(this.span(e.span.start),"||",e,t)}return e}parseLogicalAnd(){let e=this.parseEquality();for(;this.optionalOperator("&&");){const t=this.parseEquality();e=new Xi(this.span(e.span.start),"&&",e,t)}return e}parseEquality(){let e=this.parseRelational();for(;this.next.type==Ta.Operator;){const t=this.next.strValue;switch(t){case"==":case"===":case"!=":case"!==":this.advance();const n=this.parseRelational();e=new Xi(this.span(e.span.start),t,e,n);continue}break}return e}parseRelational(){let e=this.parseAdditive();for(;this.next.type==Ta.Operator;){const t=this.next.strValue;switch(t){case"<":case">":case"<=":case">=":this.advance();const n=this.parseAdditive();e=new Xi(this.span(e.span.start),t,e,n);continue}break}return e}parseAdditive(){let e=this.parseMultiplicative();for(;this.next.type==Ta.Operator;){const t=this.next.strValue;switch(t){case"+":case"-":this.advance();let n=this.parseMultiplicative();e=new Xi(this.span(e.span.start),t,e,n);continue}break}return e}parseMultiplicative(){let e=this.parsePrefix();for(;this.next.type==Ta.Operator;){const t=this.next.strValue;switch(t){case"*":case"%":case"/":this.advance();let n=this.parsePrefix();e=new Xi(this.span(e.span.start),t,e,n);continue}break}return e}parsePrefix(){if(this.next.type==Ta.Operator){const e=this.inputIndex,t=this.next.strValue;let n;switch(t){case"+":return this.advance(),n=this.parsePrefix(),new Xi(this.span(e),"-",n,new Wi(new Pi(e,e),0));case"-":return this.advance(),n=this.parsePrefix(),new Xi(this.span(e),t,new Wi(new Pi(e,e),0),n);case"!":return this.advance(),n=this.parsePrefix(),new Yi(this.span(e),n)}}return this.parseCallChain()}parseCallChain(){let e=this.parsePrimary();for(;;)if(this.optionalCharacter(Ys))e=this.parseAccessMemberOrMethodCall(e,!1);else if(this.optionalOperator("?."))e=this.parseAccessMemberOrMethodCall(e,!0);else if(this.optionalCharacter(po)){this.rbracketsExpected++;const t=this.parsePipe();if(this.rbracketsExpected--,this.expectCharacter(mo),this.optionalOperator("=")){const n=this.parseConditional();e=new Hi(this.span(e.span.start),e,t,n)}else e=new $i(this.span(e.span.start),e,t)}else if(this.optionalCharacter(zs)){this.rparensExpected++;const t=this.parseCallArguments();this.rparensExpected--,this.expectCharacter(Ws),e=new ts(this.span(e.span.start),e,t)}else{if(!this.optionalOperator("!"))return e;e=new Zi(this.span(e.span.start),e)}}parsePrimary(){const e=this.inputIndex;if(this.optionalCharacter(zs)){this.rparensExpected++;const e=this.parsePipe();return this.rparensExpected--,this.expectCharacter(Ws),e}if(this.next.isKeywordNull())return this.advance(),new Wi(this.span(e),null);if(this.next.isKeywordUndefined())return this.advance(),new Wi(this.span(e),void 0);if(this.next.isKeywordTrue())return this.advance(),new Wi(this.span(e),!0);if(this.next.isKeywordFalse())return this.advance(),new Wi(this.span(e),!1);if(this.next.isKeywordThis())return this.advance(),new Li(this.span(e));if(this.optionalCharacter(po)){this.rbracketsExpected++;const t=this.parseExpressionList(mo);return this.rbracketsExpected--,this.expectCharacter(mo),new Ki(this.span(e),t)}if(this.next.isCharacter(Do))return this.parseLiteralMap();if(this.next.isIdentifier())return this.parseAccessMemberOrMethodCall(new Li(this.span(e)),!1);if(this.next.isNumber()){const t=this.next.toNumber();return this.advance(),new Wi(this.span(e),t)}if(this.next.isString()){const t=this.next.toString();return this.advance(),new Wi(this.span(e),t)}return this.index>=this.tokens.length?(this.error(`Unexpected end of expression: ${this.input}`),new Fi(this.span(e))):(this.error(`Unexpected token ${this.next}`),new Fi(this.span(e)))}parseExpressionList(e){const t=[];if(!this.next.isCharacter(e))do{t.push(this.parsePipe())}while(this.optionalCharacter(Gs));return t}parseLiteralMap(){const e=[],t=[],n=this.inputIndex;if(this.expectCharacter(Do),!this.optionalCharacter(No)){this.rbracesExpected++;do{const n=this.next.isString(),r=this.expectIdentifierOrKeywordOrString();e.push({key:r,quoted:n}),this.expectCharacter(Js),t.push(this.parsePipe())}while(this.optionalCharacter(Gs));this.rbracesExpected--,this.expectCharacter(No)}return new Qi(this.span(n),e,t)}parseAccessMemberOrMethodCall(e,t=!1){const n=e.span.start,r=this.expectIdentifierOrKeyword();if(this.optionalCharacter(zs)){this.rparensExpected++;const i=this.parseCallArguments();this.expectCharacter(Ws),this.rparensExpected--;const s=this.span(n);return t?new es(s,e,r,i):new Ji(s,e,r,i)}if(t)return this.optionalOperator("=")?(this.error("The '?.' operator cannot be used in the assignment"),new Fi(this.span(n))):new qi(this.span(n),e,r);if(this.optionalOperator("=")){if(!this.parseAction)return this.error("Bindings cannot contain assignments"),new Fi(this.span(n));const t=this.parseConditional();return new Ui(this.span(n),e,r,t)}return new Bi(this.span(n),e,r)}parseCallArguments(){if(this.next.isCharacter(Ws))return[];const e=[];do{e.push(this.parsePipe())}while(this.optionalCharacter(Gs));return e}expectTemplateBindingKey(){let e="",t=!1;do{e+=this.expectIdentifierOrKeywordOrString(),(t=this.optionalOperator("-"))&&(e+="-")}while(t);return e.toString()}parseTemplateBindings(e){let t=!0;const n=[];do{const r=this.inputIndex;let i,s,o=!1;t?(i=s=e,t=!1):((o=this.peekKeywordLet())&&this.advance(),i=this.expectTemplateBindingKey(),s=o?i:e+i[0].toUpperCase()+i.substring(1),this.optionalCharacter(Js));let a=null,u=null;if(o)a=this.optionalOperator("=")?this.expectTemplateBindingKey():"$implicit";else if(this.peekKeywordAs())this.advance(),a=i,s=this.expectTemplateBindingKey(),o=!0;else if(this.next!==Oa&&!this.peekKeywordLet()){const e=this.inputIndex,t=this.parsePipe(),n=this.input.substring(e-this.offset,this.inputIndex-this.offset);u=new ns(t,n,this.location,this.errors)}if(n.push(new rs(this.span(r),s,o,a,u)),this.peekKeywordAs()&&!o){const e=this.inputIndex;this.advance();const t=this.expectTemplateBindingKey();n.push(new rs(this.span(e),t,!0,s,null))}this.optionalCharacter(eo)||this.optionalCharacter(Gs)}while(this.index<this.tokens.length);return new $a(n,[],this.errors)}error(e,t=null){this.errors.push(new ki(e,this.input,this.locationText(t),this.location)),this.skip()}locationText(e=null){return null==e&&(e=this.index),e<this.tokens.length?`at column ${this.tokens[e].index+1} in`:"at the end of the expression"}skip(){let e=this.next;for(;this.index<this.tokens.length&&!e.isCharacter(eo)&&(this.rparensExpected<=0||!e.isCharacter(Ws))&&(this.rbracesExpected<=0||!e.isCharacter(No))&&(this.rbracketsExpected<=0||!e.isCharacter(mo));)this.next.isError()&&this.errors.push(new ki(this.next.toString(),this.input,this.locationText(),this.location)),this.advance(),e=this.next}}class Ka{constructor(){this.errors=[]}static check(e){const t=new Ka;return e.visit(t),t.errors}visitImplicitReceiver(e,t){}visitInterpolation(e,t){}visitLiteralPrimitive(e,t){}visitPropertyRead(e,t){}visitPropertyWrite(e,t){}visitSafePropertyRead(e,t){}visitMethodCall(e,t){}visitSafeMethodCall(e,t){}visitFunctionCall(e,t){}visitLiteralArray(e,t){this.visitAll(e.expressions)}visitLiteralMap(e,t){this.visitAll(e.values)}visitBinary(e,t){}visitPrefixNot(e,t){}visitNonNullAssert(e,t){}visitConditional(e,t){}visitPipe(e,t){this.errors.push("pipes")}visitKeyedRead(e,t){}visitKeyedWrite(e,t){}visitAll(e){return e.map(e=>e.visit(this))}visitChain(e,t){}visitQuote(e,t){}}class Qa{constructor(e,t,n){this.value=e,this.sourceSpan=t,this.i18n=n}visit(e,t){return e.visitText(this,t)}}class Ga{constructor(e,t,n,r,i,s){this.switchValue=e,this.type=t,this.cases=n,this.sourceSpan=r,this.switchValueSourceSpan=i,this.i18n=s}visit(e,t){return e.visitExpansion(this,t)}}class Xa{constructor(e,t,n,r,i){this.value=e,this.expression=t,this.sourceSpan=n,this.valueSourceSpan=r,this.expSourceSpan=i}visit(e,t){return e.visitExpansionCase(this,t)}}class Ya{constructor(e,t,n,r,i){this.name=e,this.value=t,this.sourceSpan=n,this.valueSpan=r,this.i18n=i}visit(e,t){return e.visitAttribute(this,t)}}class Za{constructor(e,t,n,r,i=null,s=null,o){this.name=e,this.attrs=t,this.children=n,this.sourceSpan=r,this.startSourceSpan=i,this.endSourceSpan=s,this.i18n=o}visit(e,t){return e.visitElement(this,t)}}class Ja{constructor(e,t){this.value=e,this.sourceSpan=t}visit(e,t){return e.visitComment(this,t)}}function eu(e,t,n=null){const r=[],i=e.visit?t=>e.visit(t,n)||t.visit(e,n):t=>t.visit(e,n);return t.forEach(e=>{const t=i(e);t&&r.push(t)}),r}var tu;!function(e){e[e.TAG_OPEN_START=0]="TAG_OPEN_START",e[e.TAG_OPEN_END=1]="TAG_OPEN_END",e[e.TAG_OPEN_END_VOID=2]="TAG_OPEN_END_VOID",e[e.TAG_CLOSE=3]="TAG_CLOSE",e[e.TEXT=4]="TEXT",e[e.ESCAPABLE_RAW_TEXT=5]="ESCAPABLE_RAW_TEXT",e[e.RAW_TEXT=6]="RAW_TEXT",e[e.COMMENT_START=7]="COMMENT_START",e[e.COMMENT_END=8]="COMMENT_END",e[e.CDATA_START=9]="CDATA_START",e[e.CDATA_END=10]="CDATA_END",e[e.ATTR_NAME=11]="ATTR_NAME",e[e.ATTR_VALUE=12]="ATTR_VALUE",e[e.DOC_TYPE=13]="DOC_TYPE",e[e.EXPANSION_FORM_START=14]="EXPANSION_FORM_START",e[e.EXPANSION_CASE_VALUE=15]="EXPANSION_CASE_VALUE",e[e.EXPANSION_CASE_EXP_START=16]="EXPANSION_CASE_EXP_START",e[e.EXPANSION_CASE_EXP_END=17]="EXPANSION_CASE_EXP_END",e[e.EXPANSION_FORM_END=18]="EXPANSION_FORM_END",e[e.EOF=19]="EOF"}(tu||(tu={}));class nu{constructor(e,t,n){this.type=e,this.parts=t,this.sourceSpan=n}}class ru extends Bo{constructor(e,t,n){super(n,e),this.tokenType=t}}class iu{constructor(e,t){this.tokens=e,this.errors=t}}const su=/\r\n?/g;function ou(e){return`Unexpected character "${e===Os?"EOF":String.fromCharCode(e)}"`}function au(e){return`Unknown entity "${e}" - use the "&#<decimal>;" or  "&#x<hex>;" syntax`}class uu{constructor(e){this.error=e}}class cu{constructor(e,t,n,r=Ua){this._file=e,this._getTagDefinition=t,this._tokenizeIcu=n,this._interpolationConfig=r,this._peek=-1,this._nextPeek=-1,this._index=-1,this._line=0,this._column=-1,this._expansionCaseStack=[],this._inInterpolation=!1,this.tokens=[],this.errors=[],this._input=e.content,this._length=e.content.length,this._advance()}_processCarriageReturns(e){return e.replace(su,"\n")}tokenize(){for(;this._peek!==Os;){const t=this._getLocation();try{this._attemptCharCode(to)?this._attemptCharCode(Vs)?this._attemptCharCode(po)?this._consumeCdata(t):this._attemptCharCode(Xs)?this._consumeComment(t):this._consumeDocType(t):this._attemptCharCode(Zs)?this._consumeTagClose(t):this._consumeTagOpen(t):this._tokenizeIcu&&this._tokenizeExpansionForm()||this._consumeText()}catch(e){if(!(e instanceof uu))throw e;this.errors.push(e.error)}}return this._beginToken(tu.EOF),this._endToken([]),new iu(function(e){const t=[];let n=void 0;for(let r=0;r<e.length;r++){const i=e[r];n&&n.type==tu.TEXT&&i.type==tu.TEXT?(n.parts[0]+=i.parts[0],n.sourceSpan.end=i.sourceSpan.end):(n=i,t.push(n))}return t}(this.tokens),this.errors)}_tokenizeExpansionForm(){if(fu(this._input,this._index,this._interpolationConfig))return this._consumeExpansionFormStart(),!0;if(((e=this._peek)===no||Ro(e)||Mo(e))&&this._isInExpansionForm())return this._consumeExpansionCaseStart(),!0;var e;if(this._peek===No){if(this._isInExpansionCase())return this._consumeExpansionCaseEnd(),!0;if(this._isInExpansionForm())return this._consumeExpansionFormEnd(),!0}return!1}_getLocation(){return new Fo(this._file,this._index,this._line,this._column)}_getSpan(e=this._getLocation(),t=this._getLocation()){return new Vo(e,t)}_beginToken(e,t=this._getLocation()){this._currentTokenStart=t,this._currentTokenType=e}_endToken(e,t=this._getLocation()){const n=new nu(this._currentTokenType,e,new Vo(this._currentTokenStart,t));return this.tokens.push(n),this._currentTokenStart=null,this._currentTokenType=null,n}_createError(e,t){this._isInExpansionForm()&&(e+=' (Do you have an unescaped "{" in your template? Use "{{ \'{\' }}") to escape it.)');const n=new ru(e,this._currentTokenType,t);return this._currentTokenStart=null,this._currentTokenType=null,new uu(n)}_advance(){if(this._index>=this._length)throw this._createError(ou(Os),this._getSpan());this._peek===Ps?(this._line++,this._column=0):this._peek!==Ps&&this._peek!==Fs&&this._column++,this._index++,this._peek=this._index>=this._length?Os:this._input.charCodeAt(this._index),this._nextPeek=this._index+1>=this._length?Os:this._input.charCodeAt(this._index+1)}_attemptCharCode(e){return this._peek===e&&(this._advance(),!0)}_attemptCharCodeCaseInsensitive(e){return t=this._peek,n=e,mu(t)==mu(n)&&(this._advance(),!0);var t,n}_requireCharCode(e){const t=this._getLocation();if(!this._attemptCharCode(e))throw this._createError(ou(this._peek),this._getSpan(t,t))}_attemptStr(e){const t=e.length;if(this._index+t>this._length)return!1;const n=this._savePosition();for(let r=0;r<t;r++)if(!this._attemptCharCode(e.charCodeAt(r)))return this._restorePosition(n),!1;return!0}_attemptStrCaseInsensitive(e){for(let t=0;t<e.length;t++)if(!this._attemptCharCodeCaseInsensitive(e.charCodeAt(t)))return!1;return!0}_requireStr(e){const t=this._getLocation();if(!this._attemptStr(e))throw this._createError(ou(this._peek),this._getSpan(t))}_attemptCharCodeUntilFn(e){for(;!e(this._peek);)this._advance()}_requireCharCodeUntilFn(e,t){const n=this._getLocation();if(this._attemptCharCodeUntilFn(e),this._index-n.offset<t)throw this._createError(ou(this._peek),this._getSpan(n,n))}_attemptUntilChar(e){for(;this._peek!==e;)this._advance()}_readChar(e){if(e&&this._peek===$s)return this._decodeEntity();{const e=this._index;return this._advance(),this._input[e]}}_decodeEntity(){const e=this._getLocation();if(this._advance(),!this._attemptCharCode(Bs)){const t=this._savePosition();if(this._attemptCharCodeUntilFn(pu),this._peek!=eo)return this._restorePosition(t),"&";this._advance();const n=this._input.substring(e.offset+1,this._index-1),r=h[n];if(!r)throw this._createError(au(n),this._getSpan(e));return r}{const n=this._attemptCharCode(xo)||this._attemptCharCode(lo),r=this._getLocation().offset;if(this._attemptCharCodeUntilFn(du),this._peek!=eo)throw this._createError(ou(this._peek),this._getSpan());this._advance();const i=this._input.substring(r,this._index-1);try{const r=parseInt(i,n?16:10);return String.fromCharCode(r)}catch(t){const n=this._input.substring(e.offset+1,this._index-1);throw this._createError(au(n),this._getSpan(e))}}}_consumeRawText(e,t,n){let r;const i=this._getLocation();this._beginToken(e?tu.ESCAPABLE_RAW_TEXT:tu.RAW_TEXT,i);const s=[];for(;r=this._getLocation(),!this._attemptCharCode(t)||!n();)for(this._index>r.offset&&s.push(this._input.substring(r.offset,this._index));this._peek!==t;)s.push(this._readChar(e));return this._endToken([this._processCarriageReturns(s.join(""))],r)}_consumeComment(e){this._beginToken(tu.COMMENT_START,e),this._requireCharCode(Xs),this._endToken([]);const t=this._consumeRawText(!1,Xs,()=>this._attemptStr("->"));this._beginToken(tu.COMMENT_END,t.sourceSpan.end),this._endToken([])}_consumeCdata(e){this._beginToken(tu.CDATA_START,e),this._requireStr("CDATA["),this._endToken([]);const t=this._consumeRawText(!1,mo,()=>this._attemptStr("]>"));this._beginToken(tu.CDATA_END,t.sourceSpan.end),this._endToken([])}_consumeDocType(e){this._beginToken(tu.DOC_TYPE,e),this._attemptUntilChar(ro),this._advance(),this._endToken([this._input.substring(e.offset+2,this._index-1)])}_consumePrefixAndName(){const e=this._index;let t=null;for(;this._peek!==Js&&!(((n=this._peek)<vo||Ao<n)&&(n<ao||ho<n)&&(n<so||n>oo));)this._advance();var n;let r;return this._peek===Js?(this._advance(),t=this._input.substring(e,this._index-1),r=this._index):r=e,this._requireCharCodeUntilFn(hu,this._index===r?1:0),[t,this._input.substring(r,this._index)]}_consumeTagOpen(e){const t=this._savePosition();let n,i;try{if(!Ro(this._peek))throw this._createError(ou(this._peek),this._getSpan());const r=this._index;for(this._consumeTagOpenStart(e),i=(n=this._input.substring(r,this._index)).toLowerCase(),this._attemptCharCodeUntilFn(lu);this._peek!==Zs&&this._peek!==ro;)this._consumeAttributeName(),this._attemptCharCodeUntilFn(lu),this._attemptCharCode(no)&&(this._attemptCharCodeUntilFn(lu),this._consumeAttributeValue()),this._attemptCharCodeUntilFn(lu);this._consumeTagOpenEnd()}catch(o){if(o instanceof uu)return this._restorePosition(t),this._beginToken(tu.TEXT,e),void this._endToken(["<"]);throw o}const s=this._getTagDefinition(n).contentType;s===r.RAW_TEXT?this._consumeRawTextWithTagClose(i,!1):s===r.ESCAPABLE_RAW_TEXT&&this._consumeRawTextWithTagClose(i,!0)}_consumeRawTextWithTagClose(e,t){const n=this._consumeRawText(t,to,()=>!!this._attemptCharCode(Zs)&&(this._attemptCharCodeUntilFn(lu),!!this._attemptStrCaseInsensitive(e)&&(this._attemptCharCodeUntilFn(lu),this._attemptCharCode(ro))));this._beginToken(tu.TAG_CLOSE,n.sourceSpan.end),this._endToken([null,e])}_consumeTagOpenStart(e){this._beginToken(tu.TAG_OPEN_START,e);const t=this._consumePrefixAndName();this._endToken(t)}_consumeAttributeName(){this._beginToken(tu.ATTR_NAME);const e=this._consumePrefixAndName();this._endToken(e)}_consumeAttributeValue(){let e;if(this._beginToken(tu.ATTR_VALUE),this._peek===Hs||this._peek===js){const t=this._peek;this._advance();const n=[];for(;this._peek!==t;)n.push(this._readChar(!0));e=n.join(""),this._advance()}else{const t=this._index;this._requireCharCodeUntilFn(hu,1),e=this._input.substring(t,this._index)}this._endToken([this._processCarriageReturns(e)])}_consumeTagOpenEnd(){const e=this._attemptCharCode(Zs)?tu.TAG_OPEN_END_VOID:tu.TAG_OPEN_END;this._beginToken(e),this._requireCharCode(ro),this._endToken([])}_consumeTagClose(e){this._beginToken(tu.TAG_CLOSE,e),this._attemptCharCodeUntilFn(lu);const t=this._consumePrefixAndName();this._attemptCharCodeUntilFn(lu),this._requireCharCode(ro),this._endToken(t)}_consumeExpansionFormStart(){this._beginToken(tu.EXPANSION_FORM_START,this._getLocation()),this._requireCharCode(Do),this._endToken([]),this._expansionCaseStack.push(tu.EXPANSION_FORM_START),this._beginToken(tu.RAW_TEXT,this._getLocation());const e=this._readUntil(Gs);this._endToken([e],this._getLocation()),this._requireCharCode(Gs),this._attemptCharCodeUntilFn(lu),this._beginToken(tu.RAW_TEXT,this._getLocation());const t=this._readUntil(Gs);this._endToken([t],this._getLocation()),this._requireCharCode(Gs),this._attemptCharCodeUntilFn(lu)}_consumeExpansionCaseStart(){this._beginToken(tu.EXPANSION_CASE_VALUE,this._getLocation());const e=this._readUntil(Do).trim();this._endToken([e],this._getLocation()),this._attemptCharCodeUntilFn(lu),this._beginToken(tu.EXPANSION_CASE_EXP_START,this._getLocation()),this._requireCharCode(Do),this._endToken([],this._getLocation()),this._attemptCharCodeUntilFn(lu),this._expansionCaseStack.push(tu.EXPANSION_CASE_EXP_START)}_consumeExpansionCaseEnd(){this._beginToken(tu.EXPANSION_CASE_EXP_END,this._getLocation()),this._requireCharCode(No),this._endToken([],this._getLocation()),this._attemptCharCodeUntilFn(lu),this._expansionCaseStack.pop()}_consumeExpansionFormEnd(){this._beginToken(tu.EXPANSION_FORM_END,this._getLocation()),this._requireCharCode(No),this._endToken([]),this._expansionCaseStack.pop()}_consumeText(){const e=this._getLocation();this._beginToken(tu.TEXT,e);const t=[];do{this._interpolationConfig&&this._attemptStr(this._interpolationConfig.start)?(t.push(this._interpolationConfig.start),this._inInterpolation=!0):this._interpolationConfig&&this._inInterpolation&&this._attemptStr(this._interpolationConfig.end)?(t.push(this._interpolationConfig.end),this._inInterpolation=!1):t.push(this._readChar(!0))}while(!this._isTextEnd());this._endToken([this._processCarriageReturns(t.join(""))])}_isTextEnd(){if(this._peek===to||this._peek===Os)return!0;if(this._tokenizeIcu&&!this._inInterpolation){if(fu(this._input,this._index,this._interpolationConfig))return!0;if(this._peek===No&&this._isInExpansionCase())return!0}return!1}_savePosition(){return[this._peek,this._index,this._column,this._line,this.tokens.length]}_readUntil(e){const t=this._index;return this._attemptUntilChar(e),this._input.substring(t,this._index)}_restorePosition(e){this._peek=e[0],this._index=e[1],this._column=e[2],this._line=e[3];const t=e[4];t<this.tokens.length&&(this.tokens=this.tokens.slice(0,t))}_isInExpansionCase(){return this._expansionCaseStack.length>0&&this._expansionCaseStack[this._expansionCaseStack.length-1]===tu.EXPANSION_CASE_EXP_START}_isInExpansionForm(){return this._expansionCaseStack.length>0&&this._expansionCaseStack[this._expansionCaseStack.length-1]===tu.EXPANSION_FORM_START}}function lu(e){return!Po(e)||e===Os}function hu(e){return Po(e)||e===ro||e===Zs||e===Hs||e===js||e===no}function du(e){return e==eo||e==Os||!function(e){return e>=vo&&e<=bo||e>=ao&&e<=co||Mo(e)}(e)}function pu(e){return e==eo||e==Os||!Ro(e)}function fu(e,t,n){const r=!!n&&e.indexOf(n.start,t)==t;return e.charCodeAt(t)==Do&&!r}function mu(e){return e>=vo&&e<=Ao?e-vo+ao:e}class gu extends Bo{constructor(e,t,n){super(t,n),this.elementName=e}static create(e,t,n){return new gu(e,t,n)}}class yu{constructor(e,t){this.rootNodes=e,this.errors=t}}class vu{constructor(e){this.getTagDefinition=e}parse(e,t,n=!1,r=Ua){const i=function(e,t,n,r=!1,i=Ua){return new cu(new Lo(e,t),n,r,i).tokenize()}(e,t,this.getTagDefinition,n,r),s=new _u(i.tokens,this.getTagDefinition).build();return new yu(s.rootNodes,i.errors.concat(s.errors))}}class _u{constructor(e,t){this.tokens=e,this.getTagDefinition=t,this._index=-1,this._rootNodes=[],this._errors=[],this._elementStack=[],this._advance()}build(){for(;this._peek.type!==tu.EOF;)this._peek.type===tu.TAG_OPEN_START?this._consumeStartTag(this._advance()):this._peek.type===tu.TAG_CLOSE?this._consumeEndTag(this._advance()):this._peek.type===tu.CDATA_START?(this._closeVoidElement(),this._consumeCdata(this._advance())):this._peek.type===tu.COMMENT_START?(this._closeVoidElement(),this._consumeComment(this._advance())):this._peek.type===tu.TEXT||this._peek.type===tu.RAW_TEXT||this._peek.type===tu.ESCAPABLE_RAW_TEXT?(this._closeVoidElement(),this._consumeText(this._advance())):this._peek.type===tu.EXPANSION_FORM_START?this._consumeExpansion(this._advance()):this._advance();return new yu(this._rootNodes,this._errors)}_advance(){const e=this._peek;return this._index<this.tokens.length-1&&this._index++,this._peek=this.tokens[this._index],e}_advanceIf(e){return this._peek.type===e?this._advance():null}_consumeCdata(e){this._consumeText(this._advance()),this._advanceIf(tu.CDATA_END)}_consumeComment(e){const t=this._advanceIf(tu.RAW_TEXT);this._advanceIf(tu.COMMENT_END);const n=null!=t?t.parts[0].trim():null;this._addToParent(new Ja(n,e.sourceSpan))}_consumeExpansion(e){const t=this._advance(),n=this._advance(),r=[];for(;this._peek.type===tu.EXPANSION_CASE_VALUE;){const e=this._parseExpansionCase();if(!e)return;r.push(e)}if(this._peek.type!==tu.EXPANSION_FORM_END)return void this._errors.push(gu.create(null,this._peek.sourceSpan,"Invalid ICU message. Missing '}'."));const i=new Vo(e.sourceSpan.start,this._peek.sourceSpan.end);this._addToParent(new Ga(t.parts[0],n.parts[0],r,i,t.sourceSpan)),this._advance()}_parseExpansionCase(){const e=this._advance();if(this._peek.type!==tu.EXPANSION_CASE_EXP_START)return this._errors.push(gu.create(null,this._peek.sourceSpan,"Invalid ICU message. Missing '{'.")),null;const t=this._advance(),n=this._collectExpansionExpTokens(t);if(!n)return null;const r=this._advance();n.push(new nu(tu.EOF,[],r.sourceSpan));const i=new _u(n,this.getTagDefinition).build();if(i.errors.length>0)return this._errors=this._errors.concat(i.errors),null;const s=new Vo(e.sourceSpan.start,r.sourceSpan.end),o=new Vo(t.sourceSpan.start,r.sourceSpan.end);return new Xa(e.parts[0],i.rootNodes,s,e.sourceSpan,o)}_collectExpansionExpTokens(e){const t=[],n=[tu.EXPANSION_CASE_EXP_START];for(;;){if(this._peek.type!==tu.EXPANSION_FORM_START&&this._peek.type!==tu.EXPANSION_CASE_EXP_START||n.push(this._peek.type),this._peek.type===tu.EXPANSION_CASE_EXP_END){if(!bu(n,tu.EXPANSION_CASE_EXP_START))return this._errors.push(gu.create(null,e.sourceSpan,"Invalid ICU message. Missing '}'.")),null;if(n.pop(),0==n.length)return t}if(this._peek.type===tu.EXPANSION_FORM_END){if(!bu(n,tu.EXPANSION_FORM_START))return this._errors.push(gu.create(null,e.sourceSpan,"Invalid ICU message. Missing '}'.")),null;n.pop()}if(this._peek.type===tu.EOF)return this._errors.push(gu.create(null,e.sourceSpan,"Invalid ICU message. Missing '}'.")),null;t.push(this._advance())}}_consumeText(e){let t=e.parts[0];if(t.length>0&&"\n"==t[0]){const e=this._getParentElement();null!=e&&0==e.children.length&&this.getTagDefinition(e.name).ignoreFirstLf&&(t=t.substring(1))}t.length>0&&this._addToParent(new Qa(t,e.sourceSpan))}_closeVoidElement(){const e=this._getParentElement();e&&this.getTagDefinition(e.name).isVoid&&this._elementStack.pop()}_consumeStartTag(e){const t=e.parts[0],n=e.parts[1],r=[];for(;this._peek.type===tu.ATTR_NAME;)r.push(this._consumeAttr(this._advance()));const i=this._getElementFullName(t,n,this._getParentElement());let s=!1;if(this._peek.type===tu.TAG_OPEN_END_VOID){this._advance(),s=!0;const t=this.getTagDefinition(i);t.canSelfClose||null!==c(i)||t.isVoid||this._errors.push(gu.create(i,e.sourceSpan,`Only void and foreign elements can be self closed "${e.parts[1]}"`))}else this._peek.type===tu.TAG_OPEN_END&&(this._advance(),s=!1);const o=this._peek.sourceSpan.start,a=new Vo(e.sourceSpan.start,o),u=new Za(i,r,[],a,a,void 0);this._pushElement(u),s&&(this._popElement(i),u.endSourceSpan=a)}_pushElement(e){const t=this._getParentElement();t&&this.getTagDefinition(t.name).isClosedByChild(e.name)&&this._elementStack.pop();const n=this.getTagDefinition(e.name),{parent:r,container:i}=this._getParentElementSkippingContainers();if(r&&n.requireExtraParent(r.name)){const t=new Za(n.parentToAdd,[],[],e.sourceSpan,e.startSourceSpan,e.endSourceSpan);this._insertBeforeContainer(r,i,t)}this._addToParent(e),this._elementStack.push(e)}_consumeEndTag(e){const t=this._getElementFullName(e.parts[0],e.parts[1],this._getParentElement());if(this._getParentElement()&&(this._getParentElement().endSourceSpan=e.sourceSpan),this.getTagDefinition(t).isVoid)this._errors.push(gu.create(t,e.sourceSpan,`Void elements do not have end tags "${e.parts[1]}"`));else if(!this._popElement(t)){const n=`Unexpected closing tag "${t}". It may happen when the tag has already been closed by another tag. For more info see https://www.w3.org/TR/html5/syntax.html#closing-elements-that-have-implied-end-tags`;this._errors.push(gu.create(t,e.sourceSpan,n))}}_popElement(e){for(let t=this._elementStack.length-1;t>=0;t--){const n=this._elementStack[t];if(n.name==e)return this._elementStack.splice(t,this._elementStack.length-t),!0;if(!this.getTagDefinition(n.name).closedByParent)return!1}return!1}_consumeAttr(e){const t=l(e.parts[0],e.parts[1]);let n=e.sourceSpan.end,r="",i=void 0;if(this._peek.type===tu.ATTR_VALUE){const e=this._advance();r=e.parts[0],n=e.sourceSpan.end,i=e.sourceSpan}return new Ya(t,r,new Vo(e.sourceSpan.start,n),i)}_getParentElement(){return this._elementStack.length>0?this._elementStack[this._elementStack.length-1]:null}_getParentElementSkippingContainers(){let e=null;for(let t=this._elementStack.length-1;t>=0;t--){if(!o(this._elementStack[t].name))return{parent:this._elementStack[t],container:e};e=this._elementStack[t]}return{parent:null,container:e}}_addToParent(e){const t=this._getParentElement();null!=t?t.children.push(e):this._rootNodes.push(e)}_insertBeforeContainer(e,t,n){if(t){if(e){const r=e.children.indexOf(t);e.children[r]=n}else this._rootNodes.push(n);n.children.push(t),this._elementStack.splice(this._elementStack.indexOf(t),0,n)}else this._addToParent(n),this._elementStack.push(n)}_getElementFullName(e,t,n){return null==e&&null==(e=this.getTagDefinition(t).implicitNamespacePrefix)&&null!=n&&(e=c(n.name)),l(e,t)}}function bu(e,t){return e.length>0&&e[e.length-1]===t}class wu extends vu{constructor(){super(g)}parse(e,t,n=!1,r=Ua){return super.parse(e,t,n,r)}}const Eu="ngPreserveWhitespaces",Cu=new Set(["pre","template","textarea","script","style"]),Su=" \f\n\r\t\v\u1680\u180e\u2000-\u200a\u2028\u2029\u202f\u205f\u3000\ufeff",Tu=new RegExp(`[^${Su}]`),xu=new RegExp(`[${Su}]{2,}`,"g");function Au(e){return e.replace(new RegExp(d,"g")," ")}class Du{visitElement(e,t){return Cu.has(e.name)||e.attrs.some(e=>e.name===Eu)?new Za(e.name,eu(this,e.attrs),e.children,e.sourceSpan,e.startSourceSpan,e.endSourceSpan,e.i18n):new Za(e.name,e.attrs,eu(this,e.children),e.sourceSpan,e.startSourceSpan,e.endSourceSpan,e.i18n)}visitAttribute(e,t){return e.name!==Eu?e:null}visitText(e,t){return e.value.match(Tu)?new Qa(Au(e.value).replace(xu," "),e.sourceSpan,e.i18n):null}visitComment(e,t){return e}visitExpansion(e,t){return e}visitExpansionCase(e,t){return e}}function Iu(e){return new yu(eu(new Du,e.rootNodes),e.errors)}let Nu;function Ou(){return Nu||(Nu={},ku(K.HTML,["iframe|srcdoc","*|innerHTML","*|outerHTML"]),ku(K.STYLE,["*|style"]),ku(K.URL,["*|formAction","area|href","area|ping","audio|src","a|href","a|ping","blockquote|cite","body|background","del|cite","form|action","img|src","img|srcset","input|src","ins|cite","q|cite","source|src","source|srcset","track|src","video|poster","video|src"]),ku(K.RESOURCE_URL,["applet|code","applet|codebase","base|href","embed|src","frame|src","head|profile","html|manifest","iframe|src","link|href","media|src","object|codebase","object|data","script|src"])),Nu}function ku(e,t){for(const n of t)Nu[n.toLowerCase()]=e}class Pu{}const Mu="boolean",Ru="number",Fu="string",Lu="object",Vu=["[Element]|textContent,%classList,className,id,innerHTML,*beforecopy,*beforecut,*beforepaste,*copy,*cut,*paste,*search,*selectstart,*webkitfullscreenchange,*webkitfullscreenerror,*wheel,outerHTML,#scrollLeft,#scrollTop,slot,*message,*mozfullscreenchange,*mozfullscreenerror,*mozpointerlockchange,*mozpointerlockerror,*webglcontextcreationerror,*webglcontextlost,*webglcontextrestored","[HTMLElement]^[Element]|accessKey,contentEditable,dir,!draggable,!hidden,innerText,lang,*abort,*auxclick,*blur,*cancel,*canplay,*canplaythrough,*change,*click,*close,*contextmenu,*cuechange,*dblclick,*drag,*dragend,*dragenter,*dragleave,*dragover,*dragstart,*drop,*durationchange,*emptied,*ended,*error,*focus,*gotpointercapture,*input,*invalid,*keydown,*keypress,*keyup,*load,*loadeddata,*loadedmetadata,*loadstart,*lostpointercapture,*mousedown,*mouseenter,*mouseleave,*mousemove,*mouseout,*mouseover,*mouseup,*mousewheel,*pause,*play,*playing,*pointercancel,*pointerdown,*pointerenter,*pointerleave,*pointermove,*pointerout,*pointerover,*pointerup,*progress,*ratechange,*reset,*resize,*scroll,*seeked,*seeking,*select,*show,*stalled,*submit,*suspend,*timeupdate,*toggle,*volumechange,*waiting,outerText,!spellcheck,%style,#tabIndex,title,!translate","abbr,address,article,aside,b,bdi,bdo,cite,code,dd,dfn,dt,em,figcaption,figure,footer,header,i,kbd,main,mark,nav,noscript,rb,rp,rt,rtc,ruby,s,samp,section,small,strong,sub,sup,u,var,wbr^[HTMLElement]|accessKey,contentEditable,dir,!draggable,!hidden,innerText,lang,*abort,*auxclick,*blur,*cancel,*canplay,*canplaythrough,*change,*click,*close,*contextmenu,*cuechange,*dblclick,*drag,*dragend,*dragenter,*dragleave,*dragover,*dragstart,*drop,*durationchange,*emptied,*ended,*error,*focus,*gotpointercapture,*input,*invalid,*keydown,*keypress,*keyup,*load,*loadeddata,*loadedmetadata,*loadstart,*lostpointercapture,*mousedown,*mouseenter,*mouseleave,*mousemove,*mouseout,*mouseover,*mouseup,*mousewheel,*pause,*play,*playing,*pointercancel,*pointerdown,*pointerenter,*pointerleave,*pointermove,*pointerout,*pointerover,*pointerup,*progress,*ratechange,*reset,*resize,*scroll,*seeked,*seeking,*select,*show,*stalled,*submit,*suspend,*timeupdate,*toggle,*volumechange,*waiting,outerText,!spellcheck,%style,#tabIndex,title,!translate","media^[HTMLElement]|!autoplay,!controls,%controlsList,%crossOrigin,#currentTime,!defaultMuted,#defaultPlaybackRate,!disableRemotePlayback,!loop,!muted,*encrypted,*waitingforkey,#playbackRate,preload,src,%srcObject,#volume",":svg:^[HTMLElement]|*abort,*auxclick,*blur,*cancel,*canplay,*canplaythrough,*change,*click,*close,*contextmenu,*cuechange,*dblclick,*drag,*dragend,*dragenter,*dragleave,*dragover,*dragstart,*drop,*durationchange,*emptied,*ended,*error,*focus,*gotpointercapture,*input,*invalid,*keydown,*keypress,*keyup,*load,*loadeddata,*loadedmetadata,*loadstart,*lostpointercapture,*mousedown,*mouseenter,*mouseleave,*mousemove,*mouseout,*mouseover,*mouseup,*mousewheel,*pause,*play,*playing,*pointercancel,*pointerdown,*pointerenter,*pointerleave,*pointermove,*pointerout,*pointerover,*pointerup,*progress,*ratechange,*reset,*resize,*scroll,*seeked,*seeking,*select,*show,*stalled,*submit,*suspend,*timeupdate,*toggle,*volumechange,*waiting,%style,#tabIndex",":svg:graphics^:svg:|",":svg:animation^:svg:|*begin,*end,*repeat",":svg:geometry^:svg:|",":svg:componentTransferFunction^:svg:|",":svg:gradient^:svg:|",":svg:textContent^:svg:graphics|",":svg:textPositioning^:svg:textContent|","a^[HTMLElement]|charset,coords,download,hash,host,hostname,href,hreflang,name,password,pathname,ping,port,protocol,referrerPolicy,rel,rev,search,shape,target,text,type,username","area^[HTMLElement]|alt,coords,download,hash,host,hostname,href,!noHref,password,pathname,ping,port,protocol,referrerPolicy,rel,search,shape,target,username","audio^media|","br^[HTMLElement]|clear","base^[HTMLElement]|href,target","body^[HTMLElement]|aLink,background,bgColor,link,*beforeunload,*blur,*error,*focus,*hashchange,*languagechange,*load,*message,*offline,*online,*pagehide,*pageshow,*popstate,*rejectionhandled,*resize,*scroll,*storage,*unhandledrejection,*unload,text,vLink","button^[HTMLElement]|!autofocus,!disabled,formAction,formEnctype,formMethod,!formNoValidate,formTarget,name,type,value","canvas^[HTMLElement]|#height,#width","content^[HTMLElement]|select","dl^[HTMLElement]|!compact","datalist^[HTMLElement]|","details^[HTMLElement]|!open","dialog^[HTMLElement]|!open,returnValue","dir^[HTMLElement]|!compact","div^[HTMLElement]|align","embed^[HTMLElement]|align,height,name,src,type,width","fieldset^[HTMLElement]|!disabled,name","font^[HTMLElement]|color,face,size","form^[HTMLElement]|acceptCharset,action,autocomplete,encoding,enctype,method,name,!noValidate,target","frame^[HTMLElement]|frameBorder,longDesc,marginHeight,marginWidth,name,!noResize,scrolling,src","frameset^[HTMLElement]|cols,*beforeunload,*blur,*error,*focus,*hashchange,*languagechange,*load,*message,*offline,*online,*pagehide,*pageshow,*popstate,*rejectionhandled,*resize,*scroll,*storage,*unhandledrejection,*unload,rows","hr^[HTMLElement]|align,color,!noShade,size,width","head^[HTMLElement]|","h1,h2,h3,h4,h5,h6^[HTMLElement]|align","html^[HTMLElement]|version","iframe^[HTMLElement]|align,!allowFullscreen,frameBorder,height,longDesc,marginHeight,marginWidth,name,referrerPolicy,%sandbox,scrolling,src,srcdoc,width","img^[HTMLElement]|align,alt,border,%crossOrigin,#height,#hspace,!isMap,longDesc,lowsrc,name,referrerPolicy,sizes,src,srcset,useMap,#vspace,#width","input^[HTMLElement]|accept,align,alt,autocapitalize,autocomplete,!autofocus,!checked,!defaultChecked,defaultValue,dirName,!disabled,%files,formAction,formEnctype,formMethod,!formNoValidate,formTarget,#height,!incremental,!indeterminate,max,#maxLength,min,#minLength,!multiple,name,pattern,placeholder,!readOnly,!required,selectionDirection,#selectionEnd,#selectionStart,#size,src,step,type,useMap,value,%valueAsDate,#valueAsNumber,#width","li^[HTMLElement]|type,#value","label^[HTMLElement]|htmlFor","legend^[HTMLElement]|align","link^[HTMLElement]|as,charset,%crossOrigin,!disabled,href,hreflang,integrity,media,referrerPolicy,rel,%relList,rev,%sizes,target,type","map^[HTMLElement]|name","marquee^[HTMLElement]|behavior,bgColor,direction,height,#hspace,#loop,#scrollAmount,#scrollDelay,!trueSpeed,#vspace,width","menu^[HTMLElement]|!compact","meta^[HTMLElement]|content,httpEquiv,name,scheme","meter^[HTMLElement]|#high,#low,#max,#min,#optimum,#value","ins,del^[HTMLElement]|cite,dateTime","ol^[HTMLElement]|!compact,!reversed,#start,type","object^[HTMLElement]|align,archive,border,code,codeBase,codeType,data,!declare,height,#hspace,name,standby,type,useMap,#vspace,width","optgroup^[HTMLElement]|!disabled,label","option^[HTMLElement]|!defaultSelected,!disabled,label,!selected,text,value","output^[HTMLElement]|defaultValue,%htmlFor,name,value","p^[HTMLElement]|align","param^[HTMLElement]|name,type,value,valueType","picture^[HTMLElement]|","pre^[HTMLElement]|#width","progress^[HTMLElement]|#max,#value","q,blockquote,cite^[HTMLElement]|","script^[HTMLElement]|!async,charset,%crossOrigin,!defer,event,htmlFor,integrity,src,text,type","select^[HTMLElement]|!autofocus,!disabled,#length,!multiple,name,!required,#selectedIndex,#size,value","shadow^[HTMLElement]|","slot^[HTMLElement]|name","source^[HTMLElement]|media,sizes,src,srcset,type","span^[HTMLElement]|","style^[HTMLElement]|!disabled,media,type","caption^[HTMLElement]|align","th,td^[HTMLElement]|abbr,align,axis,bgColor,ch,chOff,#colSpan,headers,height,!noWrap,#rowSpan,scope,vAlign,width","col,colgroup^[HTMLElement]|align,ch,chOff,#span,vAlign,width","table^[HTMLElement]|align,bgColor,border,%caption,cellPadding,cellSpacing,frame,rules,summary,%tFoot,%tHead,width","tr^[HTMLElement]|align,bgColor,ch,chOff,vAlign","tfoot,thead,tbody^[HTMLElement]|align,ch,chOff,vAlign","template^[HTMLElement]|","textarea^[HTMLElement]|autocapitalize,!autofocus,#cols,defaultValue,dirName,!disabled,#maxLength,#minLength,name,placeholder,!readOnly,!required,#rows,selectionDirection,#selectionEnd,#selectionStart,value,wrap","title^[HTMLElement]|text","track^[HTMLElement]|!default,kind,label,src,srclang","ul^[HTMLElement]|!compact,type","unknown^[HTMLElement]|","video^media|#height,poster,#width",":svg:a^:svg:graphics|",":svg:animate^:svg:animation|",":svg:animateMotion^:svg:animation|",":svg:animateTransform^:svg:animation|",":svg:circle^:svg:geometry|",":svg:clipPath^:svg:graphics|",":svg:defs^:svg:graphics|",":svg:desc^:svg:|",":svg:discard^:svg:|",":svg:ellipse^:svg:geometry|",":svg:feBlend^:svg:|",":svg:feColorMatrix^:svg:|",":svg:feComponentTransfer^:svg:|",":svg:feComposite^:svg:|",":svg:feConvolveMatrix^:svg:|",":svg:feDiffuseLighting^:svg:|",":svg:feDisplacementMap^:svg:|",":svg:feDistantLight^:svg:|",":svg:feDropShadow^:svg:|",":svg:feFlood^:svg:|",":svg:feFuncA^:svg:componentTransferFunction|",":svg:feFuncB^:svg:componentTransferFunction|",":svg:feFuncG^:svg:componentTransferFunction|",":svg:feFuncR^:svg:componentTransferFunction|",":svg:feGaussianBlur^:svg:|",":svg:feImage^:svg:|",":svg:feMerge^:svg:|",":svg:feMergeNode^:svg:|",":svg:feMorphology^:svg:|",":svg:feOffset^:svg:|",":svg:fePointLight^:svg:|",":svg:feSpecularLighting^:svg:|",":svg:feSpotLight^:svg:|",":svg:feTile^:svg:|",":svg:feTurbulence^:svg:|",":svg:filter^:svg:|",":svg:foreignObject^:svg:graphics|",":svg:g^:svg:graphics|",":svg:image^:svg:graphics|",":svg:line^:svg:geometry|",":svg:linearGradient^:svg:gradient|",":svg:mpath^:svg:|",":svg:marker^:svg:|",":svg:mask^:svg:|",":svg:metadata^:svg:|",":svg:path^:svg:geometry|",":svg:pattern^:svg:|",":svg:polygon^:svg:geometry|",":svg:polyline^:svg:geometry|",":svg:radialGradient^:svg:gradient|",":svg:rect^:svg:geometry|",":svg:svg^:svg:graphics|#currentScale,#zoomAndPan",":svg:script^:svg:|type",":svg:set^:svg:animation|",":svg:stop^:svg:|",":svg:style^:svg:|!disabled,media,title,type",":svg:switch^:svg:graphics|",":svg:symbol^:svg:|",":svg:tspan^:svg:textPositioning|",":svg:text^:svg:textPositioning|",":svg:textPath^:svg:textContent|",":svg:title^:svg:|",":svg:use^:svg:graphics|",":svg:view^:svg:|#zoomAndPan","data^[HTMLElement]|value","keygen^[HTMLElement]|!autofocus,challenge,!disabled,form,keytype,name","menuitem^[HTMLElement]|type,label,icon,!disabled,!checked,radiogroup,!default","summary^[HTMLElement]|","time^[HTMLElement]|dateTime",":svg:cursor^:svg:|"],ju={class:"className",for:"htmlFor",formaction:"formAction",innerHtml:"innerHTML",readonly:"readOnly",tabindex:"tabIndex"};class Bu extends Pu{constructor(){super(),this._schema={},Vu.forEach(e=>{const t={},[n,r]=e.split("|"),i=r.split(","),[s,o]=n.split("^");s.split(",").forEach(e=>this._schema[e.toLowerCase()]=t);const a=o&&this._schema[o.toLowerCase()];a&&Object.keys(a).forEach(e=>{t[e]=a[e]}),i.forEach(e=>{if(e.length>0)switch(e[0]){case"*":break;case"!":t[e.substring(1)]=Mu;break;case"#":t[e.substring(1)]=Ru;break;case"%":t[e.substring(1)]=Lu;break;default:t[e]=Fu}})})}hasProperty(e,t,n){if(n.some(e=>e.name===U.name))return!0;if(e.indexOf("-")>-1){if(o(e)||a(e))return!1;if(n.some(e=>e.name===B.name))return!0}return!!(this._schema[e.toLowerCase()]||this._schema.unknown)[t]}hasElement(e,t){if(t.some(e=>e.name===U.name))return!0;if(e.indexOf("-")>-1){if(o(e)||a(e))return!0;if(t.some(e=>e.name===B.name))return!0}return!!this._schema[e.toLowerCase()]}securityContext(e,t,n){n&&(t=this.getMappedPropName(t)),e=e.toLowerCase(),t=t.toLowerCase();let r=Ou()[e+"|"+t];return r||((r=Ou()["*|"+t])||K.NONE)}getMappedPropName(e){return ju[e]||e}getDefaultComponentElementName(){return"ng-component"}validateProperty(e){if(e.toLowerCase().startsWith("on")){return{error:!0,msg:`Binding to event property '${e}' is disallowed for security reasons, `+`please use (${e.slice(2)})=...`+`\nIf '${e}' is a directive input, make sure the directive is imported by the`+" current module."}}return{error:!1}}validateAttribute(e){if(e.toLowerCase().startsWith("on")){return{error:!0,msg:`Binding to event attribute '${e}' is disallowed for security reasons, `+`please use (${e.slice(2)})=...`}}return{error:!1}}allKnownElementNames(){return Object.keys(this._schema)}normalizeAnimationStyleProperty(e){return e.replace(_t,(...e)=>e[1].toUpperCase())}normalizeAnimationStyleValue(e,t,n){let r="";const i=n.toString().trim();let s=null;if(function(e){switch(e){case"width":case"height":case"minWidth":case"minHeight":case"maxWidth":case"maxHeight":case"left":case"top":case"bottom":case"right":case"fontSize":case"outlineWidth":case"outlineOffset":case"paddingTop":case"paddingLeft":case"paddingBottom":case"paddingRight":case"marginTop":case"marginLeft":case"marginBottom":case"marginRight":case"borderRadius":case"borderWidth":case"borderTopWidth":case"borderLeftWidth":case"borderRightWidth":case"borderBottomWidth":case"textIndent":return!0;default:return!1}}(e)&&0!==n&&"0"!==n)if("number"==typeof n)r="px";else{const e=n.match(/^[+-]?[\d\.]+([a-z]*)$/);e&&0==e[1].length&&(s=`Please provide a CSS unit value for ${t}:${n}`)}return{error:s,value:i+r}}}const Uu=".",qu="attr",$u="class",Hu="style",zu="animate-";class Wu{constructor(e,t,n,r,i){if(this._exprParser=e,this._interpolationConfig=t,this._schemaRegistry=n,this.errors=i,this.pipesByName=null,this._usedPipes=new Map,r){const e=new Map;r.forEach(t=>e.set(t.name,t)),this.pipesByName=e}}getUsedPipes(){return Array.from(this._usedPipes.values())}createBoundHostProperties(e,t){if(e.hostProperties){const n=[];return Object.keys(e.hostProperties).forEach(r=>{const i=e.hostProperties[r];"string"==typeof i?this.parsePropertyBinding(r,i,!0,t,[],n):this._reportError(`Value of the host property binding "${r}" needs to be a string representing an expression but got "${i}" (${typeof i})`,t)}),n}return null}createDirectiveHostPropertyAsts(e,t,n){const r=this.createBoundHostProperties(e,n);return r&&r.map(e=>this.createBoundElementProperty(t,e))}createDirectiveHostEventAsts(e,t){if(e.hostListeners){const n=[];return Object.keys(e.hostListeners).forEach(r=>{const i=e.hostListeners[r];"string"==typeof i?this.parseEvent(r,i,t,[],n):this._reportError(`Value of the host listener "${r}" needs to be a string representing an expression but got "${i}" (${typeof i})`,t)}),n}return null}parseInterpolation(e,t){const n=t.start.toString();try{const i=this._exprParser.parseInterpolation(e,n,this._interpolationConfig);return i&&this._reportExpressionParserErrors(i.errors,t),this._checkPipes(i,t),i}catch(r){return this._reportError(`${r}`,t),this._exprParser.wrapLiteralPrimitive("ERROR",n)}}parseInlineTemplateBinding(e,t,n,r,i,s){const o=this._parseTemplateBindings(e,t,n);for(let a=0;a<o.length;a++){const e=o[a];e.keyIsVar?s.push(new ps(e.key,e.name,n)):e.expression?this._parsePropertyAst(e.key,e.expression,n,r,i):(r.push([e.key,""]),this.parseLiteralAttr(e.key,null,n,r,i))}}_parseTemplateBindings(e,t,n){const r=n.start.toString();try{const s=this._exprParser.parseTemplateBindings(e,t,r);return this._reportExpressionParserErrors(s.errors,n),s.templateBindings.forEach(e=>{e.expression&&this._checkPipes(e.expression,n)}),s.warnings.forEach(e=>{this._reportError(e,n,jo.WARNING)}),s.templateBindings}catch(i){return this._reportError(`${i}`,n),[]}}parseLiteralAttr(e,t,n,r,i){Qu(e)?(e=e.substring(1),t&&this._reportError('Assigning animation triggers via @prop="exp" attributes with an expression is invalid. Use property bindings (e.g. [@prop]="exp") or use an attribute without a value (e.g. @prop) instead.',n,jo.ERROR),this._parseAnimation(e,t,n,r,i)):i.push(new as(e,this._exprParser.wrapLiteralPrimitive(t,""),us.LITERAL_ATTR,n))}parsePropertyBinding(e,t,n,r,i,s){let o=!1;e.startsWith(zu)?(o=!0,e=e.substring(zu.length)):Qu(e)&&(o=!0,e=e.substring(1)),o?this._parseAnimation(e,t,r,i,s):this._parsePropertyAst(e,this._parseBinding(t,n,r),r,i,s)}parsePropertyInterpolation(e,t,n,r,i){const s=this.parseInterpolation(t,n);return!!s&&(this._parsePropertyAst(e,s,n,r,i),!0)}_parsePropertyAst(e,t,n,r,i){r.push([e,t.source]),i.push(new as(e,t,us.DEFAULT,n))}_parseAnimation(e,t,n,r,i){const s=this._parseBinding(t||"undefined",!1,n);r.push([e,s.source]),i.push(new as(e,s,us.ANIMATION,n))}_parseBinding(e,t,n){const r=(n&&n.start||"(unknown)").toString();try{const s=t?this._exprParser.parseSimpleBinding(e,r,this._interpolationConfig):this._exprParser.parseBinding(e,r,this._interpolationConfig);return s&&this._reportExpressionParserErrors(s.errors,n),this._checkPipes(s,n),s}catch(i){return this._reportError(`${i}`,n),this._exprParser.wrapLiteralPrimitive("ERROR",r)}}createBoundElementProperty(e,t){if(t.isAnimation)return new fs(t.name,4,K.NONE,t.expression,null,t.sourceSpan);let n=null,r=void 0,i=null;const s=t.name.split(Uu);let o=void 0;if(s.length>1)if(s[0]==qu){i=s[1],this._validatePropertyOrAttributeName(i,t.sourceSpan,!0),o=Gu(this._schemaRegistry,e,i,!0);const n=i.indexOf(":");if(n>-1){const e=i.substring(0,n),t=i.substring(n+1);i=l(e,t)}r=1}else s[0]==$u?(i=s[1],r=2,o=[K.NONE]):s[0]==Hu&&(n=s.length>2?s[2]:null,i=s[1],r=3,o=[K.STYLE]);return null===i&&(i=this._schemaRegistry.getMappedPropName(t.name),o=Gu(this._schemaRegistry,e,i,!1),r=0,this._validatePropertyOrAttributeName(i,t.sourceSpan,!1)),new fs(i,r,o[0],t.expression,n,t.sourceSpan)}parseEvent(e,t,n,r,i){Qu(e)?(e=e.substr(1),this._parseAnimationEvent(e,t,n,i)):this._parseRegularEvent(e,t,n,r,i)}_parseAnimationEvent(e,t,n,r){const i=wt(e,".",[e,""]);const s=i[0],o=i[1].toLowerCase();if(o)switch(o){case"start":case"done":const e=this._parseAction(t,n);r.push(new ds(s,o,1,e,n));break;default:this._reportError(`The provided animation output phase value "${o}" for "@${s}" is not supported (use start or done)`,n)}else this._reportError(`The animation trigger output event (@${s}) is missing its phase value name (start or done are currently supported)`,n)}_parseRegularEvent(e,t,n,r,i){const[s,o]=bt(e,[null,e]),a=this._parseAction(t,n);r.push([e,a.source]),i.push(new ds(o,s,0,a,n))}_parseAction(e,t){const n=(t&&t.start||"(unknown").toString();try{const i=this._exprParser.parseAction(e,n,this._interpolationConfig);return i&&this._reportExpressionParserErrors(i.errors,t),!i||i.ast instanceof Fi?(this._reportError("Empty expressions are not allowed",t),this._exprParser.wrapLiteralPrimitive("ERROR",n)):(this._checkPipes(i,t),i)}catch(r){return this._reportError(`${r}`,t),this._exprParser.wrapLiteralPrimitive("ERROR",n)}}_reportError(e,t,n=jo.ERROR){this.errors.push(new Bo(t,e,n))}_reportExpressionParserErrors(e,t){for(const n of e)this._reportError(n.message,t)}_checkPipes(e,t){if(e&&this.pipesByName){const n=new Ku;e.visit(n),n.pipes.forEach((e,n)=>{const r=this.pipesByName.get(n);r?this._usedPipes.set(n,r):this._reportError(`The pipe '${n}' could not be found`,new Vo(t.start.moveBy(e.span.start),t.start.moveBy(e.span.end)))})}}_validatePropertyOrAttributeName(e,t,n){const r=n?this._schemaRegistry.validateAttribute(e):this._schemaRegistry.validateProperty(e);r.error&&this._reportError(r.msg,t,jo.ERROR)}}class Ku extends is{constructor(){super(...arguments),this.pipes=new Map}visitPipe(e,t){return this.pipes.set(e.name,e),e.exp.visit(this),this.visitAll(e.args,t),null}}function Qu(e){return"@"==e[0]}function Gu(e,t,n,r){const i=[];return v.parse(t).forEach(t=>{const s=t.element?[t.element]:e.allKnownElementNames(),o=new Set(t.notSelectors.filter(e=>e.isElementSelector()).map(e=>e.element)),a=s.filter(e=>!o.has(e));i.push(...a.map(t=>e.securityContext(t,n,r)))}),0===i.length?[K.NONE]:Array.from(new Set(i)).sort()}class Xu{constructor(e,t){this.value=e,this.sourceSpan=t}visit(e){return e.visitText(this)}}class Yu{constructor(e,t,n){this.value=e,this.sourceSpan=t,this.i18n=n}visit(e){return e.visitBoundText(this)}}class Zu{constructor(e,t,n,r,i){this.name=e,this.value=t,this.sourceSpan=n,this.valueSpan=r,this.i18n=i}visit(e){return e.visitTextAttribute(this)}}class Ju{constructor(e,t,n,r,i,s,o){this.name=e,this.type=t,this.securityContext=n,this.value=r,this.unit=i,this.sourceSpan=s,this.i18n=o}static fromBoundElementProperty(e,t){return new Ju(e.name,e.type,e.securityContext,e.value,e.unit,e.sourceSpan,t)}visit(e){return e.visitBoundAttribute(this)}}class ec{constructor(e,t,n,r,i){this.name=e,this.handler=t,this.target=n,this.phase=r,this.sourceSpan=i}static fromParsedEvent(e){const t=0===e.type?e.targetOrPhase:null,n=1===e.type?e.targetOrPhase:null;return new ec(e.name,e.handler,t,n,e.sourceSpan)}visit(e){return e.visitBoundEvent(this)}}class tc{constructor(e,t,n,r,i,s,o,a,u,c){this.name=e,this.attributes=t,this.inputs=n,this.outputs=r,this.children=i,this.references=s,this.sourceSpan=o,this.startSourceSpan=a,this.endSourceSpan=u,this.i18n=c}visit(e){return e.visitElement(this)}}class nc{constructor(e,t,n,r,i,s,o,a,u,c){this.attributes=e,this.inputs=t,this.outputs=n,this.children=r,this.references=i,this.variables=s,this.sourceSpan=o,this.startSourceSpan=a,this.endSourceSpan=u,this.i18n=c}visit(e){return e.visitTemplate(this)}}class rc{constructor(e,t,n,r){this.selectorIndex=e,this.attributes=t,this.sourceSpan=n,this.i18n=r}visit(e){return e.visitContent(this)}}class ic{constructor(e,t,n){this.name=e,this.value=t,this.sourceSpan=n}visit(e){return e.visitVariable(this)}}class sc{constructor(e,t,n){this.name=e,this.value=t,this.sourceSpan=n}visit(e){return e.visitReference(this)}}class oc{constructor(e,t,n,r){this.vars=e,this.placeholders=t,this.sourceSpan=n,this.i18n=r}visit(e){return e.visitIcu(this)}}function ac(e,t){const n=[];if(e.visit)for(const r of t){e.visit(r)||r.visit(e)}else for(const r of t){const t=r.visit(e);t&&n.push(t)}return n}class uc{constructor(e,t){this.style=e,this.styleUrls=t}}function cc(e){if(null==e||0===e.length||"/"==e[0])return!1;const t=e.match(dc);return null===t||"package"==t[1]||"asset"==t[1]}const lc=/@import\s+(?:url\()?\s*(?:(?:['"]([^'"]*))|([^;\)\s]*))[^;]*;?/g,hc=/\/\*(?!#\s*(?:sourceURL|sourceMappingURL)=)[\s\S]+?\*\//g,dc=/^([^:\/?#]+):/,pc="select",fc="link",mc="rel",gc="href",yc="stylesheet",vc="style",_c="script",bc="ngNonBindable",wc="ngProjectAs";function Ec(e){let t=null,n=null,r=null,i=!1,s="";e.attrs.forEach(e=>{const o=e.name.toLowerCase();o==pc?t=e.value:o==gc?n=e.value:o==mc?r=e.value:e.name==bc?i=!0:e.name==wc&&e.value.length>0&&(s=e.value)}),t=function(e){if(null===e||0===e.length)return"*";return e}(t);const o=e.name.toLowerCase();let u=Cc.OTHER;return a(o)?u=Cc.NG_CONTENT:o==vc?u=Cc.STYLE:o==_c?u=Cc.SCRIPT:o==fc&&r==yc&&(u=Cc.STYLESHEET),new Sc(u,t,n,i,s)}var Cc;!function(e){e[e.NG_CONTENT=0]="NG_CONTENT",e[e.STYLE=1]="STYLE",e[e.STYLESHEET=2]="STYLESHEET",e[e.SCRIPT=3]="SCRIPT",e[e.OTHER=4]="OTHER"}(Cc||(Cc={}));class Sc{constructor(e,t,n,r,i){this.type=e,this.selectAttr=t,this.hrefAttr=n,this.nonBindable=r,this.projectAs=i}}const Tc=/^(?:(?:(?:(bind-)|(let-)|(ref-|#)|(on-)|(bindon-)|(@))(.+))|\[\(([^\)]+)\)\]|\[([^\]]+)\]|\(([^\)]+)\))$/,xc=1,Ac=2,Dc=3,Ic=4,Nc=5,Oc=6,kc=7,Pc=8,Mc=9,Rc=10,Fc="*",Lc="*";function Vc(e,t){const n=new jc(t),r=eu(n,e),i=t.errors.concat(n.errors),s=i.filter(e=>e.level===jo.ERROR);if(s.length>0){throw Dt(`Template parse errors:\n${s.join("\n")}`,s)}return{nodes:r,errors:i,ngContentSelectors:n.ngContentSelectors,hasNgContent:n.hasNgContent}}class jc{constructor(e){this.bindingParser=e,this.errors=[],this.ngContentSelectors=[],this.hasNgContent=!1}visitElement(e){const t=Ec(e);if(t.type===Cc.SCRIPT||t.type===Cc.STYLE)return null;if(t.type===Cc.STYLESHEET&&cc(t.hrefAttr))return null;const n=u(e.name),r=[],i=[],s=[],o=[],a=[],c={},l=[],h=[];let d=!1;for(const u of e.attrs){let e=!1;const t=Uc(u.name);let p=!1;if(u.i18n&&(c[u.name]=u.i18n),t.startsWith(Fc)){d&&this.reportError("Can't have multiple template bindings on one element. Use only one attribute prefixed with *",u.sourceSpan),p=!0,d=!0;const e=u.value,n=t.substring(Fc.length),r=[];this.bindingParser.parseInlineTemplateBinding(n,e,u.sourceSpan,[],l,r),h.push(...r.map(e=>new ic(e.name,e.value,e.sourceSpan)))}else e=this.parseAttribute(n,u,[],r,i,s,o);e||p||a.push(this.visitAttribute(u))}const p=eu(t.nonBindable?Bc:this,e.children);let f;if(t.type===Cc.NG_CONTENT){this.hasNgContent=!0,e.children&&!e.children.every($c)&&this.reportError("<ng-content> element cannot have content.",e.sourceSpan);const n=t.selectAttr;let r=e.attrs.map(e=>this.visitAttribute(e));const i=n===Lc?0:this.ngContentSelectors.push(n);f=new rc(i,r,e.sourceSpan,e.i18n)}else if(n){const t=this.extractAttributes(e.name,r,c);f=new nc(a,t.bound,i,p,o,s,e.sourceSpan,e.startSourceSpan,e.endSourceSpan,e.i18n)}else{const t=this.extractAttributes(e.name,r,c);f=new tc(e.name,a,t.bound,i,p,o,e.sourceSpan,e.startSourceSpan,e.endSourceSpan,e.i18n)}if(d){const t=this.extractAttributes("ng-template",l,c);f=new nc(t.literal,t.bound,[],[f],[],h,e.sourceSpan,e.startSourceSpan,e.endSourceSpan,e.i18n)}return f}visitAttribute(e){return new Zu(e.name,e.value,e.sourceSpan,e.valueSpan,e.i18n)}visitText(e){return this._visitTextWithInterpolation(e.value,e.sourceSpan,e.i18n)}visitExpansion(e){const t=e.i18n;if(!t)return null;const n={},r={};return Object.keys(t.placeholders).forEach(i=>{const s=t.placeholders[i];i.startsWith(Dr)?n[i]=this._visitTextWithInterpolation(`{{${s}}}`,e.sourceSpan):r[i]=this._visitTextWithInterpolation(s,e.sourceSpan)}),new oc(n,r,e.sourceSpan,t)}visitExpansionCase(e){return null}visitComment(e){return null}extractAttributes(e,t,n){const r=[],i=[];return t.forEach(t=>{const s=n[t.name];if(t.isLiteral)i.push(new Zu(t.name,t.expression.source||"",t.sourceSpan,void 0,s));else{const n=this.bindingParser.createBoundElementProperty(e,t);r.push(Ju.fromBoundElementProperty(n,s))}}),{bound:r,literal:i}}parseAttribute(e,t,n,r,i,s,o){const a=Uc(t.name),u=t.value,c=t.sourceSpan,l=a.match(Tc);let h=!1;if(l){if(h=!0,null!=l[xc])this.bindingParser.parsePropertyBinding(l[kc],u,!1,c,n,r);else if(l[Ac])if(e){const e=l[kc];this.parseVariable(e,u,c,s)}else this.reportError('"let-" is only supported on ng-template elements.',c);else if(l[Dc]){const e=l[kc];this.parseReference(e,u,c,o)}else if(l[Ic]){const e=[];this.bindingParser.parseEvent(l[kc],u,c,n,e),qc(e,i)}else if(l[Nc])this.bindingParser.parsePropertyBinding(l[kc],u,!1,c,n,r),this.parseAssignmentEvent(l[kc],u,c,n,i);else if(l[Oc])this.bindingParser.parseLiteralAttr(a,u,c,n,r);else if(l[Pc])this.bindingParser.parsePropertyBinding(l[Pc],u,!1,c,n,r),this.parseAssignmentEvent(l[Pc],u,c,n,i);else if(l[Mc])this.bindingParser.parsePropertyBinding(l[Mc],u,!1,c,n,r);else if(l[Rc]){const e=[];this.bindingParser.parseEvent(l[Rc],u,c,n,e),qc(e,i)}}else h=this.bindingParser.parsePropertyInterpolation(a,u,c,n,r);return h}_visitTextWithInterpolation(e,t,n){const r=Au(e),i=this.bindingParser.parseInterpolation(r,t);return i?new Yu(i,t,n):new Xu(r,t)}parseVariable(e,t,n,r){e.indexOf("-")>-1&&this.reportError('"-" is not allowed in variable names',n),r.push(new ic(e,t,n))}parseReference(e,t,n,r){e.indexOf("-")>-1&&this.reportError('"-" is not allowed in reference names',n),r.push(new sc(e,t,n))}parseAssignmentEvent(e,t,n,r,i){const s=[];this.bindingParser.parseEvent(`${e}Change`,`${t}=$event`,n,r,s),qc(s,i)}reportError(e,t,n=jo.ERROR){this.errors.push(new Bo(t,e,n))}}const Bc=new class{visitElement(e){const t=Ec(e);if(t.type===Cc.SCRIPT||t.type===Cc.STYLE||t.type===Cc.STYLESHEET)return null;const n=eu(this,e.children,null);return new tc(e.name,eu(this,e.attrs),[],[],n,[],e.sourceSpan,e.startSourceSpan,e.endSourceSpan)}visitComment(e){return null}visitAttribute(e){return new Zu(e.name,e.value,e.sourceSpan,void 0,e.i18n)}visitText(e){return new Xu(e.value,e.sourceSpan)}visitExpansion(e){return null}visitExpansionCase(e){return null}};function Uc(e){return/^data-/i.test(e)?e.substring(5):e}function qc(e,t){t.push(...e.map(e=>ec.fromParsedEvent(e)))}function $c(e){return e instanceof Qa&&0==e.value.trim().length}var Hc;!function(e){e[e.ELEMENT=0]="ELEMENT",e[e.TEMPLATE=1]="TEMPLATE"}(Hc||(Hc={}));class zc{constructor(e,t,n=0,r=null,i,s){this.index=e,this.ref=t,this.level=n,this.templateIndex=r,this.meta=i,this.registry=s,this.bindings=new Set,this.placeholders=new Map,this._unresolvedCtxCount=0,this._registry=s||{getUniqueId:function(e=0){let t=e;return()=>t++}(),icus:new Map},this.id=this._registry.getUniqueId()}appendTag(e,t,n,r){if(t.isVoid&&r)return;const i=t.isVoid||!r?t.startName:t.closeName,s={type:e,index:n,ctx:this.id,isVoid:t.isVoid,closed:r};jr(this.placeholders,i,s)}get icus(){return this._registry.icus}get isRoot(){return 0===this.level}get isResolved(){return 0===this._unresolvedCtxCount}getSerializedPlaceholders(){const e=new Map;return this.placeholders.forEach((t,n)=>e.set(n,t.map(Gc))),e}appendBinding(e){this.bindings.add(e)}appendIcu(e,t){jr(this._registry.icus,e,t)}appendBoundText(e){Br(e,this.bindings.size,this.id).forEach((e,t)=>jr(this.placeholders,t,...e))}appendTemplate(e,t){this.appendTag(Hc.TEMPLATE,e,t,!1),this.appendTag(Hc.TEMPLATE,e,t,!0),this._unresolvedCtxCount++}appendElement(e,t,n){this.appendTag(Hc.ELEMENT,e,t,n)}forkChildContext(e,t,n){return new zc(e,this.ref,this.level+1,t,n,this._registry)}reconcileChildContext(e){["start","close"].forEach(t=>{const n=e.meta[`${t}Name`],r=(this.placeholders.get(n)||[]).find(Qc(this.id,e.templateIndex));r&&(r.ctx=e.id)}),e.placeholders.forEach((t,n)=>{const r=this.placeholders.get(n);if(!r)return void this.placeholders.set(n,t);const i=function(e,t){for(let n=0;n<e.length;n++)if(t(e[n]))return n;return-1}(r,Qc(e.id,e.templateIndex));if(i>=0){const e=n.startsWith("CLOSE");if(n.endsWith("NG-TEMPLATE"))r.splice(i+(e?0:1),0,...t);else{t[e?t.length-1:0].tmpl=r[i],r.splice(i,1,...t)}}else r.push(...t);this.placeholders.set(n,r)}),this._unresolvedCtxCount--}}function Wc(e,t,n,r){return Lr(`${r?"/":""}${e}${t}`,n)}function Kc(e,{index:t,ctx:n,isVoid:r},i){return r?Wc(e,t,n)+Wc(e,t,n,!0):Wc(e,t,n,i)}function Qc(e,t){return n=>"object"==typeof n&&n.type===Hc.TEMPLATE&&n.index===t&&n.ctx===e}function Gc(e){const t=(e,t)=>Kc("#",e,t),n=(e,t)=>Kc("*",e,t);switch(e.type){case Hc.ELEMENT:return e.closed?t(e,!0)+(e.tmpl?n(e.tmpl,!0):""):e.tmpl?n(e.tmpl)+t(e)+(e.isVoid?n(e.tmpl,!0):""):t(e);case Hc.TEMPLATE:return n(e,e.closed);default:return e}}const Xc={A:"LINK",B:"BOLD_TEXT",BR:"LINE_BREAK",EM:"EMPHASISED_TEXT",H1:"HEADING_LEVEL1",H2:"HEADING_LEVEL2",H3:"HEADING_LEVEL3",H4:"HEADING_LEVEL4",H5:"HEADING_LEVEL5",H6:"HEADING_LEVEL6",HR:"HORIZONTAL_RULE",I:"ITALIC_TEXT",LI:"LIST_ITEM",LINK:"MEDIA_LINK",OL:"ORDERED_LIST",P:"PARAGRAPH",Q:"QUOTATION",S:"STRIKETHROUGH_TEXT",SMALL:"SMALL_TEXT",SUB:"SUBSTRIPT",SUP:"SUPERSCRIPT",TBODY:"TABLE_BODY",TD:"TABLE_CELL",TFOOT:"TABLE_FOOTER",TH:"TABLE_HEADER_CELL",THEAD:"TABLE_HEADER",TR:"TABLE_ROW",TT:"MONOSPACED_TEXT",U:"UNDERLINED_TEXT",UL:"UNORDERED_LIST"};class Yc{constructor(){this._placeHolderNameCounts={},this._signatureToName={}}getStartTagPlaceholderName(e,t,n){const r=this._hashTag(e,t,n);if(this._signatureToName[r])return this._signatureToName[r];const i=e.toUpperCase(),s=Xc[i]||`TAG_${i}`,o=this._generateUniqueName(n?s:`START_${s}`);return this._signatureToName[r]=o,o}getCloseTagPlaceholderName(e){const t=this._hashClosingTag(e);if(this._signatureToName[t])return this._signatureToName[t];const n=e.toUpperCase(),r=Xc[n]||`TAG_${n}`,i=this._generateUniqueName(`CLOSE_${r}`);return this._signatureToName[t]=i,i}getPlaceholderName(e,t){const n=e.toUpperCase(),r=`PH: ${n}=${t}`;if(this._signatureToName[r])return this._signatureToName[r];const i=this._generateUniqueName(n);return this._signatureToName[r]=i,i}getUniquePlaceholder(e){return this._generateUniqueName(e.toUpperCase())}_hashTag(e,t,n){return`<${e}`+Object.keys(t).sort().map(e=>` ${e}=${t[e]}`).join("")+(n?"/>":`></${e}>`)}_hashClosingTag(e){return this._hashTag(`/${e}`,{},!1)}_generateUniqueName(e){if(!this._placeHolderNameCounts.hasOwnProperty(e))return this._placeHolderNameCounts[e]=1,e;const t=this._placeHolderNameCounts[e];return this._placeHolderNameCounts[e]=t+1,`${e}_${t}`}}const Zc=new za(new Aa);function Jc(e){const t=new el(Zc,e);return(e,n,r,i,s)=>t.toI18nMessage(e,n,r,i,s)}class el{constructor(e,t){this._expressionParser=e,this._interpolationConfig=t}toI18nMessage(e,t,n,r,i){this._isIcu=1==e.length&&e[0]instanceof Ga,this._icuDepth=0,this._placeholderRegistry=new Yc,this._placeholderToContent={},this._placeholderToMessage={},this._visitNodeFn=i;const s=eu(this,e,{});return new Sn(s,this._placeholderToContent,this._placeholderToMessage,t,n,r)}_visitNode(e,t){return this._visitNodeFn&&this._visitNodeFn(e,t),t}visitElement(e,t){const n=eu(this,e.children),r={};e.attrs.forEach(e=>{r[e.name]=e.value});const i=g(e.name).isVoid,s=this._placeholderRegistry.getStartTagPlaceholderName(e.name,r,i);this._placeholderToContent[s]=e.sourceSpan.toString();let o="";i||(o=this._placeholderRegistry.getCloseTagPlaceholderName(e.name),this._placeholderToContent[o]=`</${e.name}>`);const a=new Dn(e.name,r,s,o,n,i,e.sourceSpan);return this._visitNode(e,a)}visitAttribute(e,t){const n=this._visitTextWithInterpolation(e.value,e.sourceSpan);return this._visitNode(e,n)}visitText(e,t){const n=this._visitTextWithInterpolation(e.value,e.sourceSpan);return this._visitNode(e,n)}visitComment(e,t){return null}visitExpansion(e,t){this._icuDepth++;const n={},r=new An(e.switchValue,e.type,n,e.sourceSpan);if(e.cases.forEach(e=>{n[e.value]=new xn(e.expression.map(e=>e.visit(this,{})),e.expSourceSpan)}),this._icuDepth--,this._isIcu||this._icuDepth>0){const t=this._placeholderRegistry.getUniquePlaceholder(`VAR_${e.type}`);return r.expressionPlaceholder=t,this._placeholderToContent[t]=e.switchValue,this._visitNode(e,r)}const i=this._placeholderRegistry.getPlaceholderName("ICU",e.sourceSpan.toString()),s=new el(this._expressionParser,this._interpolationConfig);this._placeholderToMessage[i]=s.toI18nMessage([e],"","","");const o=new Nn(r,i,e.sourceSpan);return this._visitNode(e,o)}visitExpansionCase(e,t){throw new Error("Unreachable code")}_visitTextWithInterpolation(e,t){const n=this._expressionParser.splitInterpolation(e,t.start.toString(),this._interpolationConfig);if(!n)return new Tn(e,t);const r=[],i=new xn(r,t),{start:s,end:o}=this._interpolationConfig;for(let u=0;u<n.strings.length-1;u++){const e=n.expressions[u],i=e.split(tl)[2]||"INTERPOLATION",a=this._placeholderRegistry.getPlaceholderName(i,e);n.strings[u].length&&r.push(new Tn(n.strings[u],t)),r.push(new In(e,a,t)),this._placeholderToContent[a]=s+e+o}const a=n.strings.length-1;return n.strings[a].length&&r.push(new Tn(n.strings[a],t)),i}}const tl=/\/\/[\s\S]*i18n[\s\S]*\([\s\S]*ph[\s\S]*=[\s\S]*("|')([\s\S]*?)\1[\s\S]*\)/g;function nl(e,t){e.i18n=t}class rl{constructor(e){this.config=e,this._createI18nMessage=Jc(Ua)}_generateI18nMessage(e,t="",n){const r="string"==typeof t?function(e){let t,n,r;if(e){const i=e.indexOf(Tr),s=e.indexOf(Sr);let o;[o,t]=i>-1?[e.slice(0,i),e.slice(i+2)]:[e,""],[n,r]=s>-1?[o.slice(0,s),o.slice(s+1)]:["",o]}return{id:t,meaning:n,description:r}}(t):Rr(t),i=this._createI18nMessage(e,r.meaning||"",r.description||"",r.id||"",n);return i.id||(i.id="string"!=typeof t&&t.id||Pn(i)),i}visitElement(e,t){if(function(e){return e.attrs.some(e=>kr(e.name))}(e)){const t=[],n={};for(const r of e.attrs)if(r.name===xr){const t=e.i18n||r.value,n=this._generateI18nMessage(e.children,t,nl);n.nodes.length&&(e.i18n=n)}else if(r.name.startsWith(Ar)){n[r.name.slice(Ar.length)]=r.value}else t.push(r);if(Object.keys(n).length)for(const e of t){const t=n[e.name];void 0!==t&&e.value&&(e.i18n=this._generateI18nMessage([e],e.i18n||t))}this.config.keepI18nAttrs||(e.attrs=t)}return eu(this,e.children),e}visitExpansion(e,t){let n;const r=e.i18n;if(r instanceof Nn){const t=r.name;Fr(n=this._generateI18nMessage([e],r)).name=t}else n=this._generateI18nMessage([e],r);return e.i18n=n,e}visitText(e,t){return e}visitAttribute(e,t){return e}visitComment(e,t){return e}visitExpansionCase(e,t){return e}}const il=e=>`{$${Ur(e)}}`;const sl=new class{visitText(e,t){return e.value}visitContainer(e,t){return e.children.map(e=>e.visit(this)).join("")}visitIcu(e,t){const n=Object.keys(e.cases).map(t=>`${t} {${e.cases[t].visit(this)}}`);return`{${e.expressionPlaceholder}, ${e.type}, ${n.join(" ")}}`}visitTagPlaceholder(e,t){return e.isVoid?il(e.startName):`${il(e.startName)}${e.children.map(e=>e.visit(this)).join("")}${il(e.closeName)}`}visitPlaceholder(e,t){return il(e.name)}visitIcuPlaceholder(e,t){return il(e.name)}};function ol(e,t){return gt(ct(zr).bitwiseAnd(yt(e),null,!1),t)}class al{constructor(e,t,n=0,r,i,s,o,a,u,c,l,h,d,p){this.constantPool=e,this.level=n,this.contextName=r,this.i18nContext=i,this.templateIndex=s,this.templateName=o,this.viewQueries=a,this.directiveMatcher=u,this.directives=c,this.pipeTypeByName=l,this.pipes=h,this._namespace=d,this.relativeContextFilePath=p,this._dataIndex=0,this._bindingContext=0,this._prefixCode=[],this._creationCodeFns=[],this._updateCodeFns=[],this._tempVariables=[],this._nestedTemplateFns=[],this._unsupported=Xr,this.i18n=null,this._pureFunctionSlots=0,this._bindingSlots=0,this.visitReference=Yr,this.visitVariable=Yr,this.visitTextAttribute=Yr,this.visitBoundAttribute=Yr,this.visitBoundEvent=Yr,this._dataIndex=a.length,this._bindingScope=t.nestedScope(n),this.fileBasedI18nSuffix=p.replace(/[^A-Za-z0-9]/g,"_")+"_",this._valueConverter=new ul(e,()=>this.allocateDataSlot(),e=>this.allocatePureFunctionSlots(e),(e,t,n,r)=>{const i=l.get(e);i&&this.pipes.add(i),this._bindingScope.set(this.level,t,r),this.creationInstruction(null,Cn.pipe,[yt(n),yt(e)])})}registerContextVariables(e){const t=this._bindingScope.freshReferenceName(),n=this.level,r=ct(e.name+t);this._bindingScope.set(n,e.name,r,1,(t,i)=>{let s;if(t.bindingLevel===n)s=ct(Hr);else{const e=t.getSharedContextName(n);s=e||dl(i)}return[r.set(s.prop(e.value||Kr)).toConstDecl()]})}buildTemplateFunction(e,t,n=!1,r=[],i){if(this._namespace!==Cn.namespaceHTML&&this.creationInstruction(null,this._namespace),t.forEach(e=>this.registerContextVariables(e)),n){const e=[];if(r.length>1){const t=r.map(e=>Y(e)),n=this.constantPool.getConstLiteral(Zr(t),!0),i=this.constantPool.getConstLiteral(Zr(r),!0);e.push(n,i)}this.creationInstruction(null,Cn.projectionDef,e)}const s=this.i18nContext||Pr(i)&&!(_l(e)&&e[0].i18n===i),o=bl(e);s&&this.i18nStart(null,i,o),ac(this,e),this._pureFunctionSlots+=this._bindingSlots,this._valueConverter.updatePipeSlotOffsets(this._bindingSlots),this._nestedTemplateFns.forEach(e=>e()),s&&this.i18nEnd(null,o);const a=this._creationCodeFns.map(e=>e()),u=this._updateCodeFns.map(e=>e()),c=this._bindingScope.viewSnapshotStatements(),l=this._bindingScope.variableDeclarations().concat(this._tempVariables),h=a.length>0?[ol(1,c.concat(a))]:[],d=u.length>0?[ol(2,l.concat(u))]:[];return mt([new Oe(zr,ue),new Oe(Hr,null)],[...this._prefixCode,...h,...d],oe,null,this.templateName)}getLocal(e){return this._bindingScope.get(e)}i18nTranslate(e,t={},n,r){const i=n||this.i18nAllocateRef(),s={};t&&Object.keys(t).length&&Object.keys(t).forEach(e=>s[Ur(e)]=t[e]);const o=Rr(e),a=qr(i,function(e){return e.nodes.map(e=>e.visit(sl,null)).join("")}(e),o,s,r);return this.constantPool.statements.push(...a),i}i18nAppendBindings(e){if(!this.i18n||!e.length)return;const t=ct(Hr);e.forEach(e=>{const n=this.convertExpressionBinding(t,e);this.i18n.appendBinding(n)})}i18nBindProps(e){const t={};return Object.keys(e).forEach(n=>{const r=e[n];if(r instanceof Xu)t[n]=yt(r.value);else{const e=r.value.visit(this._valueConverter);if(e instanceof Gi){const{strings:r,expressions:i}=e,{id:s,bindings:o}=this.i18n,a=function(e,t=0,n=0){if(!e.length)return"";let r="";const i=e.length-1;for(let s=0;s<i;s++)r+=`${e[s]}${Lr(t+s,n)}`;return r+=e[i]}(r,o.size,s);this.i18nAppendBindings(i),t[n]=yt(a)}}}),t}i18nAllocateRef(){const e=(t=this.fileBasedI18nSuffix,`${br}${t}`.toUpperCase());var t;return ct(this.constantPool.uniqueName(e))}i18nUpdateRef(e){const{icus:t,meta:n,isRoot:r,isResolved:i}=e;if(r&&i&&!Mr(n)){const r=e.getSerializedPlaceholders();let i={},s=r.size?Vr(r):{};let o;t.size&&t.forEach((e,t)=>{if(1===e.length)s[t]=e[0];else{const n=Lr(`${Ir}${t}`);s[t]=yt(n),i[t]=pt(e)}}),(Array.from(r.values()).some(e=>e.length>1)||Object.keys(i).length)&&(o=(e=>{const t=[e];return Object.keys(i).length&&t.push(_r(i,!0)),hl(null,Cn.i18nPostprocess,t)})),this.i18nTranslate(n,s,e.ref,o)}}i18nStart(e=null,t,n){const r=this.allocateDataSlot();if(this.i18nContext)this.i18n=this.i18nContext.forkChildContext(r,this.templateIndex,t);else{const e=this.i18nAllocateRef();this.i18n=new zc(r,e,0,this.templateIndex,t)}const{id:i,ref:s}=this.i18n,o=[yt(r),s];i>0&&o.push(yt(i)),this.creationInstruction(e,n?Cn.i18n:Cn.i18nStart,o)}i18nEnd(e=null,t){if(!this.i18n)throw new Error("i18nEnd is executed with no i18n context present");this.i18nContext?(this.i18nContext.reconcileChildContext(this.i18n),this.i18nUpdateRef(this.i18nContext)):this.i18nUpdateRef(this.i18n);const{index:n,bindings:r}=this.i18n;r.size&&(r.forEach(t=>this.updateInstruction(e,Cn.i18nExp,[t])),this.updateInstruction(e,Cn.i18nApply,[yt(n)])),t||this.creationInstruction(e,Cn.i18nEnd),this.i18n=null}visitContent(e){const t=this.allocateDataSlot(),n=e.selectorIndex,r=[yt(t)],i=[];e.attributes.forEach(e=>{const t=e.name;"select"!==t&&i.push(t,e.value)}),i.length>0?r.push(yt(n),Zr(i)):0!==n&&r.push(yt(n)),this.creationInstruction(e.sourceSpan,Cn.projection,r)}getNamespaceInstruction(e){switch(e){case"math":return Cn.namespaceMathML;case"svg":return Cn.namespaceSVG;default:return Cn.namespaceHTML}}addNamespaceInstruction(e,t){this._namespace=e,this.creationInstruction(t.sourceSpan,e)}visitElement(e){const t=this.allocateDataSlot(),n=new Ca(yt(t),null);let r=!1;const i=Pr(e.i18n);if(i&&this.i18n)throw new Error("Could not mark an element as translatable inside of a translatable section");const a=[],u=[],[c,l]=s(e.name),h=o(e.name);for(const s of e.attributes){const{name:e,value:t}=s;e===Qr?r=!0:"style"==e?n.registerStyleAttr(t):"class"==e?n.registerClassAttr(t):s.i18n?a.push(s):u.push(s)}this.matchDirectives(e.name,e);const d=[yt(t)];h||d.push(yt(l));const p=[],f=[];e.inputs.forEach(e=>{n.registerBoundInput(e)||(0==e.type&&e.i18n?a.push(e):f.push(e))}),u.forEach(e=>p.push(yt(e.name),yt(e.value))),p.push(...this.prepareSyntheticAndSelectOnlyAttrs(f,e.outputs)),d.push(this.toAttrsParam(p)),d.push(this.prepareRefsParameter(e.references));const m=this._namespace,g=this.getNamespaceInstruction(c);g!==m&&this.addNamespaceInstruction(g,e);const y=ct(Hr);this.i18n&&this.i18n.appendElement(e.i18n,t);const v=!n.hasBindingsOrInitialValues&&!h&&0===e.outputs.length&&0===a.length&&!(()=>!i&&this.i18n?!bl(e.children):e.children.length>0)(),_=!v&&bl(e.children);if(v)this.creationInstruction(e.sourceSpan,Cn.element,ei(d));else{if(this.creationInstruction(e.sourceSpan,h?Cn.elementContainerStart:Cn.elementStart,ei(d)),r&&this.creationInstruction(e.sourceSpan,Cn.disableBindings),i&&this.i18nStart(e.sourceSpan,e.i18n,_),a.length){let t=!1;const n=[];if(a.forEach(r=>{const i=r.i18n;if(r instanceof Zu)n.push(yt(r.name),this.i18nTranslate(i));else{const s=r.value.visit(this._valueConverter);if(s instanceof Gi){const o=Vr(Br(i));n.push(yt(r.name),this.i18nTranslate(i,o)),s.expressions.forEach(n=>{t=!0;const r=this.convertExpressionBinding(y,n);this.updateInstruction(e.sourceSpan,Cn.i18nExp,[r])})}}}),n.length){const r=yt(this.allocateDataSlot()),i=this.constantPool.getConstLiteral(pt(n),!0);this.creationInstruction(e.sourceSpan,Cn.i18nAttributes,[r,i]),t&&this.updateInstruction(e.sourceSpan,Cn.i18nApply,[r])}}this.processStylingInstruction(y,n.buildCreateLevelInstruction(e.sourceSpan,this.constantPool),!0),e.outputs.forEach(t=>{this.creationInstruction(t.sourceSpan,Cn.listener,this.prepareListenerParameter(e.name,t))})}if(n.buildUpdateLevelInstructions(this._valueConverter).forEach(e=>{this.processStylingInstruction(y,e,!1)}),f.forEach(e=>{const n=function(e){switch(e){case 0:return Cn.elementProperty;case 2:return Cn.elementClassProp;case 1:case 4:return Cn.elementAttribute;default:return}}(e.type);if(4===e.type){const n=e.value.visit(this._valueConverter);if(n.name||n.value){const r=vl(e.name);this.updateInstruction(e.sourceSpan,Cn.elementAttribute,()=>[yt(t),yt(r),this.convertPropertyBinding(y,n)])}}else if(n){const r=[],i=function(e,t){switch(t){case K.HTML:return lt(Cn.sanitizeHtml);case K.SCRIPT:return lt(Cn.sanitizeScript);case K.STYLE:return 1===e.type?lt(Cn.sanitizeStyle):null;case K.URL:return lt(Cn.sanitizeUrl);case K.RESOURCE_URL:return lt(Cn.sanitizeResourceUrl);default:return null}}(e,e.securityContext);i&&r.push(i);const s=e.value.visit(this._valueConverter);this.allocateBindingSlots(s),this.updateInstruction(e.sourceSpan,n,()=>[yt(t),yt(e.name),this.convertPropertyBinding(y,s),...r])}else this._unsupported(`binding type ${e.type}`)}),ac(this,e.children),!i&&this.i18n&&this.i18n.appendElement(e.i18n,t,!0),!v){const t=e.endSourceSpan||e.sourceSpan;i&&this.i18nEnd(t,_),r&&this.creationInstruction(t,Cn.enableBindings),this.creationInstruction(t,h?Cn.elementContainerEnd:Cn.elementEnd)}}visitTemplate(e){const t=this.allocateDataSlot();this.i18n&&this.i18n.appendTemplate(e.i18n,t);let n="";_l(e.children)&&(n=en(e.children[0].name));const r=n?`${this.contextName}_${n}`:"",i=r?`${r}_Template_${t}`:`Template_${t}`,s=[yt(t),ct(i),Ue];this.matchDirectives("ng-template",e);const o=[];e.attributes.forEach(e=>{o.push(Zr(e.name),Zr(e.value))}),o.push(...this.prepareSyntheticAndSelectOnlyAttrs(e.inputs,e.outputs)),s.push(this.toAttrsParam(o)),e.references&&e.references.length&&(s.push(this.prepareRefsParameter(e.references)),s.push(lt(Cn.templateRefExtractor)));const a=ct(Hr);e.inputs.forEach(n=>{const r=n.value.visit(this._valueConverter);this.allocateBindingSlots(r),this.updateInstruction(e.sourceSpan,Cn.elementProperty,()=>[yt(t),yt(n.name),this.convertPropertyBinding(a,r)])});const u=new al(this.constantPool,this._bindingScope,this.level+1,r,this.i18n,t,i,[],this.directiveMatcher,this.directives,this.pipeTypeByName,this.pipes,this._namespace,this.fileBasedI18nSuffix);this._nestedTemplateFns.push(()=>{const t=u.buildTemplateFunction(e.children,e.variables,!1,[],e.i18n);this.constantPool.statements.push(t.toDeclStmt(i,null))}),this.creationInstruction(e.sourceSpan,Cn.templateCreate,()=>(s.splice(2,0,yt(u.getConstCount()),yt(u.getVarCount())),ei(s))),e.outputs.forEach(e=>{this.creationInstruction(e.sourceSpan,Cn.listener,this.prepareListenerParameter("ng_template",e))})}visitBoundText(e){if(this.i18n){const t=e.value.visit(this._valueConverter);return void(t instanceof Gi&&(this.i18n.appendBoundText(e.i18n),this.i18nAppendBindings(t.expressions)))}const t=this.allocateDataSlot();this.creationInstruction(e.sourceSpan,Cn.text,[yt(t)]);const n=e.value.visit(this._valueConverter);this.allocateBindingSlots(n),this.updateInstruction(e.sourceSpan,Cn.textBinding,()=>[yt(t),this.convertPropertyBinding(ct(Hr),n)])}visitText(e){this.i18n||this.creationInstruction(e.sourceSpan,Cn.text,[yt(this.allocateDataSlot()),yt(e.value)])}visitIcu(e){let t=!1;this.i18n||(t=!0,this.i18nStart(null,e.i18n,!0));const n=this.i18n,r=this.i18nBindProps(e.vars),i=this.i18nBindProps(e.placeholders),s=e.i18n,o=e=>hl(null,Cn.i18nPostprocess,[e,_r(r,!0)]);if(Mr(n.meta))this.i18nTranslate(s,i,n.ref,o);else{const e=this.i18nTranslate(s,i,void 0,o);n.appendIcu(Fr(s).name,e)}return t&&this.i18nEnd(null,!0),null}allocateDataSlot(){return this._dataIndex++}getConstCount(){return this._dataIndex}getVarCount(){return this._pureFunctionSlots}bindingContext(){return`${this._bindingContext++}`}instructionFn(e,t,n,r){e.push(()=>{const e=Array.isArray(r)?r:r();return hl(t,n,e).toStmt()})}processStylingInstruction(e,t,n){if(t){const r=()=>t.buildParams(t=>this.convertPropertyBinding(e,t,!0));n?this.creationInstruction(t.sourceSpan,t.reference,r):this.updateInstruction(t.sourceSpan,t.reference,r)}}creationInstruction(e,t,n){this.instructionFn(this._creationCodeFns,e,t,n||[])}updateInstruction(e,t,n){this.instructionFn(this._updateCodeFns,e,t,n||[])}allocatePureFunctionSlots(e){const t=this._pureFunctionSlots;return this._pureFunctionSlots+=e,t}allocateBindingSlots(e){this._bindingSlots+=e instanceof Gi?e.expressions.length:1}convertExpressionBinding(e,t){const n=bs(this,e,t,this.bindingContext(),cs.TrySimple).currValExpr;return lt(Cn.bind).callFn([n])}convertPropertyBinding(e,t,n){const r=t instanceof Gi?gl:()=>At("Unexpected interpolation"),i=bs(this,e,t,this.bindingContext(),cs.TrySimple,r);this._tempVariables.push(...i.stmts);const s=i.currValExpr;return t instanceof Gi||n?s:lt(Cn.bind).callFn([s])}matchDirectives(e,t){if(this.directiveMatcher){const n=function(e,t){const n=new v;return n.setElement(e),Object.getOwnPropertyNames(t).forEach(e=>{const r=t[e];n.addAttribute(e,r),"class"===e.toLowerCase()&&r.trim().split(/\s+/g).forEach(e=>n.addClassName(e))}),n}(e,ni(t));this.directiveMatcher.match(n,(e,t)=>{this.directives.add(t)})}}prepareSyntheticAndSelectOnlyAttrs(e,t){const n=[],r=[];if(e.length){const t=Zr("");e.forEach(e=>{4===e.type?n.push(Zr(vl(e.name)),t):r.push(e)})}return(r.length||t.length)&&(n.push(yt(1)),r.forEach(e=>n.push(Zr(e.name))),t.forEach(e=>n.push(Zr(e.name)))),n}toAttrsParam(e){return e.length>0?this.constantPool.getConstLiteral(pt(e),!0):Ue}prepareRefsParameter(e){if(!e||0===e.length)return Ue;const t=_n(e.map(e=>{const t=this.allocateDataSlot(),n=this._bindingScope.freshReferenceName(),r=this.level,i=ct(n);return this._bindingScope.set(r,e.name,i,0,(e,n)=>{const r=n>0?[dl(n).toStmt()]:[],s=i.set(lt(Cn.reference).callFn([yt(t)]));return r.concat(s.toConstDecl())},!0),[e.name,e.value]}));return this.constantPool.getConstLiteral(Zr(t),!0)}prepareListenerParameter(e,t){const n=en(t.name),r=en(e),i=`${this.templateName}_${r}_${n}_listener`;return()=>{const e=this._bindingScope.nestedScope(this._bindingScope.bindingLevel),n=ys(e,ct(Hr),t.handler,"b",()=>At("Unexpected interpolation")),r=[...e.restoreViewStatement(),...e.variableDeclarations(),...n.render3Stmts],s=mt([new Oe("$event",se)],r,oe,null,i);return[yt(t.name),s]}}}class ul extends os{constructor(e,t,n,r){super(),this.constantPool=e,this.allocateSlot=t,this.allocatePureFunctionSlots=n,this.definePipe=r,this._pipeBindExprs=[]}visitPipe(e,t){const n=this.allocateSlot(),r=`PIPE:${n}`,i=this.allocatePureFunctionSlots(2+e.args.length),s=new Bi(e.span,new Li(e.span),r),{identifier:o,isVarLength:a}=function(e){const t=cl[e.length];return{identifier:t||Cn.pipeBindV,isVarLength:!t}}(e.args);this.definePipe(e.name,r,n,lt(o));const u=[e.exp,...e.args],c=a?this.visitAll([new Ki(e.span,u)]):this.visitAll(u),l=new ts(e.span,s,[new Wi(e.span,n),new Wi(e.span,i),...c]);return this._pipeBindExprs.push(l),l}updatePipeSlotOffsets(e){this._pipeBindExprs.forEach(t=>{t.args[1].value+=e})}visitLiteralArray(e,t){return new Ds(e.span,this.visitAll(e.expressions),e=>{const t=pt(e);return e.every(e=>e.isConstant())?this.constantPool.getConstLiteral(t,!0):pl(this.constantPool,t,this.allocatePureFunctionSlots)})}visitLiteralMap(e,t){return new Ds(e.span,this.visitAll(e.values),t=>{const n=ft(t.map((t,n)=>({key:e.keys[n].key,value:t,quoted:e.keys[n].quoted})));return t.every(e=>e.isConstant())?this.constantPool.getConstLiteral(n,!0):pl(this.constantPool,n,this.allocatePureFunctionSlots)})}}const cl=[Cn.pipeBind1,Cn.pipeBind2,Cn.pipeBind3,Cn.pipeBind4];const ll=[Cn.pureFunction0,Cn.pureFunction1,Cn.pureFunction2,Cn.pureFunction3,Cn.pureFunction4,Cn.pureFunction5,Cn.pureFunction6,Cn.pureFunction7,Cn.pureFunction8];function hl(e,t,n){return lt(t,null,e).callFn(n,e)}function dl(e){return lt(Cn.nextContext).callFn(e>1?[yt(e)]:[])}function pl(e,t,n){const{literalFactory:r,literalFactoryArguments:i}=e.getLiteralFactory(t),s=n(1+i.length);i.length>0||At("Expected arguments to a literal factory function");const{identifier:o,isVarLength:a}=function(e){const t=ll[e.length];return{identifier:t||Cn.pureFunctionV,isVarLength:!t}}(i),u=[yt(s),r];return a?u.push(pt(i)):u.push(...i),lt(o).callFn(u)}const fl="$$shared_ctx$$";class ml{constructor(e=0,t=null){this.bindingLevel=e,this.parent=t,this.map=new Map,this.referenceNameIndex=0,this.restoreViewVariable=null}static get ROOT_SCOPE(){return ml._ROOT_SCOPE||(ml._ROOT_SCOPE=(new ml).set(0,"$event",ct("$event"))),ml._ROOT_SCOPE}get(e){let t=this;for(;t;){let n=t.map.get(e);if(null!=n)return t!==this&&(n={retrievalLevel:n.retrievalLevel,lhs:n.lhs,declareLocalCallback:n.declareLocalCallback,declare:!1,priority:n.priority,localRef:n.localRef},this.map.set(e,n),this.maybeGenerateSharedContextVar(n),this.maybeRestoreView(n.retrievalLevel,n.localRef)),n.declareLocalCallback&&!n.declare&&(n.declare=!0),n.lhs;t=t.parent}return 0===this.bindingLevel?null:this.getComponentProperty(e)}set(e,t,n,r=0,i,s){return!this.map.has(t)||At(`The name ${t} is already defined in scope to be ${this.map.get(t)}`),this.map.set(t,{retrievalLevel:e,lhs:n,declare:!1,declareLocalCallback:i,priority:r,localRef:s||!1}),this}getLocal(e){return this.get(e)}nestedScope(e){const t=new ml(e,this);return e>0&&t.generateSharedContextVar(0),t}getSharedContextName(e){const t=this.map.get(fl+e);return t&&t.declare?t.lhs:null}maybeGenerateSharedContextVar(e){if(1===e.priority){const t=this.map.get(fl+e.retrievalLevel);t?t.declare=!0:this.generateSharedContextVar(e.retrievalLevel)}}generateSharedContextVar(e){const t=ct(Hr+this.freshReferenceName());this.map.set(fl+e,{retrievalLevel:e,lhs:t,declareLocalCallback:(e,n)=>[t.set(dl(n)).toConstDecl()],declare:!1,priority:2,localRef:!1})}getComponentProperty(e){const t=this.map.get(fl+0);return t.declare=!0,this.maybeRestoreView(0,!1),t.lhs.prop(e)}maybeRestoreView(e,t){this.isListenerScope()&&(e<this.bindingLevel||t)&&(this.parent.restoreViewVariable||(this.parent.restoreViewVariable=ct(this.parent.freshReferenceName())),this.restoreViewVariable=this.parent.restoreViewVariable)}restoreViewStatement(){return this.restoreViewVariable?[hl(null,Cn.restoreView,[this.restoreViewVariable]).toStmt()]:[]}viewSnapshotStatements(){const e=hl(null,Cn.getCurrentView,[]);return this.restoreViewVariable?[this.restoreViewVariable.set(e).toConstDecl()]:[]}isListenerScope(){return this.parent&&this.parent.bindingLevel===this.bindingLevel}variableDeclarations(){let e=0;return Array.from(this.map.values()).filter(e=>e.declare).sort((e,t)=>t.retrievalLevel-e.retrievalLevel||t.priority-e.priority).reduce((t,n)=>{const r=this.bindingLevel-n.retrievalLevel,i=n.declareLocalCallback(this,r-e);return e=r,t.concat(i)},[])}freshReferenceName(){let e=this;for(;e.parent;)e=e.parent;return`${Wr}${e.referenceNameIndex++}`}}function gl(e){switch((e=e.slice(1)).length){case 3:return lt(Cn.interpolation1).callFn(e);case 5:return lt(Cn.interpolation2).callFn(e);case 7:return lt(Cn.interpolation3).callFn(e);case 9:return lt(Cn.interpolation4).callFn(e);case 11:return lt(Cn.interpolation5).callFn(e);case 13:return lt(Cn.interpolation6).callFn(e);case 15:return lt(Cn.interpolation7).callFn(e);case 17:return lt(Cn.interpolation8).callFn(e)}return e.length>=19&&e.length%2==1||At(`Invalid interpolation argument length ${e.length}`),lt(Cn.interpolationV).callFn([pt(e)])}function yl(){return new Wu(new za(new Aa),Ua,new Bu,null,[])}function vl(e){return"@"+e}function _l(e){return 1===e.length&&e[0]instanceof tc}function bl(e){return!e.find(e=>!(e instanceof Xu||e instanceof Yu||e instanceof oc))}const wl=/attr\.([^\]]+)/;function El(e,t,n){const r=new ti;r.set("type",e.type),r.set("selectors",Zr(Y(e.selector)));const i=si({name:e.name,type:e.type,deps:e.deps,injectFn:Cn.directiveInject,extraStatementFn:function(e,t){const n=t.createDirectiveHostEventAsts(kl(e),e.typeSourceSpan);return n&&n.length?t=>(function(e,t,n){return t.map(t=>{const r=ys(null,e,t.handler,"b",()=>At("Unexpected interpolation")),i=t.name&&en(t.name),s=n.name,o=s&&i?`${s}_${i}_HostBindingHandler`:null,a=mt([new Oe("$event",se)],[...r.render3Stmts],oe,null,o);return lt(Cn.listener).callFn([yt(t.name),a]).toStmt()})})(t,n,e):null}(e,n)});r.set("factory",i.factory),r.set("contentQueries",function(e,t){if(e.queries.length){const n=e.queries.map(e=>{const n=xl(e,t,null);return lt(Cn.registerContentQuery).callFn([n,ct("dirIndex")]).toStmt()}),r=e.name,i=[new Oe("dirIndex",ue)];return mt(i,n,oe,null,r?`${r}_ContentQueries`:null)}return null}(e,t)),r.set("contentQueriesRefresh",function(e){if(e.queries.length>0){const t=[],n=e.name,r=[new Oe("dirIndex",ue),new Oe("queryStartIndex",ue)],i=ct("instance"),s=Gr(t,$r);return t.push(i.set(lt(Cn.load).callFn([ct("dirIndex")])).toDeclStmt(oe,[qe.Final])),e.queries.forEach((e,n)=>{const r=ct("queryStartIndex"),o=lt(Cn.loadQueryList).callFn([n>0?r.plus(yt(n)):r]),a=s().set(o),u=lt(Cn.queryRefresh).callFn([a]),c=i.prop(e.propertyName).set(e.first?s().prop("first"):s()),l=u.and(c);t.push(l.toStmt())}),mt(r,t,oe,null,n?`${n}_ContentQueriesRefresh`:null)}return null}(e));let s=Object.keys(e.host.properties).length;const o=ct("elIndex"),a=ct("dirIndex"),u=new Ca(o,a),c={},l=Object.getOwnPropertyNames(e.host.attributes);for(let h=0;h<l.length;h++){const t=l[h],n=e.host.attributes[t];switch(t){case"style":u.registerStyleAttr(n);break;case"class":u.registerClassAttr(n);break;default:c[t]=n}}return r.set("attributes",function(e){const t=[];for(let n of Object.getOwnPropertyNames(e)){const r=e[n];t.push(yt(n),yt(r))}if(t.length>0)return pt(t);return null}(c)),r.set("hostBindings",function(e,t,n,r,i,s,o){const a=[],u=e.typeSourceSpan,c=kl(e),l=i.createBoundHostProperties(c,u),h=lt(Cn.load).callFn([n]),d=(e,t)=>bs(null,e,t,"b",cs.TrySimple,()=>At("Unexpected interpolation"));if(l){const e=new ul(s,()=>At("Unexpected node"),o,()=>At("Unexpected pipe"));for(const n of l){const i=n.name,s=i.substring(0,5).toLowerCase();if("style"===s){const{propertyName:e,unit:t}=Ml(i);r.registerStyleInput(e,n.expression,t,n.sourceSpan)}else if("class"===s)r.registerClassInput(Ml(i).propertyName,n.expression,n.sourceSpan);else{const r=n.expression.visit(e),s=d(h,r),{bindingName:o,instruction:u}=Ol(i);a.push(...s.stmts),a.push(lt(u).callFn([t,yt(o),lt(Cn.bind).callFn([s.currValExpr])]).toStmt())}}if(r.hasBindingsOrInitialValues){const t=r.buildCreateLevelInstruction(null,s);if(t){const e=Nl(t,h,d);a.push(e)}r.buildUpdateLevelInstructions(e).forEach(e=>{const t=Nl(e,h,d);a.push(t)})}}if(a.length>0){const r=e.name;return mt([new Oe(n.name,ue),new Oe(t.name,ue)],a,oe,null,r?`${r}_HostBindings`:null)}return null}(e,o,a,u,n,t,e=>{const t=s;return s+=e,t})),s&&r.set("hostVars",yt(s)),r.set("inputs",Jr(e.inputs)),r.set("outputs",Jr(e.outputs)),null!==e.exportAs&&r.set("exportAs",yt(e.exportAs)),{definitionMap:r,statements:i.statements}}function Cl(e,t){const n=[],r=t.providers,i=t.viewProviders;if(r||i){const e=[r||new Fe([])];i&&e.push(i),n.push(lt(Cn.ProvidersFeature).callFn(e))}t.usesInheritance&&n.push(lt(Cn.InheritDefinitionFeature)),t.lifecycle.usesOnChanges&&n.push(lt(Cn.NgOnChangesFeature)),n.length&&e.set("features",pt(n))}function Sl(e,t,n){const{definitionMap:r,statements:i}=El(e,t,n);Cl(r,e);const s=lt(Cn.defineDirective).callFn([r.toLiteralMap()]);(e.selector||"").replace(/\n/g,"");return{expression:s,type:Il(e,Cn.DirectiveDefWithMeta),statements:i}}function Tl(e,t,n){const{definitionMap:r,statements:i}=El(e,t,n);Cl(r,e);const s=e.selector&&v.parse(e.selector),o=s&&s[0];if(o){const e=o.getAttrs();e.length&&r.set("attrs",t.getConstLiteral(pt(e.map(e=>yt(null!=e?e:void 0))),!0))}let a=null;if(e.directives.size){const t=new _;e.directives.forEach((e,n)=>{t.addSelectables(v.parse(n),e)}),a=t}e.viewQueries.length&&r.set("viewQuery",function(e,t){const n=[],r=[],i=Gr(r,$r);for(let o=0;o<e.viewQueries.length;o++){const s=e.viewQueries[o],a=xl(s,t,o);n.push(a.toStmt());const u=i(),c=lt(Cn.load).callFn([yt(o)]),l=lt(Cn.queryRefresh).callFn([u.set(c)]),h=ct(Hr).prop(s.propertyName).set(s.first?u.prop("first"):u);r.push(l.and(h).toStmt())}const s=e.name?`${e.name}_Query`:null;return mt([new Oe(zr,ue),new Oe(Hr,null)],[ol(1,n),ol(2,r)],oe,null,s)}(e,t));const u=e.name,c=u?`${u}_Template`:null,l=new Set,h=new Set,d=e.template,p=new al(t,ml.ROOT_SCOPE,0,u,null,null,c,e.viewQueries,a,l,e.pipes,h,Cn.namespaceHTML,e.template.relativeContextFilePath),f=p.buildTemplateFunction(d.nodes,[],d.hasNgContent,d.ngContentSelectors);if(r.set("consts",yt(p.getConstCount())),r.set("vars",yt(p.getVarCount())),r.set("template",f),l.size){let t=pt(Array.from(l));e.wrapDirectivesAndPipesInClosure&&(t=mt([],[new Ke(t)])),r.set("directives",t)}if(h.size){let t=pt(Array.from(h));e.wrapDirectivesAndPipesInClosure&&(t=mt([],[new Ke(t)])),r.set("pipes",t)}if(null===e.encapsulation&&(e.encapsulation=N.Emulated),e.styles&&e.styles.length){const t=(e.encapsulation==N.Emulated?function(e,t,n){const r=new qo;return e.map(e=>r.shimCssText(e,t,n))}(e.styles,ga,ma):e.styles).map(e=>yt(e));r.set("styles",pt(t))}else e.encapsulation===N.Emulated&&(e.encapsulation=N.None);e.encapsulation!==N.Emulated&&r.set("encapsulation",yt(e.encapsulation)),null!==e.animations&&r.set("data",ft([{key:"animations",value:e.animations,quoted:!1}]));(e.selector||"").replace(/\n/g,"");return{expression:lt(Cn.defineComponent).callFn([r.toLiteralMap()]),type:Il(e,Cn.ComponentDefWithMeta),statements:i}}function xl(e,t,n){const r=function(e,t){if(Array.isArray(e.predicate)){let n=[];return e.predicate.forEach(e=>{const t=e.split(",").map(e=>yt(e.trim()));n.push(...t)}),t.getConstLiteral(pt(n),!0)}return e.predicate}(e,t),i=[yt(n,oe),r,yt(e.descendants)];return e.read&&i.push(e.read),lt(Cn.query).callFn(i)}function Al(e){return dt(yt(e))}function Dl(e){return dt(ft(Object.keys(e).map(t=>{return{key:t,value:yt(Array.isArray(e[t])?e[t][0]:e[t]),quoted:!0}})))}function Il(e,t){const n=(e.selector||"").replace(/\n/g,"");return dt(lt(t,[function(e,t){let n=null;if(t>0){n=[];for(let e=0;e<t;e++)n.push(se)}return dt(e,null,n)}(e.type,e.typeArgumentCount),Al(n),null!==e.exportAs?Al(e.exportAs):ce,Dl(e.inputs),Dl(e.outputs),(r=e.queries.map(e=>e.propertyName),r.length>0?dt(pt(r.map(e=>yt(e)))):ce)]));var r}function Nl(e,t,n){const r=e.buildParams(e=>n(t,e).currValExpr);return lt(e.reference,null,e.sourceSpan).callFn(r,e.sourceSpan).toStmt()}function Ol(e){let t;const n=e.match(wl);return n?(e=n[1],t=Cn.elementAttribute):t=Cn.elementProperty,{bindingName:e,instruction:t}}function kl(e){return{hostAttributes:e.host.attributes,hostListeners:e.host.listeners,hostProperties:e.host.properties}}const Pl=/^(?:(?:\[([^\]]+)\])|(?:\(([^\)]+)\)))|(\@[-\w]+)$/;function Ml(e){let t="",n="";const r=e.indexOf(".");if(r>0){const i=e.lastIndexOf(".");i!==r?(t=e.substring(i+1,e.length),n=e.substring(r+1,i)):n=e.substring(r+1,e.length)}return{propertyName:n,unit:t}}class Rl{constructor(){this.R3ResolvedDependencyType=ii}compilePipe(e,t,n){const r=Oi({name:n.name,type:new ve(n.type),deps:zl(n.deps),pipeName:n.pipeName,pure:n.pure});return Ii(r.expression,e,t,r.statements)}compileInjectable(e,t,n){const{expression:r,statements:i}=function(e){let t=null;const n={name:e.name,type:e.type,deps:e.ctorDeps,injectFn:Qt.inject,extraStatementFn:null};if(void 0!==e.useClass){const r=e.useClass.isEquivalent(e.type),i=e.userDeps||r&&e.ctorDeps||void 0;t=si(void 0!==i?Object.assign({},n,{delegate:e.useClass,delegateDeps:i,delegateType:ri.Class}):Object.assign({},n,{delegate:e.useClass,delegateType:ri.Factory}))}else t=void 0!==e.useFactory?si(Object.assign({},n,{delegate:e.useFactory,delegateDeps:e.userDeps||[],delegateType:ri.Function})):void 0!==e.useValue?si(Object.assign({},n,{expression:e.useValue})):void 0!==e.useExisting?si(Object.assign({},n,{expression:lt(Qt.inject).callFn([e.useExisting])})):si(n);const r=e.type,i=e.providedIn;return{expression:lt(Qt.defineInjectable).callFn([ui({token:r,factory:t.factory,providedIn:i})]),type:new ne(lt(Qt.InjectableDef,[new ne(e.type)])),statements:t.statements}}({name:n.name,type:new ve(n.type),providedIn:(s=n.providedIn,null==s||"string"==typeof s?new Te(s):new ve(s)),useClass:$l(n,Fl),useFactory:$l(n,Ll),useValue:$l(n,Vl),useExisting:$l(n,jl),ctorDeps:zl(n.ctorDeps),userDeps:zl(n.userDeps)||void 0});var s;return Ii(r,e,t,i)}compileInjector(e,t,n){const r=function(e){const t=si({name:e.name,type:e.type,deps:e.deps,injectFn:Cn.inject,extraStatementFn:null});return{expression:lt(Cn.defineInjector).callFn([ui({factory:t.factory,providers:e.providers,imports:e.imports})]),type:new ne(lt(Cn.InjectorDef,[new ne(e.type)])),statements:t.statements}}({name:n.name,type:new ve(n.type),deps:zl(n.deps),providers:new ve(n.providers),imports:new ve(n.imports)});return Ii(r.expression,e,t,r.statements)}compileNgModule(e,t,n){return Ii(function(e){const{type:t,bootstrap:n,declarations:r,imports:i,exports:s}=e;return{expression:lt(Cn.defineNgModule).callFn([ui({type:t,bootstrap:pt(n.map(e=>e.value)),declarations:pt(r.map(e=>e.value)),imports:pt(i.map(e=>e.value)),exports:pt(s.map(e=>e.value))})]),type:new ne(lt(Cn.NgModuleDefWithMeta,[new ne(t),Ni(r),Ni(i),Ni(s)])),additionalStatements:[]}}({type:new ve(n.type),bootstrap:n.bootstrap.map(Bl),declarations:n.declarations.map(Bl),imports:n.imports.map(Bl),exports:n.exports.map(Bl),emitInline:!0}).expression,e,t,[])}compileDirective(e,t,n){const r=new $t,i=yl(),s=Sl(ql(n),r,i),o=[...r.statements,...s.statements];return Ii(s.expression,e,t,o)}compileComponent(e,t,n){const r=new $t,i=function(e,t,n={},r){const i=yl(),s=(new wu).parse(e,t,!0);if(s.errors&&s.errors.length>0)return{errors:s.errors,nodes:[],hasNgContent:!1,ngContentSelectors:[],relativeContextFilePath:r};let o=s.rootNodes;const a={keepI18nAttrs:!n.preserveWhitespaces};o=eu(new rl(a),o),n.preserveWhitespaces||(o=eu(new Du,o),o=eu(new rl({keepI18nAttrs:!1}),o));const{nodes:u,hasNgContent:c,ngContentSelectors:l,errors:h}=Vc(o,i);return h&&h.length>0?{errors:h,nodes:[],hasNgContent:!1,ngContentSelectors:[],relativeContextFilePath:r}:{nodes:u,hasNgContent:c,ngContentSelectors:l,relativeContextFilePath:r}}(n.template,t,{preserveWhitespaces:n.preserveWhitespaces||!1},"");if(void 0!==i.errors){const e=i.errors.map(e=>e.toString()).join(", ");throw new Error(`Errors during JIT compilation of template for ${n.name}: ${e}`)}const s=Tl(Object.assign({},n,ql(n),{template:i,viewQueries:n.viewQueries.map(Ul),wrapDirectivesAndPipesInClosure:!1,styles:n.styles||[],encapsulation:n.encapsulation,animations:null!=n.animations?new ve(n.animations):null,viewProviders:null!=n.viewProviders?new ve(n.viewProviders):null}),r,yl()),o=[...r.statements,...s.statements];return Ii(s.expression,e,t,o)}}const Fl=Object.keys({useClass:null})[0],Ll=Object.keys({useFactory:null})[0],Vl=Object.keys({useValue:null})[0],jl=Object.keys({useExisting:null})[0],Bl=function(e){const t=new ve(e);return{value:t,type:t}};function Ul(e){return Object.assign({},e,{predicate:Array.isArray(e.predicate)?e.predicate:new ve(e.predicate),read:e.read?new ve(e.read):null})}function ql(e){const t=Xl(e.inputs||[]),n=Xl(e.outputs||[]),r=e.propMetadata,i={},s={};for(const o in r)r.hasOwnProperty(o)&&r[o].forEach(e=>{Ql(e)?i[o]=e.bindingPropertyName?[e.bindingPropertyName,o]:o:Gl(e)&&(s[o]=e.bindingPropertyName||o)});return Object.assign({},e,{typeSourceSpan:null,type:new ve(e.type),deps:zl(e.deps),host:function(e,t){const{attributes:n,listeners:r,properties:i,animations:s}=function(e){const t={},n={},r={},i={};return Object.keys(e).forEach(s=>{const o=e[s],a=s.match(Pl);null===a?t[s]=o:null!=a[1]?r[a[1]]=o:null!=a[2]?n[a[2]]=o:null!=a[3]&&(i[a[3]]=o)}),{attributes:t,listeners:n,properties:r,animations:i}}(e||{});if(Object.keys(s).length>0)throw new Error("Animation bindings are as-of-yet unsupported in Ivy");for(const o in t)t.hasOwnProperty(o)&&t[o].forEach(e=>{Wl(e)?i[e.hostPropertyName||o]=o:Kl(e)&&(r[e.eventName||o]=`${o}(${(e.args||[]).join(",")})`)});return{attributes:n,listeners:r,properties:i}}(e.host,e.propMetadata),inputs:Object.assign({},t,i),outputs:Object.assign({},n,s),queries:e.queries.map(Ul),providers:null!=e.providers?new ve(e.providers):null})}function $l(e,t){return e.hasOwnProperty(t)?new ve(e[t]):void 0}function Hl(e){let t;return{token:t=null===e.token?new Te(null):e.resolved===ii.Attribute?new Te(e.token):new ve(e.token),resolved:e.resolved,host:e.host,optional:e.optional,self:e.self,skipSelf:e.skipSelf}}function zl(e){return null==e?null:e.map(Hl)}function Wl(e){return"HostBinding"===e.ngMetadataName}function Kl(e){return"HostListener"===e.ngMetadataName}function Ql(e){return"Input"===e.ngMetadataName}function Gl(e){return"Output"===e.ngMetadataName}function Xl(e){return e.reduce((e,t)=>{const[n,r]=t.split(",").map(e=>e.trim());return e[n]=r||n,e},{})}new class{constructor(e){this.full=e;const t=e.split(".");this.major=t[0],this.minor=t[1],this.patch=t.slice(2).join(".")}}("7.1.1");class Yl{constructor(e,t,n){this.value=e,this.ngContentIndex=t,this.sourceSpan=n}visit(e,t){return e.visitText(this,t)}}class Zl{constructor(e,t,n){this.value=e,this.ngContentIndex=t,this.sourceSpan=n}visit(e,t){return e.visitBoundText(this,t)}}class Jl{constructor(e,t,n){this.name=e,this.value=t,this.sourceSpan=n}visit(e,t){return e.visitAttr(this,t)}}const eh={4:4,1:1,2:2,0:0,3:3};class th{constructor(e,t,n,r,i,s){this.name=e,this.type=t,this.securityContext=n,this.value=r,this.unit=i,this.sourceSpan=s,this.isAnimation=4===this.type}static fromBoundProperty(e){const t=eh[e.type];return new th(e.name,t,e.securityContext,e.value,e.unit,e.sourceSpan)}visit(e,t){return e.visitElementProperty(this,t)}}class nh{constructor(e,t,n,r,i){this.name=e,this.target=t,this.phase=n,this.handler=r,this.sourceSpan=i,this.fullName=nh.calcFullName(this.name,this.target,this.phase),this.isAnimation=!!this.phase}static calcFullName(e,t,n){return t?`${t}:${e}`:n?`@${e}.${n}`:e}static fromParsedEvent(e){const t=0===e.type?e.targetOrPhase:null,n=1===e.type?e.targetOrPhase:null;return new nh(e.name,t,n,e.handler,e.sourceSpan)}visit(e,t){return e.visitEvent(this,t)}}class rh{constructor(e,t,n,r){this.name=e,this.value=t,this.originalValue=n,this.sourceSpan=r}visit(e,t){return e.visitReference(this,t)}}class ih{constructor(e,t,n){this.name=e,this.value=t,this.sourceSpan=n}static fromParsedVariable(e){return new ih(e.name,e.value,e.sourceSpan)}visit(e,t){return e.visitVariable(this,t)}}class sh{constructor(e,t,n,r,i,s,o,a,u,c,l,h,d){this.name=e,this.attrs=t,this.inputs=n,this.outputs=r,this.references=i,this.directives=s,this.providers=o,this.hasViewContainer=a,this.queryMatches=u,this.children=c,this.ngContentIndex=l,this.sourceSpan=h,this.endSourceSpan=d}visit(e,t){return e.visitElement(this,t)}}class oh{constructor(e,t,n,r,i,s,o,a,u,c,l){this.attrs=e,this.outputs=t,this.references=n,this.variables=r,this.directives=i,this.providers=s,this.hasViewContainer=o,this.queryMatches=a,this.children=u,this.ngContentIndex=c,this.sourceSpan=l}visit(e,t){return e.visitEmbeddedTemplate(this,t)}}class ah{constructor(e,t,n,r){this.directiveName=e,this.templateName=t,this.value=n,this.sourceSpan=r}visit(e,t){return e.visitDirectiveProperty(this,t)}}class uh{constructor(e,t,n,r,i,s){this.directive=e,this.inputs=t,this.hostProperties=n,this.hostEvents=r,this.contentQueryStartId=i,this.sourceSpan=s}visit(e,t){return e.visitDirective(this,t)}}class ch{constructor(e,t,n,r,i,s,o,a){this.token=e,this.multiProvider=t,this.eager=n,this.providers=r,this.providerType=i,this.lifecycleHooks=s,this.sourceSpan=o,this.isModule=a}visit(e,t){return null}}var lh;!function(e){e[e.PublicService=0]="PublicService",e[e.PrivateService=1]="PrivateService",e[e.Component=2]="Component",e[e.Directive=3]="Directive",e[e.Builtin=4]="Builtin"}(lh||(lh={}));class hh{constructor(e,t,n){this.index=e,this.ngContentIndex=t,this.sourceSpan=n}visit(e,t){return e.visitNgContent(this,t)}}function dh(e,t,n=null){const r=[],i=e.visit?t=>e.visit(t,n)||t.visit(e,n):t=>t.visit(e,n);return t.forEach(e=>{const t=i(e);t&&r.push(t)}),r}class ph{constructor({defaultEncapsulation:e=N.Emulated,useJit:t=!0,jitDevMode:n=!1,missingTranslation:r=null,preserveWhitespaces:i,strictInjectionParameters:s}={}){this.defaultEncapsulation=e,this.useJit=!!t,this.jitDevMode=!!n,this.missingTranslation=r,this.preserveWhitespaces=fh(St(i)),this.strictInjectionParameters=!0===s}}function fh(e,t=!1){return null===e?t:e}class mh{constructor(e,t,n,r){this._resourceLoader=e,this._urlResolver=t,this._htmlParser=n,this._config=r,this._resourceLoaderCache=new Map}clearCache(){this._resourceLoaderCache.clear()}clearCacheFor(e){if(!e.isComponent)return;const t=e.template;this._resourceLoaderCache.delete(t.templateUrl),t.externalStylesheets.forEach(e=>{this._resourceLoaderCache.delete(e.moduleUrl)})}_fetch(e){let t=this._resourceLoaderCache.get(e);return t||(t=this._resourceLoader.get(e),this._resourceLoaderCache.set(e,t)),t}normalizeTemplate(e){if(Ct(e.template)){if(Ct(e.templateUrl))throw Dt(`'${Mt(e.componentType)}' component cannot define both template and templateUrl`);if("string"!=typeof e.template)throw Dt(`The template specified for component ${Mt(e.componentType)} is not a string`)}else{if(!Ct(e.templateUrl))throw Dt(`No template specified for component ${Mt(e.componentType)}`);if("string"!=typeof e.templateUrl)throw Dt(`The templateUrl specified for component ${Mt(e.componentType)} is not a string`)}if(Ct(e.preserveWhitespaces)&&"boolean"!=typeof e.preserveWhitespaces)throw Dt(`The preserveWhitespaces option for component ${Mt(e.componentType)} must be a boolean`);return xt.then(this._preParseTemplate(e),t=>this._normalizeTemplateMetadata(e,t))}_preParseTemplate(e){let t,n;return null!=e.template?(t=e.template,n=e.moduleUrl):(n=this._urlResolver.resolve(e.moduleUrl,e.templateUrl),t=this._fetch(n)),xt.then(t,t=>this._preparseLoadedTemplate(e,t,n))}_preparseLoadedTemplate(e,t,n){const r=!!e.template,i=Ba.fromArray(e.interpolation),s=this._htmlParser.parse(t,wn({reference:e.ngModuleType},{type:{reference:e.componentType}},{isInline:r,templateUrl:n}),!0,i);if(s.errors.length>0){throw Dt(`Template parse errors:\n${s.errors.join("\n")}`)}const o=this._normalizeStylesheet(new hn({styles:e.styles,moduleUrl:e.moduleUrl})),a=new gh;eu(a,s.rootNodes);const u=this._normalizeStylesheet(new hn({styles:a.styles,styleUrls:a.styleUrls,moduleUrl:n}));return{template:t,templateUrl:n,isInline:r,htmlAst:s,styles:o.styles.concat(u.styles),inlineStyleUrls:o.styleUrls.concat(u.styleUrls),styleUrls:this._normalizeStylesheet(new hn({styleUrls:e.styleUrls,moduleUrl:e.moduleUrl})).styleUrls,ngContentSelectors:a.ngContentSelectors}}_normalizeTemplateMetadata(e,t){return xt.then(this._loadMissingExternalStylesheets(t.styleUrls.concat(t.inlineStyleUrls)),n=>this._normalizeLoadedTemplateMetadata(e,t,n))}_normalizeLoadedTemplateMetadata(e,t,n){const r=[...t.styles];this._inlineStyles(t.inlineStyleUrls,n,r);const i=t.styleUrls,s=i.map(e=>{const t=n.get(e),r=[...t.styles];return this._inlineStyles(t.styleUrls,n,r),new hn({moduleUrl:e,styles:r})});let o=e.encapsulation;return null==o&&(o=this._config.defaultEncapsulation),o===N.Emulated&&0===r.length&&0===i.length&&(o=N.None),new dn({encapsulation:o,template:t.template,templateUrl:t.templateUrl,htmlAst:t.htmlAst,styles:r,styleUrls:i,ngContentSelectors:t.ngContentSelectors,animations:e.animations,interpolation:e.interpolation,isInline:t.isInline,externalStylesheets:s,preserveWhitespaces:fh(e.preserveWhitespaces,this._config.preserveWhitespaces)})}_inlineStyles(e,t,n){e.forEach(e=>{const r=t.get(e);r.styles.forEach(e=>n.push(e)),this._inlineStyles(r.styleUrls,t,n)})}_loadMissingExternalStylesheets(e,t=new Map){return xt.then(xt.all(e.filter(e=>!t.has(e)).map(e=>xt.then(this._fetch(e),n=>{const r=this._normalizeStylesheet(new hn({styles:[n],moduleUrl:e}));return t.set(e,r),this._loadMissingExternalStylesheets(r.styleUrls,t)}))),e=>t)}_normalizeStylesheet(e){const t=e.moduleUrl,n=e.styleUrls.filter(cc).map(e=>this._urlResolver.resolve(t,e)),r=e.styles.map(e=>{const r=function(e,t,n){const r=[],i=n.replace(hc,"").replace(lc,(...n)=>{const i=n[1]||n[2];return cc(i)?(r.push(e.resolve(t,i)),""):n[0]});return new uc(i,r)}(this._urlResolver,t,e);return n.push(...r.styleUrls),r.style});return new hn({styles:r,styleUrls:n,moduleUrl:t})}}class gh{constructor(){this.ngContentSelectors=[],this.styles=[],this.styleUrls=[],this.ngNonBindableStackCount=0}visitElement(e,t){const n=Ec(e);switch(n.type){case Cc.NG_CONTENT:0===this.ngNonBindableStackCount&&this.ngContentSelectors.push(n.selectAttr);break;case Cc.STYLE:let t="";e.children.forEach(e=>{e instanceof Qa&&(t+=e.value)}),this.styles.push(t);break;case Cc.STYLESHEET:this.styleUrls.push(n.hrefAttr)}return n.nonBindable&&this.ngNonBindableStackCount++,eu(this,e.children),n.nonBindable&&this.ngNonBindableStackCount--,null}visitExpansion(e,t){eu(this,e.cases)}visitExpansionCase(e,t){eu(this,e.expression)}visitComment(e,t){return null}visitAttribute(e,t){return null}visitText(e,t){return null}}const yh=[D,A,x,T];class vh{constructor(e){this._reflector=e}isDirective(e){const t=this._reflector.annotations(Rt(e));return t&&t.some(_h)}resolve(e,t=!0){const n=this._reflector.annotations(Rt(e));if(n){const t=bh(n,_h);if(t){const n=this._reflector.propMetadata(e),r=this._reflector.guards(e);return this._mergeWithPropertyMetadata(t,n,r,e)}}if(t)throw new Error(`No Directive annotation found on ${Mt(e)}`);return null}_mergeWithPropertyMetadata(e,t,n,r){const i=[],s=[],o={},a={};return Object.keys(t).forEach(e=>{const n=bh(t[e],e=>M.isTypeOf(e));n&&(n.bindingPropertyName?i.push(`${e}: ${n.bindingPropertyName}`):i.push(e));const r=bh(t[e],e=>R.isTypeOf(e));r&&(r.bindingPropertyName?s.push(`${e}: ${r.bindingPropertyName}`):s.push(e)),t[e].filter(e=>F.isTypeOf(e)).forEach(t=>{if(t.hostPropertyName){const n=t.hostPropertyName[0];if("("===n)throw new Error("@HostBinding can not bind to events. Use @HostListener instead.");if("["===n)throw new Error("@HostBinding parameter should be a property name, 'class.<name>', or 'attr.<name>'.");o[`[${t.hostPropertyName}]`]=e}else o[`[${e}]`]=e}),t[e].filter(e=>L.isTypeOf(e)).forEach(t=>{const n=t.args||[];o[`(${t.eventName})`]=`${e}(${n.join(",")})`});const u=bh(t[e],e=>yh.some(t=>t.isTypeOf(e)));u&&(a[e]=u)}),this._merge(e,i,s,o,a,n,r)}_extractPublicName(e){return bt(e,[null,e])[1].trim()}_dedupeBindings(e){const t=new Set,n=new Set,r=[];for(let i=e.length-1;i>=0;i--){const s=e[i],o=this._extractPublicName(s);n.add(o),t.has(o)||(t.add(o),r.push(s))}return r.reverse()}_merge(e,t,n,r,i,s,o){const a=this._dedupeBindings(e.inputs?e.inputs.concat(t):t),u=this._dedupeBindings(e.outputs?e.outputs.concat(n):n),c=e.host?Object.assign({},e.host,r):r,l=e.queries?Object.assign({},e.queries,i):i;if(k.isTypeOf(e)){const t=e;return k({selector:t.selector,inputs:a,outputs:u,host:c,exportAs:t.exportAs,moduleId:t.moduleId,queries:l,changeDetection:t.changeDetection,providers:t.providers,viewProviders:t.viewProviders,entryComponents:t.entryComponents,template:t.template,templateUrl:t.templateUrl,styles:t.styles,styleUrls:t.styleUrls,encapsulation:t.encapsulation,animations:t.animations,interpolation:t.interpolation,preserveWhitespaces:e.preserveWhitespaces})}return I({selector:e.selector,inputs:a,outputs:u,host:c,exportAs:e.exportAs,queries:l,providers:e.providers,guards:s})}}function _h(e){return I.isTypeOf(e)||k.isTypeOf(e)}function bh(e,t){for(let n=e.length-1;n>=0;n--)if(t(e[n]))return e[n];return null}class wh extends Bo{constructor(e,t){super(e,t)}}const Eh="i18n",Ch="i18n-",Sh=/^i18n:?/,Th="|",xh="@@";let Ah=!1;class Dh{constructor(e,t){this.messages=e,this.errors=t}}var Ih;!function(e){e[e.Extract=0]="Extract",e[e.Merge=1]="Merge"}(Ih||(Ih={}));class Nh{constructor(e,t){this._implicitTags=e,this._implicitAttrs=t}extract(e,t){return this._init(Ih.Extract,t),e.forEach(e=>e.visit(this,null)),this._inI18nBlock&&this._reportError(e[e.length-1],"Unclosed block"),new Dh(this._messages,this._errors)}merge(e,t,n){this._init(Ih.Merge,n),this._translations=t;const r=new Za("wrapper",[],e,void 0,void 0,void 0).visit(this,null);return this._inI18nBlock&&this._reportError(e[e.length-1],"Unclosed block"),new yu(r.children,this._errors)}visitExpansionCase(e,t){const n=eu(this,e.expression,t);if(this._mode===Ih.Merge)return new Xa(e.value,n,e.sourceSpan,e.valueSourceSpan,e.expSourceSpan)}visitExpansion(e,t){this._mayBeAddBlockChildren(e);const n=this._inIcu;this._inIcu||(this._isInTranslatableSection&&this._addMessage([e]),this._inIcu=!0);const r=eu(this,e.cases,t);return this._mode===Ih.Merge&&(e=new Ga(e.switchValue,e.type,r,e.sourceSpan,e.switchValueSourceSpan)),this._inIcu=n,e}visitComment(e,t){const n=!!((r=e)instanceof Ja&&r.value&&r.value.startsWith("i18n"));var r;if(n&&this._isInTranslatableSection)return void this._reportError(e,"Could not start a block inside a translatable section");const i=function(e){return!!(e instanceof Ja&&e.value&&"/i18n"===e.value)}(e);if(!i||this._inI18nBlock){if(!this._inI18nNode&&!this._inIcu)if(this._inI18nBlock){if(i){if(this._depth==this._blockStartDepth){this._closeTranslatableSection(e,this._blockChildren),this._inI18nBlock=!1;const t=this._addMessage(this._blockChildren,this._blockMeaningAndDesc);return eu(this,this._translateMessage(e,t))}return void this._reportError(e,"I18N blocks should not cross element boundaries")}}else if(n){if(!Ah&&console&&console.warn){Ah=!0;const t=e.sourceSpan.details?`, ${e.sourceSpan.details}`:"";console.warn(`I18n comments are deprecated, use an <ng-container> element instead (${e.sourceSpan.start}${t})`)}this._inI18nBlock=!0,this._blockStartDepth=this._depth,this._blockChildren=[],this._blockMeaningAndDesc=e.value.replace(Sh,"").trim(),this._openTranslatableSection(e)}}else this._reportError(e,"Trying to close an unopened block")}visitText(e,t){return this._isInTranslatableSection&&this._mayBeAddBlockChildren(e),e}visitElement(e,t){this._mayBeAddBlockChildren(e),this._depth++;const n=this._inI18nNode,r=this._inImplicitNode;let i=[],s=void 0;const o=e.attrs.find(e=>e.name===Eh)||null;const a=o?o.value:"",u=this._implicitTags.some(t=>e.name===t)&&!this._inIcu&&!this._isInTranslatableSection,c=!r&&u;if(this._inImplicitNode=r||u,this._isInTranslatableSection||this._inIcu)(o||c)&&this._reportError(e,"Could not mark an element as translatable inside a translatable section"),this._mode==Ih.Extract&&eu(this,e.children);else{if(o||c){this._inI18nNode=!0;const t=this._addMessage(e.children,a);s=this._translateMessage(e,t)}if(this._mode==Ih.Extract){const t=o||c;t&&this._openTranslatableSection(e),eu(this,e.children),t&&this._closeTranslatableSection(e,e.children)}}if(this._mode===Ih.Merge){(s||e.children).forEach(e=>{const n=e.visit(this,t);n&&!this._isInTranslatableSection&&(i=i.concat(n))})}if(this._visitAttributesOf(e),this._depth--,this._inI18nNode=n,this._inImplicitNode=r,this._mode===Ih.Merge){const t=this._translateAttributes(e);return new Za(e.name,t,i,e.sourceSpan,e.startSourceSpan,e.endSourceSpan)}return null}visitAttribute(e,t){throw new Error("unreachable code")}_init(e,t){this._mode=e,this._inI18nBlock=!1,this._inI18nNode=!1,this._depth=0,this._inIcu=!1,this._msgCountAtSectionStart=void 0,this._errors=[],this._messages=[],this._inImplicitNode=!1,this._createI18nMessage=Jc(t)}_visitAttributesOf(e){const t={},n=this._implicitAttrs[e.name]||[];e.attrs.filter(e=>e.name.startsWith(Ch)).forEach(e=>t[e.name.slice(Ch.length)]=e.value),e.attrs.forEach(e=>{e.name in t?this._addMessage([e],t[e.name]):n.some(t=>e.name===t)&&this._addMessage([e])})}_addMessage(e,t){if(0==e.length||1==e.length&&e[0]instanceof Ya&&!e[0].value)return null;const{meaning:n,description:r,id:i}=Oh(t),s=this._createI18nMessage(e,n,r,i);return this._messages.push(s),s}_translateMessage(e,t){if(t&&this._mode===Ih.Merge){const n=this._translations.get(t);if(n)return n;this._reportError(e,`Translation unavailable for message id="${this._translations.digest(t)}"`)}return[]}_translateAttributes(e){const t=e.attrs,n={};t.forEach(e=>{e.name.startsWith(Ch)&&(n[e.name.slice(Ch.length)]=Oh(e.value))});const r=[];return t.forEach(t=>{if(t.name!==Eh&&!t.name.startsWith(Ch))if(t.value&&""!=t.value&&n.hasOwnProperty(t.name)){const{meaning:i,description:s,id:o}=n[t.name],a=this._createI18nMessage([t],i,s,o),u=this._translations.get(a);if(u)if(0==u.length)r.push(new Ya(t.name,"",t.sourceSpan));else if(u[0]instanceof Qa){const e=u[0].value;r.push(new Ya(t.name,e,t.sourceSpan))}else this._reportError(e,`Unexpected translation for attribute "${t.name}" (id="${o||this._translations.digest(a)}")`);else this._reportError(e,`Translation unavailable for attribute "${t.name}" (id="${o||this._translations.digest(a)}")`)}else r.push(t)}),r}_mayBeAddBlockChildren(e){this._inI18nBlock&&!this._inIcu&&this._depth==this._blockStartDepth&&this._blockChildren.push(e)}_openTranslatableSection(e){this._isInTranslatableSection?this._reportError(e,"Unexpected section start"):this._msgCountAtSectionStart=this._messages.length}get _isInTranslatableSection(){return void 0!==this._msgCountAtSectionStart}_closeTranslatableSection(e,t){if(!this._isInTranslatableSection)return void this._reportError(e,"Unexpected section end");const n=this._msgCountAtSectionStart;if(1==t.reduce((e,t)=>e+(t instanceof Ja?0:1),0))for(let r=this._messages.length-1;r>=n;r--){const e=this._messages[r].nodes;if(!(1==e.length&&e[0]instanceof Tn)){this._messages.splice(r,1);break}}this._msgCountAtSectionStart=void 0}_reportError(e,t){this._errors.push(new wh(e.sourceSpan,t))}}function Oh(e){if(!e)return{meaning:"",description:"",id:""};const t=e.indexOf(xh),n=e.indexOf(Th),[r,i]=t>-1?[e.slice(0,t),e.slice(t+2)]:[e,""],[s,o]=n>-1?[r.slice(0,n),r.slice(n+1)]:["",r];return{meaning:s,description:o,id:i}}const kh=new class{constructor(){this.closedByParent=!1,this.contentType=r.PARSABLE_DATA,this.isVoid=!1,this.ignoreFirstLf=!1,this.canSelfClose=!0}requireExtraParent(e){return!1}isClosedByChild(e){return!1}};function Ph(e){return kh}class Mh extends vu{constructor(){super(Ph)}parse(e,t,n=!1){return super.parse(e,t,n)}}const Rh="1.2",Fh="urn:oasis:names:tc:xliff:document:1.2",Lh="en",Vh="x",jh="mrk",Bh="file",Uh="source",qh="seg-source",$h="target",Hh="trans-unit",zh="context-group",Wh="context";class Kh extends Yn{write(e,t){const n=new Qh,r=[];e.forEach(e=>{let t=[];e.sources.forEach(e=>{let n=new rr(zh,{purpose:"location"});n.children.push(new sr(10),new rr(Wh,{"context-type":"sourcefile"},[new ir(e.filePath)]),new sr(10),new rr(Wh,{"context-type":"linenumber"},[new ir(`${e.startLine}`)]),new sr(8)),t.push(new sr(8),n)});const i=new rr(Hh,{id:e.id,datatype:"html"});i.children.push(new sr(8),new rr(Uh,{},n.serialize(e.nodes)),...t),e.description&&i.children.push(new sr(8),new rr("note",{priority:"1",from:"description"},[new ir(e.description)])),e.meaning&&i.children.push(new sr(8),new rr("note",{priority:"1",from:"meaning"},[new ir(e.meaning)])),i.children.push(new sr(6)),r.push(new sr(6),i)});const i=new rr("body",{},[...r,new sr(4)]),s=new rr("file",{"source-language":t||Lh,datatype:"plaintext",original:"ng2.template"},[new sr(4),i,new sr(2)]),o=new rr("xliff",{version:Rh,xmlns:Fh},[new sr(2),s,new sr]);return er([new tr({version:"1.0",encoding:"UTF-8"}),new sr,o,new sr])}load(e,t){const n=new Gh,{locale:r,msgIdToHtml:i,errors:s}=n.parse(e,t),o={},a=new Xh;if(Object.keys(i).forEach(e=>{const{i18nNodes:n,errors:r}=a.convert(i[e],t);s.push(...r),o[e]=n}),s.length)throw new Error(`xliff parse errors:\n${s.join("\n")}`);return{locale:r,i18nNodesByMsgId:o}}digest(e){return kn(e)}}class Qh{visitText(e,t){return[new ir(e.value)]}visitContainer(e,t){const n=[];return e.children.forEach(e=>n.push(...e.visit(this))),n}visitIcu(e,t){const n=[new ir(`{${e.expressionPlaceholder}, ${e.type}, `)];return Object.keys(e.cases).forEach(t=>{n.push(new ir(`${t} {`),...e.cases[t].visit(this),new ir("} "))}),n.push(new ir("}")),n}visitTagPlaceholder(e,t){const n=function(e){switch(e.toLowerCase()){case"br":return"lb";case"img":return"image";default:return`x-${e}`}}(e.tag);if(e.isVoid)return[new rr(Vh,{id:e.startName,ctype:n,"equiv-text":`<${e.tag}/>`})];const r=new rr(Vh,{id:e.startName,ctype:n,"equiv-text":`<${e.tag}>`}),i=new rr(Vh,{id:e.closeName,ctype:n,"equiv-text":`</${e.tag}>`});return[r,...this.serialize(e.children),i]}visitPlaceholder(e,t){return[new rr(Vh,{id:e.name,"equiv-text":`{{${e.value}}}`})]}visitIcuPlaceholder(e,t){const n=`{${e.value.expression}, ${e.value.type}, ${Object.keys(e.value.cases).map(e=>e+" {...}").join(" ")}}`;return[new rr(Vh,{id:e.name,"equiv-text":n})]}serialize(e){return[].concat(...e.map(e=>e.visit(this)))}}class Gh{constructor(){this._locale=null}parse(e,t){this._unitMlString=null,this._msgIdToHtml={};const n=(new Mh).parse(e,t,!1);return this._errors=n.errors,eu(this,n.rootNodes,null),{msgIdToHtml:this._msgIdToHtml,errors:this._errors,locale:this._locale}}visitElement(e,t){switch(e.name){case Hh:this._unitMlString=null;const t=e.attrs.find(e=>"id"===e.name);if(t){const n=t.value;this._msgIdToHtml.hasOwnProperty(n)?this._addError(e,`Duplicated translations for msg ${n}`):(eu(this,e.children,null),"string"==typeof this._unitMlString?this._msgIdToHtml[n]=this._unitMlString:this._addError(e,`Message ${n} misses a translation`))}else this._addError(e,`<${Hh}> misses the "id" attribute`);break;case Uh:case qh:break;case $h:const n=e.startSourceSpan.end.offset,r=e.endSourceSpan.start.offset,i=e.startSourceSpan.start.file.content.slice(n,r);this._unitMlString=i;break;case Bh:const s=e.attrs.find(e=>"target-language"===e.name);s&&(this._locale=s.value),eu(this,e.children,null);break;default:eu(this,e.children,null)}}visitAttribute(e,t){}visitText(e,t){}visitComment(e,t){}visitExpansion(e,t){}visitExpansionCase(e,t){}_addError(e,t){this._errors.push(new wh(e.sourceSpan,t))}}class Xh{convert(e,t){const n=(new Mh).parse(e,t,!0);return this._errors=n.errors,{i18nNodes:this._errors.length>0||0==n.rootNodes.length?[]:[].concat(...eu(this,n.rootNodes)),errors:this._errors}}visitText(e,t){return new Tn(e.value,e.sourceSpan)}visitElement(e,t){if(e.name===Vh){const t=e.attrs.find(e=>"id"===e.name);return t?new In("",t.value,e.sourceSpan):(this._addError(e,`<${Vh}> misses the "id" attribute`),null)}return e.name===jh?[].concat(...eu(this,e.children)):(this._addError(e,"Unexpected tag"),null)}visitExpansion(e,t){const n={};return eu(this,e.cases).forEach(t=>{n[t.value]=new xn(t.nodes,e.sourceSpan)}),new An(e.switchValue,e.type,n,e.sourceSpan)}visitExpansionCase(e,t){return{value:e.value,nodes:eu(this,e.expression)}}visitComment(e,t){}visitAttribute(e,t){}_addError(e,t){this._errors.push(new wh(e.sourceSpan,t))}}const Yh="2.0",Zh="urn:oasis:names:tc:xliff:document:2.0",Jh="en",ed="ph",td="pc",nd="mrk",rd="xliff",id="source",sd="target",od="unit";class ad extends Yn{write(e,t){const n=new ud,r=[];e.forEach(e=>{const t=new rr(od,{id:e.id}),i=new rr("notes");(e.description||e.meaning)&&(e.description&&i.children.push(new sr(8),new rr("note",{category:"description"},[new ir(e.description)])),e.meaning&&i.children.push(new sr(8),new rr("note",{category:"meaning"},[new ir(e.meaning)]))),e.sources.forEach(e=>{i.children.push(new sr(8),new rr("note",{category:"location"},[new ir(`${e.filePath}:${e.startLine}${e.endLine!==e.startLine?","+e.endLine:""}`)]))}),i.children.push(new sr(6)),t.children.push(new sr(6),i);const s=new rr("segment");s.children.push(new sr(8),new rr(id,{},n.serialize(e.nodes)),new sr(6)),t.children.push(new sr(6),s,new sr(4)),r.push(new sr(4),t)});const i=new rr("file",{original:"ng.template",id:"ngi18n"},[...r,new sr(2)]),s=new rr(rd,{version:Yh,xmlns:Zh,srcLang:t||Jh},[new sr(2),i,new sr]);return er([new tr({version:"1.0",encoding:"UTF-8"}),new sr,s,new sr])}load(e,t){const n=new cd,{locale:r,msgIdToHtml:i,errors:s}=n.parse(e,t),o={},a=new ld;if(Object.keys(i).forEach(e=>{const{i18nNodes:n,errors:r}=a.convert(i[e],t);s.push(...r),o[e]=n}),s.length)throw new Error(`xliff2 parse errors:\n${s.join("\n")}`);return{locale:r,i18nNodesByMsgId:o}}digest(e){return Pn(e)}}class ud{visitText(e,t){return[new ir(e.value)]}visitContainer(e,t){const n=[];return e.children.forEach(e=>n.push(...e.visit(this))),n}visitIcu(e,t){const n=[new ir(`{${e.expressionPlaceholder}, ${e.type}, `)];return Object.keys(e.cases).forEach(t=>{n.push(new ir(`${t} {`),...e.cases[t].visit(this),new ir("} "))}),n.push(new ir("}")),n}visitTagPlaceholder(e,t){const n=function(e){switch(e.toLowerCase()){case"br":case"b":case"i":case"u":return"fmt";case"img":return"image";case"a":return"link";default:return"other"}}(e.tag);if(e.isVoid){return[new rr(ed,{id:(this._nextPlaceholderId++).toString(),equiv:e.startName,type:n,disp:`<${e.tag}/>`})]}const r=new rr(td,{id:(this._nextPlaceholderId++).toString(),equivStart:e.startName,equivEnd:e.closeName,type:n,dispStart:`<${e.tag}>`,dispEnd:`</${e.tag}>`}),i=[].concat(...e.children.map(e=>e.visit(this)));return i.length?i.forEach(e=>r.children.push(e)):r.children.push(new ir("")),[r]}visitPlaceholder(e,t){const n=(this._nextPlaceholderId++).toString();return[new rr(ed,{id:n,equiv:e.name,disp:`{{${e.value}}}`})]}visitIcuPlaceholder(e,t){const n=Object.keys(e.value.cases).map(e=>e+" {...}").join(" "),r=(this._nextPlaceholderId++).toString();return[new rr(ed,{id:r,equiv:e.name,disp:`{${e.value.expression}, ${e.value.type}, ${n}}`})]}serialize(e){return this._nextPlaceholderId=0,[].concat(...e.map(e=>e.visit(this)))}}class cd{constructor(){this._locale=null}parse(e,t){this._unitMlString=null,this._msgIdToHtml={};const n=(new Mh).parse(e,t,!1);return this._errors=n.errors,eu(this,n.rootNodes,null),{msgIdToHtml:this._msgIdToHtml,errors:this._errors,locale:this._locale}}visitElement(e,t){switch(e.name){case od:this._unitMlString=null;const t=e.attrs.find(e=>"id"===e.name);if(t){const n=t.value;this._msgIdToHtml.hasOwnProperty(n)?this._addError(e,`Duplicated translations for msg ${n}`):(eu(this,e.children,null),"string"==typeof this._unitMlString?this._msgIdToHtml[n]=this._unitMlString:this._addError(e,`Message ${n} misses a translation`))}else this._addError(e,`<${od}> misses the "id" attribute`);break;case id:break;case sd:const n=e.startSourceSpan.end.offset,r=e.endSourceSpan.start.offset,i=e.startSourceSpan.start.file.content.slice(n,r);this._unitMlString=i;break;case rd:const s=e.attrs.find(e=>"trgLang"===e.name);s&&(this._locale=s.value);const o=e.attrs.find(e=>"version"===e.name);if(o){const t=o.value;"2.0"!==t?this._addError(e,`The XLIFF file version ${t} is not compatible with XLIFF 2.0 serializer`):eu(this,e.children,null)}break;default:eu(this,e.children,null)}}visitAttribute(e,t){}visitText(e,t){}visitComment(e,t){}visitExpansion(e,t){}visitExpansionCase(e,t){}_addError(e,t){this._errors.push(new wh(e.sourceSpan,t))}}class ld{convert(e,t){const n=(new Mh).parse(e,t,!0);return this._errors=n.errors,{i18nNodes:this._errors.length>0||0==n.rootNodes.length?[]:[].concat(...eu(this,n.rootNodes)),errors:this._errors}}visitText(e,t){return new Tn(e.value,e.sourceSpan)}visitElement(e,t){switch(e.name){case ed:const t=e.attrs.find(e=>"equiv"===e.name);if(t)return[new In("",t.value,e.sourceSpan)];this._addError(e,`<${ed}> misses the "equiv" attribute`);break;case td:const n=e.attrs.find(e=>"equivStart"===e.name),r=e.attrs.find(e=>"equivEnd"===e.name);if(n){if(r){const t=n.value,i=r.value;return[].concat(new In("",t,e.sourceSpan),...e.children.map(e=>e.visit(this,null)),new In("",i,e.sourceSpan))}this._addError(e,`<${ed}> misses the "equivEnd" attribute`)}else this._addError(e,`<${ed}> misses the "equivStart" attribute`);break;case nd:return[].concat(...eu(this,e.children));default:this._addError(e,"Unexpected tag")}return null}visitExpansion(e,t){const n={};return eu(this,e.cases).forEach(t=>{n[t.value]=new xn(t.nodes,e.sourceSpan)}),new An(e.switchValue,e.type,n,e.sourceSpan)}visitExpansionCase(e,t){return{value:e.value,nodes:[].concat(...eu(this,e.expression))}}visitComment(e,t){}visitAttribute(e,t){}_addError(e,t){this._errors.push(new wh(e.sourceSpan,t))}}const hd="translationbundle",dd="translation",pd="ph";class fd extends Yn{write(e,t){throw new Error("Unsupported")}load(e,t){const n=new md,{locale:r,msgIdToHtml:i,errors:s}=n.parse(e,t),o={},a=new gd;if(Object.keys(i).forEach(e=>{!function(e,t,n){Object.defineProperty(e,t,{configurable:!0,enumerable:!0,get:function(){const r=n();return Object.defineProperty(e,t,{enumerable:!0,value:r}),r},set:e=>{throw new Error("Could not overwrite an XTB translation")}})}(o,e,function(){const{i18nNodes:n,errors:r}=a.convert(i[e],t);if(r.length)throw new Error(`xtb parse errors:\n${r.join("\n")}`);return n})}),s.length)throw new Error(`xtb parse errors:\n${s.join("\n")}`);return{locale:r,i18nNodesByMsgId:o}}digest(e){return gr(e)}createNameMapper(e){return new Zn(e,vr)}}class md{constructor(){this._locale=null}parse(e,t){this._bundleDepth=0,this._msgIdToHtml={};const n=(new Mh).parse(e,t,!1);return this._errors=n.errors,eu(this,n.rootNodes),{msgIdToHtml:this._msgIdToHtml,errors:this._errors,locale:this._locale}}visitElement(e,t){switch(e.name){case hd:this._bundleDepth++,this._bundleDepth>1&&this._addError(e,`<${hd}> elements can not be nested`);const t=e.attrs.find(e=>"lang"===e.name);t&&(this._locale=t.value),eu(this,e.children,null),this._bundleDepth--;break;case dd:const n=e.attrs.find(e=>"id"===e.name);if(n){const t=n.value;if(this._msgIdToHtml.hasOwnProperty(t))this._addError(e,`Duplicated translations for msg ${t}`);else{const n=e.startSourceSpan.end.offset,r=e.endSourceSpan.start.offset,i=e.startSourceSpan.start.file.content.slice(n,r);this._msgIdToHtml[t]=i}}else this._addError(e,`<${dd}> misses the "id" attribute`);break;default:this._addError(e,"Unexpected tag")}}visitAttribute(e,t){}visitText(e,t){}visitComment(e,t){}visitExpansion(e,t){}visitExpansionCase(e,t){}_addError(e,t){this._errors.push(new wh(e.sourceSpan,t))}}class gd{convert(e,t){const n=(new Mh).parse(e,t,!0);return this._errors=n.errors,{i18nNodes:this._errors.length>0||0==n.rootNodes.length?[]:eu(this,n.rootNodes),errors:this._errors}}visitText(e,t){return new Tn(e.value,e.sourceSpan)}visitExpansion(e,t){const n={};return eu(this,e.cases).forEach(t=>{n[t.value]=new xn(t.nodes,e.sourceSpan)}),new An(e.switchValue,e.type,n,e.sourceSpan)}visitExpansionCase(e,t){return{value:e.value,nodes:eu(this,e.expression)}}visitElement(e,t){if(e.name===pd){const t=e.attrs.find(e=>"name"===e.name);if(t)return new In("",t.value,e.sourceSpan);this._addError(e,`<${pd}> misses the "name" attribute`)}else this._addError(e,"Unexpected tag");return null}visitComment(e,t){}visitAttribute(e,t){}_addError(e,t){this._errors.push(new wh(e.sourceSpan,t))}}class yd{constructor(e={},t,n,r,i=Q.Warning,s){this._i18nNodesByMsgId=e,this.digest=n,this.mapperFactory=r,this._i18nToHtml=new vd(e,t,n,r,i,s)}static load(e,t,n,r,i){const{locale:s,i18nNodesByMsgId:o}=n.load(e,t);return new yd(o,s,e=>n.digest(e),e=>n.createNameMapper(e),r,i)}get(e){const t=this._i18nToHtml.convert(e);if(t.errors.length)throw new Error(t.errors.join("\n"));return t.nodes}has(e){return this.digest(e)in this._i18nNodesByMsgId}}class vd{constructor(e={},t,n,r,i,s){this._i18nNodesByMsgId=e,this._locale=t,this._digest=n,this._mapperFactory=r,this._missingTranslationStrategy=i,this._console=s,this._contextStack=[],this._errors=[]}convert(e){this._contextStack.length=0,this._errors.length=0;const t=this._convertToText(e),n=e.nodes[0].sourceSpan.start.file.url,r=(new wu).parse(t,n,!0);return{nodes:r.rootNodes,errors:[...this._errors,...r.errors]}}visitText(e,t){return ar(e.value)}visitContainer(e,t){return e.children.map(e=>e.visit(this)).join("")}visitIcu(e,t){const n=Object.keys(e.cases).map(t=>`${t} {${e.cases[t].visit(this)}}`);return`{${this._srcMsg.placeholders.hasOwnProperty(e.expression)?this._srcMsg.placeholders[e.expression]:e.expression}, ${e.type}, ${n.join(" ")}}`}visitPlaceholder(e,t){const n=this._mapper(e.name);return this._srcMsg.placeholders.hasOwnProperty(n)?this._srcMsg.placeholders[n]:this._srcMsg.placeholderToMessage.hasOwnProperty(n)?this._convertToText(this._srcMsg.placeholderToMessage[n]):(this._addError(e,`Unknown placeholder "${e.name}"`),"")}visitTagPlaceholder(e,t){const n=`${e.tag}`,r=Object.keys(e.attrs).map(t=>`${t}="${e.attrs[t]}"`).join(" ");return e.isVoid?`<${n} ${r}/>`:`<${n} ${r}>${e.children.map(e=>e.visit(this)).join("")}</${n}>`}visitIcuPlaceholder(e,t){return this._convertToText(this._srcMsg.placeholderToMessage[e.name])}_convertToText(e){const t=this._digest(e),n=this._mapperFactory?this._mapperFactory(e):null;let r;if(this._contextStack.push({msg:this._srcMsg,mapper:this._mapper}),this._srcMsg=e,this._i18nNodesByMsgId.hasOwnProperty(t))r=this._i18nNodesByMsgId[t],this._mapper=(e=>n?n.toInternalName(e):e);else{if(this._missingTranslationStrategy===Q.Error){const n=this._locale?` for locale "${this._locale}"`:"";this._addError(e.nodes[0],`Missing translation for message "${t}"${n}`)}else if(this._console&&this._missingTranslationStrategy===Q.Warning){const e=this._locale?` for locale "${this._locale}"`:"";this._console.warn(`Missing translation for message "${t}"${e}`)}r=e.nodes,this._mapper=(e=>e)}const i=r.map(e=>e.visit(this)).join(""),s=this._contextStack.pop();return this._srcMsg=s.msg,this._mapper=s.mapper,i}_addError(e,t){this._errors.push(new wh(e.sourceSpan,t))}}class _d{constructor(e,t,n,r=Q.Warning,i){if(this._htmlParser=e,t){const e=function(e){switch(e=(e||"xlf").toLowerCase()){case"xmb":return new fr;case"xtb":return new fd;case"xliff2":case"xlf2":return new ad;case"xliff":case"xlf":default:return new Kh}}(n);this._translationBundle=yd.load(t,"i18n",e,r,i)}else this._translationBundle=new yd({},null,kn,void 0,r,i)}parse(e,t,n=!1,r=Ua){const i=this._htmlParser.parse(e,t,n,r);return i.errors.length?new yu(i.rootNodes,i.errors):function(e,t,n,r,i){return new Nh(r,i).merge(e,t,n)}(i.rootNodes,this._translationBundle,r,[],{})}}const bd="$quoted$";function wd(e,t,n=null){return Et(t,new Ed(e),n)}class Ed{constructor(e){this.ctx=e}visitArray(e,t){return pt(e.map(e=>Et(e,this,null)),t)}visitStringMap(e,t){const n=[],r=new Set(e&&e[bd]);return Object.keys(e).forEach(t=>{n.push(new Le(t,Et(e[t],this,null),r.has(t)))}),new Ve(n,t)}visitPrimitive(e,t){return yt(e,t)}visitOther(e,t){return e instanceof me?e:this.ctx.importExpr(e)}}function Cd(e,t=!1){const n=Sd(e,t);return`${n[0]}.ngfactory${Td(n[1])}`}function Sd(e,t=!1){if(e.endsWith(".d.ts"))return[e.slice(0,-5),t?".ts":".d.ts"];const n=e.lastIndexOf(".");return-1!==n?[e.substring(0,n),e.substring(n)]:[e,""]}function Td(e){return".tsx"===e?".ts":e}const xd="ngComponentType";class Ad{constructor(e,t,n,r,i,s,o,a,u,c,l,h){this._config=e,this._htmlParser=t,this._ngModuleResolver=n,this._directiveResolver=r,this._pipeResolver=i,this._summaryResolver=s,this._schemaRegistry=o,this._directiveNormalizer=a,this._console=u,this._staticSymbolCache=c,this._reflector=l,this._errorCollector=h,this._nonNormalizedDirectiveCache=new Map,this._directiveCache=new Map,this._summaryCache=new Map,this._pipeCache=new Map,this._ngModuleCache=new Map,this._ngModuleOfTypes=new Map,this._shallowModuleCache=new Map}getReflector(){return this._reflector}clearCacheFor(e){const t=this._directiveCache.get(e);this._directiveCache.delete(e),this._nonNormalizedDirectiveCache.delete(e),this._summaryCache.delete(e),this._pipeCache.delete(e),this._ngModuleOfTypes.delete(e),this._ngModuleCache.clear(),t&&this._directiveNormalizer.clearCacheFor(t)}clearCache(){this._directiveCache.clear(),this._nonNormalizedDirectiveCache.clear(),this._summaryCache.clear(),this._pipeCache.clear(),this._ngModuleCache.clear(),this._ngModuleOfTypes.clear(),this._directiveNormalizer.clearCache()}_createProxyClass(e,t){let n=null;const r=function(){if(!n)throw new Error(`Illegal state: Class ${t} for type ${Mt(e)} is not compiled yet!`);return n.apply(this,arguments)};return r.setDelegate=(e=>{n=e,r.prototype=e.prototype}),r.overriddenName=t,r}getGeneratedClass(e,t){return e instanceof Yt?this._staticSymbolCache.get(Cd(e.filePath),t):this._createProxyClass(e,t)}getComponentViewClass(e){return this.getGeneratedClass(e,sn(e,0))}getHostComponentViewClass(e){return this.getGeneratedClass(e,`HostView_${nn({reference:e})}`)}getHostComponentType(e){const t=`${nn({reference:e})}_Host`;return e instanceof Yt?this._staticSymbolCache.get(e.filePath,t):this._createProxyClass(e,t)}getRendererType(e){return e instanceof Yt?this._staticSymbolCache.get(Cd(e.filePath),on(e)):{}}getComponentFactory(e,t,n,r){if(t instanceof Yt)return this._staticSymbolCache.get(Cd(t.filePath),an(t));{const i=this.getHostComponentViewClass(t);return this._reflector.resolveExternalReference(Qt.createComponentFactory)(e,t,i,n,r,[])}}initComponentFactory(e,t){e instanceof Yt||e.ngContentSelectors.push(...t)}_loadSummary(e,t){let n=this._summaryCache.get(e);if(!n){const t=this._summaryResolver.resolveSummary(e);n=t?t.type:null,this._summaryCache.set(e,n||null)}return n&&n.summaryKind===t?n:null}getHostComponentMetadata(e,t){const n=this.getHostComponentType(e.type.reference);t||(t=this.getHostComponentViewClass(n));const r=v.parse(e.selector)[0].getMatchingElementTemplate(),i=this._htmlParser.parse(r,"");return pn.create({isHost:!0,type:{reference:n,diDeps:[],lifecycleHooks:[]},template:new dn({encapsulation:N.None,template:r,templateUrl:"",htmlAst:i,styles:[],styleUrls:[],ngContentSelectors:[],animations:[],isInline:!0,externalStylesheets:[],interpolation:null,preserveWhitespaces:!1}),exportAs:null,changeDetection:O.Default,inputs:[],outputs:[],host:{},isComponent:!0,selector:"*",providers:[],viewProviders:[],queries:[],guards:{},viewQueries:[],componentViewType:t,rendererType:{id:"__Host__",encapsulation:N.None,styles:[],data:{}},entryComponents:[],componentFactory:null})}loadDirectiveMetadata(e,t,n){if(this._directiveCache.has(t))return null;t=Rt(t);const{annotation:r,metadata:i}=this.getNonNormalizedDirectiveMetadata(t),s=e=>{const n=new pn({isHost:!1,type:i.type,isComponent:i.isComponent,selector:i.selector,exportAs:i.exportAs,changeDetection:i.changeDetection,inputs:i.inputs,outputs:i.outputs,hostListeners:i.hostListeners,hostProperties:i.hostProperties,hostAttributes:i.hostAttributes,providers:i.providers,viewProviders:i.viewProviders,queries:i.queries,guards:i.guards,viewQueries:i.viewQueries,entryComponents:i.entryComponents,componentViewType:i.componentViewType,rendererType:i.rendererType,componentFactory:i.componentFactory,template:e});return e&&this.initComponentFactory(i.componentFactory,e.ngContentSelectors),this._directiveCache.set(t,n),this._summaryCache.set(t,n.toSummary()),null};if(i.isComponent){const o=i.template,a=this._directiveNormalizer.normalizeTemplate({ngModuleType:e,componentType:t,moduleUrl:this._reflector.componentModuleUrl(t,r),encapsulation:o.encapsulation,template:o.template,templateUrl:o.templateUrl,styles:o.styles,styleUrls:o.styleUrls,animations:o.animations,interpolation:o.interpolation,preserveWhitespaces:o.preserveWhitespaces});return Ft(a)&&n?(this._reportError(function(e){const t=Error(`Can't compile synchronously as ${Mt(e)} is still being loaded!`);return t[xd]=e,t}(t),t),null):xt.then(a,s)}return s(null),null}getNonNormalizedDirectiveMetadata(e){if(!(e=Rt(e)))return null;let t=this._nonNormalizedDirectiveCache.get(e);if(t)return t;const n=this._directiveResolver.resolve(e,!1);if(!n)return null;let r=void 0;if(k.isTypeOf(n)){const e=n;La("styles",e.styles),La("styleUrls",e.styleUrls),ja("interpolation",e.interpolation);const t=e.animations;r=new dn({encapsulation:St(e.encapsulation),template:St(e.template),templateUrl:St(e.templateUrl),htmlAst:null,styles:e.styles||[],styleUrls:e.styleUrls||[],animations:t||[],interpolation:St(e.interpolation),isInline:!!e.template,externalStylesheets:[],ngContentSelectors:[],preserveWhitespaces:St(n.preserveWhitespaces)})}let i=null,s=[],o=[],a=n.selector;if(k.isTypeOf(n)){const t=n;i=t.changeDetection,t.viewProviders&&(s=this._getProvidersMetadata(t.viewProviders,o,`viewProviders for "${Od(e)}"`,[],e)),t.entryComponents&&(o=Dd(t.entryComponents).map(e=>this._getEntryComponentMetadata(e)).concat(o)),a||(a=this._schemaRegistry.getDefaultComponentElementName())}else a||(this._reportError(Dt(`Directive ${Od(e)} has no selector, please add it!`),e),a="error");let u=[];null!=n.providers&&(u=this._getProvidersMetadata(n.providers,o,`providers for "${Od(e)}"`,[],e));let c=[],l=[];null!=n.queries&&(c=this._getQueriesMetadata(n.queries,!1,e),l=this._getQueriesMetadata(n.queries,!0,e));const h=pn.create({isHost:!1,selector:a,exportAs:St(n.exportAs),isComponent:!!r,type:this._getTypeMetadata(e),template:r,changeDetection:i,inputs:n.inputs||[],outputs:n.outputs||[],host:n.host||{},providers:u||[],viewProviders:s||[],queries:c||[],guards:n.guards||{},viewQueries:l||[],entryComponents:o,componentViewType:r?this.getComponentViewClass(e):null,rendererType:r?this.getRendererType(e):null,componentFactory:null});return r&&(h.componentFactory=this.getComponentFactory(a,e,h.inputs,h.outputs)),t={metadata:h,annotation:n},this._nonNormalizedDirectiveCache.set(e,t),t}getDirectiveMetadata(e){const t=this._directiveCache.get(e);return t||this._reportError(Dt(`Illegal state: getDirectiveMetadata can only be called after loadNgModuleDirectiveAndPipeMetadata for a module that declares it. Directive ${Od(e)}.`),e),t}getDirectiveSummary(e){const t=this._loadSummary(e,un.Directive);return t||this._reportError(Dt(`Illegal state: Could not load the summary for directive ${Od(e)}.`),e),t}isDirective(e){return!!this._loadSummary(e,un.Directive)||this._directiveResolver.isDirective(e)}isPipe(e){return!!this._loadSummary(e,un.Pipe)||this._pipeResolver.isPipe(e)}isNgModule(e){return!!this._loadSummary(e,un.NgModule)||this._ngModuleResolver.isNgModule(e)}getNgModuleSummary(e,t=null){let n=this._loadSummary(e,un.NgModule);if(!n){const r=this.getNgModuleMetadata(e,!1,t);(n=r?r.toSummary():null)&&this._summaryCache.set(e,n)}return n}loadNgModuleDirectiveAndPipeMetadata(e,t,n=!0){const r=this.getNgModuleMetadata(e,n),i=[];return r&&(r.declaredDirectives.forEach(n=>{const r=this.loadDirectiveMetadata(e,n.reference,t);r&&i.push(r)}),r.declaredPipes.forEach(e=>this._loadPipeMetadata(e.reference))),Promise.all(i)}getShallowModuleMetadata(e){let t=this._shallowModuleCache.get(e);if(t)return t;const n=bh(this._reflector.shallowAnnotations(e),V.isTypeOf);return t={type:this._getTypeMetadata(e),rawExports:n.exports,rawImports:n.imports,rawProviders:n.providers},this._shallowModuleCache.set(e,t),t}getNgModuleMetadata(e,t=!0,n=null){e=Rt(e);let r=this._ngModuleCache.get(e);if(r)return r;const i=this._ngModuleResolver.resolve(e,t);if(!i)return null;const s=[],o=[],a=[],u=[],c=[],l=[],h=[],d=[],p=[];i.imports&&Dd(i.imports).forEach(t=>{let r=void 0;if(Id(t))r=t;else if(t&&t.ngModule){const e=t;r=e.ngModule,e.providers&&l.push(...this._getProvidersMetadata(e.providers,h,`provider for the NgModule '${Od(r)}'`,[],t))}if(r){if(this._checkSelfImport(e,r))return;if(n||(n=new Set),n.has(r))return void this._reportError(Dt(`${this._getTypeDescriptor(r)} '${Od(t)}' is imported recursively by the module '${Od(e)}'.`),e);n.add(r);const i=this.getNgModuleSummary(r,n);if(n.delete(r),!i)return void this._reportError(Dt(`Unexpected ${this._getTypeDescriptor(t)} '${Od(t)}' imported by the module '${Od(e)}'. Please add a @NgModule annotation.`),e);u.push(i)}else this._reportError(Dt(`Unexpected value '${Od(t)}' imported by the module '${Od(e)}'`),e)}),i.exports&&Dd(i.exports).forEach(t=>{if(!Id(t))return void this._reportError(Dt(`Unexpected value '${Od(t)}' exported by the module '${Od(e)}'`),e);if(n||(n=new Set),n.has(t))return void this._reportError(Dt(`${this._getTypeDescriptor(t)} '${Mt(t)}' is exported recursively by the module '${Od(e)}'`),e);n.add(t);const r=this.getNgModuleSummary(t,n);n.delete(t),r?c.push(r):o.push(this._getIdentifierMetadata(t))});const f=this._getTransitiveNgModuleMetadata(u,c);i.declarations&&Dd(i.declarations).forEach(t=>{if(!Id(t))return void this._reportError(Dt(`Unexpected value '${Od(t)}' declared by the module '${Od(e)}'`),e);const n=this._getIdentifierMetadata(t);if(this.isDirective(t))f.addDirective(n),s.push(n),this._addTypeToModule(t,e);else{if(!this.isPipe(t))return void this._reportError(Dt(`Unexpected ${this._getTypeDescriptor(t)} '${Od(t)}' declared by the module '${Od(e)}'. Please add a @Pipe/@Directive/@Component annotation.`),e);f.addPipe(n),f.pipes.push(n),a.push(n),this._addTypeToModule(t,e)}});const m=[],g=[];return o.forEach(t=>{if(f.directivesSet.has(t.reference))m.push(t),f.addExportedDirective(t);else{if(!f.pipesSet.has(t.reference))return void this._reportError(Dt(`Can't export ${this._getTypeDescriptor(t.reference)} ${Od(t.reference)} from ${Od(e)} as it was neither declared nor imported!`),e);g.push(t),f.addExportedPipe(t)}}),i.providers&&l.push(...this._getProvidersMetadata(i.providers,h,`provider for the NgModule '${Od(e)}'`,[],e)),i.entryComponents&&h.push(...Dd(i.entryComponents).map(e=>this._getEntryComponentMetadata(e))),i.bootstrap&&Dd(i.bootstrap).forEach(t=>{Id(t)?d.push(this._getIdentifierMetadata(t)):this._reportError(Dt(`Unexpected value '${Od(t)}' used in the bootstrap property of module '${Od(e)}'`),e)}),h.push(...d.map(e=>this._getEntryComponentMetadata(e.reference))),i.schemas&&p.push(...Dd(i.schemas)),r=new mn({type:this._getTypeMetadata(e),providers:l,entryComponents:h,bootstrapComponents:d,schemas:p,declaredDirectives:s,exportedDirectives:m,declaredPipes:a,exportedPipes:g,importedModules:u,exportedModules:c,transitiveModule:f,id:i.id||null}),h.forEach(e=>f.addEntryComponent(e)),l.forEach(e=>f.addProvider(e,r.type)),f.addModule(r.type),this._ngModuleCache.set(e,r),r}_checkSelfImport(e,t){return e===t&&(this._reportError(Dt(`'${Od(e)}' module can't import itself`),e),!0)}_getTypeDescriptor(e){if(Id(e)){if(this.isDirective(e))return"directive";if(this.isPipe(e))return"pipe";if(this.isNgModule(e))return"module"}return e.provide?"provider":"value"}_addTypeToModule(e,t){const n=this._ngModuleOfTypes.get(e);n&&n!==t?this._reportError(Dt(`Type ${Od(e)} is part of the declarations of 2 modules: ${Od(n)} and ${Od(t)}! `+`Please consider moving ${Od(e)} to a higher module that imports ${Od(n)} and ${Od(t)}. `+`You can also create a new NgModule that exports and includes ${Od(e)} then import that NgModule in ${Od(n)} and ${Od(t)}.`),t):this._ngModuleOfTypes.set(e,t)}_getTransitiveNgModuleMetadata(e,t){const n=new gn,r=new Map;return e.concat(t).forEach(e=>{e.modules.forEach(e=>n.addModule(e)),e.entryComponents.forEach(e=>n.addEntryComponent(e));const t=new Set;e.providers.forEach(e=>{const i=ln(e.provider.token);let s=r.get(i);s||(s=new Set,r.set(i,s));const o=e.module.reference;!t.has(i)&&s.has(o)||(s.add(o),t.add(i),n.addProvider(e.provider,e.module))})}),t.forEach(e=>{e.exportedDirectives.forEach(e=>n.addExportedDirective(e)),e.exportedPipes.forEach(e=>n.addExportedPipe(e))}),e.forEach(e=>{e.exportedDirectives.forEach(e=>n.addDirective(e)),e.exportedPipes.forEach(e=>n.addPipe(e))}),n}_getIdentifierMetadata(e){return{reference:e=Rt(e)}}isInjectable(e){return this._reflector.tryAnnotations(e).some(e=>j.isTypeOf(e))}getInjectableSummary(e){return{summaryKind:un.Injectable,type:this._getTypeMetadata(e,null,!1)}}getInjectableMetadata(e,t=null,n=!0){const r=this._loadSummary(e,un.Injectable),i=r?r.type:this._getTypeMetadata(e,t,n),s=this._reflector.annotations(e).filter(e=>j.isTypeOf(e));if(0===s.length)return null;const o=s[s.length-1];return{symbol:e,type:i,providedIn:o.providedIn,useValue:o.useValue,useClass:o.useClass,useExisting:o.useExisting,useFactory:o.useFactory,deps:o.deps}}_getTypeMetadata(e,t=null,n=!0){const r=this._getIdentifierMetadata(e);return{reference:r.reference,diDeps:this._getDependenciesMetadata(r.reference,t,n),lifecycleHooks:(i=this._reflector,s=r.reference,Is.filter(e=>Ns(i,e,s)))};var i,s}_getFactoryMetadata(e,t=null){return{reference:e=Rt(e),diDeps:this._getDependenciesMetadata(e,t)}}getPipeMetadata(e){const t=this._pipeCache.get(e);return t||this._reportError(Dt(`Illegal state: getPipeMetadata can only be called after loadNgModuleDirectiveAndPipeMetadata for a module that declares it. Pipe ${Od(e)}.`),e),t||null}getPipeSummary(e){const t=this._loadSummary(e,un.Pipe);return t||this._reportError(Dt(`Illegal state: Could not load the summary for pipe ${Od(e)}.`),e),t}getOrLoadPipeMetadata(e){let t=this._pipeCache.get(e);return t||(t=this._loadPipeMetadata(e)),t}_loadPipeMetadata(e){e=Rt(e);const t=this._pipeResolver.resolve(e),n=new fn({type:this._getTypeMetadata(e),name:t.name,pure:!!t.pure});return this._pipeCache.set(e,n),this._summaryCache.set(e,n.toSummary()),n}_getDependenciesMetadata(e,t,n=!0){let r=!1;const i=(t||this._reflector.parameters(e)||[]).map(e=>{let t=!1,n=!1,i=!1,s=!1,o=!1,a=null;return Array.isArray(e)?e.forEach(e=>{z.isTypeOf(e)?n=!0:$.isTypeOf(e)?i=!0:H.isTypeOf(e)?s=!0:q.isTypeOf(e)?o=!0:S.isTypeOf(e)?(t=!0,a=e.attributeName):E.isTypeOf(e)?a=e.token:C.isTypeOf(e)||e instanceof Yt?a=e:Id(e)&&null==a&&(a=e)}):a=e,null==a?(r=!0,null):{isAttribute:t,isHost:n,isSelf:i,isSkipSelf:s,isOptional:o,token:this._getTokenMetadata(a)}});if(r){const t=i.map(e=>e?Od(e.token):"?").join(", "),r=`Can't resolve all parameters for ${Od(e)}: (${t}).`;n||this._config.strictInjectionParameters?this._reportError(Dt(r),e):this._console.warn(`Warning: ${r} This will become an error in Angular v6.x`)}return i}_getTokenMetadata(e){let t;return t="string"==typeof(e=Rt(e))?{value:e}:{identifier:{reference:e}}}_getProvidersMetadata(e,t,n,r=[],i){return e.forEach((s,o)=>{if(Array.isArray(s))this._getProvidersMetadata(s,t,n,r);else{let a=void 0;if((s=Rt(s))&&"object"==typeof s&&s.hasOwnProperty("provide"))this._validateProvider(s),a=new vn(s.provide,s);else{if(!Id(s)){if(void 0===s)return void this._reportError(Dt("Encountered undefined provider! Usually this means you have a circular dependencies. This might be caused by using 'barrel' index.ts files."));{const t=e.reduce((e,t,n)=>(n<o?e.push(`${Od(t)}`):n==o?e.push(`?${Od(t)}?`):n==o+1&&e.push("..."),e),[]).join(", ");return void this._reportError(Dt(`Invalid ${n||"provider"} - only instances of Provider and Type are allowed, got: [${t}]`),i)}}a=new vn(s,{useClass:s})}a.token===this._reflector.resolveExternalReference(Qt.ANALYZE_FOR_ENTRY_COMPONENTS)?t.push(...this._getEntryComponentsFromProvider(a,i)):r.push(this.getProviderMetadata(a))}}),r}_validateProvider(e){e.hasOwnProperty("useClass")&&null==e.useClass&&this._reportError(Dt(`Invalid provider for ${Od(e.provide)}. useClass cannot be ${e.useClass}.\n           Usually it happens when:\n           1. There's a circular dependency (might be caused by using index.ts (barrel) files).\n           2. Class was used before it was declared. Use forwardRef in this case.`))}_getEntryComponentsFromProvider(e,t){const n=[],r=[];return e.useFactory||e.useExisting||e.useClass?(this._reportError(Dt("The ANALYZE_FOR_ENTRY_COMPONENTS token only supports useValue!"),t),[]):e.multi?(i=e.useValue,s=r,Et(i,new Nd,s),r.forEach(e=>{const t=this._getEntryComponentMetadata(e.reference,!1);t&&n.push(t)}),n):(this._reportError(Dt("The ANALYZE_FOR_ENTRY_COMPONENTS token only supports 'multi = true'!"),t),[]);var i,s}_getEntryComponentMetadata(e,t=!0){const n=this.getNonNormalizedDirectiveMetadata(e);if(n&&n.metadata.isComponent)return{componentType:e,componentFactory:n.metadata.componentFactory};const r=this._loadSummary(e,un.Directive);if(r&&r.isComponent)return{componentType:e,componentFactory:r.componentFactory};if(t)throw Dt(`${e.name} cannot be used as an entry component.`);return null}_getInjectableTypeMetadata(e,t=null){const n=this._loadSummary(e,un.Injectable);return n?n.type:this._getTypeMetadata(e,t)}getProviderMetadata(e){let t=void 0,n=null,r=null,i=this._getTokenMetadata(e.token);return e.useClass?(t=(n=this._getInjectableTypeMetadata(e.useClass,e.dependencies)).diDeps,e.token===e.useClass&&(i={identifier:n})):e.useFactory&&(t=(r=this._getFactoryMetadata(e.useFactory,e.dependencies)).diDeps),{token:i,useClass:n,useValue:e.useValue,useFactory:r,useExisting:e.useExisting?this._getTokenMetadata(e.useExisting):void 0,deps:t,multi:e.multi}}_getQueriesMetadata(e,t,n){const r=[];return Object.keys(e).forEach(i=>{const s=e[i];s.isViewQuery===t&&r.push(this._getQueryMetadata(s,i,n))}),r}_queryVarBindings(e){return e.split(/\s*,\s*/)}_getQueryMetadata(e,t,n){let r;return"string"==typeof e.selector?r=this._queryVarBindings(e.selector).map(e=>this._getTokenMetadata(e)):e.selector?r=[this._getTokenMetadata(e.selector)]:(this._reportError(Dt(`Can't construct a query for the property "${t}" of "${Od(n)}" since the query selector wasn't defined.`),n),r=[]),{selectors:r,first:e.first,descendants:e.descendants,propertyName:t,read:e.read?this._getTokenMetadata(e.read):null}}_reportError(e,t,n){if(!this._errorCollector)throw e;this._errorCollector(e,t),n&&this._errorCollector(e,n)}}function Dd(e){return(t=function e(t,n=[]){if(t)for(let r=0;r<t.length;r++){const i=Rt(t[r]);Array.isArray(i)?e(i,n):n.push(i)}return n}(e))?Array.from(new Set(t)):[];var t}function Id(e){return e instanceof Yt||e instanceof W}class Nd extends Tt{visitOther(e,t){t.push({reference:e})}}function Od(e){return e instanceof Yt?`${e.name} in ${e.filePath}`:Mt(e)}class kd extends Bo{constructor(e,t){super(t,e)}}class Pd{constructor(e,t){this.reflector=e,this.component=t,this.errors=[],this.viewQueries=function(e){let t=1;const n=new Map;e.viewQueries&&e.viewQueries.forEach(e=>jd(n,{meta:e,queryId:t++}));return n}(t),this.viewProviders=new Map,t.viewProviders.forEach(e=>{null==this.viewProviders.get(ln(e.token))&&this.viewProviders.set(ln(e.token),!0)})}}class Md{constructor(e,t,n,r,i,s,o,a,u){this.viewContext=e,this._parent=t,this._isViewRoot=n,this._directiveAsts=r,this._sourceSpan=u,this._transformedProviders=new Map,this._seenProviders=new Map,this._queriedTokens=new Map,this.transformedHasViewContainer=!1,this._attrs={},i.forEach(e=>this._attrs[e.name]=e.value);const c=r.map(e=>e.directive);if(this._allProviders=function(e,t,n){const r=new Map;return e.forEach(e=>{Vd([{token:{identifier:e.type},useClass:e.type}],e.isComponent?lh.Component:lh.Directive,!0,t,n,r,!1)}),e.filter(e=>e.isComponent).concat(e.filter(e=>!e.isComponent)).forEach(e=>{Vd(e.providers,lh.PublicService,!1,t,n,r,!1),Vd(e.viewProviders,lh.PrivateService,!1,t,n,r,!1)}),r}(c,u,e.errors),this._contentQueries=function(e,t){let n=e;const r=new Map;return t.forEach((e,t)=>{e.queries&&e.queries.forEach(e=>jd(r,{meta:e,queryId:n++}))}),r}(a,c),Array.from(this._allProviders.values()).forEach(e=>{this._addQueryReadsTo(e.token,e.token,this._queriedTokens)}),o){const e=Xt(this.viewContext.reflector,Qt.TemplateRef);this._addQueryReadsTo(e,e,this._queriedTokens)}s.forEach(e=>{let t=e.value||Xt(this.viewContext.reflector,Qt.ElementRef);this._addQueryReadsTo({value:e.name},t,this._queriedTokens)}),this._queriedTokens.get(this.viewContext.reflector.resolveExternalReference(Qt.ViewContainerRef))&&(this.transformedHasViewContainer=!0),Array.from(this._allProviders.values()).forEach(e=>{(e.eager||this._queriedTokens.get(ln(e.token)))&&this._getOrCreateLocalProvider(e.providerType,e.token,!0)})}afterElement(){Array.from(this._allProviders.values()).forEach(e=>{this._getOrCreateLocalProvider(e.providerType,e.token,!1)})}get transformProviders(){const e=[],t=[];return this._transformedProviders.forEach(n=>{n.eager?t.push(n):e.push(n)}),e.concat(t)}get transformedDirectiveAsts(){const e=this.transformProviders.map(e=>e.token.identifier),t=this._directiveAsts.slice();return t.sort((t,n)=>e.indexOf(t.directive.type)-e.indexOf(n.directive.type)),t}get queryMatches(){const e=[];return this._queriedTokens.forEach(t=>{e.push(...t)}),e}_addQueryReadsTo(e,t,n){this._getQueriesFor(e).forEach(e=>{const r=e.meta.read||t,i=ln(r);let s=n.get(i);s||(s=[],n.set(i,s)),s.push({queryId:e.queryId,value:r})})}_getQueriesFor(e){const t=[];let n,r=this,i=0;for(;null!==r;)(n=r._contentQueries.get(ln(e)))&&t.push(...n.filter(e=>e.meta.descendants||i<=1)),r._directiveAsts.length>0&&i++,r=r._parent;return(n=this.viewContext.viewQueries.get(ln(e)))&&t.push(...n),t}_getOrCreateLocalProvider(e,t,n){const r=this._allProviders.get(ln(t));if(!r||(e===lh.Directive||e===lh.PublicService)&&r.providerType===lh.PrivateService||(e===lh.PrivateService||e===lh.PublicService)&&r.providerType===lh.Builtin)return null;let i=this._transformedProviders.get(ln(t));if(i)return i;if(null!=this._seenProviders.get(ln(t)))return this.viewContext.errors.push(new kd(`Cannot instantiate cyclic dependency! ${cn(t)}`,this._sourceSpan)),null;this._seenProviders.set(ln(t),!0);const s=r.providers.map(e=>{let t=e.useValue,i=e.useExisting,s=void 0;if(null!=e.useExisting){const s=this._getDependency(r.providerType,{token:e.useExisting},n);null!=s.token?i=s.token:(i=null,t=s.value)}else if(e.useFactory){s=(e.deps||e.useFactory.diDeps).map(e=>this._getDependency(r.providerType,e,n))}else if(e.useClass){s=(e.deps||e.useClass.diDeps).map(e=>this._getDependency(r.providerType,e,n))}return Fd(e,{useExisting:i,useValue:t,deps:s})});return i=Ld(r,{eager:n,providers:s}),this._transformedProviders.set(ln(t),i),i}_getLocalDependency(e,t,n=!1){if(t.isAttribute){const e=this._attrs[t.token.value];return{isValue:!0,value:null==e?null:e}}if(null!=t.token){if(e===lh.Directive||e===lh.Component){if(ln(t.token)===this.viewContext.reflector.resolveExternalReference(Qt.Renderer)||ln(t.token)===this.viewContext.reflector.resolveExternalReference(Qt.ElementRef)||ln(t.token)===this.viewContext.reflector.resolveExternalReference(Qt.ChangeDetectorRef)||ln(t.token)===this.viewContext.reflector.resolveExternalReference(Qt.TemplateRef))return t;ln(t.token)===this.viewContext.reflector.resolveExternalReference(Qt.ViewContainerRef)&&(this.transformedHasViewContainer=!0)}if(ln(t.token)===this.viewContext.reflector.resolveExternalReference(Qt.Injector))return t;if(null!=this._getOrCreateLocalProvider(e,t.token,n))return t}return null}_getDependency(e,t,n=!1){let r=this,i=n,s=null;if(t.isSkipSelf||(s=this._getLocalDependency(e,t,n)),t.isSelf)!s&&t.isOptional&&(s={isValue:!0,value:null});else{for(;!s&&r._parent;){const e=r;r=r._parent,e._isViewRoot&&(i=!1),s=r._getLocalDependency(lh.PublicService,t,i)}s||(s=!t.isHost||this.viewContext.component.isHost||this.viewContext.component.type.reference===ln(t.token)||null!=this.viewContext.viewProviders.get(ln(t.token))?t:t.isOptional?{isValue:!0,value:null}:null)}return s||this.viewContext.errors.push(new kd(`No provider for ${cn(t.token)}`,this._sourceSpan)),s}}class Rd{constructor(e,t,n,r){this.reflector=e,this._transformedProviders=new Map,this._seenProviders=new Map,this._errors=[],this._allProviders=new Map,t.transitiveModule.modules.forEach(e=>{Vd([{token:{identifier:e},useClass:e}],lh.PublicService,!0,r,this._errors,this._allProviders,!0)}),Vd(t.transitiveModule.providers.map(e=>e.provider).concat(n),lh.PublicService,!1,r,this._errors,this._allProviders,!1)}parse(){if(Array.from(this._allProviders.values()).forEach(e=>{this._getOrCreateLocalProvider(e.token,e.eager)}),this._errors.length>0){const e=this._errors.join("\n");throw new Error(`Provider parse errors:\n${e}`)}const e=[],t=[];return this._transformedProviders.forEach(n=>{n.eager?t.push(n):e.push(n)}),e.concat(t)}_getOrCreateLocalProvider(e,t){const n=this._allProviders.get(ln(e));if(!n)return null;let r=this._transformedProviders.get(ln(e));if(r)return r;if(null!=this._seenProviders.get(ln(e)))return this._errors.push(new kd(`Cannot instantiate cyclic dependency! ${cn(e)}`,n.sourceSpan)),null;this._seenProviders.set(ln(e),!0);const i=n.providers.map(e=>{let r=e.useValue,i=e.useExisting,s=void 0;if(null!=e.useExisting){const s=this._getDependency({token:e.useExisting},t,n.sourceSpan);null!=s.token?i=s.token:(i=null,r=s.value)}else if(e.useFactory){s=(e.deps||e.useFactory.diDeps).map(e=>this._getDependency(e,t,n.sourceSpan))}else if(e.useClass){s=(e.deps||e.useClass.diDeps).map(e=>this._getDependency(e,t,n.sourceSpan))}return Fd(e,{useExisting:i,useValue:r,deps:s})});return r=Ld(n,{eager:t,providers:i}),this._transformedProviders.set(ln(e),r),r}_getDependency(e,t=!1,n){return e.isSkipSelf||null==e.token||ln(e.token)===this.reflector.resolveExternalReference(Qt.Injector)||ln(e.token)===this.reflector.resolveExternalReference(Qt.ComponentFactoryResolver)||this._getOrCreateLocalProvider(e.token,t),e}}function Fd(e,{useExisting:t,useValue:n,deps:r}){return{token:e.token,useClass:e.useClass,useExisting:t,useFactory:e.useFactory,useValue:n,deps:r,multi:e.multi}}function Ld(e,{eager:t,providers:n}){return new ch(e.token,e.multiProvider,e.eager||t,n,e.providerType,e.lifecycleHooks,e.sourceSpan,e.isModule)}function Vd(e,t,n,r,i,s,o){e.forEach(e=>{let a=s.get(ln(e.token));if(null!=a&&!!a.multiProvider!=!!e.multi&&i.push(new kd(`Mixing multi and non multi provider is not possible for token ${cn(a.token)}`,r)),a)e.multi||(a.providers.length=0),a.providers.push(e);else{const i=e.token.identifier&&e.token.identifier.lifecycleHooks?e.token.identifier.lifecycleHooks:[],u=!(e.useClass||e.useExisting||e.useFactory);a=new ch(e.token,!!e.multi,n||u,[e],t,i,r,o),s.set(ln(e.token),a)}})}function jd(e,t){t.meta.selectors.forEach(n=>{let r=e.get(ln(n));r||(r=[],e.set(ln(n),r)),r.push(t)})}function Bd(e,t){let n=0;t.eager||(n|=4096),t.providerType===lh.PrivateService&&(n|=8192),t.isModule&&(n|=1073741824),t.lifecycleHooks.forEach(e=>{e!==hs.OnDestroy&&t.providerType!==lh.Directive&&t.providerType!==lh.Component||(n|=Hd(e))});const{providerExpr:r,flags:i,depsExpr:s}=t.multiProvider?function(e,t,n){const r=[],i=[],s=n.map((t,n)=>{let r;if(t.useClass){const i=o(n,t.deps||t.useClass.diDeps);r=e.importExpr(t.useClass.reference).instantiate(i)}else if(t.useFactory){const i=o(n,t.deps||t.useFactory.diDeps);r=e.importExpr(t.useFactory.reference).callFn(i)}else if(t.useExisting){const e=o(n,[{token:t.useExisting}]);r=e[0]}else r=wd(e,t.useValue);return r});return{providerExpr:mt(i,[new Ke(pt(s))],oe),flags:1024|t,depsExpr:pt(r)};function o(t,n){return n.map((n,s)=>{const o=`p${t}_${s}`;return i.push(new Oe(o,se)),r.push($d(e,n)),ct(o)})}}(e,n,t.providers):Ud(e,n,t.providerType,t.providers[0]);return{providerExpr:r,flags:i,depsExpr:s,tokenExpr:qd(e,t.token)}}function Ud(e,t,n,r){let i,s;return n===lh.Directive||n===lh.Component?(i=e.importExpr(r.useClass.reference),t|=16384,s=r.deps||r.useClass.diDeps):r.useClass?(i=e.importExpr(r.useClass.reference),t|=512,s=r.deps||r.useClass.diDeps):r.useFactory?(i=e.importExpr(r.useFactory.reference),t|=1024,s=r.deps||r.useFactory.diDeps):r.useExisting?(i=Be,t|=2048,s=[{token:r.useExisting}]):(i=wd(e,r.useValue),t|=256,s=[]),{providerExpr:i,flags:t,depsExpr:pt(s.map(t=>$d(e,t)))}}function qd(e,t){return t.identifier?e.importExpr(t.identifier.reference):yt(t.value)}function $d(e,t){const n=t.isValue?wd(e,t.value):qd(e,t.token);let r=0;return t.isSkipSelf&&(r|=1),t.isOptional&&(r|=2),t.isSelf&&(r|=4),t.isValue&&(r|=8),0===r?n:pt([yt(r),n])}function Hd(e){let t=0;switch(e){case hs.AfterContentChecked:t=2097152;break;case hs.AfterContentInit:t=1048576;break;case hs.AfterViewChecked:t=8388608;break;case hs.AfterViewInit:t=4194304;break;case hs.DoCheck:t=262144;break;case hs.OnChanges:t=524288;break;case hs.OnDestroy:t=131072;break;case hs.OnInit:t=65536}return t}function zd(e,t,n,r){const i=r.map(e=>t.importExpr(e.componentFactory)),s=Xt(e,Qt.ComponentFactoryResolver),o={diDeps:[{isValue:!0,value:pt(i)},{token:s,isSkipSelf:!0,isOptional:!0},{token:Xt(e,Qt.NgModuleRef)}],lifecycleHooks:[],reference:e.resolveExternalReference(Qt.CodegenComponentFactoryResolver)},{providerExpr:a,flags:u,depsExpr:c}=Ud(t,n,lh.PrivateService,{token:s,multi:!1,useClass:o});return{providerExpr:a,flags:u,depsExpr:c,tokenExpr:qd(t,s)}}class Wd{constructor(e){this.ngModuleFactoryVar=e}}const Kd=ct("_l");class Qd{constructor(e){this.reflector=e}compile(e,t,n){const r=Uo("NgModule",t.type),i=t.transitiveModule.entryComponents,s=t.bootstrapComponents,o=new Rd(this.reflector,t,n,r),a=[zd(this.reflector,e,0,i)].concat(o.parse().map(t=>Bd(e,t))).map(({providerExpr:e,depsExpr:t,flags:n,tokenExpr:r})=>lt(Qt.moduleProviderDef).callFn([yt(n),r,e,t])),u=lt(Qt.moduleDef).callFn([pt(a)]),c=mt([new Oe(Kd.name)],[new Ke(u)],oe),l=`${nn(t.type)}NgFactory`;if(this._createNgModuleFactory(e,t.type.reference,lt(Qt.createModuleFactory).callFn([e.importExpr(t.type.reference),pt(s.map(t=>e.importExpr(t.reference))),c])),t.id){const n="string"==typeof t.id?yt(t.id):e.importExpr(t.id),r=lt(Qt.RegisterModuleFactoryFn).callFn([n,ct(l)]).toStmt();e.statements.push(r)}return new Wd(l)}createStub(e,t){this._createNgModuleFactory(e,t,Be)}_createNgModuleFactory(e,t,n){const r=ct(`${nn({reference:t})}NgFactory`).set(n).toDeclStmt(ht(Qt.NgModuleFactory,[dt(e.importExpr(t))],[Z.Const]),[qe.Final,qe.Exported]);e.statements.push(r)}}class Gd{constructor(e){this._reflector=e}isNgModule(e){return this._reflector.annotations(e).some(V.isTypeOf)}resolve(e,t=!0){const n=bh(this._reflector.annotations(e),V.isTypeOf);if(n)return n;if(t)throw new Error(`No NgModule metadata found for '${Mt(e)}'.`);return null}}class Xd extends Ei{constructor(e,t){super(!1),this.referenceFilter=e,this.importFilter=t,this.typeExpression=0,this.importsWithPrefixes=new Map,this.reexports=new Map}visitType(e,t,n="any"){e?(this.typeExpression++,e.visitType(this,t),this.typeExpression--):t.print(null,n)}visitLiteralExpr(e,t){const n=e.value;return null==n&&e.type!=oe?(t.print(e,`(${n} as any)`),null):super.visitLiteralExpr(e,t)}visitLiteralArrayExpr(e,t){0===e.entries.length&&t.print(e,"(");const n=super.visitLiteralArrayExpr(e,t);return 0===e.entries.length&&t.print(e," as any[])"),n}visitExternalExpr(e,t){return this._visitIdentifier(e.value,e.typeParams,t),null}visitAssertNotNullExpr(e,t){const n=super.visitAssertNotNullExpr(e,t);return t.print(e,"!"),n}visitDeclareVarStmt(e,t){if(e.hasModifier(qe.Exported)&&e.value instanceof xe&&!e.type){const{name:t,moduleName:n}=e.value.value;if(n){let r=this.reexports.get(n);return r||(r=[],this.reexports.set(n,r)),r.push({name:t,as:e.name}),null}}return e.hasModifier(qe.Exported)&&t.print(e,"export "),e.hasModifier(qe.Final)?t.print(e,"const"):t.print(e,"var"),t.print(e,` ${e.name}`),this._printColonType(e.type,t),e.value&&(t.print(e," = "),e.value.visitExpression(this,t)),t.println(e,";"),null}visitWrappedNodeExpr(e,t){throw new Error("Cannot visit a WrappedNodeExpr when outputting Typescript.")}visitCastExpr(e,t){return t.print(e,"(<"),e.type.visitType(this,t),t.print(e,">"),e.value.visitExpression(this,t),t.print(e,")"),null}visitInstantiateExpr(e,t){return t.print(e,"new "),this.typeExpression++,e.classExpr.visitExpression(this,t),this.typeExpression--,t.print(e,"("),this.visitAllExpressions(e.args,t,","),t.print(e,")"),null}visitDeclareClassStmt(e,t){return t.pushClass(e),e.hasModifier(qe.Exported)&&t.print(e,"export "),t.print(e,`class ${e.name}`),null!=e.parent&&(t.print(e," extends "),this.typeExpression++,e.parent.visitExpression(this,t),this.typeExpression--),t.println(e," {"),t.incIndent(),e.fields.forEach(e=>this._visitClassField(e,t)),null!=e.constructorMethod&&this._visitClassConstructor(e,t),e.getters.forEach(e=>this._visitClassGetter(e,t)),e.methods.forEach(e=>this._visitClassMethod(e,t)),t.decIndent(),t.println(e,"}"),t.popClass(),null}_visitClassField(e,t){e.hasModifier(qe.Private)&&t.print(null,"/*private*/ "),e.hasModifier(qe.Static)&&t.print(null,"static "),t.print(null,e.name),this._printColonType(e.type,t),e.initializer&&(t.print(null," = "),e.initializer.visitExpression(this,t)),t.println(null,";")}_visitClassGetter(e,t){e.hasModifier(qe.Private)&&t.print(null,"private "),t.print(null,`get ${e.name}()`),this._printColonType(e.type,t),t.println(null," {"),t.incIndent(),this.visitAllStatements(e.body,t),t.decIndent(),t.println(null,"}")}_visitClassConstructor(e,t){t.print(e,"constructor("),this._visitParams(e.constructorMethod.params,t),t.println(e,") {"),t.incIndent(),this.visitAllStatements(e.constructorMethod.body,t),t.decIndent(),t.println(e,"}")}_visitClassMethod(e,t){e.hasModifier(qe.Private)&&t.print(null,"private "),t.print(null,`${e.name}(`),this._visitParams(e.params,t),t.print(null,")"),this._printColonType(e.type,t,"void"),t.println(null," {"),t.incIndent(),this.visitAllStatements(e.body,t),t.decIndent(),t.println(null,"}")}visitFunctionExpr(e,t){return e.name&&(t.print(e,"function "),t.print(e,e.name)),t.print(e,"("),this._visitParams(e.params,t),t.print(e,")"),this._printColonType(e.type,t,"void"),e.name||t.print(e," => "),t.println(e,"{"),t.incIndent(),this.visitAllStatements(e.statements,t),t.decIndent(),t.print(e,"}"),null}visitDeclareFunctionStmt(e,t){return e.hasModifier(qe.Exported)&&t.print(e,"export "),t.print(e,`function ${e.name}(`),this._visitParams(e.params,t),t.print(e,")"),this._printColonType(e.type,t,"void"),t.println(e," {"),t.incIndent(),this.visitAllStatements(e.statements,t),t.decIndent(),t.println(e,"}"),null}visitTryCatchStmt(e,t){t.println(e,"try {"),t.incIndent(),this.visitAllStatements(e.bodyStmts,t),t.decIndent(),t.println(e,`} catch (${vi.name}) {`),t.incIndent();const n=[_i.set(vi.prop("stack",null)).toDeclStmt(null,[qe.Final])].concat(e.catchStmts);return this.visitAllStatements(n,t),t.decIndent(),t.println(e,"}"),null}visitBuiltinType(e,t){let n;switch(e.name){case J.Bool:n="boolean";break;case J.Dynamic:n="any";break;case J.Function:n="Function";break;case J.Number:case J.Int:n="number";break;case J.String:n="string";break;case J.None:n="never";break;default:throw new Error(`Unsupported builtin type ${e.name}`)}return t.print(null,n),null}visitExpressionType(e,t){return e.value.visitExpression(this,t),null!==e.typeParams&&(t.print(null,"<"),this.visitAllObjects(e=>this.visitType(e,t),e.typeParams,t,","),t.print(null,">")),null}visitArrayType(e,t){return this.visitType(e.of,t),t.print(null,"[]"),null}visitMapType(e,t){return t.print(null,"{[key: string]:"),this.visitType(e.valueType,t),t.print(null,"}"),null}getBuiltinMethodName(e){let t;switch(e){case de.ConcatArray:t="concat";break;case de.SubscribeObservable:t="subscribe";break;case de.Bind:t="bind";break;default:throw new Error(`Unknown builtin method: ${e}`)}return t}_visitParams(e,t){this.visitAllObjects(e=>{t.print(null,e.name),this._printColonType(e.type,t)},e,t,",")}_visitIdentifier(e,t,n){const{name:r,moduleName:i}=e;if(this.referenceFilter&&this.referenceFilter(e))n.print(null,"(null as any)");else{if(i&&(!this.importFilter||!this.importFilter(e))){let e=this.importsWithPrefixes.get(i);null==e&&(e=`i${this.importsWithPrefixes.size}`,this.importsWithPrefixes.set(i,e)),n.print(null,`${e}.`)}if(n.print(null,r),this.typeExpression>0){(t||[]).length>0&&(n.print(null,"<"),this.visitAllObjects(e=>e.visitType(this,n),t,n,","),n.print(null,">"))}}}_printColonType(e,t,n){e!==oe&&(t.print(null,":"),this.visitType(e,t,n))}}class Yd{constructor(e){this._reflector=e}isPipe(e){const t=this._reflector.annotations(Rt(e));return t&&t.some(P.isTypeOf)}resolve(e,t=!0){const n=this._reflector.annotations(Rt(e));if(n){const e=bh(n,P.isTypeOf);if(e)return e}if(t)throw new Error(`No Pipe decorator found on ${Mt(e)}`);return null}}const Zd=["zero","one","two","few","many","other"];function Jd(e){const t=new np;return new ep(eu(t,e),t.isExpanded,t.errors)}class ep{constructor(e,t,n){this.nodes=e,this.expanded=t,this.errors=n}}class tp extends Bo{constructor(e,t){super(e,t)}}class np{constructor(){this.isExpanded=!1,this.errors=[]}visitElement(e,t){return new Za(e.name,e.attrs,eu(this,e.children),e.sourceSpan,e.startSourceSpan,e.endSourceSpan)}visitAttribute(e,t){return e}visitText(e,t){return e}visitComment(e,t){return e}visitExpansion(e,t){return this.isExpanded=!0,"plural"==e.type?function(e,t){const n=e.cases.map(e=>{-1!=Zd.indexOf(e.value)||e.value.match(/^=\d+$/)||t.push(new tp(e.valueSourceSpan,`Plural cases should be "=<number>" or one of ${Zd.join(", ")}`));const n=Jd(e.expression);return t.push(...n.errors),new Za("ng-template",[new Ya("ngPluralCase",`${e.value}`,e.valueSourceSpan)],n.nodes,e.sourceSpan,e.sourceSpan,e.sourceSpan)}),r=new Ya("[ngPlural]",e.switchValue,e.switchValueSourceSpan);return new Za("ng-container",[r],n,e.sourceSpan,e.sourceSpan,e.sourceSpan)}(e,this.errors):function(e,t){const n=e.cases.map(e=>{const n=Jd(e.expression);return t.push(...n.errors),"other"===e.value?new Za("ng-template",[new Ya("ngSwitchDefault","",e.valueSourceSpan)],n.nodes,e.sourceSpan,e.sourceSpan,e.sourceSpan):new Za("ng-template",[new Ya("ngSwitchCase",`${e.value}`,e.valueSourceSpan)],n.nodes,e.sourceSpan,e.sourceSpan,e.sourceSpan)}),r=new Ya("[ngSwitch]",e.switchValue,e.switchValueSourceSpan);return new Za("ng-container",[r],n,e.sourceSpan,e.sourceSpan,e.sourceSpan)}(e,this.errors)}visitExpansionCase(e,t){throw new Error("Should not be reached")}}const rp=/^(?:(?:(?:(bind-)|(let-)|(ref-|#)|(on-)|(bindon-)|(@))(.+))|\[\(([^\)]+)\)\]|\[([^\]]+)\]|\(([^\)]+)\))$/,ip=1,sp=2,op=3,ap=4,up=5,cp=6,lp=7,hp=8,dp=9,pp=10,fp="*",mp="class";let gp;function yp(){return gp||(gp=v.parse("*")[0]),gp}class vp extends Bo{constructor(e,t,n){super(t,e,n)}}class _p{constructor(e,t,n){this.templateAst=e,this.usedPipes=t,this.errors=n}}class bp{constructor(e,t,n,r,i,s,o){this._config=e,this._reflector=t,this._exprParser=n,this._schemaRegistry=r,this._htmlParser=i,this._console=s,this.transforms=o}get expressionParser(){return this._exprParser}parse(e,t,n,r,i,s,o){const a=this.tryParse(e,t,n,r,i,s,o),u=a.errors.filter(e=>e.level===jo.WARNING),c=a.errors.filter(e=>e.level===jo.ERROR);if(u.length>0&&this._console.warn(`Template parse warnings:\n${u.join("\n")}`),c.length>0){throw Dt(`Template parse errors:\n${c.join("\n")}`,c)}return{template:a.templateAst,pipes:a.usedPipes}}tryParse(e,t,n,r,i,s,o){let a="string"==typeof t?this._htmlParser.parse(t,s,!0,this.getInterpolationConfig(e)):t;return o||(a=Iu(a)),this.tryParseHtml(this.expandHtml(a),e,n,r,i)}tryParseHtml(e,t,n,r,i){let s;const o=e.errors,a=[];if(e.rootNodes.length>0){const u=Dp(n),c=Dp(r),l=new Pd(this._reflector,t);let h=void 0;t.template&&t.template.interpolation&&(h={start:t.template.interpolation[0],end:t.template.interpolation[1]});const d=new Wu(this._exprParser,h,this._schemaRegistry,c,o),p=new wp(this._reflector,this._config,l,u,d,this._schemaRegistry,i,o);s=eu(p,e.rootNodes,Tp),o.push(...l.errors),a.push(...d.getUsedPipes())}else s=[];return this._assertNoReferenceDuplicationOnTemplate(s,o),o.length>0?new _p(s,a,o):(this.transforms&&this.transforms.forEach(e=>{s=dh(e,s)}),new _p(s,a,o))}expandHtml(e,t=!1){const n=e.errors;if(0==n.length||t){const t=Jd(e.rootNodes);n.push(...t.errors),e=new yu(t.nodes,n)}return e}getInterpolationConfig(e){if(e.template)return Ba.fromArray(e.template.interpolation)}_assertNoReferenceDuplicationOnTemplate(e,t){const n=[];e.filter(e=>!!e.references).forEach(e=>e.references.forEach(e=>{const r=e.name;if(n.indexOf(r)<0)n.push(r);else{const n=new vp(`Reference "#${r}" is defined several times`,e.sourceSpan,jo.ERROR);t.push(n)}}))}}class wp{constructor(e,t,n,r,i,s,o,a){this.reflector=e,this.config=t,this.providerViewContext=n,this._bindingParser=i,this._schemaRegistry=s,this._schemas=o,this._targetErrors=a,this.selectorMatcher=new _,this.directivesIndex=new Map,this.ngContentCount=0,this.contentQueryStartId=n.component.viewQueries.length+1,r.forEach((e,t)=>{const n=v.parse(e.selector);this.selectorMatcher.addSelectables(n,e),this.directivesIndex.set(e,t)})}visitExpansion(e,t){return null}visitExpansionCase(e,t){return null}visitText(e,t){const n=t.findNgContentIndex(yp()),r=Au(e.value),i=this._bindingParser.parseInterpolation(r,e.sourceSpan);return i?new Zl(i,n,e.sourceSpan):new Yl(r,n,e.sourceSpan)}visitAttribute(e,t){return new Jl(e.name,e.value,e.sourceSpan)}visitComment(e,t){return null}visitElement(e,t){const n=this.contentQueryStartId,r=e.name,i=Ec(e);if(i.type===Cc.SCRIPT||i.type===Cc.STYLE)return null;if(i.type===Cc.STYLESHEET&&cc(i.hrefAttr))return null;const s=[],o=[],a=[],c=[],l=[],h=[],d=[],p=[];let f=!1;const m=[],g=u(e.name);e.attrs.forEach(e=>{const t=this._parseAttr(g,e,s,o,l,a,c);let n,r;c.push(...[].map(e=>ih.fromParsedVariable(e)));const i=this._normalizeAttributeName(e.name);i.startsWith(fp)&&(n=e.value,r=i.substring(fp.length));const u=null!=n;if(u){f&&this._reportError("Can't have multiple template bindings on one element. Use only one attribute prefixed with *",e.sourceSpan),f=!0;const t=[];this._bindingParser.parseInlineTemplateBinding(r,n,e.sourceSpan,d,h,t),p.push(...t.map(e=>ih.fromParsedVariable(e)))}t||u||(m.push(this.visitAttribute(e,null)),s.push([e.name,e.value]))});const y=Sp(r,s),{directives:_,matchElement:b}=this._parseDirectives(this.selectorMatcher,y),w=[],E=new Set,C=this._createDirectiveAsts(g,e.name,_,o,a,e.sourceSpan,w,E),S=this._createElementPropertyAsts(e.name,o,E),T=t.isTemplateElement||f,x=new Md(this.providerViewContext,t.providerContext,T,C,m,w,g,n,e.sourceSpan),A=eu(i.nonBindable?xp:this,e.children,Cp.create(g,C,g?t.providerContext:x));x.afterElement();const D=""!=i.projectAs?v.parse(i.projectAs)[0]:y,I=t.findNgContentIndex(D);let N;if(i.type===Cc.NG_CONTENT)e.children&&!e.children.every(Ap)&&this._reportError("<ng-content> element cannot have content.",e.sourceSpan),N=new hh(this.ngContentCount++,f?null:I,e.sourceSpan);else if(g)this._assertAllEventsPublishedByDirectives(C,l),this._assertNoComponentsNorElementBindingsOnTemplate(C,S,e.sourceSpan),N=new oh(m,l,w,c,x.transformedDirectiveAsts,x.transformProviders,x.transformedHasViewContainer,x.queryMatches,A,f?null:I,e.sourceSpan);else{this._assertElementExists(b,e),this._assertOnlyOneComponent(C,e.sourceSpan);const n=f?null:t.findNgContentIndex(D);N=new sh(r,m,S,l,w,x.transformedDirectiveAsts,x.transformProviders,x.transformedHasViewContainer,x.queryMatches,A,f?null:n,e.sourceSpan,e.endSourceSpan||null)}if(f){const n=this.contentQueryStartId,i=Sp("ng-template",d),{directives:s}=this._parseDirectives(this.selectorMatcher,i),o=new Set,a=this._createDirectiveAsts(!0,r,s,h,[],e.sourceSpan,[],o),u=this._createElementPropertyAsts(r,h,o);this._assertNoComponentsNorElementBindingsOnTemplate(a,u,e.sourceSpan);const c=new Md(this.providerViewContext,t.providerContext,t.isTemplateElement,a,[],[],!0,n,e.sourceSpan);c.afterElement(),N=new oh([],[],[],p,c.transformedDirectiveAsts,c.transformProviders,c.transformedHasViewContainer,c.queryMatches,[N],I,e.sourceSpan)}return N}_parseAttr(e,t,n,r,i,s,o){const a=this._normalizeAttributeName(t.name),u=t.value,c=t.sourceSpan,l=[],h=a.match(rp);let d=!1;if(null!==h)if(d=!0,null!=h[ip])this._bindingParser.parsePropertyBinding(h[lp],u,!1,c,n,r);else if(h[sp])if(e){const e=h[lp];this._parseVariable(e,u,c,o)}else this._reportError('"let-" is only supported on ng-template elements.',c);else if(h[op]){const e=h[lp];this._parseReference(e,u,c,s)}else h[ap]?this._bindingParser.parseEvent(h[lp],u,c,n,l):h[up]?(this._bindingParser.parsePropertyBinding(h[lp],u,!1,c,n,r),this._parseAssignmentEvent(h[lp],u,c,n,l)):h[cp]?this._bindingParser.parseLiteralAttr(a,u,c,n,r):h[hp]?(this._bindingParser.parsePropertyBinding(h[hp],u,!1,c,n,r),this._parseAssignmentEvent(h[hp],u,c,n,l)):h[dp]?this._bindingParser.parsePropertyBinding(h[dp],u,!1,c,n,r):h[pp]&&this._bindingParser.parseEvent(h[pp],u,c,n,l);else d=this._bindingParser.parsePropertyInterpolation(a,u,c,n,r);return d||this._bindingParser.parseLiteralAttr(a,u,c,n,r),i.push(...l.map(e=>nh.fromParsedEvent(e))),d}_normalizeAttributeName(e){return/^data-/i.test(e)?e.substring(5):e}_parseVariable(e,t,n,r){e.indexOf("-")>-1&&this._reportError('"-" is not allowed in variable names',n),r.push(new ih(e,t,n))}_parseReference(e,t,n,r){e.indexOf("-")>-1&&this._reportError('"-" is not allowed in reference names',n),r.push(new Ep(e,t,n))}_parseAssignmentEvent(e,t,n,r,i){this._bindingParser.parseEvent(`${e}Change`,`${t}=$event`,n,r,i)}_parseDirectives(e,t){const n=new Array(this.directivesIndex.size);let r=!1;return e.match(t,(e,t)=>{n[this.directivesIndex.get(t)]=t,r=r||e.hasElementSelector()}),{directives:n.filter(e=>!!e),matchElement:r}}_createDirectiveAsts(e,t,n,r,i,s,o,a){const u=new Set;let c=null;const l=n.map(e=>{const n=new Vo(s.start,s.end,`Directive ${nn(e.type)}`);e.isComponent&&(c=e);const l=[];let h=this._bindingParser.createDirectiveHostPropertyAsts(e,t,n).map(e=>th.fromBoundProperty(e));h=this._checkPropertiesInSchema(t,h);const d=this._bindingParser.createDirectiveHostEventAsts(e,n);this._createDirectivePropertyAsts(e.inputs,r,l,a),i.forEach(t=>{(0===t.value.length&&e.isComponent||t.isReferenceToDirective(e))&&(o.push(new rh(t.name,Gt(e.type.reference),t.value,t.sourceSpan)),u.add(t.name))});const p=d.map(e=>nh.fromParsedEvent(e)),f=this.contentQueryStartId;return this.contentQueryStartId+=e.queries.length,new uh(e,l,h,p,f,n)});return i.forEach(t=>{if(t.value.length>0)u.has(t.name)||this._reportError(`There is no directive with "exportAs" set to "${t.value}"`,t.sourceSpan);else if(!c){let n=null;e&&(n=Xt(this.reflector,Qt.TemplateRef)),o.push(new rh(t.name,n,t.value,t.sourceSpan))}}),l}_createDirectivePropertyAsts(e,t,n,r){if(e){const i=new Map;t.forEach(e=>{const t=i.get(e.name);t&&!t.isLiteral||i.set(e.name,e)}),Object.keys(e).forEach(t=>{const s=e[t],o=i.get(s);o&&(r.add(o.name),Ip(o.expression)||n.push(new ah(t,o.name,o.expression,o.sourceSpan)))})}}_createElementPropertyAsts(e,t,n){const r=[];return t.forEach(t=>{if(!t.isLiteral&&!n.has(t.name)){const n=this._bindingParser.createBoundElementProperty(e,t);r.push(th.fromBoundProperty(n))}}),this._checkPropertiesInSchema(e,r)}_findComponentDirectives(e){return e.filter(e=>e.directive.isComponent)}_findComponentDirectiveNames(e){return this._findComponentDirectives(e).map(e=>nn(e.directive.type))}_assertOnlyOneComponent(e,t){const n=this._findComponentDirectiveNames(e);n.length>1&&this._reportError("More than one component matched on this element.\nMake sure that only one component's selector can match a given element.\n"+`Conflicting components: ${n.join(",")}`,t)}_assertElementExists(e,t){const n=t.name.replace(/^:xhtml:/,"");if(!e&&!this._schemaRegistry.hasElement(n,this._schemas)){let e=`'${n}' is not a known element:\n`;e+=`1. If '${n}' is an Angular component, then verify that it is part of this module.\n`,n.indexOf("-")>-1?e+=`2. If '${n}' is a Web Component then add 'CUSTOM_ELEMENTS_SCHEMA' to the '@NgModule.schemas' of this component to suppress this message.`:e+="2. To allow any element add 'NO_ERRORS_SCHEMA' to the '@NgModule.schemas' of this component.",this._reportError(e,t.sourceSpan)}}_assertNoComponentsNorElementBindingsOnTemplate(e,t,n){const r=this._findComponentDirectiveNames(e);r.length>0&&this._reportError(`Components on an embedded template: ${r.join(",")}`,n),t.forEach(e=>{this._reportError(`Property binding ${e.name} not used by any directive on an embedded template. Make sure that the property name is spelled correctly and all directives are listed in the "@NgModule.declarations".`,n)})}_assertAllEventsPublishedByDirectives(e,t){const n=new Set;e.forEach(e=>{Object.keys(e.directive.outputs).forEach(t=>{const r=e.directive.outputs[t];n.add(r)})}),t.forEach(e=>{null==e.target&&n.has(e.name)||this._reportError(`Event binding ${e.fullName} not emitted by any directive on an embedded template. Make sure that the event name is spelled correctly and all directives are listed in the "@NgModule.declarations".`,e.sourceSpan)})}_checkPropertiesInSchema(e,t){return t.filter(t=>{if(0===t.type&&!this._schemaRegistry.hasProperty(e,t.name,this._schemas)){let n=`Can't bind to '${t.name}' since it isn't a known property of '${e}'.`;e.startsWith("ng-")?n+=`\n1. If '${t.name}' is an Angular directive, then add 'CommonModule' to the '@NgModule.imports' of this component.`+"\n2. To allow any property add 'NO_ERRORS_SCHEMA' to the '@NgModule.schemas' of this component.":e.indexOf("-")>-1&&(n+=`\n1. If '${e}' is an Angular component and it has '${t.name}' input, then verify that it is part of this module.`+`\n2. If '${e}' is a Web Component then add 'CUSTOM_ELEMENTS_SCHEMA' to the '@NgModule.schemas' of this component to suppress this message.`+"\n3. To allow any property add 'NO_ERRORS_SCHEMA' to the '@NgModule.schemas' of this component."),this._reportError(n,t.sourceSpan)}return!Ip(t.value)})}_reportError(e,t,n=jo.ERROR){this._targetErrors.push(new Bo(t,e,n))}}class Ep{constructor(e,t,n){this.name=e,this.value=t,this.sourceSpan=n}isReferenceToDirective(e){return-1!==(t=e.exportAs,t?t.split(",").map(e=>e.trim()):[]).indexOf(this.value);var t}}class Cp{constructor(e,t,n,r){this.isTemplateElement=e,this._ngContentIndexMatcher=t,this._wildcardNgContentIndex=n,this.providerContext=r}static create(e,t,n){const r=new _;let i=null;const s=t.find(e=>e.directive.isComponent);if(s){const e=s.directive.template.ngContentSelectors;for(let t=0;t<e.length;t++){"*"===e[t]?i=t:r.addSelectables(v.parse(e[t]),t)}}return new Cp(e,r,i,n)}findNgContentIndex(e){const t=[];return this._ngContentIndexMatcher.match(e,(e,n)=>{t.push(n)}),t.sort(),null!=this._wildcardNgContentIndex&&t.push(this._wildcardNgContentIndex),t.length>0?t[0]:null}}function Sp(e,t){const n=new v,r=s(e)[1];n.setElement(r);for(let i=0;i<t.length;i++){const e=t[i][0],r=s(e)[1],o=t[i][1];if(n.addAttribute(r,o),e.toLowerCase()==mp){o.trim().split(/\s+/g).forEach(e=>n.addClassName(e))}}return n}const Tp=new Cp(!0,new _,null,null),xp=new class{visitElement(e,t){const n=Ec(e);if(n.type===Cc.SCRIPT||n.type===Cc.STYLE||n.type===Cc.STYLESHEET)return null;const r=e.attrs.map(e=>[e.name,e.value]),i=Sp(e.name,r),s=t.findNgContentIndex(i),o=eu(this,e.children,Tp);return new sh(e.name,eu(this,e.attrs),[],[],[],[],[],!1,[],o,s,e.sourceSpan,e.endSourceSpan)}visitComment(e,t){return null}visitAttribute(e,t){return new Jl(e.name,e.value,e.sourceSpan)}visitText(e,t){const n=t.findNgContentIndex(yp());return new Yl(e.value,n,e.sourceSpan)}visitExpansion(e,t){return e}visitExpansionCase(e,t){return e}};function Ap(e){return e instanceof Qa&&0==e.value.trim().length}function Dp(e){const t=new Map;return e.forEach(e=>{t.get(e.type.reference)||t.set(e.type.reference,e)}),Array.from(t.values())}function Ip(e){return e instanceof ns&&(e=e.ast),e instanceof Fi}const Np="_any";new class{getLocal(e){return e===ms.event.name?ct(Np):null}};const Op="class",kp="style",Pp="$implicit";class Mp{constructor(e,t){this.viewClassVar=e,this.rendererTypeVar=t}}class Rp{constructor(e){this._reflector=e}compileComponent(e,t,n,r,i){let s=0;const o=function e(t,n=new Map){t.forEach(t=>{const r=new Set,i=new Set;let s=void 0;t instanceof sh?(e(t.children,n),t.children.forEach(e=>{const t=n.get(e);t.staticQueryIds.forEach(e=>r.add(e)),t.dynamicQueryIds.forEach(e=>i.add(e))}),s=t.queryMatches):t instanceof oh&&(e(t.children,n),t.children.forEach(e=>{const t=n.get(e);t.staticQueryIds.forEach(e=>i.add(e)),t.dynamicQueryIds.forEach(e=>i.add(e))}),s=t.queryMatches),s&&s.forEach(e=>r.add(e.queryId)),i.forEach(e=>r.delete(e)),n.set(t,{staticQueryIds:r,dynamicQueryIds:i})});return n}(n);let a=void 0;if(!t.isHost){const n=t.template,i=[];n.animations&&n.animations.length&&i.push(new Le("animation",wd(e,n.animations),!0));const s=ct(on(t.type.reference));a=s.name,e.statements.push(s.set(lt(Qt.createRendererType2).callFn([new Ve([new Le("encapsulation",yt(n.encapsulation),!1),new Le("styles",r,!1),new Le("data",new Ve(i),!1)])])).toDeclStmt(ht(Qt.RendererType2),[qe.Final,qe.Exported]))}const u=n=>{const r=s++;return new qp(this._reflector,e,n,t,r,i,o,u)},c=u(null);return c.visitAll([],n),e.statements.push(...c.build()),new Mp(c.viewName,a)}}const Fp=ct("_l"),Lp=ct("_v"),Vp=ct("_ck"),jp=ct("_co"),Bp=ct("en"),Up=ct("ad");class qp{constructor(e,t,n,r,i,s,o,a){this.reflector=e,this.outputCtx=t,this.parent=n,this.component=r,this.embeddedViewIndex=i,this.usedPipes=s,this.staticQueryIds=o,this.viewBuilderFactory=a,this.nodes=[],this.purePipeNodeIndices=Object.create(null),this.refNodeIndices=Object.create(null),this.variables=[],this.children=[],this.compType=this.embeddedViewIndex>0?se:dt(t.importExpr(this.component.type.reference)),this.viewName=sn(this.component.type.reference,this.embeddedViewIndex)}visitAll(e,t){if(this.variables=e,this.parent||this.usedPipes.forEach(e=>{e.pure&&(this.purePipeNodeIndices[e.name]=this._createPipe(null,e))}),!this.parent){const e=function(e){const t=new Set,n=new Set;return Array.from(e.values()).forEach(e=>{e.staticQueryIds.forEach(e=>t.add(e)),e.dynamicQueryIds.forEach(e=>n.add(e))}),n.forEach(e=>t.delete(e)),{staticQueryIds:t,dynamicQueryIds:n}}(this.staticQueryIds);this.component.viewQueries.forEach((t,n)=>{const r=n+1,i=t.first?0:1,s=134217728|Wp(e,r,t.first);this.nodes.push(()=>({sourceSpan:null,nodeFlags:s,nodeDef:lt(Qt.queryDef).callFn([yt(s),yt(r),new Ve([new Le(t.propertyName,yt(i),!1)])])}))})}dh(this,t),this.parent&&(0===t.length||function e(t){const n=t[t.length-1];if(n instanceof oh)return n.hasViewContainer;if(n instanceof sh)return o(n.name)&&n.children.length?e(n.children):n.hasViewContainer;return n instanceof hh}(t))&&this.nodes.push(()=>({sourceSpan:null,nodeFlags:1,nodeDef:lt(Qt.anchorDef).callFn([yt(0),Be,Be,yt(0)])}))}build(e=[]){this.children.forEach(t=>t.build(e));const{updateRendererStmts:t,updateDirectivesStmts:n,nodeDefExprs:r}=this._createNodeExpressions(),i=this._createUpdateFn(t),s=this._createUpdateFn(n);let o=0;this.parent||this.component.changeDetection!==O.OnPush||(o|=2);const a=new ze(this.viewName,[new Oe(Fp.name)],[new Ke(lt(Qt.viewDef).callFn([yt(o),pt(r),s,i]))],ht(Qt.ViewDefinition),0===this.embeddedViewIndex?[qe.Exported]:[]);return e.push(a),e}_createUpdateFn(e){let t;if(e.length>0){const n=[];!this.component.isHost&&it(e).has(jp.name)&&n.push(jp.set(Lp.prop("component")).toDeclStmt(this.compType)),t=mt([new Oe(Vp.name,oe),new Oe(Lp.name,oe)],[...n,...e],oe)}else t=Be;return t}visitNgContent(e,t){this.nodes.push(()=>({sourceSpan:e.sourceSpan,nodeFlags:8,nodeDef:lt(Qt.ngContentDef).callFn([yt(e.ngContentIndex),yt(e.index)])}))}visitText(e,t){this.nodes.push(()=>({sourceSpan:e.sourceSpan,nodeFlags:2,nodeDef:lt(Qt.textDef).callFn([yt(-1),yt(e.ngContentIndex),pt([yt(e.value)])])}))}visitBoundText(e,t){const n=this.nodes.length;this.nodes.push(null);const r=e.value.ast,i=r.expressions.map((t,r)=>this._preprocessUpdateExpression({nodeIndex:n,bindingIndex:r,sourceSpan:e.sourceSpan,context:jp,value:t})),s=n;this.nodes[n]=(()=>({sourceSpan:e.sourceSpan,nodeFlags:2,nodeDef:lt(Qt.textDef).callFn([yt(s),yt(e.ngContentIndex),pt(r.strings.map(e=>yt(e)))]),updateRenderer:i}))}visitEmbeddedTemplate(e,t){const n=this.nodes.length;this.nodes.push(null);const{flags:r,queryMatchesExpr:i,hostEvents:s}=this._visitElementOrTemplate(n,e),o=this.viewBuilderFactory(this);this.children.push(o),o.visitAll(e.variables,e.children);const a=this.nodes.length-n-1;this.nodes[n]=(()=>({sourceSpan:e.sourceSpan,nodeFlags:1|r,nodeDef:lt(Qt.anchorDef).callFn([yt(r),i,yt(e.ngContentIndex),yt(a),this._createElementHandleEventFn(n,s),ct(o.viewName)])}))}visitElement(e,t){const n=this.nodes.length;this.nodes.push(null);const r=o(e.name)?null:e.name,{flags:i,usedEvents:s,queryMatchesExpr:a,hostBindings:u,hostEvents:c}=this._visitElementOrTemplate(n,e);let l=[],h=[],d=[];if(r){const t=e.inputs.map(e=>({context:jp,inputAst:e,dirAst:null})).concat(u);t.length&&(h=t.map((e,t)=>this._preprocessUpdateExpression({context:e.context,nodeIndex:n,bindingIndex:t,sourceSpan:e.inputAst.sourceSpan,value:e.inputAst.value})),l=t.map(e=>(function(e,t){const n=e.type;switch(n){case 1:return pt([yt(1),yt(e.name),yt(e.securityContext)]);case 0:return pt([yt(8),yt(e.name),yt(e.securityContext)]);case 4:const r=8|(t&&t.directive.isComponent?32:16);return pt([yt(r),yt("@"+e.name),yt(e.securityContext)]);case 2:return pt([yt(2),yt(e.name),Be]);case 3:return pt([yt(4),yt(e.name),yt(e.unit)]);default:const i=n;throw new Error(`unexpected ${i}`)}})(e.inputAst,e.dirAst))),d=s.map(([e,t])=>pt([yt(e),yt(t)]))}dh(this,e.children);const p=this.nodes.length-n-1,f=e.directives.find(e=>e.directive.isComponent);let m=Be,g=Be;f&&(g=this.outputCtx.importExpr(f.directive.componentViewType),m=this.outputCtx.importExpr(f.directive.rendererType));const y=n;this.nodes[n]=(()=>({sourceSpan:e.sourceSpan,nodeFlags:1|i,nodeDef:lt(Qt.elementDef).callFn([yt(y),yt(i),a,yt(e.ngContentIndex),yt(p),yt(r),r?function(e){const t=Object.create(null);return e.attrs.forEach(e=>{t[e.name]=e.value}),e.directives.forEach(e=>{Object.keys(e.directive.hostAttributes).forEach(n=>{const r=e.directive.hostAttributes[n],i=t[n];t[n]=null!=i?function(e,t,n){return e==Op||e==kp?`${t} ${n}`:n}(n,i,r):r})}),pt(Object.keys(t).sort().map(e=>pt([yt(e),yt(t[e])])))}(e):Be,l.length?pt(l):Be,d.length?pt(d):Be,this._createElementHandleEventFn(n,c),g,m]),updateRenderer:h}))}_visitElementOrTemplate(e,t){let n=0;t.hasViewContainer&&(n|=16777216);const r=new Map;t.outputs.forEach(e=>{const{name:t,target:n}=zp(e,null);r.set(Kp(n,t),[n,t])}),t.directives.forEach(e=>{e.hostEvents.forEach(t=>{const{name:n,target:i}=zp(t,e);r.set(Kp(i,n),[i,n])})});const i=[],s=[];this._visitComponentFactoryResolverProvider(t.directives),t.providers.forEach((n,o)=>{let a=void 0,u=void 0;if(t.directives.forEach((e,t)=>{e.directive.type.reference===ln(n.token)&&(a=e,u=t)}),a){const{hostBindings:o,hostEvents:c}=this._visitDirective(n,a,u,e,t.references,t.queryMatches,r,this.staticQueryIds.get(t));i.push(...o),s.push(...c)}else this._visitProvider(n,t.queryMatches)});let o=[];return t.queryMatches.forEach(e=>{let t=void 0;ln(e.value)===this.reflector.resolveExternalReference(Qt.ElementRef)?t=0:ln(e.value)===this.reflector.resolveExternalReference(Qt.ViewContainerRef)?t=3:ln(e.value)===this.reflector.resolveExternalReference(Qt.TemplateRef)&&(t=2),null!=t&&o.push(pt([yt(e.queryId),yt(t)]))}),t.references.forEach(t=>{let n=void 0;t.value?ln(t.value)===this.reflector.resolveExternalReference(Qt.TemplateRef)&&(n=2):n=1,null!=n&&(this.refNodeIndices[t.name]=e,o.push(pt([yt(t.name),yt(n)])))}),t.outputs.forEach(e=>{s.push({context:jp,eventAst:e,dirAst:null})}),{flags:n,usedEvents:Array.from(r.values()),queryMatchesExpr:o.length?pt(o):Be,hostBindings:i,hostEvents:s}}_visitDirective(e,t,n,r,i,s,o,a){const u=this.nodes.length;this.nodes.push(null),t.directive.queries.forEach((e,n)=>{const r=t.contentQueryStartId+n,i=67108864|Wp(a,r,e.first),s=e.first?0:1;this.nodes.push(()=>({sourceSpan:t.sourceSpan,nodeFlags:i,nodeDef:lt(Qt.queryDef).callFn([yt(i),yt(r),new Ve([new Le(e.propertyName,yt(s),!1)])])}))});const c=this.nodes.length-u-1;let{flags:l,queryMatchExprs:h,providerExpr:d,depsExpr:p}=this._visitProviderOrDirective(e,s);i.forEach(t=>{t.value&&ln(t.value)===ln(e.token)&&(this.refNodeIndices[t.name]=u,h.push(pt([yt(t.name),yt(4)])))}),t.directive.isComponent&&(l|=32768);const f=t.inputs.map((e,t)=>{const n=pt([yt(t),yt(e.directiveName)]);return new Le(e.directiveName,n,!1)}),m=[],g=t.directive;Object.keys(g.outputs).forEach(e=>{const t=g.outputs[e];o.has(t)&&m.push(new Le(e,yt(t),!1))});let y=[];(t.inputs.length||(327680&l)>0)&&(y=t.inputs.map((e,t)=>this._preprocessUpdateExpression({nodeIndex:u,bindingIndex:t,sourceSpan:e.sourceSpan,context:jp,value:e.value})));const v=lt(Qt.nodeValue).callFn([Lp,yt(u)]),_=t.hostProperties.map(e=>({context:v,dirAst:t,inputAst:e})),b=t.hostEvents.map(e=>({context:v,eventAst:e,dirAst:t})),w=u;return this.nodes[u]=(()=>({sourceSpan:t.sourceSpan,nodeFlags:16384|l,nodeDef:lt(Qt.directiveDef).callFn([yt(w),yt(l),h.length?pt(h):Be,yt(c),d,p,f.length?new Ve(f):Be,m.length?new Ve(m):Be]),updateDirectives:y,directive:t.directive.type})),{hostBindings:_,hostEvents:b}}_visitProvider(e,t){this._addProviderNode(this._visitProviderOrDirective(e,t))}_visitComponentFactoryResolverProvider(e){const t=e.find(e=>e.directive.isComponent);if(t&&t.directive.entryComponents.length){const{providerExpr:e,depsExpr:n,flags:r,tokenExpr:i}=zd(this.reflector,this.outputCtx,8192,t.directive.entryComponents);this._addProviderNode({providerExpr:e,depsExpr:n,flags:r,tokenExpr:i,queryMatchExprs:[],sourceSpan:t.sourceSpan})}}_addProviderNode(e){this.nodes.length;this.nodes.push(()=>({sourceSpan:e.sourceSpan,nodeFlags:e.flags,nodeDef:lt(Qt.providerDef).callFn([yt(e.flags),e.queryMatchExprs.length?pt(e.queryMatchExprs):Be,e.tokenExpr,e.providerExpr,e.depsExpr])}))}_visitProviderOrDirective(e,t){let n=[];t.forEach(t=>{ln(t.value)===ln(e.token)&&n.push(pt([yt(t.queryId),yt(4)]))});const{providerExpr:r,depsExpr:i,flags:s,tokenExpr:o}=Bd(this.outputCtx,e);return{flags:0|s,queryMatchExprs:n,providerExpr:r,depsExpr:i,tokenExpr:o,sourceSpan:e.sourceSpan}}getLocal(e){if(e==ms.event.name)return ms.event;let t=Lp;for(let n=this;n;n=n.parent,t=t.prop("parent").cast(se)){const r=n.refNodeIndices[e];if(null!=r)return lt(Qt.nodeValue).callFn([t,yt(r)]);const i=n.variables.find(t=>t.name===e);if(i){const e=i.value||Pp;return t.prop("context").prop(e)}}return null}_createLiteralArrayConverter(e,t){if(0===t){const e=lt(Qt.EMPTY_ARRAY);return()=>e}const n=this.nodes.length;return this.nodes.push(()=>({sourceSpan:e,nodeFlags:32,nodeDef:lt(Qt.pureArrayDef).callFn([yt(n),yt(t)])})),e=>$p(n,e)}_createLiteralMapConverter(e,t){if(0===t.length){const e=lt(Qt.EMPTY_MAP);return()=>e}const n=ft(t.map((e,t)=>Object.assign({},e,{value:yt(t)}))),r=this.nodes.length;return this.nodes.push(()=>({sourceSpan:e,nodeFlags:64,nodeDef:lt(Qt.pureObjectDef).callFn([yt(r),n])})),e=>$p(r,e)}_createPipeConverter(e,t,n){const r=this.usedPipes.find(e=>e.name===t);if(r.pure){const r=this.nodes.length;this.nodes.push(()=>({sourceSpan:e.sourceSpan,nodeFlags:128,nodeDef:lt(Qt.purePipeDef).callFn([yt(r),yt(n)])}));let i=Lp,s=this;for(;s.parent;)s=s.parent,i=i.prop("parent").cast(se);const o=s.purePipeNodeIndices[t],a=lt(Qt.nodeValue).callFn([i,yt(o)]);return t=>Hp(e.nodeIndex,e.bindingIndex,$p(r,[a].concat(t)))}{const t=this._createPipe(e.sourceSpan,r),n=lt(Qt.nodeValue).callFn([Lp,yt(t)]);return t=>Hp(e.nodeIndex,e.bindingIndex,n.callMethod("transform",t))}}_createPipe(e,t){const n=this.nodes.length;let r=0;t.type.lifecycleHooks.forEach(e=>{e===hs.OnDestroy&&(r|=Hd(e))});const i=t.type.diDeps.map(e=>$d(this.outputCtx,e));return this.nodes.push(()=>({sourceSpan:e,nodeFlags:16,nodeDef:lt(Qt.pipeDef).callFn([yt(r),this.outputCtx.importExpr(t.type.reference),pt(i)])})),n}_preprocessUpdateExpression(e){return{nodeIndex:e.nodeIndex,bindingIndex:e.bindingIndex,sourceSpan:e.sourceSpan,context:e.context,value:vs({createLiteralArrayConverter:t=>this._createLiteralArrayConverter(e.sourceSpan,t),createLiteralMapConverter:t=>this._createLiteralMapConverter(e.sourceSpan,t),createPipeConverter:(t,n)=>this._createPipeConverter(e,t,n)},e.value)}}_createNodeExpressions(){const e=this;let t=0;const n=[],r=[],i=this.nodes.map((e,t)=>{const{nodeDef:i,nodeFlags:o,updateDirectives:a,updateRenderer:u,sourceSpan:c}=e();return u&&n.push(...s(t,c,u,!1)),a&&r.push(...s(t,c,a,(327680&o)>0)),at(3&o?new je([Fp.callFn([]).callFn([]),i]):i,c)});return{updateRendererStmts:n,updateDirectivesStmts:r,nodeDefExprs:i};function s(n,r,i,s){const o=[],a=i.map(({sourceSpan:n,context:r,value:i})=>{const s=`${t++}`,a=r===jp?e:null,{stmts:u,currValExpr:c}=bs(a,r,i,s,cs.General);return o.push(...u.map(e=>ot(e,n))),at(c,n)});return(i.length||s)&&o.push(ot($p(n,a).toStmt(),r)),o}}_createElementHandleEventFn(e,t){const n=[];let r,i=0;if(t.forEach(({context:e,eventAst:t,dirAst:r})=>{const s=`${i++}`,o=e===jp?this:null,{stmts:a,allowDefault:u}=ys(o,e,t.handler,s),c=a;u&&c.push(Up.set(u.and(Up)).toStmt());const{target:l,name:h}=zp(t,r),d=Kp(l,h);n.push(ot(new Ze(yt(d).identical(Bp),c),t.sourceSpan))}),n.length>0){const e=[Up.set(yt(!0)).toDeclStmt(ae)];!this.component.isHost&&it(n).has(jp.name)&&e.push(jp.set(Lp.prop("component")).toDeclStmt(this.compType)),r=mt([new Oe(Lp.name,oe),new Oe(Bp.name,oe),new Oe(ms.event.name,oe)],[...e,...n,new Ke(Up)],oe)}else r=Be;return r}visitDirective(e,t){}visitDirectiveProperty(e,t){}visitReference(e,t){}visitVariable(e,t){}visitEvent(e,t){}visitElementProperty(e,t){}visitAttr(e,t){}}function $p(e,t){return t.length>10?Vp.callFn([Lp,yt(e),yt(1),pt(t)]):Vp.callFn([Lp,yt(e),yt(0),...t])}function Hp(e,t,n){return lt(Qt.unwrapValue).callFn([Lp,yt(e),yt(t),n])}function zp(e,t){return e.isAnimation?{name:`@${e.name}.${e.phase}`,target:t&&t.directive.isComponent?"component":null}:e}function Wp(e,t,n){let r=0;return!n||!e.staticQueryIds.has(t)&&e.dynamicQueryIds.has(t)?r|=536870912:r|=268435456,r}function Kp(e,t){return e?`${e}:${t}`:t}const Qp="useValue";new Set([Qp,"useFactory","data","id","loadChildren"]);class Gp{static build(){const e=new Map;return{define:function(t,n){return e.set(t,n),this},done:function(){return e.size>0?new Xp(e):Gp.empty}}}}Gp.missing={},Gp.empty={resolve:e=>Gp.missing};class Xp extends Gp{constructor(e){super(),this.bindings=e}resolve(e){return this.bindings.has(e)?this.bindings.get(e):Gp.missing}}class Yp{}class Zp{constructor(){this._summaries=new Map}isLibraryFile(){return!1}toSummaryFileName(e){return e}fromSummaryFileName(e){return e}resolveSummary(e){return this._summaries.get(e)||null}getSymbolsOf(){return[]}getImportAs(e){return e}getKnownModuleName(e){return null}addSummary(e){this._summaries.set(e.symbol,e)}}function Jp(e,t,n,r,i){const s=r.createChildWihtLocalVars();for(let a=0;a<e.length;a++)s.vars.set(e[a],t[a]);const o=i.visitAllStatements(n,s);return o?o.value:null}class ef{constructor(e,t,n,r){this.parent=e,this.instance=t,this.className=n,this.vars=r,this.exports=[]}createChildWihtLocalVars(){return new ef(this,this.instance,this.className,new Map)}}class tf{constructor(e){this.value=e}}class nf{constructor(e){this.reflector=e}debugAst(e){return function(e){const t=new Xd,n=wi.createRoot();return(Array.isArray(e)?e:[e]).forEach(e=>{if(e instanceof $e)e.visitStatement(t,n);else if(e instanceof me)e.visitExpression(t,n);else{if(!(e instanceof ee))throw new Error(`Don't know how to print debug info for ${e}`);e.visitType(t,n)}}),n.toSource()}(e)}visitDeclareVarStmt(e,t){const n=e.value?e.value.visitExpression(this,t):void 0;return t.vars.set(e.name,n),e.hasModifier(qe.Exported)&&t.exports.push(e.name),null}visitWriteVarExpr(e,t){const n=e.value.visitExpression(this,t);let r=t;for(;null!=r;){if(r.vars.has(e.name))return r.vars.set(e.name,n),n;r=r.parent}throw new Error(`Not declared variable ${e.name}`)}visitWrappedNodeExpr(e,t){throw new Error("Cannot interpret a WrappedNodeExpr.")}visitTypeofExpr(e,t){throw new Error("Cannot interpret a TypeofExpr")}visitReadVarExpr(e,t){let n=e.name;if(null!=e.builtin)switch(e.builtin){case he.Super:return t.instance.__proto__;case he.This:return t.instance;case he.CatchError:n=sf;break;case he.CatchStack:n=of;break;default:throw new Error(`Unknown builtin variable ${e.builtin}`)}let r=t;for(;null!=r;){if(r.vars.has(n))return r.vars.get(n);r=r.parent}throw new Error(`Not declared variable ${n}`)}visitWriteKeyExpr(e,t){const n=e.receiver.visitExpression(this,t),r=e.index.visitExpression(this,t),i=e.value.visitExpression(this,t);return n[r]=i,i}visitWritePropExpr(e,t){const n=e.receiver.visitExpression(this,t),r=e.value.visitExpression(this,t);return n[e.name]=r,r}visitInvokeMethodExpr(e,t){const n=e.receiver.visitExpression(this,t),r=this.visitAllExpressions(e.args,t);let i;if(null!=e.builtin)switch(e.builtin){case de.ConcatArray:i=n.concat(...r);break;case de.SubscribeObservable:i=n.subscribe({next:r[0]});break;case de.Bind:i=n.bind(...r);break;default:throw new Error(`Unknown builtin method ${e.builtin}`)}else i=n[e.name].apply(n,r);return i}visitInvokeFunctionExpr(e,t){const n=this.visitAllExpressions(e.args,t),r=e.fn;if(r instanceof ge&&r.builtin===he.Super)return t.instance.constructor.prototype.constructor.apply(t.instance,n),null;return e.fn.visitExpression(this,t).apply(null,n)}visitReturnStmt(e,t){return new tf(e.value.visitExpression(this,t))}visitDeclareClassStmt(e,t){const n=function(e,t,n){const r={};e.getters.forEach(i=>{r[i.name]={configurable:!1,get:function(){const r=new ef(t,this,e.name,t.vars);return Jp([],[],i.body,r,n)}}}),e.methods.forEach(function(i){const s=i.params.map(e=>e.name);r[i.name]={writable:!1,configurable:!1,value:function(...r){const o=new ef(t,this,e.name,t.vars);return Jp(s,r,i.body,o,n)}}});const i=e.constructorMethod.params.map(e=>e.name),s=function(...r){const s=new ef(t,this,e.name,t.vars);e.fields.forEach(e=>{this[e.name]=void 0}),Jp(i,r,e.constructorMethod.body,s,n)},o=e.parent?e.parent.visitExpression(n,t):Object;return s.prototype=Object.create(o.prototype,r),s}(e,t,this);return t.vars.set(e.name,n),e.hasModifier(qe.Exported)&&t.exports.push(e.name),null}visitExpressionStmt(e,t){return e.expr.visitExpression(this,t)}visitIfStmt(e,t){return e.condition.visitExpression(this,t)?this.visitAllStatements(e.trueCase,t):null!=e.falseCase?this.visitAllStatements(e.falseCase,t):null}visitTryCatchStmt(e,t){try{return this.visitAllStatements(e.bodyStmts,t)}catch(n){const r=t.createChildWihtLocalVars();return r.vars.set(sf,n),r.vars.set(of,n.stack),this.visitAllStatements(e.catchStmts,r)}}visitThrowStmt(e,t){throw e.error.visitExpression(this,t)}visitCommentStmt(e,t){return null}visitJSDocCommentStmt(e,t){return null}visitInstantiateExpr(e,t){const n=this.visitAllExpressions(e.args,t);return new(e.classExpr.visitExpression(this,t))(...n)}visitLiteralExpr(e,t){return e.value}visitExternalExpr(e,t){return this.reflector.resolveExternalReference(e.value)}visitConditionalExpr(e,t){return e.condition.visitExpression(this,t)?e.trueCase.visitExpression(this,t):null!=e.falseCase?e.falseCase.visitExpression(this,t):null}visitNotExpr(e,t){return!e.condition.visitExpression(this,t)}visitAssertNotNullExpr(e,t){return e.condition.visitExpression(this,t)}visitCastExpr(e,t){return e.value.visitExpression(this,t)}visitFunctionExpr(e,t){return rf(e.params.map(e=>e.name),e.statements,t,this)}visitDeclareFunctionStmt(e,t){const n=e.params.map(e=>e.name);return t.vars.set(e.name,rf(n,e.statements,t,this)),e.hasModifier(qe.Exported)&&t.exports.push(e.name),null}visitBinaryOperatorExpr(e,t){const n=()=>e.lhs.visitExpression(this,t),r=()=>e.rhs.visitExpression(this,t);switch(e.operator){case le.Equals:return n()==r();case le.Identical:return n()===r();case le.NotEquals:return n()!=r();case le.NotIdentical:return n()!==r();case le.And:return n()&&r();case le.Or:return n()||r();case le.Plus:return n()+r();case le.Minus:return n()-r();case le.Divide:return n()/r();case le.Multiply:return n()*r();case le.Modulo:return n()%r();case le.Lower:return n()<r();case le.LowerEquals:return n()<=r();case le.Bigger:return n()>r();case le.BiggerEquals:return n()>=r();default:throw new Error(`Unknown operator ${e.operator}`)}}visitReadPropExpr(e,t){let n;return n=e.receiver.visitExpression(this,t)[e.name]}visitReadKeyExpr(e,t){return e.receiver.visitExpression(this,t)[e.index.visitExpression(this,t)]}visitLiteralArrayExpr(e,t){return this.visitAllExpressions(e.entries,t)}visitLiteralMapExpr(e,t){const n={};return e.entries.forEach(e=>n[e.key]=e.value.visitExpression(this,t)),n}visitCommaExpr(e,t){const n=this.visitAllExpressions(e.parts,t);return n[n.length-1]}visitAllExpressions(e,t){return e.map(e=>e.visitExpression(this,t))}visitAllStatements(e,t){for(let n=0;n<e.length;n++){const r=e[n].visitStatement(this,t);if(r instanceof tf)return r}return null}}function rf(e,t,n,r){return(...i)=>Jp(e,i,t,n,r)}const sf="error",of="stack";class af{constructor(e,t,n,r,i,s,o,a,u,c){this._metadataResolver=e,this._templateParser=t,this._styleCompiler=n,this._viewCompiler=r,this._ngModuleCompiler=i,this._summaryResolver=s,this._reflector=o,this._compilerConfig=a,this._console=u,this.getExtraNgModuleProviders=c,this._compiledTemplateCache=new Map,this._compiledHostTemplateCache=new Map,this._compiledDirectiveWrapperCache=new Map,this._compiledNgModuleCache=new Map,this._sharedStylesheetCount=0,this._addedAotSummaries=new Set}compileModuleSync(e){return xt.assertSync(this._compileModuleAndComponents(e,!0))}compileModuleAsync(e){return Promise.resolve(this._compileModuleAndComponents(e,!1))}compileModuleAndAllComponentsSync(e){return xt.assertSync(this._compileModuleAndAllComponents(e,!0))}compileModuleAndAllComponentsAsync(e){return Promise.resolve(this._compileModuleAndAllComponents(e,!1))}getComponentFactory(e){return this._metadataResolver.getDirectiveSummary(e).componentFactory}loadAotSummaries(e){this.clearCache(),this._addAotSummaries(e)}_addAotSummaries(e){if(this._addedAotSummaries.has(e))return;this._addedAotSummaries.add(e);const t=e();for(let n=0;n<t.length;n++){const e=t[n];if("function"==typeof e)this._addAotSummaries(e);else{const t=e;this._summaryResolver.addSummary({symbol:t.type.reference,metadata:null,type:t})}}}hasAotSummary(e){return!!this._summaryResolver.resolveSummary(e)}_filterJitIdentifiers(e){return e.map(e=>e.reference).filter(e=>!this.hasAotSummary(e))}_compileModuleAndComponents(e,t){return xt.then(this._loadModules(e,t),()=>(this._compileComponents(e,null),this._compileModule(e)))}_compileModuleAndAllComponents(e,t){return xt.then(this._loadModules(e,t),()=>{const t=[];return this._compileComponents(e,t),{ngModuleFactory:this._compileModule(e),componentFactories:t}})}_loadModules(e,t){const n=[],r=this._metadataResolver.getNgModuleMetadata(e);return this._filterJitIdentifiers(r.transitiveModule.modules).forEach(e=>{const r=this._metadataResolver.getNgModuleMetadata(e);this._filterJitIdentifiers(r.declaredDirectives).forEach(e=>{const i=this._metadataResolver.loadDirectiveMetadata(r.type.reference,e,t);i&&n.push(i)}),this._filterJitIdentifiers(r.declaredPipes).forEach(e=>this._metadataResolver.getOrLoadPipeMetadata(e))}),xt.all(n)}_compileModule(e){let t=this._compiledNgModuleCache.get(e);if(!t){const n=this._metadataResolver.getNgModuleMetadata(e),r=this.getExtraNgModuleProviders(n.type.reference),i=lf(),s=this._ngModuleCompiler.compile(i,n,r);t=this._interpretOrJit(function(e){return bn(`${nn(e.type)}/module.ngfactory.js`)}(n),i.statements)[s.ngModuleFactoryVar],this._compiledNgModuleCache.set(n.type.reference,t)}return t}_compileComponents(e,t){const n=this._metadataResolver.getNgModuleMetadata(e),r=new Map,i=new Set,s=this._filterJitIdentifiers(n.transitiveModule.modules);s.forEach(e=>{const n=this._metadataResolver.getNgModuleMetadata(e);this._filterJitIdentifiers(n.declaredDirectives).forEach(e=>{r.set(e,n);const s=this._metadataResolver.getDirectiveMetadata(e);if(s.isComponent&&(i.add(this._createCompiledTemplate(s,n)),t)){const e=this._createCompiledHostTemplate(s.type.reference,n);i.add(e),t.push(s.componentFactory)}})}),s.forEach(e=>{const t=this._metadataResolver.getNgModuleMetadata(e);this._filterJitIdentifiers(t.declaredDirectives).forEach(e=>{const t=this._metadataResolver.getDirectiveMetadata(e);t.isComponent&&t.entryComponents.forEach(e=>{const t=r.get(e.componentType);i.add(this._createCompiledHostTemplate(e.componentType,t))})}),t.entryComponents.forEach(e=>{if(!this.hasAotSummary(e.componentType)){const t=r.get(e.componentType);i.add(this._createCompiledHostTemplate(e.componentType,t))}})}),i.forEach(e=>this._compileTemplate(e))}clearCacheFor(e){this._compiledNgModuleCache.delete(e),this._metadataResolver.clearCacheFor(e),this._compiledHostTemplateCache.delete(e),this._compiledTemplateCache.get(e)&&this._compiledTemplateCache.delete(e)}clearCache(){this._metadataResolver.clearCache(),this._compiledTemplateCache.clear(),this._compiledHostTemplateCache.clear(),this._compiledNgModuleCache.clear()}_createCompiledHostTemplate(e,t){if(!t)throw new Error(`Component ${Mt(e)} is not part of any NgModule or the module has not been imported into your module.`);let n=this._compiledHostTemplateCache.get(e);if(!n){const r=this._metadataResolver.getDirectiveMetadata(e);cf(r);const i=this._metadataResolver.getHostComponentMetadata(r,r.componentFactory.viewDefFactory);n=new uf(!0,r.type,i,t,[r.type]),this._compiledHostTemplateCache.set(e,n)}return n}_createCompiledTemplate(e,t){let n=this._compiledTemplateCache.get(e.type.reference);return n||(cf(e),n=new uf(!1,e.type,e,t,t.transitiveModule.directives),this._compiledTemplateCache.set(e.type.reference,n)),n}_compileTemplate(e){if(e.isCompiled)return;const t=e.compMeta,n=new Map,r=lf(),i=this._styleCompiler.compileComponent(r,t);t.template.externalStylesheets.forEach(e=>{const r=this._styleCompiler.compileStyles(lf(),t,e);n.set(e.moduleUrl,r)}),this._resolveStylesCompileResult(i,n);e.ngModule.transitiveModule.pipes.map(e=>this._metadataResolver.getPipeSummary(e.reference));const{template:s,pipes:o}=this._parseTemplate(t,e.ngModule,e.directives),a=this._viewCompiler.compileComponent(r,t,s,ct(i.stylesVar),o),u=this._interpretOrJit(function(e,t){return bn(`${nn(e)}/${nn(t.type)}.ngfactory.js`)}(e.ngModule.type,e.compMeta),r.statements),c=u[a.viewClassVar],l=u[a.rendererTypeVar];e.compiled(c,l)}_parseTemplate(e,t,n){const r=e.template.preserveWhitespaces,i=n.map(e=>this._metadataResolver.getDirectiveSummary(e.reference)),s=t.transitiveModule.pipes.map(e=>this._metadataResolver.getPipeSummary(e.reference));return this._templateParser.parse(e,e.template.htmlAst,i,s,t.schemas,wn(t.type,e,e.template),r)}_resolveStylesCompileResult(e,t){e.dependencies.forEach((e,n)=>{const r=t.get(e.moduleUrl),i=this._resolveAndEvalStylesCompileResult(r,t);e.setValue(i)})}_resolveAndEvalStylesCompileResult(e,t){return this._resolveStylesCompileResult(e,t),this._interpretOrJit(function(e,t){const n=e.moduleUrl.split(/\/\\/g);return bn(`css/${t}${n[n.length-1]}.ngstyle.js`)}(e.meta,this._sharedStylesheetCount++),e.outputCtx.statements)[e.stylesVar]}_interpretOrJit(e,t){return this._compilerConfig.useJit?xi(e,t,this._reflector,this._compilerConfig.jitDevMode):function(e,t){const n=new ef(null,null,null,new Map);new nf(t).visitAllStatements(e,n);const r={};return n.exports.forEach(e=>{r[e]=n.vars.get(e)}),r}(t,this._reflector)}}class uf{constructor(e,t,n,r,i){this.isHost=e,this.compType=t,this.compMeta=n,this.ngModule=r,this.directives=i,this._viewClass=null,this.isCompiled=!1}compiled(e,t){this._viewClass=e,this.compMeta.componentViewType.setDelegate(e);for(let n in t)this.compMeta.rendererType[n]=t[n];this.isCompiled=!0}}function cf(e){if(!e.isComponent)throw new Error(`Could not compile '${nn(e.type)}' because it is not a component.`)}function lf(){return{statements:[],genFilePath:"",importExpr:e=>lt({name:nn(e),moduleName:null,runtime:e}),constantPool:new $t}}class hf{}const df=class{constructor(e=null){this._packagePrefix=e}resolve(e,t){let n=t;null!=e&&e.length>0&&(n=function(e,t){const n=mf(encodeURI(t)),r=mf(e);if(null!=n[ff.Scheme])return gf(n);n[ff.Scheme]=r[ff.Scheme];for(let o=ff.Scheme;o<=ff.Port;o++)null==n[o]&&(n[o]=r[o]);if("/"==n[ff.Path][0])return gf(n);let i=r[ff.Path];null==i&&(i="/");const s=i.lastIndexOf("/");return i=i.substring(0,s+1)+n[ff.Path],n[ff.Path]=i,gf(n)}(e,n));const r=mf(n);let i=this._packagePrefix;if(null!=i&&null!=r&&"package"==r[ff.Scheme]){let e=r[ff.Path];return`${i=i.replace(/\/+$/,"")}/${e=e.replace(/^\/+/,"")}`}return n}};const pf=new RegExp("^(?:([^:/?#.]+):)?(?://(?:([^/?#]*)@)?([\\w\\d\\-\\u0100-\\uffff.%]*)(?::([0-9]+))?)?([^?#]+)?(?:\\?([^#]*))?(?:#(.*))?$");var ff;function mf(e){return e.match(pf)}function gf(e){let t=e[ff.Path];return t=null==t?"":function(e){if("/"==e)return"/";const t="/"==e[0]?"/":"",n="/"===e[e.length-1]?"/":"",r=e.split("/"),i=[];let s=0;for(let o=0;o<r.length;o++){const e=r[o];switch(e){case"":case".":break;case"..":i.length>0?i.pop():s++;break;default:i.push(e)}}if(""==t){for(;s-- >0;)i.unshift("..");0===i.length&&i.push(".")}return t+i.join("/")+n}(t),e[ff.Path]=t,function(e,t,n,r,i,s,o){const a=[];return null!=e&&a.push(e+":"),null!=n&&(a.push("//"),null!=t&&a.push(t+"@"),a.push(n),null!=r&&a.push(":"+r)),null!=i&&a.push(i),null!=s&&a.push("?"+s),null!=o&&a.push("#"+o),a.join("")}(e[ff.Scheme],e[ff.UserInfo],e[ff.Domain],e[ff.Port],t,e[ff.QueryData],e[ff.Fragment])}!function(e){e[e.Scheme=1]="Scheme",e[e.UserInfo=2]="UserInfo",e[e.Domain=3]="Domain",e[e.Port=4]="Port",e[e.Path=5]="Path",e[e.QueryData=6]="QueryData",e[e.Fragment=7]="Fragment"}(ff||(ff={}));class yf{get(e){return""}}!function(e){(e.ng||(e.ng={})).\u0275compilerFacade=new Rl}(jt);var vf=n("SVse");let _f=null;function bf(){return _f}class wf{constructor(){this.resourceLoaderType=null}get attrToPropMap(){return this._attrToPropMap}set attrToPropMap(e){this._attrToPropMap=e}}class Ef extends wf{constructor(){super(),this._animationPrefix=null,this._transitionEnd=null;try{const t=this.createElement("div",document);if(null!=this.getStyle(t,"animationName"))this._animationPrefix="";else{const e=["Webkit","Moz","O","ms"];for(let n=0;n<e.length;n++)if(null!=this.getStyle(t,e[n]+"AnimationName")){this._animationPrefix="-"+e[n].toLowerCase()+"-";break}}const n={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};Object.keys(n).forEach(e=>{null!=this.getStyle(t,e)&&(this._transitionEnd=n[e])})}catch(e){this._animationPrefix=null,this._transitionEnd=null}}getDistributedNodes(e){return e.getDistributedNodes()}resolveAndSetHref(e,t,n){e.href=null==n?t:t+"/../"+n}supportsDOMEvents(){return!0}supportsNativeShadowDOM(){return"function"==typeof document.body.createShadowRoot}getAnimationPrefix(){return this._animationPrefix?this._animationPrefix:""}getTransitionEnd(){return this._transitionEnd?this._transitionEnd:""}supportsAnimation(){return null!=this._animationPrefix&&null!=this._transitionEnd}}const Cf={class:"className",innerHtml:"innerHTML",readonly:"readOnly",tabindex:"tabIndex"},Sf=3,Tf={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},xf={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"};let Af;i.Kb.Node&&(Af=i.Kb.Node.prototype.contains||function(e){return!!(16&this.compareDocumentPosition(e))});class Df extends Ef{parse(e){throw new Error("parse not implemented")}static makeCurrent(){var e;e=new Df,_f||(_f=e)}hasProperty(e,t){return t in e}setProperty(e,t,n){e[t]=n}getProperty(e,t){return e[t]}invoke(e,t,n){e[t](...n)}logError(e){window.console&&(console.error?console.error(e):console.log(e))}log(e){window.console&&window.console.log&&window.console.log(e)}logGroup(e){window.console&&window.console.group&&window.console.group(e)}logGroupEnd(){window.console&&window.console.groupEnd&&window.console.groupEnd()}get attrToPropMap(){return Cf}contains(e,t){return Af.call(e,t)}querySelector(e,t){return e.querySelector(t)}querySelectorAll(e,t){return e.querySelectorAll(t)}on(e,t,n){e.addEventListener(t,n,!1)}onAndCancel(e,t,n){return e.addEventListener(t,n,!1),()=>{e.removeEventListener(t,n,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}createMouseEvent(e){const t=this.getDefaultDocument().createEvent("MouseEvent");return t.initEvent(e,!0,!0),t}createEvent(e){const t=this.getDefaultDocument().createEvent("Event");return t.initEvent(e,!0,!0),t}preventDefault(e){e.preventDefault(),e.returnValue=!1}isPrevented(e){return e.defaultPrevented||null!=e.returnValue&&!e.returnValue}getInnerHTML(e){return e.innerHTML}getTemplateContent(e){return"content"in e&&this.isTemplateElement(e)?e.content:null}getOuterHTML(e){return e.outerHTML}nodeName(e){return e.nodeName}nodeValue(e){return e.nodeValue}type(e){return e.type}content(e){return this.hasProperty(e,"content")?e.content:e}firstChild(e){return e.firstChild}nextSibling(e){return e.nextSibling}parentElement(e){return e.parentNode}childNodes(e){return e.childNodes}childNodesAsList(e){const t=e.childNodes,n=new Array(t.length);for(let r=0;r<t.length;r++)n[r]=t[r];return n}clearNodes(e){for(;e.firstChild;)e.removeChild(e.firstChild)}appendChild(e,t){e.appendChild(t)}removeChild(e,t){e.removeChild(t)}replaceChild(e,t,n){e.replaceChild(t,n)}remove(e){return e.parentNode&&e.parentNode.removeChild(e),e}insertBefore(e,t,n){e.insertBefore(n,t)}insertAllBefore(e,t,n){n.forEach(n=>e.insertBefore(n,t))}insertAfter(e,t,n){e.insertBefore(n,t.nextSibling)}setInnerHTML(e,t){e.innerHTML=t}getText(e){return e.textContent}setText(e,t){e.textContent=t}getValue(e){return e.value}setValue(e,t){e.value=t}getChecked(e){return e.checked}setChecked(e,t){e.checked=t}createComment(e){return this.getDefaultDocument().createComment(e)}createTemplate(e){const t=this.getDefaultDocument().createElement("template");return t.innerHTML=e,t}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createElementNS(e,t,n){return(n=n||this.getDefaultDocument()).createElementNS(e,t)}createTextNode(e,t){return(t=t||this.getDefaultDocument()).createTextNode(e)}createScriptTag(e,t,n){const r=(n=n||this.getDefaultDocument()).createElement("SCRIPT");return r.setAttribute(e,t),r}createStyleElement(e,t){const n=(t=t||this.getDefaultDocument()).createElement("style");return this.appendChild(n,this.createTextNode(e,t)),n}createShadowRoot(e){return e.createShadowRoot()}getShadowRoot(e){return e.shadowRoot}getHost(e){return e.host}clone(e){return e.cloneNode(!0)}getElementsByClassName(e,t){return e.getElementsByClassName(t)}getElementsByTagName(e,t){return e.getElementsByTagName(t)}classList(e){return Array.prototype.slice.call(e.classList,0)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}hasClass(e,t){return e.classList.contains(t)}setStyle(e,t,n){e.style[t]=n}removeStyle(e,t){e.style[t]=""}getStyle(e,t){return e.style[t]}hasStyle(e,t,n){const r=this.getStyle(e,t)||"";return n?r==n:r.length>0}tagName(e){return e.tagName}attributeMap(e){const t=new Map,n=e.attributes;for(let r=0;r<n.length;r++){const e=n.item(r);t.set(e.name,e.value)}return t}hasAttribute(e,t){return e.hasAttribute(t)}hasAttributeNS(e,t,n){return e.hasAttributeNS(t,n)}getAttribute(e,t){return e.getAttribute(t)}getAttributeNS(e,t,n){return e.getAttributeNS(t,n)}setAttribute(e,t,n){e.setAttribute(t,n)}setAttributeNS(e,t,n,r){e.setAttributeNS(t,n,r)}removeAttribute(e,t){e.removeAttribute(t)}removeAttributeNS(e,t,n){e.removeAttributeNS(t,n)}templateAwareRoot(e){return this.isTemplateElement(e)?this.content(e):e}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}getBoundingClientRect(e){try{return e.getBoundingClientRect()}catch(t){return{top:0,bottom:0,left:0,right:0,width:0,height:0}}}getTitle(e){return e.title}setTitle(e,t){e.title=t||""}elementMatches(e,t){return!!this.isElementNode(e)&&(e.matches&&e.matches(t)||e.msMatchesSelector&&e.msMatchesSelector(t)||e.webkitMatchesSelector&&e.webkitMatchesSelector(t))}isTemplateElement(e){return this.isElementNode(e)&&"TEMPLATE"===e.nodeName}isTextNode(e){return e.nodeType===Node.TEXT_NODE}isCommentNode(e){return e.nodeType===Node.COMMENT_NODE}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}hasShadowRoot(e){return null!=e.shadowRoot&&e instanceof HTMLElement}isShadowRoot(e){return e instanceof DocumentFragment}importIntoDoc(e){return document.importNode(this.templateAwareRoot(e),!0)}adoptNode(e){return document.adoptNode(e)}getHref(e){return e.getAttribute("href")}getEventKey(e){let t=e.key;if(null==t){if(null==(t=e.keyIdentifier))return"Unidentified";t.startsWith("U+")&&(t=String.fromCharCode(parseInt(t.substring(2),16)),e.location===Sf&&xf.hasOwnProperty(t)&&(t=xf[t]))}return Tf[t]||t}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getHistory(){return window.history}getLocation(){return window.location}getBaseHref(e){const t=function(){if(!Nf&&!(Nf=document.querySelector("base")))return null;return Nf.getAttribute("href")}();return null==t?null:function(e){If||(If=document.createElement("a"));return If.setAttribute("href",e),"/"===If.pathname.charAt(0)?If.pathname:"/"+If.pathname}(t)}resetBaseElement(){Nf=null}getUserAgent(){return window.navigator.userAgent}setData(e,t,n){this.setAttribute(e,"data-"+t,n)}getData(e,t){return this.getAttribute(e,"data-"+t)}getComputedStyle(e){return getComputedStyle(e)}supportsWebAnimation(){return"function"==typeof Element.prototype.animate}performanceNow(){return window.performance&&window.performance.now?window.performance.now():(new Date).getTime()}supportsCookies(){return!0}getCookie(e){return Object(vf.n)(document.cookie,e)}setCookie(e,t){document.cookie=encodeURIComponent(e)+"="+encodeURIComponent(t)}}let If,Nf=null;const Of=vf.c;function kf(){return!!window.history.pushState}class Pf extends vf.i{constructor(e){super(),this._doc=e,this._init()}_init(){this.location=bf().getLocation(),this._history=bf().getHistory()}getBaseHrefFromDOM(){return bf().getBaseHref(this._doc)}onPopState(e){bf().getGlobalEventTarget(this._doc,"window").addEventListener("popstate",e,!1)}onHashChange(e){bf().getGlobalEventTarget(this._doc,"window").addEventListener("hashchange",e,!1)}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(e){this.location.pathname=e}pushState(e,t,n){kf()?this._history.pushState(e,t,n):this.location.hash=n}replaceState(e,t,n){kf()?this._history.replaceState(e,t,n):this.location.hash=n}forward(){this._history.forward()}back(){this._history.back()}}Pf.decorators=[{type:i.A}],Pf.ctorParameters=(()=>[{type:void 0,decorators:[{type:i.z,args:[Of]}]}]);const Mf=new i.B("TRANSITION_ID");const Rf=[{provide:i.d,useFactory:function(e,t,n){return()=>{n.get(i.e).donePromise.then(()=>{const n=bf();Array.prototype.slice.apply(n.querySelectorAll(t,"style[ng-transition]")).filter(t=>n.getAttribute(t,"ng-transition")===e).forEach(e=>n.remove(e))})}},deps:[Mf,Of,i.C],multi:!0}];class Ff{static init(){Object(i.ub)(new Ff)}addToWindow(e){i.Kb.getAngularTestability=((t,n=!0)=>{const r=e.findTestabilityInTree(t,n);if(null==r)throw new Error("Could not find testability for element.");return r}),i.Kb.getAllAngularTestabilities=(()=>e.getAllTestabilities()),i.Kb.getAllAngularRootElements=(()=>e.getAllRootElements());i.Kb.frameworkStabilizers||(i.Kb.frameworkStabilizers=[]),i.Kb.frameworkStabilizers.push(e=>{const t=i.Kb.getAllAngularTestabilities();let n=t.length,r=!1;const s=function(t){r=r||t,0==--n&&e(r)};t.forEach(function(e){e.whenStable(s)})})}findTestabilityInTree(e,t,n){if(null==t)return null;const r=e.getTestability(t);return null!=r?r:n?bf().isShadowRoot(t)?this.findTestabilityInTree(e,bf().getHost(t),!0):this.findTestabilityInTree(e,bf().parentElement(t),!0):null}}function Lf(e,t){if("undefined"==typeof COMPILED||!COMPILED){(i.Kb.ng=i.Kb.ng||{})[e]=t}}const Vf={ApplicationRef:i.g,NgZone:i.N},jf="probe",Bf="coreTokens";function Uf(e){return Object(i.qb)(e)}const qf=[{provide:i.d,useFactory:function(e){return Lf(jf,Uf),Lf(Bf,Object.assign({},Vf,(e||[]).reduce((e,t)=>(e[t.name]=t.token,e),{}))),()=>Uf},deps:[[i.M,new i.O]],multi:!0}],$f=new i.B("EventManagerPlugins");class Hf{constructor(e,t){this._zone=t,this._eventNameToPlugin=new Map,e.forEach(e=>e.manager=this),this._plugins=e.slice().reverse()}addEventListener(e,t,n){return this._findPluginFor(t).addEventListener(e,t,n)}addGlobalEventListener(e,t,n){return this._findPluginFor(t).addGlobalEventListener(e,t,n)}getZone(){return this._zone}_findPluginFor(e){const t=this._eventNameToPlugin.get(e);if(t)return t;const n=this._plugins;for(let r=0;r<n.length;r++){const t=n[r];if(t.supports(e))return this._eventNameToPlugin.set(e,t),t}throw new Error(`No event manager plugin found for event ${e}`)}}Hf.decorators=[{type:i.A}],Hf.ctorParameters=(()=>[{type:Array,decorators:[{type:i.z,args:[$f]}]},{type:i.N}]);class zf{constructor(e){this._doc=e}addGlobalEventListener(e,t,n){const r=bf().getGlobalEventTarget(this._doc,e);if(!r)throw new Error(`Unsupported event target ${r} for event ${t}`);return this.addEventListener(r,t,n)}}class Wf{constructor(){this._stylesSet=new Set}addStyles(e){const t=new Set;e.forEach(e=>{this._stylesSet.has(e)||(this._stylesSet.add(e),t.add(e))}),this.onStylesAdded(t)}onStylesAdded(e){}getAllStyles(){return Array.from(this._stylesSet)}}Wf.decorators=[{type:i.A}];class Kf extends Wf{constructor(e){super(),this._doc=e,this._hostNodes=new Set,this._styleNodes=new Set,this._hostNodes.add(e.head)}_addStylesToHost(e,t){e.forEach(e=>{const n=this._doc.createElement("style");n.textContent=e,this._styleNodes.add(t.appendChild(n))})}addHost(e){this._addStylesToHost(this._stylesSet,e),this._hostNodes.add(e)}removeHost(e){this._hostNodes.delete(e)}onStylesAdded(e){this._hostNodes.forEach(t=>this._addStylesToHost(e,t))}ngOnDestroy(){this._styleNodes.forEach(e=>bf().remove(e))}}Kf.decorators=[{type:i.A}],Kf.ctorParameters=(()=>[{type:void 0,decorators:[{type:i.z,args:[Of]}]}]);const Qf={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},Gf=/%COMP%/g,Xf="_nghost-%COMP%",Yf="_ngcontent-%COMP%";function Zf(e,t,n){for(let r=0;r<t.length;r++){let i=t[r];Array.isArray(i)?Zf(e,i,n):(i=i.replace(Gf,e),n.push(i))}return n}function Jf(e){return t=>{!1===e(t)&&(t.preventDefault(),t.returnValue=!1)}}class em{constructor(e,t){this.eventManager=e,this.sharedStylesHost=t,this.rendererByCompId=new Map,this.defaultRenderer=new tm(e)}createRenderer(e,t){if(!e||!t)return this.defaultRenderer;switch(t.encapsulation){case i.kb.Emulated:{let n=this.rendererByCompId.get(t.id);return n||(n=new im(this.eventManager,this.sharedStylesHost,t),this.rendererByCompId.set(t.id,n)),n.applyToHost(e),n}case i.kb.Native:case i.kb.ShadowDom:return new sm(this.eventManager,this.sharedStylesHost,e,t);default:if(!this.rendererByCompId.has(t.id)){const e=Zf(t.id,t.styles,[]);this.sharedStylesHost.addStyles(e),this.rendererByCompId.set(t.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}em.decorators=[{type:i.A}],em.ctorParameters=(()=>[{type:Hf},{type:Kf}]);class tm{constructor(e){this.eventManager=e,this.data=Object.create(null)}destroy(){}createElement(e,t){return t?document.createElementNS(Qf[t],e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){e.appendChild(t)}insertBefore(e,t,n){e&&e.insertBefore(t,n)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let n="string"==typeof e?document.querySelector(e):e;if(!n)throw new Error(`The selector "${e}" did not match any elements`);return t||(n.textContent=""),n}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,n,r){if(r){t=`${r}:${t}`;const i=Qf[r];i?e.setAttributeNS(i,t,n):e.setAttribute(t,n)}else e.setAttribute(t,n)}removeAttribute(e,t,n){if(n){const r=Qf[n];r?e.removeAttributeNS(r,t):e.removeAttribute(`${n}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,n,r){r&i.Y.DashCase?e.style.setProperty(t,n,r&i.Y.Important?"important":""):e.style[t]=n}removeStyle(e,t,n){n&i.Y.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,n){rm(t,"property"),e[t]=n}setValue(e,t){e.nodeValue=t}listen(e,t,n){return rm(t,"listener"),"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,Jf(n)):this.eventManager.addEventListener(e,t,Jf(n))}}const nm="@".charCodeAt(0);function rm(e,t){if(e.charCodeAt(0)===nm)throw new Error(`Found the synthetic ${t} ${e}. Please include either "BrowserAnimationsModule" or "NoopAnimationsModule" in your application.`)}class im extends tm{constructor(e,t,n){super(e),this.component=n;const r=Zf(n.id,n.styles,[]);var i;t.addStyles(r),this.contentAttr=(i=n.id,Yf.replace(Gf,i)),this.hostAttr=function(e){return Xf.replace(Gf,e)}(n.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const n=super.createElement(e,t);return super.setAttribute(n,this.contentAttr,""),n}}class sm extends tm{constructor(e,t,n,r){super(e),this.sharedStylesHost=t,this.hostEl=n,this.component=r,r.encapsulation===i.kb.ShadowDom?this.shadowRoot=n.attachShadow({mode:"open"}):this.shadowRoot=n.createShadowRoot(),this.sharedStylesHost.addHost(this.shadowRoot);const s=Zf(r.id,r.styles,[]);for(let i=0;i<s.length;i++){const e=document.createElement("style");e.textContent=s[i],this.shadowRoot.appendChild(e)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,n){return super.insertBefore(this.nodeOrShadowRoot(e),t,n)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}const om="undefined"!=typeof Zone&&Zone.__symbol__||function(e){return"__zone_symbol__"+e},am=om("addEventListener"),um=om("removeEventListener"),cm={},lm="FALSE",hm="ANGULAR",dm="addEventListener",pm="removeEventListener",fm="__zone_symbol__propagationStopped",mm="__zone_symbol__stopImmediatePropagation",gm="undefined"!=typeof Zone&&Zone[om("BLACK_LISTED_EVENTS")];let ym;gm&&(ym={},gm.forEach(e=>{ym[e]=e}));const vm=function(e){return!!ym&&ym.hasOwnProperty(e)},_m=function(e){const t=cm[e.type];if(!t)return;const n=this[t];if(!n)return;const r=[e];if(1===n.length){const e=n[0];return e.zone!==Zone.current?e.zone.run(e.handler,this,r):e.handler.apply(this,r)}{const t=n.slice();for(let n=0;n<t.length&&!0!==e[fm];n++){const e=t[n];e.zone!==Zone.current?e.zone.run(e.handler,this,r):e.handler.apply(this,r)}}};class bm extends zf{constructor(e,t,n){super(e),this.ngZone=t,n&&Object(vf.l)(n)||this.patchEvent()}patchEvent(){if("undefined"==typeof Event||!Event||!Event.prototype)return;if(Event.prototype[mm])return;const e=Event.prototype[mm]=Event.prototype.stopImmediatePropagation;Event.prototype.stopImmediatePropagation=function(){this&&(this[fm]=!0),e&&e.apply(this,arguments)}}supports(e){return!0}addEventListener(e,t,n){const r=e[am];let s=n;if(!r||i.N.isInAngularZone()&&!vm(t))e[dm](t,s,!1);else{let n=cm[t];n||(n=cm[t]=om(hm+t+lm));let r=e[n];const i=r&&r.length>0;r||(r=e[n]=[]);const o=vm(t)?Zone.root:Zone.current;if(0===r.length)r.push({zone:o,handler:s});else{let e=!1;for(let t=0;t<r.length;t++)if(r[t].handler===s){e=!0;break}e||r.push({zone:o,handler:s})}i||e[am](t,_m,!1)}return()=>this.removeEventListener(e,t,s)}removeEventListener(e,t,n){let r=e[um];if(!r)return e[pm].apply(e,[t,n,!1]);let i=cm[t],s=i&&e[i];if(!s)return e[pm].apply(e,[t,n,!1]);let o=!1;for(let a=0;a<s.length;a++)if(s[a].handler===n){o=!0,s.splice(a,1);break}o?0===s.length&&r.apply(e,[t,_m,!1]):e[pm].apply(e,[t,n,!1])}}bm.decorators=[{type:i.A}],bm.ctorParameters=(()=>[{type:void 0,decorators:[{type:i.z,args:[Of]}]},{type:i.N},{type:void 0,decorators:[{type:i.O},{type:i.z,args:[i.R]}]}]);const wm={pan:!0,panstart:!0,panmove:!0,panend:!0,pancancel:!0,panleft:!0,panright:!0,panup:!0,pandown:!0,pinch:!0,pinchstart:!0,pinchmove:!0,pinchend:!0,pinchcancel:!0,pinchin:!0,pinchout:!0,press:!0,pressup:!0,rotate:!0,rotatestart:!0,rotatemove:!0,rotateend:!0,rotatecancel:!0,swipe:!0,swipeleft:!0,swiperight:!0,swipeup:!0,swipedown:!0,tap:!0},Em=new i.B("HammerGestureConfig"),Cm=new i.B("HammerLoader");class Sm{constructor(){this.events=[],this.overrides={}}buildHammer(e){const t=new Hammer(e,this.options);t.get("pinch").set({enable:!0}),t.get("rotate").set({enable:!0});for(const n in this.overrides)t.get(n).set(this.overrides[n]);return t}}Sm.decorators=[{type:i.A}];class Tm extends zf{constructor(e,t,n,r){super(e),this._config=t,this.console=n,this.loader=r}supports(e){return!(!wm.hasOwnProperty(e.toLowerCase())&&!this.isCustomEvent(e))&&(!(!window.Hammer&&!this.loader)||(this.console.warn(`The "${e}" event cannot be bound because Hammer.JS is not `+"loaded and no custom loader has been specified."),!1))}addEventListener(e,t,n){const r=this.manager.getZone();if(t=t.toLowerCase(),!window.Hammer&&this.loader){let r=!1,i=()=>{r=!0};return this.loader().then(()=>{if(!window.Hammer)return this.console.warn("The custom HAMMER_LOADER completed, but Hammer.JS is not present."),void(i=(()=>{}));r||(i=this.addEventListener(e,t,n))}).catch(()=>{this.console.warn(`The "${t}" event cannot be bound because the custom `+"Hammer.JS loader failed."),i=(()=>{})}),()=>{i()}}return r.runOutsideAngular(()=>{const i=this._config.buildHammer(e),s=function(e){r.runGuarded(function(){n(e)})};return i.on(t,s),()=>{i.off(t,s),"function"==typeof i.destroy&&i.destroy()}})}isCustomEvent(e){return this._config.events.indexOf(e)>-1}}Tm.decorators=[{type:i.A}],Tm.ctorParameters=(()=>[{type:void 0,decorators:[{type:i.z,args:[Of]}]},{type:Sm,decorators:[{type:i.z,args:[Em]}]},{type:i.xb},{type:void 0,decorators:[{type:i.O},{type:i.z,args:[Cm]}]}]);const xm=["alt","control","meta","shift"],Am={alt:e=>e.altKey,control:e=>e.ctrlKey,meta:e=>e.metaKey,shift:e=>e.shiftKey};class Dm extends zf{constructor(e){super(e)}supports(e){return null!=Dm.parseEventName(e)}addEventListener(e,t,n){const r=Dm.parseEventName(t),i=Dm.eventCallback(r.fullKey,n,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>bf().onAndCancel(e,r.domEventName,i))}static parseEventName(e){const t=e.toLowerCase().split("."),n=t.shift();if(0===t.length||"keydown"!==n&&"keyup"!==n)return null;const r=Dm._normalizeKey(t.pop());let i="";if(xm.forEach(e=>{const n=t.indexOf(e);n>-1&&(t.splice(n,1),i+=e+".")}),i+=r,0!=t.length||0===r.length)return null;const s={};return s.domEventName=n,s.fullKey=i,s}static getEventFullKey(e){let t="",n=bf().getEventKey(e);return" "===(n=n.toLowerCase())?n="space":"."===n&&(n="dot"),xm.forEach(r=>{if(r!=n){(0,Am[r])(e)&&(t+=r+".")}}),t+=n}static eventCallback(e,t,n){return r=>{Dm.getEventFullKey(r)===e&&n.runGuarded(()=>t(r))}}static _normalizeKey(e){switch(e){case"esc":return"escape";default:return e}}}Dm.decorators=[{type:i.A}],Dm.ctorParameters=(()=>[{type:void 0,decorators:[{type:i.z,args:[Of]}]}]);class Im{}class Nm extends Im{constructor(e){super(),this._doc=e}sanitize(e,t){if(null==t)return null;switch(e){case i.ab.NONE:return t;case i.ab.HTML:return t instanceof km?t.changingThisBreaksApplicationSecurity:(this.checkNotSafeValue(t,"HTML"),Object(i.Bb)(this._doc,String(t)));case i.ab.STYLE:return t instanceof Pm?t.changingThisBreaksApplicationSecurity:(this.checkNotSafeValue(t,"Style"),Object(i.Cb)(t));case i.ab.SCRIPT:if(t instanceof Mm)return t.changingThisBreaksApplicationSecurity;throw this.checkNotSafeValue(t,"Script"),new Error("unsafe value used in a script context");case i.ab.URL:return t instanceof Fm||t instanceof Rm?t.changingThisBreaksApplicationSecurity:(this.checkNotSafeValue(t,"URL"),Object(i.Db)(String(t)));case i.ab.RESOURCE_URL:if(t instanceof Fm)return t.changingThisBreaksApplicationSecurity;throw this.checkNotSafeValue(t,"ResourceURL"),new Error("unsafe value used in a resource URL context (see http://g.co/ng/security#xss)");default:throw new Error(`Unexpected SecurityContext ${e} (see http://g.co/ng/security#xss)`)}}checkNotSafeValue(e,t){if(e instanceof Om)throw new Error(`Required a safe ${t}, got a ${e.getTypeName()} `+"(see http://g.co/ng/security#xss)")}bypassSecurityTrustHtml(e){return new km(e)}bypassSecurityTrustStyle(e){return new Pm(e)}bypassSecurityTrustScript(e){return new Mm(e)}bypassSecurityTrustUrl(e){return new Rm(e)}bypassSecurityTrustResourceUrl(e){return new Fm(e)}}Nm.decorators=[{type:i.A}],Nm.ctorParameters=(()=>[{type:void 0,decorators:[{type:i.z,args:[Of]}]}]);class Om{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity}`+" (see http://g.co/ng/security#xss)"}}class km extends Om{getTypeName(){return"HTML"}}class Pm extends Om{getTypeName(){return"Style"}}class Mm extends Om{getTypeName(){return"Script"}}class Rm extends Om{getTypeName(){return"URL"}}class Fm extends Om{getTypeName(){return"ResourceURL"}}const Lm=[{provide:i.R,useValue:vf.m},{provide:i.S,useValue:function(){Df.makeCurrent(),Ff.init()},multi:!0},{provide:vf.i,useClass:Pf,deps:[Of]},{provide:Of,useFactory:function(){return document},deps:[]}],Vm=[{provide:i.Z,useExisting:Im},{provide:Im,useClass:Nm,deps:[Of]}];Object(i.mb)(i.tb,"browser",Lm);const jm=[Vm,{provide:i.vb,useValue:!0},{provide:i.u,useFactory:function(){return new i.u},deps:[]},{provide:$f,useClass:bm,multi:!0,deps:[Of,i.N,i.R]},{provide:$f,useClass:Dm,multi:!0,deps:[Of]},{provide:$f,useClass:Tm,multi:!0,deps:[Of,Em,i.xb,[new i.O,Cm]]},{provide:Em,useClass:Sm,deps:[]},{provide:em,useClass:em,deps:[Hf,Kf]},{provide:i.X,useExisting:em},{provide:Wf,useExisting:Kf},{provide:Kf,useClass:Kf,deps:[Of]},{provide:i.hb,useClass:i.hb,deps:[i.N]},{provide:Hf,useClass:Hf,deps:[$f,i.N]},qf];class Bm{constructor(e){if(e)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(e){return{ngModule:Bm,providers:[{provide:i.c,useValue:e.appId},{provide:Mf,useExisting:i.c},Rf]}}}function Um(){return new qm(Object(i.rb)(Of))}Bm.decorators=[{type:i.I,args:[{providers:jm,exports:[vf.b,i.f]}]}],Bm.ctorParameters=(()=>[{type:void 0,decorators:[{type:i.O},{type:i.cb},{type:i.z,args:[Bm]}]}]);class qm{constructor(e){this._doc=e,this._dom=bf()}addTag(e,t=!1){return e?this._getOrCreateElement(e,t):null}addTags(e,t=!1){return e?e.reduce((e,n)=>(n&&e.push(this._getOrCreateElement(n,t)),e),[]):[]}getTag(e){return e&&this._dom.querySelector(this._doc,`meta[${e}]`)||null}getTags(e){if(!e)return[];const t=this._dom.querySelectorAll(this._doc,`meta[${e}]`);return t?[].slice.call(t):[]}updateTag(e,t){if(!e)return null;t=t||this._parseSelector(e);const n=this.getTag(t);return n?this._setMetaElementAttributes(e,n):this._getOrCreateElement(e,!0)}removeTag(e){this.removeTagElement(this.getTag(e))}removeTagElement(e){e&&this._dom.remove(e)}_getOrCreateElement(e,t=!1){if(!t){const t=this._parseSelector(e),n=this.getTag(t);if(n&&this._containsAttributes(e,n))return n}const n=this._dom.createElement("meta");this._setMetaElementAttributes(e,n);const r=this._dom.getElementsByTagName(this._doc,"head")[0];return this._dom.appendChild(r,n),n}_setMetaElementAttributes(e,t){return Object.keys(e).forEach(n=>this._dom.setAttribute(t,n,e[n])),t}_parseSelector(e){const t=e.name?"name":"property";return`${t}="${e[t]}"`}_containsAttributes(e,t){return Object.keys(e).every(n=>this._dom.getAttribute(t,n)===e[n])}}function $m(){return new Hm(Object(i.rb)(Of))}qm.decorators=[{type:i.A,args:[{providedIn:"root",useFactory:Um,deps:[]}]}],qm.ctorParameters=(()=>[{type:void 0,decorators:[{type:i.z,args:[Of]}]}]),qm.ngInjectableDef=Object(i.nb)({factory:Um,token:qm,providedIn:"root"});class Hm{constructor(e){this._doc=e}getTitle(){return bf().getTitle(this._doc)}setTitle(e){bf().setTitle(this._doc,e)}}Hm.decorators=[{type:i.A,args:[{providedIn:"root",useFactory:$m,deps:[]}]}],Hm.ctorParameters=(()=>[{type:void 0,decorators:[{type:i.z,args:[Of]}]}]),Hm.ngInjectableDef=Object(i.nb)({factory:$m,token:Hm,providedIn:"root"});"undefined"!=typeof window&&window;class zm{constructor(){this.store={},this.onSerializeCallbacks={}}static init(e){const t=new zm;return t.store=e,t}get(e,t){return void 0!==this.store[e]?this.store[e]:t}set(e,t){this.store[e]=t}remove(e){delete this.store[e]}hasKey(e){return this.store.hasOwnProperty(e)}onSerialize(e,t){this.onSerializeCallbacks[e]=t}toJson(){for(const t in this.onSerializeCallbacks)if(this.onSerializeCallbacks.hasOwnProperty(t))try{this.store[t]=this.onSerializeCallbacks[t]()}catch(e){console.warn("Exception in onSerialize callback: ",e)}return JSON.stringify(this.store)}}zm.decorators=[{type:i.A}];(class{}).decorators=[{type:i.I,args:[{providers:[{provide:zm,useFactory:function(e,t){const n=e.getElementById(t+"-state");let r={};if(n&&n.textContent)try{r=JSON.parse(function(e){const t={"&a;":"&","&q;":'"',"&s;":"'","&l;":"<","&g;":">"};return e.replace(/&[^;]+;/g,e=>t[e])}(n.textContent))}catch(i){console.warn("Exception while restoring TransferState for app "+t,i)}return zm.init(r)},deps:[Of,i.c]}]}]}];new i.ib("7.1.1");const Wm="",Km=function(){const e=new Map;return e.set(Qt.ANALYZE_FOR_ENTRY_COMPONENTS,i.a),e.set(Qt.ElementRef,i.t),e.set(Qt.NgModuleRef,i.L),e.set(Qt.ViewContainerRef,i.jb),e.set(Qt.ChangeDetectorRef,i.k),e.set(Qt.Renderer2,i.W),e.set(Qt.QueryList,i.U),e.set(Qt.TemplateRef,i.gb),e.set(Qt.CodegenComponentFactoryResolver,i.wb),e.set(Qt.ComponentFactoryResolver,i.p),e.set(Qt.ComponentFactory,i.o),e.set(Qt.ComponentRef,i.q),e.set(Qt.NgModuleFactory,i.J),e.set(Qt.createModuleFactory,i.Gb),e.set(Qt.moduleDef,i.Rb),e.set(Qt.moduleProviderDef,i.Sb),e.set(Qt.RegisterModuleFactoryFn,i.bc),e.set(Qt.Injector,i.C),e.set(Qt.ViewEncapsulation,i.kb),e.set(Qt.ChangeDetectionStrategy,i.j),e.set(Qt.SecurityContext,i.ab),e.set(Qt.LOCALE_ID,i.G),e.set(Qt.TRANSLATIONS_FORMAT,i.fb),e.set(Qt.inlineInterpolate,i.Lb),e.set(Qt.interpolate,i.Mb),e.set(Qt.EMPTY_ARRAY,i.yb),e.set(Qt.EMPTY_MAP,i.zb),e.set(Qt.Renderer,i.V),e.set(Qt.viewDef,i.fc),e.set(Qt.elementDef,i.Jb),e.set(Qt.anchorDef,i.Eb),e.set(Qt.textDef,i.dc),e.set(Qt.directiveDef,i.Ib),e.set(Qt.providerDef,i.Zb),e.set(Qt.queryDef,i.ac),e.set(Qt.pureArrayDef,i.Vb),e.set(Qt.pureObjectDef,i.Xb),e.set(Qt.purePipeDef,i.Yb),e.set(Qt.pipeDef,i.Wb),e.set(Qt.nodeValue,i.Ub),e.set(Qt.ngContentDef,i.Tb),e.set(Qt.unwrapValue,i.ec),e.set(Qt.createRendererType2,i.Hb),e.set(Qt.createComponentFactory,i.Fb),e}();const Qm=new i.B("ErrorCollector"),Gm={provide:i.Q,useValue:"/"},Xm={get(e){throw new Error(`No ResourceLoader implementation has been provided. Can't read the url "${e}"`)}},Ym=new i.B("HtmlParser");const Zm=[{provide:hf,useValue:new class{constructor(){this.reflectionCapabilities=new i.Ab}componentModuleUrl(e,t){const n=t.moduleId;if("string"==typeof n)return function(e){const t=mf(e);return t&&t[ff.Scheme]||""}(n)?n:`package:${n}${Wm}`;if(null!=n)throw Dt(`moduleId should be a string in "${Object(i.cc)(e)}". See https://goo.gl/wIDDiL for more information.\n`+"If you're using Webpack you should inline the template and the styles, see https://goo.gl/X2J8zc.");return`./${Object(i.cc)(e)}`}parameters(e){return this.reflectionCapabilities.parameters(e)}tryAnnotations(e){return this.annotations(e)}annotations(e){return this.reflectionCapabilities.annotations(e)}shallowAnnotations(e){throw new Error("Not supported in JIT mode")}propMetadata(e){return this.reflectionCapabilities.propMetadata(e)}hasLifecycleHook(e,t){return this.reflectionCapabilities.hasLifecycleHook(e,t)}guards(e){return this.reflectionCapabilities.guards(e)}resolveExternalReference(e){return Km.get(e)||e.runtime}}},{provide:yf,useValue:Xm},{provide:Zp,deps:[]},{provide:Yp,useExisting:Zp},{provide:i.xb,deps:[]},{provide:Aa,deps:[]},{provide:za,deps:[Aa]},{provide:Ym,useClass:wu,deps:[]},{provide:_d,useFactory:(e,t,n,r,s)=>{const o=(t=t||"")?r.missingTranslation:i.H.Ignore;return new _d(e,t,n,o,s)},deps:[Ym,[new i.O,new i.z(i.eb)],[new i.O,new i.z(i.fb)],[ph],[i.xb]]},{provide:wu,useExisting:_d},{provide:bp,deps:[ph,hf,za,Pu,_d,i.xb]},{provide:mh,deps:[yf,df,wu,ph]},{provide:Ad,deps:[ph,wu,Gd,vh,Yd,Yp,Pu,mh,i.xb,[i.O,Zt],hf,[i.O,Qm]]},Gm,{provide:_a,deps:[df]},{provide:Rp,deps:[hf]},{provide:Qd,deps:[hf]},{provide:ph,useValue:new ph},{provide:i.l,useClass:class{constructor(e,t,n,r,i,s,o,a,u,c){this._metadataResolver=t,this._delegate=new af(t,n,r,i,s,o,a,u,c,this.getExtraNgModuleProviders.bind(this)),this.injector=e}getExtraNgModuleProviders(){return[this._metadataResolver.getProviderMetadata(new vn(i.l,{useValue:this}))]}compileModuleSync(e){return this._delegate.compileModuleSync(e)}compileModuleAsync(e){return this._delegate.compileModuleAsync(e)}compileModuleAndAllComponentsSync(e){const t=this._delegate.compileModuleAndAllComponentsSync(e);return{ngModuleFactory:t.ngModuleFactory,componentFactories:t.componentFactories}}compileModuleAndAllComponentsAsync(e){return this._delegate.compileModuleAndAllComponentsAsync(e).then(e=>({ngModuleFactory:e.ngModuleFactory,componentFactories:e.componentFactories}))}loadAotSummaries(e){this._delegate.loadAotSummaries(e)}hasAotSummary(e){return this._delegate.hasAotSummary(e)}getComponentFactory(e){return this._delegate.getComponentFactory(e)}clearCache(){this._delegate.clearCache()}clearCacheFor(e){this._delegate.clearCacheFor(e)}getModuleId(e){const t=this._metadataResolver.getNgModuleMetadata(e);return t&&t.id||void 0}},deps:[i.C,Ad,bp,_a,Rp,Qd,Yp,hf,ph,i.xb]},{provide:Bu,deps:[]},{provide:Pu,useExisting:Bu},{provide:df,deps:[i.Q]},{provide:vh,deps:[hf]},{provide:Yd,deps:[hf]},{provide:Gd,deps:[hf]}];function Jm(e){for(let t=e.length-1;t>=0;t--)if(void 0!==e[t])return e[t]}const eg=Object(i.mb)(i.tb,"coreDynamic",[{provide:i.i,useValue:{},multi:!0},{provide:i.m,useClass:class{constructor(e){const t={useJit:!0,defaultEncapsulation:i.kb.Emulated,missingTranslation:i.H.Warning};this._defaultOptions=[t,...e]}createCompiler(e=[]){const t={useJit:Jm((n=this._defaultOptions.concat(e)).map(e=>e.useJit)),defaultEncapsulation:Jm(n.map(e=>e.defaultEncapsulation)),providers:function(e){const t=[];return e.forEach(e=>e&&t.push(...e)),t}(n.map(e=>e.providers)),missingTranslation:Jm(n.map(e=>e.missingTranslation)),preserveWhitespaces:Jm(n.map(e=>e.preserveWhitespaces))};var n;return i.C.create([Zm,{provide:ph,useFactory:()=>new ph({useJit:t.useJit,jitDevMode:Object(i.sb)(),defaultEncapsulation:t.defaultEncapsulation,missingTranslation:t.missingTranslation,preserveWhitespaces:t.preserveWhitespaces}),deps:[]},t.providers]).get(i.l)}},deps:[i.i]}]);class tg extends yf{get(e){let t,n;const r=new Promise((e,r)=>{t=e,n=r}),i=new XMLHttpRequest;return i.open("GET",e,!0),i.responseType="text",i.onload=function(){const r=i.response||i.responseText;let s=1223===i.status?204:i.status;0===s&&(s=r?200:0),200<=s&&s<=300?t(r):n(`Failed to load ${e}`)},i.onerror=function(){n(`Failed to load ${e}`)},i.send(),r}}tg.decorators=[{type:i.A}];const ng=[Lm,{provide:i.i,useValue:{providers:[{provide:yf,useClass:tg,deps:[]}]},multi:!0},{provide:i.R,useValue:vf.m}];new i.ib("7.1.1");const rg=Object(i.mb)(eg,"browserDynamic",ng);class ig{}class sg{}const og="*";function ag(e,t=null){return{type:2,steps:e,options:t}}function ug(e){return{type:6,styles:e,offset:null}}function cg(e){Promise.resolve(null).then(e)}class lg{constructor(e=0,t=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this.parentPlayer=null,this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._onStartFns.push(e)}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){cg(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){}setPosition(e){}getPosition(){return 0}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(e=>e()),t.length=0}}class hg{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let t=0,n=0,r=0;const i=this.players.length;0==i?cg(()=>this._onFinish()):this.players.forEach(e=>{e.onDone(()=>{++t==i&&this._onFinish()}),e.onDestroy(()=>{++n==i&&this._onDestroy()}),e.onStart(()=>{++r==i&&this._onStart()})}),this.totalTime=this.players.reduce((e,t)=>Math.max(e,t.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){const t=e*this.totalTime;this.players.forEach(e=>{const n=e.totalTime?Math.min(1,t/e.totalTime):1;e.setPosition(n)})}getPosition(){let e=0;return this.players.forEach(t=>{const n=t.getPosition();e=Math.min(n,e)}),e}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(e=>e()),t.length=0}}const dg="!";function pg(){return"undefined"!=typeof process}function fg(e){switch(e.length){case 0:return new lg;case 1:return e[0];default:return new hg(e)}}function mg(e,t,n,r,i={},s={}){const o=[],a=[];let u=-1,c=null;if(r.forEach(e=>{const n=e.offset,r=n==u,l=r&&c||{};Object.keys(e).forEach(n=>{let r=n,a=e[n];if("offset"!==n)switch(r=t.normalizePropertyName(r,o),a){case dg:a=i[n];break;case og:a=s[n];break;default:a=t.normalizeStyleValue(n,r,a,o)}l[r]=a}),r||a.push(l),c=l,u=n}),o.length){const e="\n - ";throw new Error(`Unable to animate due to the following errors:${e}${o.join(e)}`)}return a}function gg(e,t,n,r){switch(t){case"start":e.onStart(()=>r(n&&yg(n,"start",e)));break;case"done":e.onDone(()=>r(n&&yg(n,"done",e)));break;case"destroy":e.onDestroy(()=>r(n&&yg(n,"destroy",e)))}}function yg(e,t,n){const r=n.totalTime,i=!!n.disabled,s=vg(e.element,e.triggerName,e.fromState,e.toState,t||e.phaseName,null==r?e.totalTime:r,i),o=e._data;return null!=o&&(s._data=o),s}function vg(e,t,n,r,i="",s=0,o){return{element:e,triggerName:t,fromState:n,toState:r,phaseName:i,totalTime:s,disabled:!!o}}function _g(e,t,n){let r;return e instanceof Map?(r=e.get(t))||e.set(t,r=n):(r=e[t])||(r=e[t]=n),r}function bg(e){const t=e.indexOf(":");return[e.substring(1,t),e.substr(t+1)]}let wg=(e,t)=>!1,Eg=(e,t)=>!1,Cg=(e,t,n)=>[];const Sg=pg();if(Sg||"undefined"!=typeof Element){if(wg=((e,t)=>e.contains(t)),Sg||Element.prototype.matches)Eg=((e,t)=>e.matches(t));else{const e=Element.prototype,t=e.matchesSelector||e.mozMatchesSelector||e.msMatchesSelector||e.oMatchesSelector||e.webkitMatchesSelector;t&&(Eg=((e,n)=>t.apply(e,[n])))}Cg=((e,t,n)=>{let r=[];if(n)r.push(...e.querySelectorAll(t));else{const n=e.querySelector(t);n&&r.push(n)}return r})}let Tg=null,xg=!1;function Ag(e){Tg||(Tg=function(){if("undefined"!=typeof document)return document.body;return null}()||{},xg=!!Tg.style&&"WebkitAppearance"in Tg.style);let t=!0;if(Tg.style&&!function(e){return"ebkit"==e.substring(1,6)}(e)&&!(t=e in Tg.style)&&xg){t="Webkit"+e.charAt(0).toUpperCase()+e.substr(1)in Tg.style}return t}const Dg=Eg,Ig=wg,Ng=Cg;function Og(e){const t={};return Object.keys(e).forEach(n=>{const r=n.replace(/([a-z])([A-Z])/g,"$1-$2");t[r]=e[n]}),t}class kg{validateStyleProperty(e){return Ag(e)}matchesElement(e,t){return Dg(e,t)}containsElement(e,t){return Ig(e,t)}query(e,t,n){return Ng(e,t,n)}computeStyle(e,t,n){return n||""}animate(e,t,n,r,i,s=[],o){return new lg(n,r)}}kg.decorators=[{type:i.A}];class Pg{}Pg.NOOP=new kg;const Mg=1e3,Rg="{{",Fg="ng-enter",Lg="ng-leave",Vg="ng-trigger",jg=".ng-trigger",Bg="ng-animating",Ug=".ng-animating";function qg(e){if("number"==typeof e)return e;const t=e.match(/^(-?[\.\d]+)(m?s)/);return!t||t.length<2?0:$g(parseFloat(t[1]),t[2])}function $g(e,t){switch(t){case"s":return e*Mg;default:return e}}function Hg(e,t,n){return e.hasOwnProperty("duration")?e:function(e,t,n){const r=/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i;let i,s=0,o="";if("string"==typeof e){const n=e.match(r);if(null===n)return t.push(`The provided timing value "${e}" is invalid.`),{duration:0,delay:0,easing:""};i=$g(parseFloat(n[1]),n[2]);const a=n[3];null!=a&&(s=$g(Math.floor(parseFloat(a)),n[4]));const u=n[5];u&&(o=u)}else i=e;if(!n){let n=!1,r=t.length;i<0&&(t.push("Duration values below 0 are not allowed for this animation step."),n=!0),s<0&&(t.push("Delay values below 0 are not allowed for this animation step."),n=!0),n&&t.splice(r,0,`The provided timing value "${e}" is invalid.`)}return{duration:i,delay:s,easing:o}}(e,t,n)}function zg(e,t={}){return Object.keys(e).forEach(n=>{t[n]=e[n]}),t}function Wg(e,t,n={}){if(t)for(let r in e)n[r]=e[r];else zg(e,n);return n}function Kg(e,t,n){return n?t+":"+n+";":""}function Qg(e){let t="";for(let n=0;n<e.style.length;n++){const r=e.style.item(n);t+=Kg(0,r,e.style.getPropertyValue(r))}for(const n in e.style){if(!e.style.hasOwnProperty(n)||n.startsWith("_"))continue;t+=Kg(0,n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),e.style[n])}e.setAttribute("style",t)}function Gg(e,t){e.style&&(Object.keys(t).forEach(n=>{const r=ry(n);e.style[r]=t[n]}),pg()&&Qg(e))}function Xg(e,t){e.style&&(Object.keys(t).forEach(t=>{const n=ry(t);e.style[n]=""}),pg()&&Qg(e))}function Yg(e){return Array.isArray(e)?1==e.length?e[0]:ag(e):e}const Zg=new RegExp(`${Rg}\\s*(.+?)\\s*}}`,"g");function Jg(e){let t=[];if("string"==typeof e){const n=e.toString();let r;for(;r=Zg.exec(n);)t.push(r[1]);Zg.lastIndex=0}return t}function ey(e,t,n){const r=e.toString(),i=r.replace(Zg,(e,r)=>{let i=t[r];return t.hasOwnProperty(r)||(n.push(`Please provide a value for the animation param ${r}`),i=""),i.toString()});return i==r?e:i}function ty(e){const t=[];let n=e.next();for(;!n.done;)t.push(n.value),n=e.next();return t}const ny=/-+([a-z0-9])/g;function ry(e){return e.replace(ny,(...e)=>e[1].toUpperCase())}function iy(e,t){return 0===e||0===t}function sy(e,t,n){const r=Object.keys(n);if(r.length&&t.length){let s=t[0],o=[];if(r.forEach(e=>{s.hasOwnProperty(e)||o.push(e),s[e]=n[e]}),o.length)for(var i=1;i<t.length;i++){let n=t[i];o.forEach(function(t){n[t]=ay(e,t)})}}return t}function oy(e,t,n){switch(t.type){case 7:return e.visitTrigger(t,n);case 0:return e.visitState(t,n);case 1:return e.visitTransition(t,n);case 2:return e.visitSequence(t,n);case 3:return e.visitGroup(t,n);case 4:return e.visitAnimate(t,n);case 5:return e.visitKeyframes(t,n);case 6:return e.visitStyle(t,n);case 8:return e.visitReference(t,n);case 9:return e.visitAnimateChild(t,n);case 10:return e.visitAnimateRef(t,n);case 11:return e.visitQuery(t,n);case 12:return e.visitStagger(t,n);default:throw new Error(`Unable to resolve animation metadata node #${t.type}`)}}function ay(e,t){return window.getComputedStyle(e)[t]}const uy="*";function cy(e,t){const n=[];return"string"==typeof e?e.split(/\s*,\s*/).forEach(e=>(function(e,t,n){if(":"==e[0]){const r=function(e,t){switch(e){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(e,t)=>parseFloat(t)>parseFloat(e);case":decrement":return(e,t)=>parseFloat(t)<parseFloat(e);default:return t.push(`The transition alias value "${e}" is not supported`),"* => *"}}(e,n);if("function"==typeof r)return void t.push(r);e=r}const r=e.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==r||r.length<4)return n.push(`The provided transition expression "${e}" is not supported`),t;const i=r[1],s=r[2],o=r[3];t.push(dy(i,o));const a=i==uy&&o==uy;"<"!=s[0]||a||t.push(dy(o,i))})(e,n,t)):n.push(e),n}const ly=new Set(["true","1"]),hy=new Set(["false","0"]);function dy(e,t){const n=ly.has(e)||hy.has(e),r=ly.has(t)||hy.has(t);return(i,s)=>{let o=e==uy||e==i,a=t==uy||t==s;return!o&&n&&"boolean"==typeof i&&(o=i?ly.has(e):hy.has(e)),!a&&r&&"boolean"==typeof s&&(a=s?ly.has(t):hy.has(t)),o&&a}}const py=":self",fy=new RegExp(`s*${py}s*,?`,"g");function my(e,t,n){return new yy(e).build(t,n)}const gy="";class yy{constructor(e){this._driver=e}build(e,t){const n=new vy(t);return this._resetContextStyleTimingState(n),oy(this,Yg(e),n)}_resetContextStyleTimingState(e){e.currentQuerySelector=gy,e.collectedStyles={},e.collectedStyles[gy]={},e.currentTime=0}visitTrigger(e,t){let n=t.queryCount=0,r=t.depCount=0;const i=[],s=[];return"@"==e.name.charAt(0)&&t.errors.push("animation triggers cannot be prefixed with an `@` sign (e.g. trigger('@foo', [...]))"),e.definitions.forEach(e=>{if(this._resetContextStyleTimingState(t),0==e.type){const n=e,r=n.name;r.toString().split(/\s*,\s*/).forEach(e=>{n.name=e,i.push(this.visitState(n,t))}),n.name=r}else if(1==e.type){const i=this.visitTransition(e,t);n+=i.queryCount,r+=i.depCount,s.push(i)}else t.errors.push("only state() and transition() definitions can sit inside of a trigger()")}),{type:7,name:e.name,states:i,transitions:s,queryCount:n,depCount:r,options:null}}visitState(e,t){const n=this.visitStyle(e.styles,t),r=e.options&&e.options.params||null;if(n.containsDynamicStyles){const i=new Set,s=r||{};if(n.styles.forEach(e=>{if(_y(e)){const t=e;Object.keys(t).forEach(e=>{Jg(t[e]).forEach(e=>{s.hasOwnProperty(e)||i.add(e)})})}}),i.size){const n=ty(i.values());t.errors.push(`state("${e.name}", ...) must define default values for all the following style substitutions: ${n.join(", ")}`)}}return{type:0,name:e.name,style:n,options:r?{params:r}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;const n=oy(this,Yg(e.animation),t);return{type:1,matchers:cy(e.expr,t.errors),animation:n,queryCount:t.queryCount,depCount:t.depCount,options:by(e.options)}}visitSequence(e,t){return{type:2,steps:e.steps.map(e=>oy(this,e,t)),options:by(e.options)}}visitGroup(e,t){const n=t.currentTime;let r=0;const i=e.steps.map(e=>{t.currentTime=n;const i=oy(this,e,t);return r=Math.max(r,t.currentTime),i});return t.currentTime=r,{type:3,steps:i,options:by(e.options)}}visitAnimate(e,t){const n=function(e,t){let n=null;if(e.hasOwnProperty("duration"))n=e;else if("number"==typeof e){const n=Hg(e,t).duration;return wy(n,0,"")}const r=e;if(r.split(/\s+/).some(e=>"{"==e.charAt(0)&&"{"==e.charAt(1))){const e=wy(0,0,"");return e.dynamic=!0,e.strValue=r,e}return wy((n=n||Hg(r,t)).duration,n.delay,n.easing)}(e.timings,t.errors);let r;t.currentAnimateTimings=n;let i=e.styles?e.styles:ug({});if(5==i.type)r=this.visitKeyframes(i,t);else{let i=e.styles,s=!1;if(!i){s=!0;const e={};n.easing&&(e.easing=n.easing),i=ug(e)}t.currentTime+=n.duration+n.delay;const o=this.visitStyle(i,t);o.isEmptyStep=s,r=o}return t.currentAnimateTimings=null,{type:4,timings:n,style:r,options:null}}visitStyle(e,t){const n=this._makeStyleAst(e,t);return this._validateStyleAst(n,t),n}_makeStyleAst(e,t){const n=[];Array.isArray(e.styles)?e.styles.forEach(e=>{"string"==typeof e?e==og?n.push(e):t.errors.push(`The provided style string value ${e} is not allowed.`):n.push(e)}):n.push(e.styles);let r=!1,i=null;return n.forEach(e=>{if(_y(e)){const t=e,n=t.easing;if(n&&(i=n,delete t.easing),!r)for(let e in t){if(t[e].toString().indexOf(Rg)>=0){r=!0;break}}}}),{type:6,styles:n,easing:i,offset:e.offset,containsDynamicStyles:r,options:null}}_validateStyleAst(e,t){const n=t.currentAnimateTimings;let r=t.currentTime,i=t.currentTime;n&&i>0&&(i-=n.duration+n.delay),e.styles.forEach(e=>{"string"!=typeof e&&Object.keys(e).forEach(n=>{if(!this._driver.validateStyleProperty(n))return void t.errors.push(`The provided animation property "${n}" is not a supported CSS property for animations`);const s=t.collectedStyles[t.currentQuerySelector],o=s[n];let a=!0;o&&(i!=r&&i>=o.startTime&&r<=o.endTime&&(t.errors.push(`The CSS property "${n}" that exists between the times of "${o.startTime}ms" and "${o.endTime}ms" is also being animated in a parallel animation between the times of "${i}ms" and "${r}ms"`),a=!1),i=o.startTime),a&&(s[n]={startTime:i,endTime:r}),t.options&&function(e,t,n){const r=t.params||{},i=Jg(e);i.length&&i.forEach(e=>{r.hasOwnProperty(e)||n.push(`Unable to resolve the local animation param ${e} in the given list of values`)})}(e[n],t.options,t.errors)})})}visitKeyframes(e,t){const n={type:5,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push("keyframes() must be placed inside of a call to animate()"),n;let r=0;const i=[];let s=!1,o=!1,a=0;const u=e.steps.map(e=>{const n=this._makeStyleAst(e,t);let u=null!=n.offset?n.offset:function(e){if("string"==typeof e)return null;let t=null;if(Array.isArray(e))e.forEach(e=>{if(_y(e)&&e.hasOwnProperty("offset")){const n=e;t=parseFloat(n.offset),delete n.offset}});else if(_y(e)&&e.hasOwnProperty("offset")){const n=e;t=parseFloat(n.offset),delete n.offset}return t}(n.styles),c=0;return null!=u&&(r++,c=n.offset=u),o=o||c<0||c>1,s=s||c<a,a=c,i.push(c),n});o&&t.errors.push("Please ensure that all keyframe offsets are between 0 and 1"),s&&t.errors.push("Please ensure that all keyframe offsets are in order");const c=e.steps.length;let l=0;r>0&&r<c?t.errors.push("Not all style() steps within the declared keyframes() contain offsets"):0==r&&(l=1/(c-1));const h=c-1,d=t.currentTime,p=t.currentAnimateTimings,f=p.duration;return u.forEach((e,r)=>{const s=l>0?r==h?1:l*r:i[r],o=s*f;t.currentTime=d+p.delay+o,p.duration=o,this._validateStyleAst(e,t),e.offset=s,n.styles.push(e)}),n}visitReference(e,t){return{type:8,animation:oy(this,Yg(e.animation),t),options:by(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:9,options:by(e.options)}}visitAnimateRef(e,t){return{type:10,animation:this.visitReference(e.animation,t),options:by(e.options)}}visitQuery(e,t){const n=t.currentQuerySelector,r=e.options||{};t.queryCount++,t.currentQuery=e;const[i,s]=function(e){const t=!!e.split(/\s*,\s*/).find(e=>e==py);t&&(e=e.replace(fy,""));return[e=e.replace(/@\*/g,jg).replace(/@\w+/g,e=>jg+"-"+e.substr(1)).replace(/:animating/g,Ug),t]}(e.selector);t.currentQuerySelector=n.length?n+" "+i:i,_g(t.collectedStyles,t.currentQuerySelector,{});const o=oy(this,Yg(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=n,{type:11,selector:i,limit:r.limit||0,optional:!!r.optional,includeSelf:s,animation:o,originalSelector:e.selector,options:by(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push("stagger() can only be used inside of query()");const n="full"===e.timings?{duration:0,delay:0,easing:"full"}:Hg(e.timings,t.errors,!0);return{type:12,animation:oy(this,Yg(e.animation),t),timings:n,options:null}}}class vy{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles={},this.options=null}}function _y(e){return!Array.isArray(e)&&"object"==typeof e}function by(e){var t;return e?(e=zg(e)).params&&(e.params=(t=e.params)?zg(t):null):e={},e}function wy(e,t,n){return{duration:e,delay:t,easing:n}}function Ey(e,t,n,r,i,s,o=null,a=!1){return{type:1,element:e,keyframes:t,preStyleProps:n,postStyleProps:r,duration:i,delay:s,totalTime:i+s,easing:o,subTimeline:a}}class Cy{constructor(){this._map=new Map}consume(e){let t=this._map.get(e);return t?this._map.delete(e):t=[],t}append(e,t){let n=this._map.get(e);n||this._map.set(e,n=[]),n.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}}const Sy=1,Ty=new RegExp(":enter","g"),xy=new RegExp(":leave","g");function Ay(e,t,n,r,i,s={},o={},a,u,c=[]){return(new Dy).buildKeyframes(e,t,n,r,i,s,o,a,u,c)}class Dy{buildKeyframes(e,t,n,r,i,s,o,a,u,c=[]){u=u||new Cy;const l=new Ny(e,t,u,r,i,c,[]);l.options=a,l.currentTimeline.setStyles([s],null,l.errors,a),oy(this,n,l);const h=l.timelines.filter(e=>e.containsAnimation());if(h.length&&Object.keys(o).length){const e=h[h.length-1];e.allowOnlyTimelineStyles()||e.setStyles([o],null,l.errors,a)}return h.length?h.map(e=>e.buildKeyframes()):[Ey(t,[],[],[],0,0,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){const n=t.subInstructions.consume(t.element);if(n){const r=t.createSubContext(e.options),i=t.currentTimeline.currentTime,s=this._visitSubInstructions(n,r,r.options);i!=s&&t.transformIntoNewTimeline(s)}t.previousNode=e}visitAnimateRef(e,t){const n=t.createSubContext(e.options);n.transformIntoNewTimeline(),this.visitReference(e.animation,n),t.transformIntoNewTimeline(n.currentTimeline.currentTime),t.previousNode=e}_visitSubInstructions(e,t,n){let r=t.currentTimeline.currentTime;const i=null!=n.duration?qg(n.duration):null,s=null!=n.delay?qg(n.delay):null;return 0!==i&&e.forEach(e=>{const n=t.appendInstructionToTimeline(e,i,s);r=Math.max(r,n.duration+n.delay)}),r}visitReference(e,t){t.updateOptions(e.options,!0),oy(this,e.animation,t),t.previousNode=e}visitSequence(e,t){const n=t.subContextCount;let r=t;const i=e.options;if(i&&(i.params||i.delay)&&((r=t.createSubContext(i)).transformIntoNewTimeline(),null!=i.delay)){6==r.previousNode.type&&(r.currentTimeline.snapshotCurrentStyles(),r.previousNode=Iy);const e=qg(i.delay);r.delayNextStep(e)}e.steps.length&&(e.steps.forEach(e=>oy(this,e,r)),r.currentTimeline.applyStylesToKeyframe(),r.subContextCount>n&&r.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){const n=[];let r=t.currentTimeline.currentTime;const i=e.options&&e.options.delay?qg(e.options.delay):0;e.steps.forEach(s=>{const o=t.createSubContext(e.options);i&&o.delayNextStep(i),oy(this,s,o),r=Math.max(r,o.currentTimeline.currentTime),n.push(o.currentTimeline)}),n.forEach(e=>t.currentTimeline.mergeTimelineCollectedStyles(e)),t.transformIntoNewTimeline(r),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){const n=e.strValue;return Hg(t.params?ey(n,t.params,t.errors):n,t.errors)}return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){const n=t.currentAnimateTimings=this._visitTiming(e.timings,t),r=t.currentTimeline;n.delay&&(t.incrementTime(n.delay),r.snapshotCurrentStyles());const i=e.style;5==i.type?this.visitKeyframes(i,t):(t.incrementTime(n.duration),this.visitStyle(i,t),r.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){const n=t.currentTimeline,r=t.currentAnimateTimings;!r&&n.getCurrentStyleProperties().length&&n.forwardFrame();const i=r&&r.easing||e.easing;e.isEmptyStep?n.applyEmptyStep(i):n.setStyles(e.styles,i,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){const n=t.currentAnimateTimings,r=t.currentTimeline.duration,i=n.duration,s=t.createSubContext().currentTimeline;s.easing=n.easing,e.styles.forEach(e=>{const n=e.offset||0;s.forwardTime(n*i),s.setStyles(e.styles,e.easing,t.errors,t.options),s.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(s),t.transformIntoNewTimeline(r+i),t.previousNode=e}visitQuery(e,t){const n=t.currentTimeline.currentTime,r=e.options||{},i=r.delay?qg(r.delay):0;i&&(6===t.previousNode.type||0==n&&t.currentTimeline.getCurrentStyleProperties().length)&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=Iy);let s=n;const o=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!r.optional,t.errors);t.currentQueryTotal=o.length;let a=null;o.forEach((n,r)=>{t.currentQueryIndex=r;const o=t.createSubContext(e.options,n);i&&o.delayNextStep(i),n===t.element&&(a=o.currentTimeline),oy(this,e.animation,o),o.currentTimeline.applyStylesToKeyframe();const u=o.currentTimeline.currentTime;s=Math.max(s,u)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(s),a&&(t.currentTimeline.mergeTimelineCollectedStyles(a),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){const n=t.parentContext,r=t.currentTimeline,i=e.timings,s=Math.abs(i.duration),o=s*(t.currentQueryTotal-1);let a=s*t.currentQueryIndex;switch(i.duration<0?"reverse":i.easing){case"reverse":a=o-a;break;case"full":a=n.currentStaggerTime}const u=t.currentTimeline;a&&u.delayNextStep(a);const c=u.currentTime;oy(this,e.animation,t),t.previousNode=e,n.currentStaggerTime=r.currentTime-c+(r.startTime-n.currentTimeline.startTime)}}const Iy={};class Ny{constructor(e,t,n,r,i,s,o,a){this._driver=e,this.element=t,this.subInstructions=n,this._enterClassName=r,this._leaveClassName=i,this.errors=s,this.timelines=o,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=Iy,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=a||new Oy(this._driver,t,0),o.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;const n=e;let r=this.options;null!=n.duration&&(r.duration=qg(n.duration)),null!=n.delay&&(r.delay=qg(n.delay));const i=n.params;if(i){let e=r.params;e||(e=this.options.params={}),Object.keys(i).forEach(n=>{t&&e.hasOwnProperty(n)||(e[n]=ey(i[n],e,this.errors))})}}_copyOptions(){const e={};if(this.options){const t=this.options.params;if(t){const n=e.params={};Object.keys(t).forEach(e=>{n[e]=t[e]})}}return e}createSubContext(e=null,t,n){const r=t||this.element,i=new Ny(this._driver,r,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(r,n||0));return i.previousNode=this.previousNode,i.currentAnimateTimings=this.currentAnimateTimings,i.options=this._copyOptions(),i.updateOptions(e),i.currentQueryIndex=this.currentQueryIndex,i.currentQueryTotal=this.currentQueryTotal,i.parentContext=this,this.subContextCount++,i}transformIntoNewTimeline(e){return this.previousNode=Iy,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,n){const r={duration:null!=t?t:e.duration,delay:this.currentTimeline.currentTime+(null!=n?n:0)+e.delay,easing:""},i=new ky(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,r,e.stretchStartingKeyframe);return this.timelines.push(i),r}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,n,r,i,s){let o=[];if(r&&o.push(this.element),e.length>0){e=(e=e.replace(Ty,"."+this._enterClassName)).replace(xy,"."+this._leaveClassName);const t=1!=n;let r=this._driver.query(this.element,e,t);0!==n&&(r=n<0?r.slice(r.length+n,r.length):r.slice(0,n)),o.push(...r)}return i||0!=o.length||s.push(`\`query("${t}")\` returned zero elements. (Use \`query("${t}", { optional: true })\` if you wish to allow this.)`),o}}class Oy{constructor(e,t,n,r){this._driver=e,this.element=t,this.startTime=n,this._elementTimelineStylesLookup=r,this.duration=0,this._previousKeyframe={},this._currentKeyframe={},this._keyframes=new Map,this._styleSummary={},this._pendingStyles={},this._backFill={},this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._localTimelineStyles=Object.create(this._backFill,{}),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.getCurrentStyleProperties().length>0;default:return!0}}getCurrentStyleProperties(){return Object.keys(this._currentKeyframe)}get currentTime(){return this.startTime+this.duration}delayNextStep(e){const t=1==this._keyframes.size&&Object.keys(this._pendingStyles).length;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new Oy(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=Object.create(this._backFill,{}),this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=Sy,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles[e]=t,this._globalTimelineStyles[e]=t,this._styleSummary[e]={time:this.currentTime,value:t}}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&(this._previousKeyframe.easing=e),Object.keys(this._globalTimelineStyles).forEach(e=>{this._backFill[e]=this._globalTimelineStyles[e]||og,this._currentKeyframe[e]=og}),this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,n,r){t&&(this._previousKeyframe.easing=t);const i=r&&r.params||{},s=function(e,t){const n={};let r;return e.forEach(e=>{"*"===e?(r=r||Object.keys(t)).forEach(e=>{n[e]=og}):Wg(e,!1,n)}),n}(e,this._globalTimelineStyles);Object.keys(s).forEach(e=>{const t=ey(s[e],i,n);this._pendingStyles[e]=t,this._localTimelineStyles.hasOwnProperty(e)||(this._backFill[e]=this._globalTimelineStyles.hasOwnProperty(e)?this._globalTimelineStyles[e]:og),this._updateStyle(e,t)})}applyStylesToKeyframe(){const e=this._pendingStyles,t=Object.keys(e);0!=t.length&&(this._pendingStyles={},t.forEach(t=>{const n=e[t];this._currentKeyframe[t]=n}),Object.keys(this._localTimelineStyles).forEach(e=>{this._currentKeyframe.hasOwnProperty(e)||(this._currentKeyframe[e]=this._localTimelineStyles[e])}))}snapshotCurrentStyles(){Object.keys(this._localTimelineStyles).forEach(e=>{const t=this._localTimelineStyles[e];this._pendingStyles[e]=t,this._updateStyle(e,t)})}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){Object.keys(e._styleSummary).forEach(t=>{const n=this._styleSummary[t],r=e._styleSummary[t];(!n||r.time>n.time)&&this._updateStyle(t,r.value)})}buildKeyframes(){this.applyStylesToKeyframe();const e=new Set,t=new Set,n=1===this._keyframes.size&&0===this.duration;let r=[];this._keyframes.forEach((i,s)=>{const o=Wg(i,!0);Object.keys(o).forEach(n=>{const r=o[n];r==dg?e.add(n):r==og&&t.add(n)}),n||(o.offset=s/this.duration),r.push(o)});const i=e.size?ty(e.values()):[],s=t.size?ty(t.values()):[];if(n){const e=r[0],t=zg(e);e.offset=0,t.offset=1,r=[e,t]}return Ey(this.element,r,i,s,this.duration,this.startTime,this.easing,!1)}}class ky extends Oy{constructor(e,t,n,r,i,s,o=!1){super(e,t,s.delay),this.element=t,this.keyframes=n,this.preStyleProps=r,this.postStyleProps=i,this._stretchStartingKeyframe=o,this.timings={duration:s.duration,delay:s.delay,easing:s.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:n,easing:r}=this.timings;if(this._stretchStartingKeyframe&&t){const i=[],s=n+t,o=t/s,a=Wg(e[0],!1);a.offset=0,i.push(a);const u=Wg(e[0],!1);u.offset=Py(o),i.push(u);const c=e.length-1;for(let r=1;r<=c;r++){let o=Wg(e[r],!1);const a=t+o.offset*n;o.offset=Py(a/s),i.push(o)}n=s,t=0,r="",e=i}return Ey(this.element,e,this.preStyleProps,this.postStyleProps,n,t,r,!0)}}function Py(e,t=3){const n=Math.pow(10,t-1);return Math.round(e*n)/n}class My{}class Ry extends My{normalizePropertyName(e,t){return ry(e)}normalizeStyleValue(e,t,n,r){let i="";const s=n.toString().trim();if(Fy[t]&&0!==n&&"0"!==n)if("number"==typeof n)i="px";else{const t=n.match(/^[+-]?[\d\.]+([a-z]*)$/);t&&0==t[1].length&&r.push(`Please provide a CSS unit value for ${e}:${n}`)}return s+i}}const Fy=function(e){const t={};return e.forEach(e=>t[e]=!0),t}("width,height,minWidth,minHeight,maxWidth,maxHeight,left,top,bottom,right,fontSize,outlineWidth,outlineOffset,paddingTop,paddingLeft,paddingBottom,paddingRight,marginTop,marginLeft,marginBottom,marginRight,borderRadius,borderWidth,borderTopWidth,borderLeftWidth,borderRightWidth,borderBottomWidth,textIndent,perspective".split(","));function Ly(e,t,n,r,i,s,o,a,u,c,l,h,d){return{type:0,element:e,triggerName:t,isRemovalTransition:i,fromState:n,fromStyles:s,toState:r,toStyles:o,timelines:a,queriedElements:u,preStyleProps:c,postStyleProps:l,totalTime:h,errors:d}}const Vy={};class jy{constructor(e,t,n){this._triggerName=e,this.ast=t,this._stateStyles=n}match(e,t,n,r){return function(e,t,n,r,i){return e.some(e=>e(t,n,r,i))}(this.ast.matchers,e,t,n,r)}buildStyles(e,t,n){const r=this._stateStyles["*"],i=this._stateStyles[e],s=r?r.buildStyles(t,n):{};return i?i.buildStyles(t,n):s}build(e,t,n,r,i,s,o,a,u,c){const l=[],h=this.ast.options&&this.ast.options.params||Vy,d=o&&o.params||Vy,p=this.buildStyles(n,d,l),f=a&&a.params||Vy,m=this.buildStyles(r,f,l),g=new Set,y=new Map,v=new Map,_="void"===r,b={params:Object.assign({},h,f)},w=c?[]:Ay(e,t,this.ast.animation,i,s,p,m,b,u,l);let E=0;if(w.forEach(e=>{E=Math.max(e.duration+e.delay,E)}),l.length)return Ly(t,this._triggerName,n,r,_,p,m,[],[],y,v,E,l);w.forEach(e=>{const n=e.element,r=_g(y,n,{});e.preStyleProps.forEach(e=>r[e]=!0);const i=_g(v,n,{});e.postStyleProps.forEach(e=>i[e]=!0),n!==t&&g.add(n)});const C=ty(g.values());return Ly(t,this._triggerName,n,r,_,p,m,w,C,y,v,E)}}class By{constructor(e,t){this.styles=e,this.defaultParams=t}buildStyles(e,t){const n={},r=zg(this.defaultParams);return Object.keys(e).forEach(t=>{const n=e[t];null!=n&&(r[t]=n)}),this.styles.styles.forEach(e=>{if("string"!=typeof e){const i=e;Object.keys(i).forEach(e=>{let s=i[e];s.length>1&&(s=ey(s,r,t)),n[e]=s})}}),n}}class Uy{constructor(e,t){var n,r;this.name=e,this.ast=t,this.transitionFactories=[],this.states={},t.states.forEach(e=>{const t=e.options&&e.options.params||{};this.states[e.name]=new By(e.style,t)}),qy(this.states,"true","1"),qy(this.states,"false","0"),t.transitions.forEach(t=>{this.transitionFactories.push(new jy(e,t,this.states))}),this.fallbackTransition=(n=e,r=this.states,new jy(n,{type:1,animation:{type:2,steps:[],options:null},matchers:[(e,t)=>!0],options:null,queryCount:0,depCount:0},r))}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,n,r){return this.transitionFactories.find(i=>i.match(e,t,n,r))||null}matchStyles(e,t,n){return this.fallbackTransition.buildStyles(e,t,n)}}function qy(e,t,n){e.hasOwnProperty(t)?e.hasOwnProperty(n)||(e[n]=e[t]):e.hasOwnProperty(n)&&(e[t]=e[n])}const $y=new Cy;class Hy{constructor(e,t,n){this.bodyNode=e,this._driver=t,this._normalizer=n,this._animations={},this._playersById={},this.players=[]}register(e,t){const n=[],r=my(this._driver,t,n);if(n.length)throw new Error(`Unable to build the animation due to the following errors: ${n.join("\n")}`);this._animations[e]=r}_buildPlayer(e,t,n){const r=e.element,i=mg(this._driver,this._normalizer,0,e.keyframes,t,n);return this._driver.animate(r,i,e.duration,e.delay,e.easing,[],!0)}create(e,t,n={}){const r=[],i=this._animations[e];let s;const o=new Map;if(i?(s=Ay(this._driver,t,i,Fg,Lg,{},{},n,$y,r)).forEach(e=>{const t=_g(o,e.element,{});e.postStyleProps.forEach(e=>t[e]=null)}):(r.push("The requested animation doesn't exist or has already been destroyed"),s=[]),r.length)throw new Error(`Unable to create the animation due to the following errors: ${r.join("\n")}`);o.forEach((e,t)=>{Object.keys(e).forEach(n=>{e[n]=this._driver.computeStyle(t,n,og)})});const a=fg(s.map(e=>{const t=o.get(e.element);return this._buildPlayer(e,{},t)}));return this._playersById[e]=a,a.onDestroy(()=>this.destroy(e)),this.players.push(a),a}destroy(e){const t=this._getPlayer(e);t.destroy(),delete this._playersById[e];const n=this.players.indexOf(t);n>=0&&this.players.splice(n,1)}_getPlayer(e){const t=this._playersById[e];if(!t)throw new Error(`Unable to find the timeline player referenced by ${e}`);return t}listen(e,t,n,r){const i=vg(t,"","","");return gg(this._getPlayer(e),n,i,r),()=>{}}command(e,t,n,r){if("register"==n)return void this.register(e,r[0]);if("create"==n){const n=r[0]||{};return void this.create(e,t,n)}const i=this._getPlayer(e);switch(n){case"play":i.play();break;case"pause":i.pause();break;case"reset":i.reset();break;case"restart":i.restart();break;case"finish":i.finish();break;case"init":i.init();break;case"setPosition":i.setPosition(parseFloat(r[0]));break;case"destroy":this.destroy(e)}}}const zy="ng-animate-queued",Wy=".ng-animate-queued",Ky="ng-animate-disabled",Qy=".ng-animate-disabled",Gy="ng-star-inserted",Xy=".ng-star-inserted",Yy=[],Zy={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},Jy={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},ev="__ng_removed";class tv{constructor(e,t=""){this.namespaceId=t;const n=e&&e.hasOwnProperty("value"),r=n?e.value:e;if(this.value=function(e){return null!=e?e:null}(r),n){const t=zg(e);delete t.value,this.options=t}else this.options={};this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(e){const t=e.params;if(t){const e=this.options.params;Object.keys(t).forEach(n=>{null==e[n]&&(e[n]=t[n])})}}}const nv="void",rv=new tv(nv);class iv{constructor(e,t,n){this.id=e,this.hostElement=t,this._engine=n,this.players=[],this._triggers={},this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,dv(t,this._hostClassName)}listen(e,t,n,r){if(!this._triggers.hasOwnProperty(t))throw new Error(`Unable to listen on the animation trigger event "${n}" because the animation trigger "${t}" doesn't exist!`);if(null==n||0==n.length)throw new Error(`Unable to listen on the animation trigger "${t}" because the provided event is undefined!`);if("start"!=(i=n)&&"done"!=i)throw new Error(`The provided animation trigger event "${n}" for the animation trigger "${t}" is not supported!`);var i;const s=_g(this._elementListeners,e,[]),o={name:t,phase:n,callback:r};s.push(o);const a=_g(this._engine.statesByElement,e,{});return a.hasOwnProperty(t)||(dv(e,Vg),dv(e,Vg+"-"+t),a[t]=rv),()=>{this._engine.afterFlush(()=>{const e=s.indexOf(o);e>=0&&s.splice(e,1),this._triggers[t]||delete a[t]})}}register(e,t){return!this._triggers[e]&&(this._triggers[e]=t,!0)}_getTrigger(e){const t=this._triggers[e];if(!t)throw new Error(`The provided animation trigger "${e}" has not been registered!`);return t}trigger(e,t,n,r=!0){const i=this._getTrigger(t),s=new ov(this.id,t,e);let o=this._engine.statesByElement.get(e);o||(dv(e,Vg),dv(e,Vg+"-"+t),this._engine.statesByElement.set(e,o={}));let a=o[t];const u=new tv(n,this.id);if(!(n&&n.hasOwnProperty("value"))&&a&&u.absorbOptions(a.options),o[t]=u,a||(a=rv),!(u.value===nv)&&a.value===u.value){if(!function(e,t){const n=Object.keys(e),r=Object.keys(t);if(n.length!=r.length)return!1;for(let i=0;i<n.length;i++){const r=n[i];if(!t.hasOwnProperty(r)||e[r]!==t[r])return!1}return!0}(a.params,u.params)){const t=[],n=i.matchStyles(a.value,a.params,t),r=i.matchStyles(u.value,u.params,t);t.length?this._engine.reportError(t):this._engine.afterFlush(()=>{Xg(e,n),Gg(e,r)})}return}const c=_g(this._engine.playersByElement,e,[]);c.forEach(e=>{e.namespaceId==this.id&&e.triggerName==t&&e.queued&&e.destroy()});let l=i.matchTransition(a.value,u.value,e,u.params),h=!1;if(!l){if(!r)return;l=i.fallbackTransition,h=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:l,fromState:a,toState:u,player:s,isFallbackTransition:h}),h||(dv(e,zy),s.onStart(()=>{pv(e,zy)})),s.onDone(()=>{let t=this.players.indexOf(s);t>=0&&this.players.splice(t,1);const n=this._engine.playersByElement.get(e);if(n){let e=n.indexOf(s);e>=0&&n.splice(e,1)}}),this.players.push(s),c.push(s),s}deregister(e){delete this._triggers[e],this._engine.statesByElement.forEach((t,n)=>{delete t[e]}),this._elementListeners.forEach((t,n)=>{this._elementListeners.set(n,t.filter(t=>t.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);const t=this._engine.playersByElement.get(e);t&&(t.forEach(e=>e.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t,n=!1){this._engine.driver.query(e,jg,!0).forEach(e=>{if(e[ev])return;const n=this._engine.fetchNamespacesByElement(e);n.size?n.forEach(n=>n.triggerLeaveAnimation(e,t,!1,!0)):this.clearElementCache(e)})}triggerLeaveAnimation(e,t,n,r){const i=this._engine.statesByElement.get(e);if(i){const s=[];if(Object.keys(i).forEach(t=>{if(this._triggers[t]){const n=this.trigger(e,t,nv,r);n&&s.push(n)}}),s.length)return this._engine.markElementAsRemoved(this.id,e,!0,t),n&&fg(s).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){const t=this._elementListeners.get(e);if(t){const n=new Set;t.forEach(t=>{const r=t.name;if(n.has(r))return;n.add(r);const i=this._triggers[r].fallbackTransition,s=this._engine.statesByElement.get(e)[r]||rv,o=new tv(nv),a=new ov(this.id,r,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:r,transition:i,fromState:s,toState:o,player:a,isFallbackTransition:!0})})}}removeNode(e,t){const n=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t,!0),this.triggerLeaveAnimation(e,t,!0))return;let r=!1;if(n.totalAnimations){const t=n.players.length?n.playersByQueriedElement.get(e):[];if(t&&t.length)r=!0;else{let t=e;for(;t=t.parentNode;){if(n.statesByElement.get(t)){r=!0;break}}}}this.prepareLeaveAnimationListeners(e),r?n.markElementAsRemoved(this.id,e,!1,t):(n.afterFlush(()=>this.clearElementCache(e)),n.destroyInnerAnimations(e),n._onRemovalComplete(e,t))}insertNode(e,t){dv(e,this._hostClassName)}drainQueuedTransitions(e){const t=[];return this._queue.forEach(n=>{const r=n.player;if(r.destroyed)return;const i=n.element,s=this._elementListeners.get(i);s&&s.forEach(t=>{if(t.name==n.triggerName){const r=vg(i,n.triggerName,n.fromState.value,n.toState.value);r._data=e,gg(n.player,t.phase,r,t.callback)}}),r.markedForDestroy?this._engine.afterFlush(()=>{r.destroy()}):t.push(n)}),this._queue=[],t.sort((e,t)=>{const n=e.transition.ast.depCount,r=t.transition.ast.depCount;return 0==n||0==r?n-r:this._engine.driver.containsElement(e.element,t.element)?1:-1})}destroy(e){this.players.forEach(e=>e.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}elementContainsData(e){let t=!1;return this._elementListeners.has(e)&&(t=!0),t=!!this._queue.find(t=>t.element===e)||t}}class sv{constructor(e,t,n){this.bodyNode=e,this.driver=t,this._normalizer=n,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=((e,t)=>{})}_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}get queuedPlayers(){const e=[];return this._namespaceList.forEach(t=>{t.players.forEach(t=>{t.queued&&e.push(t)})}),e}createNamespace(e,t){const n=new iv(e,t,this);return t.parentNode?this._balanceNamespaceList(n,t):(this.newHostElements.set(t,n),this.collectEnterElement(t)),this._namespaceLookup[e]=n}_balanceNamespaceList(e,t){const n=this._namespaceList.length-1;if(n>=0){let r=!1;for(let i=n;i>=0;i--){const n=this._namespaceList[i];if(this.driver.containsElement(n.hostElement,t)){this._namespaceList.splice(i+1,0,e),r=!0;break}}r||this._namespaceList.splice(0,0,e)}else this._namespaceList.push(e);return this.namespacesByHostElement.set(t,e),e}register(e,t){let n=this._namespaceLookup[e];return n||(n=this.createNamespace(e,t)),n}registerTrigger(e,t,n){let r=this._namespaceLookup[e];r&&r.register(t,n)&&this.totalAnimations++}destroy(e,t){if(!e)return;const n=this._fetchNamespace(e);this.afterFlush(()=>{this.namespacesByHostElement.delete(n.hostElement),delete this._namespaceLookup[e];const t=this._namespaceList.indexOf(n);t>=0&&this._namespaceList.splice(t,1)}),this.afterFlushAnimationsDone(()=>n.destroy(t))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){const t=new Set,n=this.statesByElement.get(e);if(n){const e=Object.keys(n);for(let r=0;r<e.length;r++){const i=n[e[r]].namespaceId;if(i){const e=this._fetchNamespace(i);e&&t.add(e)}}}return t}trigger(e,t,n,r){if(av(t)){const i=this._fetchNamespace(e);if(i)return i.trigger(t,n,r),!0}return!1}insertNode(e,t,n,r){if(!av(t))return;const i=t[ev];if(i&&i.setForRemoval){i.setForRemoval=!1,i.setForMove=!0;const e=this.collectedLeaveElements.indexOf(t);e>=0&&this.collectedLeaveElements.splice(e,1)}if(e){const r=this._fetchNamespace(e);r&&r.insertNode(t,n)}r&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),dv(e,Ky)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),pv(e,Ky))}removeNode(e,t,n){if(!av(t))return void this._onRemovalComplete(t,n);const r=e?this._fetchNamespace(e):null;r?r.removeNode(t,n):this.markElementAsRemoved(e,t,!1,n)}markElementAsRemoved(e,t,n,r){this.collectedLeaveElements.push(t),t[ev]={namespaceId:e,setForRemoval:r,hasAnimation:n,removedBeforeQueried:!1}}listen(e,t,n,r,i){return av(t)?this._fetchNamespace(e).listen(t,n,r,i):()=>{}}_buildInstruction(e,t,n,r,i){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,n,r,e.fromState.options,e.toState.options,t,i)}destroyInnerAnimations(e){let t=this.driver.query(e,jg,!0);t.forEach(e=>this.destroyActiveAnimationsForElement(e)),0!=this.playersByQueriedElement.size&&(t=this.driver.query(e,Ug,!0)).forEach(e=>this.finishActiveQueriedAnimationOnElement(e))}destroyActiveAnimationsForElement(e){const t=this.playersByElement.get(e);t&&t.forEach(e=>{e.queued?e.markedForDestroy=!0:e.destroy()})}finishActiveQueriedAnimationOnElement(e){const t=this.playersByQueriedElement.get(e);t&&t.forEach(e=>e.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return fg(this.players).onDone(()=>e());e()})}processLeaveNode(e){const t=e[ev];if(t&&t.setForRemoval){if(e[ev]=Zy,t.namespaceId){this.destroyInnerAnimations(e);const n=this._fetchNamespace(t.namespaceId);n&&n.clearElementCache(e)}this._onRemovalComplete(e,t.setForRemoval)}this.driver.matchesElement(e,Qy)&&this.markElementAsDisabled(e,!1),this.driver.query(e,Qy,!0).forEach(t=>{this.markElementAsDisabled(e,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((e,t)=>this._balanceNamespaceList(e,t)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let n=0;n<this.collectedEnterElements.length;n++){dv(this.collectedEnterElements[n],Gy)}if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const n=[];try{t=this._flushAnimations(n,e)}finally{for(let e=0;e<n.length;e++)n[e]()}}else for(let n=0;n<this.collectedLeaveElements.length;n++){const e=this.collectedLeaveElements[n];this.processLeaveNode(e)}if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(e=>e()),this._flushFns=[],this._whenQuietFns.length){const e=this._whenQuietFns;this._whenQuietFns=[],t.length?fg(t).onDone(()=>{e.forEach(e=>e())}):e.forEach(e=>e())}}reportError(e){throw new Error(`Unable to process animations due to the following failed trigger transitions\n ${e.join("\n")}`)}_flushAnimations(e,t){const n=new Cy,r=[],i=new Map,s=[],o=new Map,a=new Map,u=new Map,c=new Set;this.disabledNodes.forEach(e=>{c.add(e);const t=this.driver.query(e,Wy,!0);for(let n=0;n<t.length;n++)c.add(t[n])});const l=this.bodyNode,h=Array.from(this.statesByElement.keys()),d=lv(h,this.collectedEnterElements),p=new Map;let f=0;d.forEach((e,t)=>{const n=Fg+f++;p.set(t,n),e.forEach(e=>dv(e,n))});const m=[],g=new Set,y=new Set;for(let N=0;N<this.collectedLeaveElements.length;N++){const e=this.collectedLeaveElements[N],t=e[ev];t&&t.setForRemoval&&(m.push(e),g.add(e),t.hasAnimation?this.driver.query(e,Xy,!0).forEach(e=>g.add(e)):y.add(e))}const v=new Map,_=lv(h,Array.from(g));_.forEach((e,t)=>{const n=Lg+f++;v.set(t,n),e.forEach(e=>dv(e,n))}),e.push(()=>{d.forEach((e,t)=>{const n=p.get(t);e.forEach(e=>pv(e,n))}),_.forEach((e,t)=>{const n=v.get(t);e.forEach(e=>pv(e,n))}),m.forEach(e=>{this.processLeaveNode(e)})});const b=[],w=[];for(let N=this._namespaceList.length-1;N>=0;N--){this._namespaceList[N].drainQueuedTransitions(t).forEach(e=>{const t=e.player,i=e.element;if(b.push(t),this.collectedEnterElements.length){const e=i[ev];if(e&&e.setForMove)return void t.destroy()}const c=!l||!this.driver.containsElement(l,i),h=v.get(i),d=p.get(i),f=this._buildInstruction(e,n,d,h,c);if(f.errors&&f.errors.length)return void w.push(f);if(c)return t.onStart(()=>Xg(i,f.fromStyles)),t.onDestroy(()=>Gg(i,f.toStyles)),void r.push(t);if(e.isFallbackTransition)return t.onStart(()=>Xg(i,f.fromStyles)),t.onDestroy(()=>Gg(i,f.toStyles)),void r.push(t);f.timelines.forEach(e=>e.stretchStartingKeyframe=!0),n.append(i,f.timelines);const m={instruction:f,player:t,element:i};s.push(m),f.queriedElements.forEach(e=>_g(o,e,[]).push(t)),f.preStyleProps.forEach((e,t)=>{const n=Object.keys(e);if(n.length){let e=a.get(t);e||a.set(t,e=new Set),n.forEach(t=>e.add(t))}}),f.postStyleProps.forEach((e,t)=>{const n=Object.keys(e);let r=u.get(t);r||u.set(t,r=new Set),n.forEach(e=>r.add(e))})})}if(w.length){const e=[];w.forEach(t=>{e.push(`@${t.triggerName} has failed due to:\n`),t.errors.forEach(t=>e.push(`- ${t}\n`))}),b.forEach(e=>e.destroy()),this.reportError(e)}const E=new Map,C=new Map;s.forEach(e=>{const t=e.element;n.has(t)&&(C.set(t,t),this._beforeAnimationBuild(e.player.namespaceId,e.instruction,E))}),r.forEach(e=>{const t=e.element;this._getPreviousPlayers(t,!1,e.namespaceId,e.triggerName,null).forEach(e=>{_g(E,t,[]).push(e),e.destroy()})});const S=m.filter(e=>mv(e,a,u)),T=new Map;cv(T,this.driver,y,u,og).forEach(e=>{mv(e,a,u)&&S.push(e)});const x=new Map;d.forEach((e,t)=>{cv(x,this.driver,new Set(e),a,dg)}),S.forEach(e=>{const t=T.get(e),n=x.get(e);T.set(e,Object.assign({},t,n))});const A=[],D=[],I={};s.forEach(e=>{const{element:t,player:s,instruction:o}=e;if(n.has(t)){if(c.has(t))return s.onDestroy(()=>Gg(t,o.toStyles)),s.disabled=!0,s.overrideTotalTime(o.totalTime),void r.push(s);let e=I;if(C.size>1){let n=t;const r=[];for(;n=n.parentNode;){const t=C.get(n);if(t){e=t;break}r.push(n)}r.forEach(t=>C.set(t,e))}const n=this._buildAnimation(s.namespaceId,o,E,i,x,T);if(s.setRealPlayer(n),e===I)A.push(s);else{const t=this.playersByElement.get(e);t&&t.length&&(s.parentPlayer=fg(t)),r.push(s)}}else Xg(t,o.fromStyles),s.onDestroy(()=>Gg(t,o.toStyles)),D.push(s),c.has(t)&&r.push(s)}),D.forEach(e=>{const t=i.get(e.element);if(t&&t.length){const n=fg(t);e.setRealPlayer(n)}}),r.forEach(e=>{e.parentPlayer?e.syncPlayerEvents(e.parentPlayer):e.destroy()});for(let N=0;N<m.length;N++){const e=m[N],t=e[ev];if(pv(e,Lg),t&&t.hasAnimation)continue;let n=[];if(o.size){let t=o.get(e);t&&t.length&&n.push(...t);let r=this.driver.query(e,Ug,!0);for(let e=0;e<r.length;e++){let t=o.get(r[e]);t&&t.length&&n.push(...t)}}const r=n.filter(e=>!e.destroyed);r.length?fv(this,e,r):this.processLeaveNode(e)}return m.length=0,A.forEach(e=>{this.players.push(e),e.onDone(()=>{e.destroy();const t=this.players.indexOf(e);this.players.splice(t,1)}),e.play()}),A}elementContainsData(e,t){let n=!1;const r=t[ev];return r&&r.setForRemoval&&(n=!0),this.playersByElement.has(t)&&(n=!0),this.playersByQueriedElement.has(t)&&(n=!0),this.statesByElement.has(t)&&(n=!0),this._fetchNamespace(e).elementContainsData(t)||n}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,n,r,i){let s=[];if(t){const t=this.playersByQueriedElement.get(e);t&&(s=t)}else{const t=this.playersByElement.get(e);if(t){const e=!i||i==nv;t.forEach(t=>{t.queued||(e||t.triggerName==r)&&s.push(t)})}}return(n||r)&&(s=s.filter(e=>(!n||n==e.namespaceId)&&(!r||r==e.triggerName))),s}_beforeAnimationBuild(e,t,n){const r=t.triggerName,i=t.element,s=t.isRemovalTransition?void 0:e,o=t.isRemovalTransition?void 0:r;for(const a of t.timelines){const e=a.element,r=e!==i,u=_g(n,e,[]);this._getPreviousPlayers(e,r,s,o,t.toState).forEach(e=>{const t=e.getRealPlayer();t.beforeDestroy&&t.beforeDestroy(),e.destroy(),u.push(e)})}Xg(i,t.fromStyles)}_buildAnimation(e,t,n,r,i,s){const o=t.triggerName,a=t.element,u=[],c=new Set,l=new Set,h=t.timelines.map(t=>{const h=t.element;c.add(h);const d=h[ev];if(d&&d.removedBeforeQueried)return new lg(t.duration,t.delay);const p=h!==a,f=function(e){const t=[];return function e(t,n){for(let r=0;r<t.length;r++){const i=t[r];i instanceof hg?e(i.players,n):n.push(i)}}(e,t),t}((n.get(h)||Yy).map(e=>e.getRealPlayer())).filter(e=>{const t=e;return!!t.element&&t.element===h}),m=i.get(h),g=s.get(h),y=mg(this.driver,this._normalizer,0,t.keyframes,m,g),v=this._buildPlayer(t,y,f);if(t.subTimeline&&r&&l.add(h),p){const t=new ov(e,o,h);t.setRealPlayer(v),u.push(t)}return v});u.forEach(e=>{_g(this.playersByQueriedElement,e.element,[]).push(e),e.onDone(()=>(function(e,t,n){let r;if(e instanceof Map){if(r=e.get(t)){if(r.length){const e=r.indexOf(n);r.splice(e,1)}0==r.length&&e.delete(t)}}else if(r=e[t]){if(r.length){const e=r.indexOf(n);r.splice(e,1)}0==r.length&&delete e[t]}return r})(this.playersByQueriedElement,e.element,e))}),c.forEach(e=>dv(e,Bg));const d=fg(h);return d.onDestroy(()=>{c.forEach(e=>pv(e,Bg)),Gg(a,t.toStyles)}),l.forEach(e=>{_g(r,e,[]).push(d)}),d}_buildPlayer(e,t,n){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,n):new lg(e.duration,e.delay)}}class ov{constructor(e,t,n){this.namespaceId=e,this.triggerName=t,this.element=n,this._player=new lg,this._containsRealPlayer=!1,this._queuedCallbacks={},this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,Object.keys(this._queuedCallbacks).forEach(t=>{this._queuedCallbacks[t].forEach(n=>gg(e,t,void 0,n))}),this._queuedCallbacks={},this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){const t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){_g(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){const t=this._player;t.triggerCallback&&t.triggerCallback(e)}}function av(e){return e&&1===e.nodeType}function uv(e,t){const n=e.style.display;return e.style.display=null!=t?t:"none",n}function cv(e,t,n,r,i){const s=[];n.forEach(e=>s.push(uv(e)));const o=[];r.forEach((n,r)=>{const s={};n.forEach(e=>{const n=s[e]=t.computeStyle(r,e,i);n&&0!=n.length||(r[ev]=Jy,o.push(r))}),e.set(r,s)});let a=0;return n.forEach(e=>uv(e,s[a++])),o}function lv(e,t){const n=new Map;if(e.forEach(e=>n.set(e,[])),0==t.length)return n;const r=1,i=new Set(t),s=new Map;return t.forEach(e=>{const t=function e(t){if(!t)return r;let o=s.get(t);if(o)return o;const a=t.parentNode;return o=n.has(a)?a:i.has(a)?r:e(a),s.set(t,o),o}(e);t!==r&&n.get(t).push(e)}),n}const hv="$$classes";function dv(e,t){if(e.classList)e.classList.add(t);else{let n=e[hv];n||(n=e[hv]={}),n[t]=!0}}function pv(e,t){if(e.classList)e.classList.remove(t);else{let n=e[hv];n&&delete n[t]}}function fv(e,t,n){fg(n).onDone(()=>e.processLeaveNode(t))}function mv(e,t,n){const r=n.get(e);if(!r)return!1;let i=t.get(e);return i?r.forEach(e=>i.add(e)):t.set(e,r),n.delete(e),!0}class gv{constructor(e,t,n){this.bodyNode=e,this._driver=t,this._triggerCache={},this.onRemovalComplete=((e,t)=>{}),this._transitionEngine=new sv(e,t,n),this._timelineEngine=new Hy(e,t,n),this._transitionEngine.onRemovalComplete=((e,t)=>this.onRemovalComplete(e,t))}registerTrigger(e,t,n,r,i){const s=e+"-"+r;let o=this._triggerCache[s];if(!o){const e=[],t=my(this._driver,i,e);if(e.length)throw new Error(`The animation trigger "${r}" has failed to build due to the following errors:\n - ${e.join("\n - ")}`);o=function(e,t){return new Uy(e,t)}(r,t),this._triggerCache[s]=o}this._transitionEngine.registerTrigger(t,r,o)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,n,r){this._transitionEngine.insertNode(e,t,n,r)}onRemove(e,t,n){this._transitionEngine.removeNode(e,t,n)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,n,r){if("@"==n.charAt(0)){const[e,i]=bg(n),s=r;this._timelineEngine.command(e,t,i,s)}else this._transitionEngine.trigger(e,t,n,r)}listen(e,t,n,r,i){if("@"==n.charAt(0)){const[e,r]=bg(n);return this._timelineEngine.listen(e,t,r,i)}return this._transitionEngine.listen(e,t,n,r,i)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}const yv=3,vv="animation",_v="animationend",bv=1e3;class wv{constructor(e,t,n,r,i,s,o){this._element=e,this._name=t,this._duration=n,this._delay=r,this._easing=i,this._fillMode=s,this._onDoneFn=o,this._finished=!1,this._destroyed=!1,this._startTime=0,this._position=0,this._eventFn=(e=>this._handleCallback(e))}apply(){!function(e,t){const n=Av(e,"").trim();let r=0;n.length&&(r=function(e,t){let n=0;for(let r=0;r<e.length;r++){const i=e.charAt(r);i===t&&n++}return n}(n,",")+1,t=`${n}, ${t}`);xv(e,"",t)}(this._element,`${this._duration}ms ${this._easing} ${this._delay}ms 1 normal ${this._fillMode} ${this._name}`),Tv(this._element,this._eventFn,!1),this._startTime=Date.now()}pause(){Ev(this._element,this._name,"paused")}resume(){Ev(this._element,this._name,"running")}setPosition(e){const t=Cv(this._element,this._name);this._position=e*this._duration,xv(this._element,"Delay",`-${this._position}ms`,t)}getPosition(){return this._position}_handleCallback(e){const t=e._ngTestManualTimestamp||Date.now(),n=parseFloat(e.elapsedTime.toFixed(yv))*bv;e.animationName==this._name&&Math.max(t-this._startTime,0)>=this._delay&&n>=this._duration&&this.finish()}finish(){this._finished||(this._finished=!0,this._onDoneFn(),Tv(this._element,this._eventFn,!0))}destroy(){this._destroyed||(this._destroyed=!0,this.finish(),function(e,t){const n=Av(e,"").split(","),r=Sv(n,t);if(r>=0){n.splice(r,1);const t=n.join(",");xv(e,"",t)}}(this._element,this._name))}}function Ev(e,t,n){xv(e,"PlayState",n,Cv(e,t))}function Cv(e,t){const n=Av(e,"");if(n.indexOf(",")>0){return Sv(n.split(","),t)}return Sv([n],t)}function Sv(e,t){for(let n=0;n<e.length;n++)if(e[n].indexOf(t)>=0)return n;return-1}function Tv(e,t,n){n?e.removeEventListener(_v,t):e.addEventListener(_v,t)}function xv(e,t,n,r){const i=vv+t;if(null!=r){const t=e.style[i];if(t.length){const e=t.split(",");e[r]=n,n=e.join(",")}}e.style[i]=n}function Av(e,t){return e.style[vv+t]}const Dv="forwards",Iv="linear";class Nv{constructor(e,t,n,r,i,s,o){this.element=e,this.keyframes=t,this.animationName=n,this._duration=r,this._delay=i,this._finalStyles=o,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this.currentSnapshot={},this._state=0,this.easing=s||Iv,this.totalTime=r+i,this._buildStyler()}onStart(e){this._onStartFns.push(e)}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}destroy(){this.init(),this._state>=4||(this._state=4,this._styler.destroy(),this._flushStartFns(),this._flushDoneFns(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}_flushDoneFns(){this._onDoneFns.forEach(e=>e()),this._onDoneFns=[]}_flushStartFns(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}finish(){this.init(),this._state>=3||(this._state=3,this._styler.finish(),this._flushStartFns(),this._flushDoneFns())}setPosition(e){this._styler.setPosition(e)}getPosition(){return this._styler.getPosition()}hasStarted(){return this._state>=2}init(){if(this._state>=1)return;this._state=1;this.element;this._styler.apply(),this._delay&&this._styler.pause()}play(){this.init(),this.hasStarted()||(this._flushStartFns(),this._state=2),this._styler.resume()}pause(){this.init(),this._styler.pause()}restart(){this.reset(),this.play()}reset(){this._styler.destroy(),this._buildStyler(),this._styler.apply()}_buildStyler(){this._styler=new wv(this.element,this.animationName,this._duration,this._delay,this.easing,Dv,()=>this.finish())}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(e=>e()),t.length=0}beforeDestroy(){this.init();const e={};if(this.hasStarted()){const t=this._state>=3;Object.keys(this._finalStyles).forEach(n=>{"offset"!=n&&(e[n]=t?this._finalStyles[n]:ay(this.element,n))})}this.currentSnapshot=e}}class Ov extends lg{constructor(e,t){super(),this.element=e,this._startingStyles={},this.__initialized=!1,this._styles=Og(t)}init(){!this.__initialized&&this._startingStyles&&(this.__initialized=!0,Object.keys(this._styles).forEach(e=>{this._startingStyles[e]=this.element.style[e]}),super.init())}play(){this._startingStyles&&(this.init(),Object.keys(this._styles).forEach(e=>this.element.style.setProperty(e,this._styles[e])),super.play())}destroy(){this._startingStyles&&(Object.keys(this._startingStyles).forEach(e=>{const t=this._startingStyles[e];t?this.element.style.setProperty(e,t):this.element.style.removeProperty(e)}),this._startingStyles=null,super.destroy())}}const kv="gen_css_kf_",Pv=" ";class Mv{constructor(){this._count=0,this._head=document.querySelector("head"),this._warningIssued=!1}validateStyleProperty(e){return Ag(e)}matchesElement(e,t){return Dg(e,t)}containsElement(e,t){return Ig(e,t)}query(e,t,n){return Ng(e,t,n)}computeStyle(e,t,n){return window.getComputedStyle(e)[t]}buildKeyframeElement(e,t,n){n=n.map(e=>Og(e));let r=`@keyframes ${t} {\n`,i="";n.forEach(e=>{i=Pv;const t=parseFloat(e.offset);r+=`${i}${100*t}% {\n`,i+=Pv,Object.keys(e).forEach(t=>{const n=e[t];switch(t){case"offset":return;case"easing":return void(n&&(r+=`${i}animation-timing-function: ${n};\n`));default:return void(r+=`${i}${t}: ${n};\n`)}}),r+=`${i}}\n`}),r+="}\n";const s=document.createElement("style");return s.innerHTML=r,s}animate(e,t,n,r,i,s=[],o){o&&this._notifyFaultyScrubber();const a=s.filter(e=>e instanceof Nv),u={};iy(n,r)&&a.forEach(e=>{let t=e.currentSnapshot;Object.keys(t).forEach(e=>u[e]=t[e])});const c=function(e){let t={};if(e){const n=Array.isArray(e)?e:[e];n.forEach(e=>{Object.keys(e).forEach(n=>{"offset"!=n&&"easing"!=n&&(t[n]=e[n])})})}return t}(t=sy(e,t,u));if(0==n)return new Ov(e,c);const l=`${kv}${this._count++}`,h=this.buildKeyframeElement(e,l,t);document.querySelector("head").appendChild(h);const d=new Nv(e,t,l,n,r,i,c);return d.onDestroy(()=>(function(e){e.parentNode.removeChild(e)})(h)),d}_notifyFaultyScrubber(){this._warningIssued||(console.warn("@angular/animations: please load the web-animations.js polyfill to allow programmatic access...\n","  visit http://bit.ly/IWukam to learn more about using the web-animation-js polyfill."),this._warningIssued=!0)}}class Rv{constructor(e,t,n){this.element=e,this.keyframes=t,this.options=n,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this.time=0,this.parentPlayer=null,this.currentSnapshot={},this._duration=n.duration,this._delay=n.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:{},this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_triggerWebAnimation(e,t,n){return e.animate(t,n)}onStart(e){this._onStartFns.push(e)}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){this.domPlayer.currentTime=e*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const e={};this.hasStarted()&&Object.keys(this._finalKeyframe).forEach(t=>{"offset"!=t&&(e[t]=this._finished?this._finalKeyframe[t]:ay(this.element,t))}),this.currentSnapshot=e}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(e=>e()),t.length=0}}class Fv{constructor(){this._isNativeImpl=/\{\s*\[native\s+code\]\s*\}/.test(Lv().toString()),this._cssKeyframesDriver=new Mv}validateStyleProperty(e){return Ag(e)}matchesElement(e,t){return Dg(e,t)}containsElement(e,t){return Ig(e,t)}query(e,t,n){return Ng(e,t,n)}computeStyle(e,t,n){return window.getComputedStyle(e)[t]}overrideWebAnimationsSupport(e){this._isNativeImpl=e}animate(e,t,n,r,i,s=[],o){if(!o&&!this._isNativeImpl)return this._cssKeyframesDriver.animate(e,t,n,r,i,s);const a={duration:n,delay:r,fill:0==r?"both":"forwards"};i&&(a.easing=i);const u={},c=s.filter(e=>e instanceof Rv);return iy(n,r)&&c.forEach(e=>{let t=e.currentSnapshot;Object.keys(t).forEach(e=>u[e]=t[e])}),t=sy(e,t=t.map(e=>Wg(e,!1)),u),new Rv(e,t,a)}}function Lv(){return"undefined"!=typeof window&&void 0!==window.document&&Element.prototype.animate||{}}class Vv extends ig{constructor(e,t){super(),this._nextAnimationId=0;const n={id:"0",encapsulation:i.kb.None,styles:[],data:{animation:[]}};this._renderer=e.createRenderer(t.body,n)}build(e){const t=this._nextAnimationId.toString();this._nextAnimationId++;const n=Array.isArray(e)?ag(e):e;return Uv(this._renderer,null,t,"register",[n]),new jv(t,this._renderer)}}Vv.decorators=[{type:i.A}],Vv.ctorParameters=(()=>[{type:i.X},{type:void 0,decorators:[{type:i.z,args:[Of]}]}]);class jv extends sg{constructor(e,t){super(),this._id=e,this._renderer=t}create(e,t){return new Bv(this._id,e,t||{},this._renderer)}}class Bv{constructor(e,t,n,r){this.id=e,this.element=t,this._renderer=r,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",n)}_listen(e,t){return this._renderer.listen(this.element,`@@${this.id}:${e}`,t)}_command(e,...t){return Uv(this._renderer,this.element,this.id,e,t)}onDone(e){this._listen("done",e)}onStart(e){this._listen("start",e)}onDestroy(e){this._listen("destroy",e)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset")}setPosition(e){this._command("setPosition",e)}getPosition(){return 0}}function Uv(e,t,n,r,i){return e.setProperty(t,`@@${n}:${r}`,i)}const qv="@",$v="@.disabled";class Hv{constructor(e,t,n){this.delegate=e,this.engine=t,this._zone=n,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),t.onRemovalComplete=((e,t)=>{t&&t.parentNode(e)&&t.removeChild(e.parentNode,e)})}createRenderer(e,t){const n=this.delegate.createRenderer(e,t);if(!(e&&t&&t.data&&t.data.animation)){let e=this._rendererCache.get(n);return e||(e=new zv("",n,this.engine),this._rendererCache.set(n,e)),e}const r=t.id,i=t.id+"-"+this._currentId;return this._currentId++,this.engine.register(i,e),t.data.animation.forEach(t=>this.engine.registerTrigger(r,i,e,t.name,t)),new Wv(this,i,n,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(e,t,n){e>=0&&e<this._microtaskId?this._zone.run(()=>t(n)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(e=>{const[t,n]=e;t(n)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([t,n]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}Hv.decorators=[{type:i.A}],Hv.ctorParameters=(()=>[{type:i.X},{type:gv},{type:i.N}]);class zv{constructor(e,t,n){this.namespaceId=e,this.delegate=t,this.engine=n,this.destroyNode=this.delegate.destroyNode?e=>t.destroyNode(e):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,n){this.delegate.insertBefore(e,t,n),this.engine.onInsert(this.namespaceId,t,e,!0)}removeChild(e,t){this.engine.onRemove(this.namespaceId,t,this.delegate)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,n,r){this.delegate.setAttribute(e,t,n,r)}removeAttribute(e,t,n){this.delegate.removeAttribute(e,t,n)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,n,r){this.delegate.setStyle(e,t,n,r)}removeStyle(e,t,n){this.delegate.removeStyle(e,t,n)}setProperty(e,t,n){t.charAt(0)==qv&&t==$v?this.disableAnimations(e,!!n):this.delegate.setProperty(e,t,n)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,n){return this.delegate.listen(e,t,n)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}}class Wv extends zv{constructor(e,t,n,r){super(t,n,r),this.factory=e,this.namespaceId=t}setProperty(e,t,n){t.charAt(0)==qv?"."==t.charAt(1)&&t==$v?(n=void 0===n||!!n,this.disableAnimations(e,n)):this.engine.process(this.namespaceId,e,t.substr(1),n):this.delegate.setProperty(e,t,n)}listen(e,t,n){if(t.charAt(0)==qv){const r=function(e){switch(e){case"body":return document.body;case"document":return document;case"window":return window;default:return e}}(e);let i=t.substr(1),s="";return i.charAt(0)!=qv&&([i,s]=function(e){const t=e.indexOf("."),n=e.substring(0,t),r=e.substr(t+1);return[n,r]}(i)),this.engine.listen(this.namespaceId,r,i,s,e=>{const t=e._data||-1;this.factory.scheduleListenerCallback(t,n,e)})}return this.delegate.listen(e,t,n)}}class Kv extends gv{constructor(e,t,n){super(e.body,t,n)}}Kv.decorators=[{type:i.A}],Kv.ctorParameters=(()=>[{type:void 0,decorators:[{type:i.z,args:[vf.c]}]},{type:Pg},{type:My}]);const Qv=new i.B("AnimationModuleType"),Gv=[{provide:ig,useClass:Vv},{provide:My,useFactory:function(){return new Ry}},{provide:gv,useClass:Kv},{provide:i.X,useFactory:function(e,t,n){return new Hv(e,t,n)},deps:[em,gv,i.N]}],Xv=[{provide:Pg,useFactory:function(){return"function"==typeof Lv()?new Fv:new Mv}},{provide:Qv,useValue:"BrowserAnimations"},...Gv],Yv=[{provide:Pg,useClass:kg},{provide:Qv,useValue:"NoopAnimations"},...Gv];class Zv{}Zv.decorators=[{type:i.I,args:[{exports:[Bm],providers:Xv}]}];(class{}).decorators=[{type:i.I,args:[{exports:[Bm],providers:Yv}]}];var Jv=n("MMa0");let e_=class{};e_=function(e,t,n,r){var i,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,n,o):i(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o}([Object(i.n)({selector:"app-root",template:n("nH/3")})],e_);var t_=n("LRne"),n_=n("Cfvw"),r_=n("XNiG"),i_=n("9ppp");class s_ extends r_.a{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return t&&!t.closed&&e.next(this._value),t}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new i_.a;return this._value}next(e){super.next(this._value=e)}}var o_=n("HDdC");function a_(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}a_.prototype=Object.create(Error.prototype);const u_=a_;var c_=n("z+Ro"),l_=n("DH7j"),h_=n("l7GE"),d_=n("ZUHj"),p_=n("yCtX");const f_={};class m_{constructor(e){this.resultSelector=e}call(e,t){return t.subscribe(new g_(e,this.resultSelector))}}class g_ extends h_.a{constructor(e,t){super(e),this.resultSelector=t,this.active=0,this.values=[],this.observables=[]}_next(e){this.values.push(f_),this.observables.push(e)}_complete(){const e=this.observables,t=e.length;if(0===t)this.destination.complete();else{this.active=t,this.toRespond=t;for(let n=0;n<t;n++){const t=e[n];this.add(Object(d_.a)(this,t,t,n))}}}notifyComplete(e){0==(this.active-=1)&&this.destination.complete()}notifyNext(e,t,n,r,i){const s=this.values,o=s[n],a=this.toRespond?o===f_?--this.toRespond:this.toRespond:0;s[n]=t,0===a&&(this.resultSelector?this._tryResultSelector(s):this.destination.next(s.slice()))}_tryResultSelector(e){let t;try{t=this.resultSelector.apply(this,e)}catch(n){return void this.destination.error(n)}this.destination.next(t)}}var y_=n("EY2u");function v_(e){return new o_.a(t=>{let n;try{n=e()}catch(r){return void t.error(r)}return(n?Object(n_.a)(n):Object(y_.b)()).subscribe(t)})}var __=n("lJxs"),b_=n("bHdf");function w_(){return Object(b_.a)(1)}var E_=n("pLZG"),C_=n("7o/Q");function S_(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}S_.prototype=Object.create(Error.prototype);const T_=S_;function x_(e){return function(t){return 0===e?Object(y_.b)():t.lift(new A_(e))}}class A_{constructor(e){if(this.total=e,this.total<0)throw new T_}call(e,t){return t.subscribe(new D_(e,this.total))}}class D_ extends C_.a{constructor(e,t){super(e),this.total=t,this.ring=new Array,this.count=0}_next(e){const t=this.ring,n=this.total,r=this.count++;if(t.length<n)t.push(e);else{t[r%n]=e}}_complete(){const e=this.destination;let t=this.count;if(t>0){const n=this.count>=this.total?this.total:this.count,r=this.ring;for(let i=0;i<n;i++){const i=t++%n;e.next(r[i])}}e.complete()}}var I_=n("KqfI"),N_=n("n6bG");function O_(e,t,n){return function(r){return r.lift(new k_(e,t,n))}}class k_{constructor(e,t,n){this.nextOrObserver=e,this.error=t,this.complete=n}call(e,t){return t.subscribe(new P_(e,this.nextOrObserver,this.error,this.complete))}}class P_ extends C_.a{constructor(e,t,n,r){super(e),this._tapNext=I_.a,this._tapError=I_.a,this._tapComplete=I_.a,this._tapError=n||I_.a,this._tapComplete=r||I_.a,Object(N_.a)(t)?(this._context=this,this._tapNext=t):t&&(this._context=t,this._tapNext=t.next||I_.a,this._tapError=t.error||I_.a,this._tapComplete=t.complete||I_.a)}_next(e){try{this._tapNext.call(this._context,e)}catch(t){return void this.destination.error(t)}this.destination.next(e)}_error(e){try{this._tapError.call(this._context,e)}catch(e){return void this.destination.error(e)}this.destination.error(e)}_complete(){try{this._tapComplete.call(this._context)}catch(e){return void this.destination.error(e)}return this.destination.complete()}}const M_=(e=function(){return new u_})=>O_({hasValue:!1,next(){this.hasValue=!0},complete(){if(!this.hasValue)throw e()}});function R_(e=null){return t=>t.lift(new F_(e))}class F_{constructor(e){this.defaultValue=e}call(e,t){return t.subscribe(new L_(e,this.defaultValue))}}class L_ extends C_.a{constructor(e,t){super(e),this.defaultValue=t,this.isEmpty=!0}_next(e){this.isEmpty=!1,this.destination.next(e)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}var V_=n("SpAZ");function j_(e,t){const n=arguments.length>=2;return r=>r.pipe(e?Object(E_.a)((t,n)=>e(t,n,r)):V_.a,x_(1),n?R_(t):M_(()=>new u_))}var B_=n("51Dv");function U_(e){return function(t){const n=new q_(e),r=t.lift(n);return n.caught=r}}class q_{constructor(e){this.selector=e}call(e,t){return t.subscribe(new $_(e,this.selector,this.caught))}}class $_ extends h_.a{constructor(e,t,n){super(e),this.selector=t,this.caught=n}error(e){if(!this.isStopped){let n;try{n=this.selector(e,this.caught)}catch(t){return void super.error(t)}this._unsubscribeAndRecycle();const r=new B_.a(this,void 0,void 0);this.add(r),Object(d_.a)(this,n,void 0,void 0,r)}}}function H_(e){return t=>0===e?Object(y_.b)():t.lift(new z_(e))}class z_{constructor(e){if(this.total=e,this.total<0)throw new T_}call(e,t){return t.subscribe(new W_(e,this.total))}}class W_ extends C_.a{constructor(e,t){super(e),this.total=t,this.count=0}_next(e){const t=this.total,n=++this.count;n<=t&&(this.destination.next(e),n===t&&(this.destination.complete(),this.unsubscribe()))}}function K_(e,t){const n=arguments.length>=2;return r=>r.pipe(e?Object(E_.a)((t,n)=>e(t,n,r)):V_.a,H_(1),n?R_(t):M_(()=>new u_))}var Q_=n("5+tZ");class G_{constructor(e,t,n){this.predicate=e,this.thisArg=t,this.source=n}call(e,t){return t.subscribe(new X_(e,this.predicate,this.thisArg,this.source))}}class X_ extends C_.a{constructor(e,t,n,r){super(e),this.predicate=t,this.thisArg=n,this.source=r,this.index=0,this.thisArg=n||this}notifyComplete(e){this.destination.next(e),this.destination.complete()}_next(e){let t=!1;try{t=this.predicate.call(this.thisArg,e,this.index++,this.source)}catch(n){return void this.destination.error(n)}t||this.notifyComplete(!1)}_complete(){this.notifyComplete(!0)}}function Y_(e,t){return"function"==typeof t?n=>n.pipe(Y_((n,r)=>Object(n_.a)(e(n,r)).pipe(Object(__.a)((e,i)=>t(n,e,r,i))))):t=>t.lift(new Z_(e))}class Z_{constructor(e){this.project=e}call(e,t){return t.subscribe(new J_(e,this.project))}}class J_ extends h_.a{constructor(e,t){super(e),this.project=t,this.index=0}_next(e){let t;const n=this.index++;try{t=this.project(e,n)}catch(r){return void this.destination.error(r)}this._innerSub(t,e,n)}_innerSub(e,t,n){const r=this.innerSubscription;r&&r.unsubscribe();const i=new B_.a(this,void 0,void 0);this.destination.add(i),this.innerSubscription=Object(d_.a)(this,e,t,n,i)}_complete(){const{innerSubscription:e}=this;e&&!e.closed||super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=null}notifyComplete(e){this.destination.remove(e),this.innerSubscription=null,this.isStopped&&super._complete()}notifyNext(e,t,n,r,i){this.destination.next(t)}}var eb=n("XUOw");function tb(...e){return 1===e.length||2===e.length&&Object(c_.a)(e[1])?Object(n_.a)(e[0]):w_()(Object(t_.a)(...e))}var nb=n("Kqap");function rb(e,t){return Object(Q_.a)(e,t,1)}var ib=n("mCNh");var sb=n("quSY");class ob{constructor(e){this.callback=e}call(e,t){return t.subscribe(new ab(e,this.callback))}}class ab extends C_.a{constructor(e,t){super(e),this.add(new sb.a(t))}}class ub{constructor(e,t){this.id=e,this.url=t}}class cb extends ub{constructor(e,t,n="imperative",r=null){super(e,t),this.navigationTrigger=n,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class lb extends ub{constructor(e,t,n){super(e,t),this.urlAfterRedirects=n}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class hb extends ub{constructor(e,t,n){super(e,t),this.reason=n}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class db extends ub{constructor(e,t,n){super(e,t),this.error=n}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class pb extends ub{constructor(e,t,n,r){super(e,t),this.urlAfterRedirects=n,this.state=r}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class fb extends ub{constructor(e,t,n,r){super(e,t),this.urlAfterRedirects=n,this.state=r}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class mb extends ub{constructor(e,t,n,r,i){super(e,t),this.urlAfterRedirects=n,this.state=r,this.shouldActivate=i}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class gb extends ub{constructor(e,t,n,r){super(e,t),this.urlAfterRedirects=n,this.state=r}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class yb extends ub{constructor(e,t,n,r){super(e,t),this.urlAfterRedirects=n,this.state=r}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class vb{constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class _b{constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class bb{constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class wb{constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Eb{constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Cb{constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Sb{constructor(e,t,n){this.routerEvent=e,this.position=t,this.anchor=n}toString(){const e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}}class Tb{}Tb.decorators=[{type:i.n,args:[{template:"<router-outlet></router-outlet>"}]}];const xb="primary";class Ab{constructor(e){this.params=e||{}}has(e){return this.params.hasOwnProperty(e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function Db(e){return new Ab(e)}const Ib="ngNavigationCancelingError";function Nb(e){const t=Error("NavigationCancelingError: "+e);return t[Ib]=!0,t}function Ob(e,t,n){const r=n.path.split("/");if(r.length>e.length)return null;if("full"===n.pathMatch&&(t.hasChildren()||r.length<e.length))return null;const i={};for(let s=0;s<r.length;s++){const t=r[s],n=e[s];if(t.startsWith(":"))i[t.substring(1)]=n;else if(t!==n.path)return null}return{consumed:e.slice(0,r.length),posParams:i}}class kb{constructor(e,t){this.routes=e,this.module=t}}function Pb(e,t=""){for(let n=0;n<e.length;n++){const r=e[n];Mb(r,Rb(t,r))}}function Mb(e,t){if(!e)throw new Error(`\n      Invalid configuration of route '${t}': Encountered undefined route.\n      The reason might be an extra comma.\n\n      Example:\n      const routes: Routes = [\n        { path: '', redirectTo: '/dashboard', pathMatch: 'full' },\n        { path: 'dashboard',  component: DashboardComponent },, << two commas\n        { path: 'detail/:id', component: HeroDetailComponent }\n      ];\n    `);if(Array.isArray(e))throw new Error(`Invalid configuration of route '${t}': Array cannot be specified`);if(!e.component&&!e.children&&!e.loadChildren&&e.outlet&&e.outlet!==xb)throw new Error(`Invalid configuration of route '${t}': a componentless route without children or loadChildren cannot have a named outlet set`);if(e.redirectTo&&e.children)throw new Error(`Invalid configuration of route '${t}': redirectTo and children cannot be used together`);if(e.redirectTo&&e.loadChildren)throw new Error(`Invalid configuration of route '${t}': redirectTo and loadChildren cannot be used together`);if(e.children&&e.loadChildren)throw new Error(`Invalid configuration of route '${t}': children and loadChildren cannot be used together`);if(e.redirectTo&&e.component)throw new Error(`Invalid configuration of route '${t}': redirectTo and component cannot be used together`);if(e.path&&e.matcher)throw new Error(`Invalid configuration of route '${t}': path and matcher cannot be used together`);if(void 0===e.redirectTo&&!e.component&&!e.children&&!e.loadChildren)throw new Error(`Invalid configuration of route '${t}'. One of the following must be provided: component, redirectTo, children or loadChildren`);if(void 0===e.path&&void 0===e.matcher)throw new Error(`Invalid configuration of route '${t}': routes must have either a path or a matcher specified`);if("string"==typeof e.path&&"/"===e.path.charAt(0))throw new Error(`Invalid configuration of route '${t}': path cannot start with a slash`);if(""===e.path&&void 0!==e.redirectTo&&void 0===e.pathMatch){const n="The default value of 'pathMatch' is 'prefix', but often the intent is to use 'full'.";throw new Error(`Invalid configuration of route '{path: "${t}", redirectTo: "${e.redirectTo}"}': please provide 'pathMatch'. ${n}`)}if(void 0!==e.pathMatch&&"full"!==e.pathMatch&&"prefix"!==e.pathMatch)throw new Error(`Invalid configuration of route '${t}': pathMatch can only be set to 'prefix' or 'full'`);e.children&&Pb(e.children,t)}function Rb(e,t){return t?e||t.path?e&&!t.path?`${e}/`:!e&&t.path?t.path:`${e}/${t.path}`:"":e}function Fb(e){const t=e.children&&e.children.map(Fb),n=t?Object.assign({},e,{children:t}):Object.assign({},e);return!n.component&&(t||n.loadChildren)&&n.outlet&&n.outlet!==xb&&(n.component=Tb),n}function Lb(e,t){const n=Object.keys(e),r=Object.keys(t);if(n.length!=r.length)return!1;let i;for(let s=0;s<n.length;s++)if(e[i=n[s]]!==t[i])return!1;return!0}function Vb(e){return Array.prototype.concat.apply([],e)}function jb(e){return e.length>0?e[e.length-1]:null}function Bb(e,t){for(const n in e)e.hasOwnProperty(n)&&t(e[n],n)}function Ub(e){return Object(i.Ob)(e)?e:Object(i.Pb)(e)?Object(n_.a)(Promise.resolve(e)):Object(t_.a)(e)}function qb(e,t,n){return n?function(e,t){return Lb(e,t)}(e.queryParams,t.queryParams)&&function e(t,n){if(!Kb(t.segments,n.segments))return!1;if(t.numberOfChildren!==n.numberOfChildren)return!1;for(const r in n.children){if(!t.children[r])return!1;if(!e(t.children[r],n.children[r]))return!1}return!0}(e.root,t.root):function(e,t){return Object.keys(t).length<=Object.keys(e).length&&Object.keys(t).every(n=>t[n]===e[n])}(e.queryParams,t.queryParams)&&$b(e.root,t.root)}function $b(e,t){return function e(t,n,r){if(t.segments.length>r.length){const e=t.segments.slice(0,r.length);return!!Kb(e,r)&&!n.hasChildren()}if(t.segments.length===r.length){if(!Kb(t.segments,r))return!1;for(const e in n.children){if(!t.children[e])return!1;if(!$b(t.children[e],n.children[e]))return!1}return!0}{const i=r.slice(0,t.segments.length),s=r.slice(t.segments.length);return!!Kb(t.segments,i)&&(!!t.children[xb]&&e(t.children[xb],n,s))}}(e,t,t.segments)}class Hb{constructor(e,t,n){this.root=e,this.queryParams=t,this.fragment=n}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Db(this.queryParams)),this._queryParamMap}toString(){return Yb.serialize(this)}}class zb{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Bb(t,(e,t)=>e.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Zb(this)}}class Wb{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=Db(this.parameters)),this._parameterMap}toString(){return iw(this)}}function Kb(e,t){return e.length===t.length&&e.every((e,n)=>e.path===t[n].path)}function Qb(e,t){let n=[];return Bb(e.children,(e,r)=>{r===xb&&(n=n.concat(t(e,r)))}),Bb(e.children,(e,r)=>{r!==xb&&(n=n.concat(t(e,r)))}),n}class Gb{}class Xb{parse(e){const t=new cw(e);return new Hb(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){var t;return`${`/${function e(t,n){if(!t.hasChildren())return Zb(t);if(n){const n=t.children[xb]?e(t.children[xb],!1):"",r=[];return Bb(t.children,(t,n)=>{n!==xb&&r.push(`${n}:${e(t,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}{const n=Qb(t,(n,r)=>r===xb?[e(t.children[xb],!1)]:[`${r}:${e(n,!1)}`]);return`${Zb(t)}/(${n.join("//")})`}}(e.root,!0)}`}${function(e){const t=Object.keys(e).map(t=>{const n=e[t];return Array.isArray(n)?n.map(e=>`${ew(t)}=${ew(e)}`).join("&"):`${ew(t)}=${ew(n)}`});return t.length?`?${t.join("&")}`:""}(e.queryParams)}${"string"==typeof e.fragment?`#${t=e.fragment,encodeURI(t)}`:""}`}}const Yb=new Xb;function Zb(e){return e.segments.map(e=>iw(e)).join("/")}function Jb(e){return encodeURIComponent(e).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function ew(e){return Jb(e).replace(/%3B/gi,";")}function tw(e){return Jb(e).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function nw(e){return decodeURIComponent(e)}function rw(e){return nw(e.replace(/\+/g,"%20"))}function iw(e){return`${tw(e.path)}${t=e.parameters,Object.keys(t).map(e=>`;${tw(e)}=${tw(t[e])}`).join("")}`;var t}const sw=/^[^\/()?;=#]+/;function ow(e){const t=e.match(sw);return t?t[0]:""}const aw=/^[^=?&#]+/;const uw=/^[^?&#]+/;class cw{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new zb([],{}):new zb([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let n={};return this.peekStartsWith("(")&&(n=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(n[xb]=new zb(e,t)),n}parseSegment(){const e=ow(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(e),new Wb(nw(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=ow(this.remaining);if(!t)return;this.capture(t);let n="";if(this.consumeOptional("=")){const e=ow(this.remaining);e&&(n=e,this.capture(n))}e[nw(t)]=nw(n)}parseQueryParam(e){const t=function(e){const t=e.match(aw);return t?t[0]:""}(this.remaining);if(!t)return;this.capture(t);let n="";if(this.consumeOptional("=")){const e=function(e){const t=e.match(uw);return t?t[0]:""}(this.remaining);e&&(n=e,this.capture(n))}const r=rw(t),i=rw(n);if(e.hasOwnProperty(r)){let t=e[r];Array.isArray(t)||(t=[t],e[r]=t),t.push(i)}else e[r]=i}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const n=ow(this.remaining),r=this.remaining[n.length];if("/"!==r&&")"!==r&&";"!==r)throw new Error(`Cannot parse url '${this.url}'`);let i=void 0;n.indexOf(":")>-1?(i=n.substr(0,n.indexOf(":")),this.capture(i),this.capture(":")):e&&(i=xb);const s=this.parseChildren();t[i]=1===Object.keys(s).length?s[xb]:new zb([],s),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new Error(`Expected "${e}".`)}}class lw{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=hw(e,this._root);return t?t.children.map(e=>e.value):[]}firstChild(e){const t=hw(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=dw(e,this._root);return t.length<2?[]:t[t.length-2].children.map(e=>e.value).filter(t=>t!==e)}pathFromRoot(e){return dw(e,this._root).map(e=>e.value)}}function hw(e,t){if(e===t.value)return t;for(const n of t.children){const t=hw(e,n);if(t)return t}return null}function dw(e,t){if(e===t.value)return[t];for(const n of t.children){const r=dw(e,n);if(r.length)return r.unshift(t),r}return[]}class pw{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function fw(e){const t={};return e&&e.children.forEach(e=>t[e.value.outlet]=e),t}class mw extends lw{constructor(e,t){super(e),this.snapshot=t,ww(this,e)}toString(){return this.snapshot.toString()}}function gw(e,t){const n=function(e,t){const n=new _w([],{},{},"",{},xb,t,null,e.root,-1,{});return new bw("",new pw(n,[]))}(e,t),r=new s_([new Wb("",{})]),i=new s_({}),s=new s_({}),o=new s_({}),a=new s_(""),u=new yw(r,i,o,a,s,xb,t,n.root);return u.snapshot=n.root,new mw(new pw(u,[]),n)}class yw{constructor(e,t,n,r,i,s,o,a){this.url=e,this.params=t,this.queryParams=n,this.fragment=r,this.data=i,this.outlet=s,this.component=o,this._futureSnapshot=a}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(Object(__.a)(e=>Db(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(Object(__.a)(e=>Db(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function vw(e,t="emptyOnly"){const n=e.pathFromRoot;let r=0;if("always"!==t)for(r=n.length-1;r>=1;){const e=n[r],t=n[r-1];if(e.routeConfig&&""===e.routeConfig.path)r--;else{if(t.component)break;r--}}return function(e){return e.reduce((e,t)=>{const n=Object.assign({},e.params,t.params),r=Object.assign({},e.data,t.data),i=Object.assign({},e.resolve,t._resolvedData);return{params:n,data:r,resolve:i}},{params:{},data:{},resolve:{}})}(n.slice(r))}class _w{constructor(e,t,n,r,i,s,o,a,u,c,l){this.url=e,this.params=t,this.queryParams=n,this.fragment=r,this.data=i,this.outlet=s,this.component=o,this.routeConfig=a,this._urlSegment=u,this._lastPathIndex=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Db(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Db(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(e=>e.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class bw extends lw{constructor(e,t){super(t),this.url=e,ww(this,t)}toString(){return Ew(this._root)}}function ww(e,t){t.value._routerState=e,t.children.forEach(t=>ww(e,t))}function Ew(e){const t=e.children.length>0?` { ${e.children.map(Ew).join(", ")} } `:"";return`${e.value}${t}`}function Cw(e){if(e.snapshot){const t=e.snapshot,n=e._futureSnapshot;e.snapshot=n,Lb(t.queryParams,n.queryParams)||e.queryParams.next(n.queryParams),t.fragment!==n.fragment&&e.fragment.next(n.fragment),Lb(t.params,n.params)||e.params.next(n.params),function(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(!Lb(e[n],t[n]))return!1;return!0}(t.url,n.url)||e.url.next(n.url),Lb(t.data,n.data)||e.data.next(n.data)}else e.snapshot=e._futureSnapshot,e.data.next(e._futureSnapshot.data)}function Sw(e,t){const n=Lb(e.params,t.params)&&(r=e.url,i=t.url,Kb(r,i)&&r.every((e,t)=>Lb(e.parameters,i[t].parameters)));var r,i;const s=!e.parent!=!t.parent;return n&&!s&&(!e.parent||Sw(e.parent,t.parent))}function Tw(e,t,n){if(n&&e.shouldReuseRoute(t.value,n.value.snapshot)){const r=n.value;r._futureSnapshot=t.value;const i=function(e,t,n){return t.children.map(t=>{for(const r of n.children)if(e.shouldReuseRoute(r.value.snapshot,t.value))return Tw(e,t,r);return Tw(e,t)})}(e,t,n);return new pw(r,i)}{const n=e.retrieve(t.value);if(n){const e=n.route;return function e(t,n){if(t.value.routeConfig!==n.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(t.children.length!==n.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");n.value._futureSnapshot=t.value;for(let r=0;r<t.children.length;++r)e(t.children[r],n.children[r])}(t,e),e}{const n=(r=t.value,new yw(new s_(r.url),new s_(r.params),new s_(r.queryParams),new s_(r.fragment),new s_(r.data),r.outlet,r.component,r)),i=t.children.map(t=>Tw(e,t));return new pw(n,i)}}var r}function xw(e,t,n,r,i){if(0===n.length)return Dw(t.root,t.root,t,r,i);const s=function(e){if("string"==typeof e[0]&&1===e.length&&"/"===e[0])return new Iw(!0,0,e);let t=0,n=!1;const r=e.reduce((e,r,i)=>{if("object"==typeof r&&null!=r){if(r.outlets){const t={};return Bb(r.outlets,(e,n)=>{t[n]="string"==typeof e?e.split("/"):e}),[...e,{outlets:t}]}if(r.segmentPath)return[...e,r.segmentPath]}return"string"!=typeof r?[...e,r]:0===i?(r.split("/").forEach((r,i)=>{0==i&&"."===r||(0==i&&""===r?n=!0:".."===r?t++:""!=r&&e.push(r))}),e):[...e,r]},[]);return new Iw(n,t,r)}(n);if(s.toRoot())return Dw(t.root,new zb([],{}),t,r,i);const o=function(e,t,n){if(e.isAbsolute)return new Nw(t.root,!0,0);if(-1===n.snapshot._lastPathIndex)return new Nw(n.snapshot._urlSegment,!0,0);const r=Aw(e.commands[0])?0:1,i=n.snapshot._lastPathIndex+r;return function(e,t,n){let r=e,i=t,s=n;for(;s>i;){if(s-=i,!(r=r.parent))throw new Error("Invalid number of '../'");i=r.segments.length}return new Nw(r,!1,i-s)}(n.snapshot._urlSegment,i,e.numberOfDoubleDots)}(s,t,e),a=o.processChildren?Pw(o.segmentGroup,o.index,s.commands):kw(o.segmentGroup,o.index,s.commands);return Dw(o.segmentGroup,a,t,r,i)}function Aw(e){return"object"==typeof e&&null!=e&&!e.outlets&&!e.segmentPath}function Dw(e,t,n,r,i){let s={};return r&&Bb(r,(e,t)=>{s[t]=Array.isArray(e)?e.map(e=>`${e}`):`${e}`}),n.root===e?new Hb(t,s,i):new Hb(function e(t,n,r){const i={};Bb(t.children,(t,s)=>{i[s]=t===n?r:e(t,n,r)});return new zb(t.segments,i)}(n.root,e,t),s,i)}class Iw{constructor(e,t,n){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=n,e&&n.length>0&&Aw(n[0]))throw new Error("Root segment cannot have matrix parameters");const r=n.find(e=>"object"==typeof e&&null!=e&&e.outlets);if(r&&r!==jb(n))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Nw{constructor(e,t,n){this.segmentGroup=e,this.processChildren=t,this.index=n}}function Ow(e){return"object"==typeof e&&null!=e&&e.outlets?e.outlets[xb]:`${e}`}function kw(e,t,n){if(e||(e=new zb([],{})),0===e.segments.length&&e.hasChildren())return Pw(e,t,n);const r=function(e,t,n){let r=0,i=t;const s={match:!1,pathIndex:0,commandIndex:0};for(;i<e.segments.length;){if(r>=n.length)return s;const t=e.segments[i],o=Ow(n[r]),a=r<n.length-1?n[r+1]:null;if(i>0&&void 0===o)break;if(o&&a&&"object"==typeof a&&void 0===a.outlets){if(!Lw(o,a,t))return s;r+=2}else{if(!Lw(o,{},t))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(e,t,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<e.segments.length){const t=new zb(e.segments.slice(0,r.pathIndex),{});return t.children[xb]=new zb(e.segments.slice(r.pathIndex),e.children),Pw(t,0,i)}return r.match&&0===i.length?new zb(e.segments,{}):r.match&&!e.hasChildren()?Mw(e,t,n):r.match?Pw(e,0,i):Mw(e,t,n)}function Pw(e,t,n){if(0===n.length)return new zb(e.segments,{});{const r=function(e){return"object"!=typeof e[0]?{[xb]:e}:void 0===e[0].outlets?{[xb]:e}:e[0].outlets}(n),i={};return Bb(r,(n,r)=>{null!==n&&(i[r]=kw(e.children[r],t,n))}),Bb(e.children,(e,t)=>{void 0===r[t]&&(i[t]=e)}),new zb(e.segments,i)}}function Mw(e,t,n){const r=e.segments.slice(0,t);let i=0;for(;i<n.length;){if("object"==typeof n[i]&&void 0!==n[i].outlets){const e=Rw(n[i].outlets);return new zb(r,e)}if(0===i&&Aw(n[0])){const s=e.segments[t];r.push(new Wb(s.path,n[0])),i++;continue}const s=Ow(n[i]),o=i<n.length-1?n[i+1]:null;s&&o&&Aw(o)?(r.push(new Wb(s,Fw(o))),i+=2):(r.push(new Wb(s,{})),i++)}return new zb(r,{})}function Rw(e){const t={};return Bb(e,(e,n)=>{null!==e&&(t[n]=Mw(new zb([],{}),0,e))}),t}function Fw(e){const t={};return Bb(e,(e,n)=>t[n]=`${e}`),t}function Lw(e,t,n){return e==n.path&&Lb(t,n.parameters)}const Vw=(e,t,n)=>Object(__.a)(r=>(new jw(t,r.targetRouterState,r.currentRouterState,n).activate(e),r));class jw{constructor(e,t,n,r){this.routeReuseStrategy=e,this.futureState=t,this.currState=n,this.forwardEvent=r}activate(e){const t=this.futureState._root,n=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,n,e),Cw(this.futureState.root),this.activateChildRoutes(t,n,e)}deactivateChildRoutes(e,t,n){const r=fw(t);e.children.forEach(e=>{const t=e.value.outlet;this.deactivateRoutes(e,r[t],n),delete r[t]}),Bb(r,(e,t)=>{this.deactivateRouteAndItsChildren(e,n)})}deactivateRoutes(e,t,n){const r=e.value,i=t?t.value:null;if(r===i)if(r.component){const i=n.getContext(r.outlet);i&&this.deactivateChildRoutes(e,t,i.children)}else this.deactivateChildRoutes(e,t,n);else i&&this.deactivateRouteAndItsChildren(t,n)}deactivateRouteAndItsChildren(e,t){this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const n=t.getContext(e.value.outlet);if(n&&n.outlet){const t=n.outlet.detach(),r=n.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:t,route:e,contexts:r})}}deactivateRouteAndOutlet(e,t){const n=t.getContext(e.value.outlet);if(n){const r=fw(e),i=e.value.component?n.children:t;Bb(r,(e,t)=>this.deactivateRouteAndItsChildren(e,i)),n.outlet&&(n.outlet.deactivate(),n.children.onOutletDeactivated())}}activateChildRoutes(e,t,n){const r=fw(t);e.children.forEach(e=>{this.activateRoutes(e,r[e.value.outlet],n),this.forwardEvent(new Cb(e.value.snapshot))}),e.children.length&&this.forwardEvent(new wb(e.value.snapshot))}activateRoutes(e,t,n){const r=e.value,i=t?t.value:null;if(Cw(r),r===i)if(r.component){const i=n.getOrCreateContext(r.outlet);this.activateChildRoutes(e,t,i.children)}else this.activateChildRoutes(e,t,n);else if(r.component){const t=n.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){const e=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),t.children.onOutletReAttached(e.contexts),t.attachRef=e.componentRef,t.route=e.route.value,t.outlet&&t.outlet.attach(e.componentRef,e.route.value),Bw(e.route)}else{const n=function(e){for(let t=e.parent;t;t=t.parent){const e=t.routeConfig;if(e&&e._loadedConfig)return e._loadedConfig;if(e&&e.component)return null}return null}(r.snapshot),i=n?n.module.componentFactoryResolver:null;t.attachRef=null,t.route=r,t.resolver=i,t.outlet&&t.outlet.activateWith(r,i),this.activateChildRoutes(e,null,t.children)}}else this.activateChildRoutes(e,null,n)}}function Bw(e){Cw(e.value),e.children.forEach(Bw)}function Uw(e){return"function"==typeof e}function qw(e){return e instanceof Hb}class $w{constructor(e){this.segmentGroup=e||null}}class Hw{constructor(e){this.urlTree=e}}function zw(e){return new o_.a(t=>t.error(new $w(e)))}function Ww(e){return new o_.a(t=>t.error(new Hw(e)))}function Kw(e){return new o_.a(t=>t.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${e}'`)))}class Qw{constructor(e,t,n,r,s){this.configLoader=t,this.urlSerializer=n,this.urlTree=r,this.config=s,this.allowRedirects=!0,this.ngModule=e.get(i.L)}apply(){return this.expandSegmentGroup(this.ngModule,this.config,this.urlTree.root,xb).pipe(Object(__.a)(e=>this.createUrlTree(e,this.urlTree.queryParams,this.urlTree.fragment))).pipe(U_(e=>{if(e instanceof Hw)return this.allowRedirects=!1,this.match(e.urlTree);if(e instanceof $w)throw this.noMatchError(e);throw e}))}match(e){return this.expandSegmentGroup(this.ngModule,this.config,e.root,xb).pipe(Object(__.a)(t=>this.createUrlTree(t,e.queryParams,e.fragment))).pipe(U_(e=>{if(e instanceof $w)throw this.noMatchError(e);throw e}))}noMatchError(e){return new Error(`Cannot match any routes. URL Segment: '${e.segmentGroup}'`)}createUrlTree(e,t,n){const r=e.segments.length>0?new zb([],{[xb]:e}):e;return new Hb(r,t,n)}expandSegmentGroup(e,t,n,r){return 0===n.segments.length&&n.hasChildren()?this.expandChildren(e,t,n).pipe(Object(__.a)(e=>new zb([],e))):this.expandSegment(e,n,t,n.segments,r,!0)}expandChildren(e,t,n){return function(e,t){if(0===Object.keys(e).length)return Object(t_.a)({});const n=[],r=[],i={};return Bb(e,(e,s)=>{const o=t(s,e).pipe(Object(__.a)(e=>i[s]=e));s===xb?n.push(o):r.push(o)}),t_.a.apply(null,n.concat(r)).pipe(w_(),j_(),Object(__.a)(()=>i))}(n.children,(n,r)=>this.expandSegmentGroup(e,t,r,n))}expandSegment(e,t,n,r,i,s){return Object(t_.a)(...n).pipe(Object(__.a)(o=>{return this.expandSegmentAgainstRoute(e,t,n,o,r,i,s).pipe(U_(e=>{if(e instanceof $w)return Object(t_.a)(null);throw e}))}),w_(),K_(e=>!!e),U_((e,n)=>{if(e instanceof u_||"EmptyError"===e.name){if(this.noLeftoversInUrl(t,r,i))return Object(t_.a)(new zb([],{}));throw new $w(t)}throw e}))}noLeftoversInUrl(e,t,n){return 0===t.length&&!e.children[n]}expandSegmentAgainstRoute(e,t,n,r,i,s,o){return Zw(r)!==s?zw(t):void 0===r.redirectTo?this.matchSegmentAgainstRoute(e,t,r,i):o&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,n,r,i,s):zw(t)}expandSegmentAgainstRouteUsingRedirect(e,t,n,r,i,s){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,n,r,s):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,n,r,i,s)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,n,r){const i=this.applyRedirectCommands([],n.redirectTo,{});return n.redirectTo.startsWith("/")?Ww(i):this.lineralizeSegments(n,i).pipe(Object(Q_.a)(n=>{const i=new zb(n,{});return this.expandSegment(e,i,t,n,r,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,n,r,i,s){const{matched:o,consumedSegments:a,lastChild:u,positionalParamSegments:c}=Gw(t,r,i);if(!o)return zw(t);const l=this.applyRedirectCommands(a,r.redirectTo,c);return r.redirectTo.startsWith("/")?Ww(l):this.lineralizeSegments(r,l).pipe(Object(Q_.a)(r=>this.expandSegment(e,t,n,r.concat(i.slice(u)),s,!1)))}matchSegmentAgainstRoute(e,t,n,r){if("**"===n.path)return n.loadChildren?this.configLoader.load(e.injector,n).pipe(Object(__.a)(e=>(n._loadedConfig=e,new zb(r,{})))):Object(t_.a)(new zb(r,{}));const{matched:i,consumedSegments:s,lastChild:o}=Gw(t,n,r);if(!i)return zw(t);const a=r.slice(o);return this.getChildConfig(e,n,r).pipe(Object(Q_.a)(e=>{const n=e.module,r=e.routes,{segmentGroup:i,slicedSegments:o}=function(e,t,n,r){if(n.length>0&&function(e,t,n){return n.some(n=>Yw(e,t,n)&&Zw(n)!==xb)}(e,n,r)){const i=new zb(t,function(e,t){const n={};n[xb]=t;for(const r of e)""===r.path&&Zw(r)!==xb&&(n[Zw(r)]=new zb([],{}));return n}(r,new zb(n,e.children)));return{segmentGroup:Xw(i),slicedSegments:[]}}if(0===n.length&&function(e,t,n){return n.some(n=>Yw(e,t,n))}(e,n,r)){const t=new zb(e.segments,function(e,t,n,r){const i={};for(const s of n)Yw(e,t,s)&&!r[Zw(s)]&&(i[Zw(s)]=new zb([],{}));return Object.assign({},r,i)}(e,n,r,e.children));return{segmentGroup:Xw(t),slicedSegments:n}}return{segmentGroup:e,slicedSegments:n}}(t,s,a,r);if(0===o.length&&i.hasChildren()){return this.expandChildren(n,r,i).pipe(Object(__.a)(e=>new zb(s,e)))}return 0===r.length&&0===o.length?Object(t_.a)(new zb(s,{})):this.expandSegment(n,i,r,o,xb,!0).pipe(Object(__.a)(e=>new zb(s.concat(e.segments),e.children)))}))}getChildConfig(e,t,n){return t.children?Object(t_.a)(new kb(t.children,e)):t.loadChildren?void 0!==t._loadedConfig?Object(t_.a)(t._loadedConfig):function(e,t,n){const r=t.canLoad;return r&&0!==r.length?Object(n_.a)(r).pipe(Object(__.a)(r=>{const i=e.get(r);let s;if(function(e){return e&&Uw(e.canLoad)}(i))s=i.canLoad(t,n);else{if(!Uw(i))throw new Error("Invalid CanLoad guard");s=i(t,n)}return Ub(s)})).pipe(w_(),(i=(e=>!0===e),e=>e.lift(new G_(i,s,e)))):Object(t_.a)(!0);var i,s}(e.injector,t,n).pipe(Object(Q_.a)(n=>n?this.configLoader.load(e.injector,t).pipe(Object(__.a)(e=>(t._loadedConfig=e,e))):function(e){return new o_.a(t=>t.error(Nb(`Cannot load children because the guard of the route "path: '${e.path}'" returned false`)))}(t))):Object(t_.a)(new kb([],e))}lineralizeSegments(e,t){let n=[],r=t.root;for(;;){if(n=n.concat(r.segments),0===r.numberOfChildren)return Object(t_.a)(n);if(r.numberOfChildren>1||!r.children[xb])return Kw(e.redirectTo);r=r.children[xb]}}applyRedirectCommands(e,t,n){return this.applyRedirectCreatreUrlTree(t,this.urlSerializer.parse(t),e,n)}applyRedirectCreatreUrlTree(e,t,n,r){const i=this.createSegmentGroup(e,t.root,n,r);return new Hb(i,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const n={};return Bb(e,(e,r)=>{if("string"==typeof e&&e.startsWith(":")){const i=e.substring(1);n[r]=t[i]}else n[r]=e}),n}createSegmentGroup(e,t,n,r){const i=this.createSegments(e,t.segments,n,r);let s={};return Bb(t.children,(t,i)=>{s[i]=this.createSegmentGroup(e,t,n,r)}),new zb(i,s)}createSegments(e,t,n,r){return t.map(t=>t.path.startsWith(":")?this.findPosParam(e,t,r):this.findOrReturn(t,n))}findPosParam(e,t,n){const r=n[t.path.substring(1)];if(!r)throw new Error(`Cannot redirect to '${e}'. Cannot find '${t.path}'.`);return r}findOrReturn(e,t){let n=0;for(const r of t){if(r.path===e.path)return t.splice(n),r;n++}return e}}function Gw(e,t,n){if(""===t.path)return"full"===t.pathMatch&&(e.hasChildren()||n.length>0)?{matched:!1,consumedSegments:[],lastChild:0,positionalParamSegments:{}}:{matched:!0,consumedSegments:[],lastChild:0,positionalParamSegments:{}};const r=(t.matcher||Ob)(n,e,t);return r?{matched:!0,consumedSegments:r.consumed,lastChild:r.consumed.length,positionalParamSegments:r.posParams}:{matched:!1,consumedSegments:[],lastChild:0,positionalParamSegments:{}}}function Xw(e){if(1===e.numberOfChildren&&e.children[xb]){const t=e.children[xb];return new zb(e.segments.concat(t.segments),t.children)}return e}function Yw(e,t,n){return(!(e.hasChildren()||t.length>0)||"full"!==n.pathMatch)&&(""===n.path&&void 0!==n.redirectTo)}function Zw(e){return e.outlet||xb}function Jw(e,t,n,r){return function(i){return i.pipe(Y_(i=>(function(e,t,n,r,i){return new Qw(e,t,n,r,i).apply()})(e,t,n,i.extractedUrl,r).pipe(Object(__.a)(e=>Object.assign({},i,{urlAfterRedirects:e})))))}}class eE{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class tE{constructor(e,t){this.component=e,this.route=t}}function nE(e,t,n){const r=function(e){if(!e)return null;for(let t=e.parent;t;t=t.parent){const e=t.routeConfig;if(e&&e._loadedConfig)return e._loadedConfig}return null}(t);return(r?r.module.injector:n).get(e)}function rE(e,t,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=fw(t);return e.children.forEach(e=>{!function(e,t,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=e.value,o=t?t.value:null,a=n?n.getContext(e.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){const u=function(e,t,n){switch(n){case"pathParamsChange":return!Kb(e.url,t.url);case"always":return!0;case"paramsOrQueryParamsChange":return!Sw(e,t)||!Lb(e.queryParams,t.queryParams);case"paramsChange":default:return!Sw(e,t)}}(o,s,s.routeConfig.runGuardsAndResolvers);if(u?i.canActivateChecks.push(new eE(r)):(s.data=o.data,s._resolvedData=o._resolvedData),s.component?rE(e,t,a?a.children:null,r,i):rE(e,t,n,r,i),u){const e=a&&a.outlet&&a.outlet.component||null;i.canDeactivateChecks.push(new tE(e,o))}}else o&&iE(t,a,i),i.canActivateChecks.push(new eE(r)),s.component?rE(e,null,a?a.children:null,r,i):rE(e,null,n,r,i)}(e,s[e.value.outlet],n,r.concat([e.value]),i),delete s[e.value.outlet]}),Bb(s,(e,t)=>iE(e,n.getContext(t),i)),i}function iE(e,t,n){const r=fw(e),i=e.value;Bb(r,(e,r)=>{i.component?iE(e,t?t.children.getContext(r):null,n):iE(e,t,n)}),i.component&&t&&t.outlet&&t.outlet.isActivated?n.canDeactivateChecks.push(new tE(t.outlet.component,i)):n.canDeactivateChecks.push(new tE(null,i))}const sE=Symbol("INITIAL_VALUE");function oE(){return Y_(e=>(function(...e){let t=null,n=null;return Object(c_.a)(e[e.length-1])&&(n=e.pop()),"function"==typeof e[e.length-1]&&(t=e.pop()),1===e.length&&Object(l_.a)(e[0])&&(e=e[0]),Object(p_.a)(e,n).lift(new m_(t))})(...e.map(e=>e.pipe(H_(1),function(...e){return t=>{let n=e[e.length-1];Object(c_.a)(n)?e.pop():n=null;const r=e.length;return tb(1!==r||n?r>0?Object(p_.a)(e,n):Object(y_.b)(n):Object(eb.a)(e[0]),t)}}(sE)))).pipe(Object(nb.a)((e,t)=>{let n=!1;return t.reduce((e,r,i)=>{if(e!==sE)return e;if(r===sE&&(n=!0),!n){if(!1===r)return r;if(i===t.length-1||qw(r))return r}return e},e)},sE),Object(E_.a)(e=>e!==sE),Object(__.a)(e=>qw(e)?e:!0===e),H_(1)))}function aE(e,t){return function(n){return n.pipe(Object(Q_.a)(n=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=n;return 0===o.length&&0===s.length?Object(t_.a)(Object.assign({},n,{guardsResult:!0})):function(e,t,n,r){return Object(n_.a)(e).pipe(Object(Q_.a)(e=>(function(e,t,n,r,i){const s=t&&t.routeConfig?t.routeConfig.canDeactivate:null;if(!s||0===s.length)return Object(t_.a)(!0);const o=s.map(s=>{const o=nE(s,t,i);let a;if(function(e){return e&&Uw(e.canDeactivate)}(o))a=Ub(o.canDeactivate(e,t,n,r));else{if(!Uw(o))throw new Error("Invalid CanDeactivate guard");a=Ub(o(e,t,n,r))}return a.pipe(K_())});return Object(t_.a)(o).pipe(oE())})(e.component,e.route,n,t,r)),K_(e=>!0!==e,!0))}(o,r,i,e).pipe(Object(Q_.a)(n=>n&&function(e){return"boolean"==typeof e}(n)?function(e,t,n,r){return Object(n_.a)(t).pipe(rb(t=>Object(n_.a)([function(e,t){null!==e&&t&&t(new bb(e));return Object(t_.a)(!0)}(t.route.parent,r),function(e,t){null!==e&&t&&t(new Eb(e));return Object(t_.a)(!0)}(t.route,r),function(e,t,n){const r=t[t.length-1],i=t.slice(0,t.length-1).reverse().map(e=>(function(e){const t=e.routeConfig?e.routeConfig.canActivateChild:null;return t&&0!==t.length?{node:e,guards:t}:null})(e)).filter(e=>null!==e).map(t=>v_(()=>{const i=t.guards.map(i=>{const s=nE(i,t.node,n);let o;if(function(e){return e&&Uw(e.canActivateChild)}(s))o=Ub(s.canActivateChild(r,e));else{if(!Uw(s))throw new Error("Invalid CanActivateChild guard");o=Ub(s(r,e))}return o.pipe(K_())});return Object(t_.a)(i).pipe(oE())}));return Object(t_.a)(i).pipe(oE())}(e,t.path,n),function(e,t,n){const r=t.routeConfig?t.routeConfig.canActivate:null;if(!r||0===r.length)return Object(t_.a)(!0);const i=r.map(r=>v_(()=>{const i=nE(r,t,n);let s;if(function(e){return e&&Uw(e.canActivate)}(i))s=Ub(i.canActivate(t,e));else{if(!Uw(i))throw new Error("Invalid CanActivate guard");s=Ub(i(t,e))}return s.pipe(K_())}));return Object(t_.a)(i).pipe(oE())}(e,t.route,n)]).pipe(w_(),K_(e=>!0!==e,!0))),K_(e=>!0!==e,!0))}(r,s,e,t):Object(t_.a)(n)),Object(__.a)(e=>Object.assign({},n,{guardsResult:e})))}))}}class uE{}class cE{constructor(e,t,n,r,i,s){this.rootComponentType=e,this.config=t,this.urlTree=n,this.url=r,this.paramsInheritanceStrategy=i,this.relativeLinkResolution=s}recognize(){try{const t=dE(this.urlTree.root,[],[],this.config,this.relativeLinkResolution).segmentGroup,n=this.processSegmentGroup(this.config,t,xb),r=new _w([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},xb,this.rootComponentType,null,this.urlTree.root,-1,{}),i=new pw(r,n),s=new bw(this.url,i);return this.inheritParamsAndData(s._root),Object(t_.a)(s)}catch(e){return new o_.a(t=>t.error(e))}}inheritParamsAndData(e){const t=e.value,n=vw(t,this.paramsInheritanceStrategy);t.params=Object.freeze(n.params),t.data=Object.freeze(n.data),e.children.forEach(e=>this.inheritParamsAndData(e))}processSegmentGroup(e,t,n){return 0===t.segments.length&&t.hasChildren()?this.processChildren(e,t):this.processSegment(e,t,t.segments,n)}processChildren(e,t){const n=Qb(t,(t,n)=>this.processSegmentGroup(e,t,n));return function(e){const t={};e.forEach(e=>{const n=t[e.value.outlet];if(n){const t=n.url.map(e=>e.toString()).join("/"),r=e.value.url.map(e=>e.toString()).join("/");throw new Error(`Two segments cannot have the same outlet name: '${t}' and '${r}'.`)}t[e.value.outlet]=e.value})}(n),n.sort((e,t)=>e.value.outlet===xb?-1:t.value.outlet===xb?1:e.value.outlet.localeCompare(t.value.outlet)),n}processSegment(e,t,n,r){for(const s of e)try{return this.processSegmentAgainstRoute(s,t,n,r)}catch(i){if(!(i instanceof uE))throw i}if(this.noLeftoversInUrl(t,n,r))return[];throw new uE}noLeftoversInUrl(e,t,n){return 0===t.length&&!e.children[n]}processSegmentAgainstRoute(e,t,n,r){if(e.redirectTo)throw new uE;if((e.outlet||xb)!==r)throw new uE;let i,s=[],o=[];if("**"===e.path){const s=n.length>0?jb(n).parameters:{};i=new _w(n,s,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,mE(e),r,e.component,e,lE(t),hE(t)+n.length,gE(e))}else{const a=function(e,t,n){if(""===t.path){if("full"===t.pathMatch&&(e.hasChildren()||n.length>0))throw new uE;return{consumedSegments:[],lastChild:0,parameters:{}}}const r=(t.matcher||Ob)(n,e,t);if(!r)throw new uE;const i={};Bb(r.posParams,(e,t)=>{i[t]=e.path});const s=r.consumed.length>0?Object.assign({},i,r.consumed[r.consumed.length-1].parameters):i;return{consumedSegments:r.consumed,lastChild:r.consumed.length,parameters:s}}(t,e,n);s=a.consumedSegments,o=n.slice(a.lastChild),i=new _w(s,a.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,mE(e),r,e.component,e,lE(t),hE(t)+s.length,gE(e))}const a=function(e){if(e.children)return e.children;if(e.loadChildren)return e._loadedConfig.routes;return[]}(e),{segmentGroup:u,slicedSegments:c}=dE(t,s,o,a,this.relativeLinkResolution);if(0===c.length&&u.hasChildren()){const e=this.processChildren(a,u);return[new pw(i,e)]}if(0===a.length&&0===c.length)return[new pw(i,[])];const l=this.processSegment(a,u,c,xb);return[new pw(i,l)]}}function lE(e){let t=e;for(;t._sourceSegment;)t=t._sourceSegment;return t}function hE(e){let t=e,n=t._segmentIndexShift?t._segmentIndexShift:0;for(;t._sourceSegment;)n+=(t=t._sourceSegment)._segmentIndexShift?t._segmentIndexShift:0;return n-1}function dE(e,t,n,r,i){if(n.length>0&&function(e,t,n){return n.some(n=>pE(e,t,n)&&fE(n)!==xb)}(e,n,r)){const i=new zb(t,function(e,t,n,r){const i={};i[xb]=r,r._sourceSegment=e,r._segmentIndexShift=t.length;for(const s of n)if(""===s.path&&fE(s)!==xb){const n=new zb([],{});n._sourceSegment=e,n._segmentIndexShift=t.length,i[fE(s)]=n}return i}(e,t,r,new zb(n,e.children)));return i._sourceSegment=e,i._segmentIndexShift=t.length,{segmentGroup:i,slicedSegments:[]}}if(0===n.length&&function(e,t,n){return n.some(n=>pE(e,t,n))}(e,n,r)){const s=new zb(e.segments,function(e,t,n,r,i,s){const o={};for(const a of r)if(pE(e,n,a)&&!i[fE(a)]){const n=new zb([],{});n._sourceSegment=e,n._segmentIndexShift="legacy"===s?e.segments.length:t.length,o[fE(a)]=n}return Object.assign({},i,o)}(e,t,n,r,e.children,i));return s._sourceSegment=e,s._segmentIndexShift=t.length,{segmentGroup:s,slicedSegments:n}}const s=new zb(e.segments,e.children);return s._sourceSegment=e,s._segmentIndexShift=t.length,{segmentGroup:s,slicedSegments:n}}function pE(e,t,n){return(!(e.hasChildren()||t.length>0)||"full"!==n.pathMatch)&&(""===n.path&&void 0===n.redirectTo)}function fE(e){return e.outlet||xb}function mE(e){return e.data||{}}function gE(e){return e.resolve||{}}function yE(e,t,n,r,i){return function(s){return s.pipe(Object(Q_.a)(s=>(function(e,t,n,r,i="emptyOnly",s="legacy"){return new cE(e,t,n,r,i,s).recognize()})(e,t,s.urlAfterRedirects,n(s.urlAfterRedirects),r,i).pipe(Object(__.a)(e=>Object.assign({},s,{targetSnapshot:e})))))}}function vE(e,t){return function(n){return n.pipe(Object(Q_.a)(n=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=n;return i.length?Object(n_.a)(i).pipe(rb(n=>(function(e,t,n,r){return function(e,t,n,r){const i=Object.keys(e);if(0===i.length)return Object(t_.a)({});if(1===i.length){const s=i[0];return _E(e[s],t,n,r).pipe(Object(__.a)(e=>({[s]:e})))}const s={};return Object(n_.a)(i).pipe(Object(Q_.a)(i=>_E(e[i],t,n,r).pipe(Object(__.a)(e=>(s[i]=e,e))))).pipe(j_(),Object(__.a)(()=>s))}(e._resolve,e,t,r).pipe(Object(__.a)(t=>(e._resolvedData=t,e.data=Object.assign({},e.data,vw(e,n).resolve),null)))})(n.route,r,e,t)),function(e,t){return arguments.length>=2?function(n){return Object(ib.a)(Object(nb.a)(e,t),x_(1),R_(t))(n)}:function(t){return Object(ib.a)(Object(nb.a)((t,n,r)=>e(t,n,r+1)),x_(1))(t)}}((e,t)=>e),Object(__.a)(e=>n)):Object(t_.a)(n)}))}}function _E(e,t,n,r){const i=nE(e,t,r);return i.resolve?Ub(i.resolve(t,n)):Ub(i(t,n))}function bE(e){return function(t){return t.pipe(Y_(t=>{const n=e(t);return n?Object(n_.a)(n).pipe(Object(__.a)(()=>t)):Object(n_.a)([t])}))}}class wE{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}const EE=new i.B("ROUTES");class CE{constructor(e,t,n,r){this.loader=e,this.compiler=t,this.onLoadStartListener=n,this.onLoadEndListener=r}load(e,t){return this.onLoadStartListener&&this.onLoadStartListener(t),this.loadModuleFactory(t.loadChildren).pipe(Object(__.a)(n=>{this.onLoadEndListener&&this.onLoadEndListener(t);const r=n.create(e);return new kb(Vb(r.injector.get(EE)).map(Fb),r)}))}loadModuleFactory(e){return"string"==typeof e?Object(n_.a)(this.loader.load(e)):Ub(e()).pipe(Object(Q_.a)(e=>e instanceof i.J?Object(t_.a)(e):Object(n_.a)(this.compiler.compileModuleAsync(e))))}}class SE{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function TE(e){throw e}function xE(e,t,n){return t.parse("/")}function AE(e,t){return Object(t_.a)(null)}class DE{constructor(e,t,n,r,s,o,a,u){this.rootComponentType=e,this.urlSerializer=t,this.rootContexts=n,this.location=r,this.config=u,this.navigationId=0,this.isNgZoneEnabled=!1,this.events=new r_.a,this.errorHandler=TE,this.malformedUriErrorHandler=xE,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:AE,afterPreactivation:AE},this.urlHandlingStrategy=new SE,this.routeReuseStrategy=new wE,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="legacy";this.ngModule=s.get(i.L),this.console=s.get(i.xb);const c=s.get(i.N);this.isNgZoneEnabled=c instanceof i.N,this.resetConfig(u),this.currentUrlTree=new Hb(new zb([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.configLoader=new CE(o,a,e=>this.triggerEvent(new vb(e)),e=>this.triggerEvent(new _b(e))),this.routerState=gw(this.currentUrlTree,this.rootComponentType),this.transitions=new s_({id:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",state:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}setupNavigations(e){const t=this.events;return e.pipe(Object(E_.a)(e=>0!==e.id),Object(__.a)(e=>Object.assign({},e,{extractedUrl:this.urlHandlingStrategy.extract(e.rawUrl)})),Y_(e=>{let n=!1,r=!1;return Object(t_.a)(e).pipe(Y_(e=>{const n=!this.navigated||e.extractedUrl.toString()!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||n)&&this.urlHandlingStrategy.shouldProcessUrl(e.rawUrl))return Object(t_.a)(e).pipe(O_(e=>"eager"===this.urlUpdateStrategy&&!e.extras.skipLocationChange&&this.setBrowserUrl(e.rawUrl,!!e.extras.replaceUrl,e.id)),Y_(e=>{const n=this.transitions.getValue();return t.next(new cb(e.id,this.serializeUrl(e.extractedUrl),e.source,e.state)),n!==this.transitions.getValue()?y_.a:[e]}),Y_(e=>Promise.resolve(e)),Jw(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),yE(this.rootComponentType,this.config,e=>this.serializeUrl(e),this.paramsInheritanceStrategy,this.relativeLinkResolution),O_(e=>{const n=new pb(e.id,this.serializeUrl(e.extractedUrl),this.serializeUrl(e.urlAfterRedirects),e.targetSnapshot);t.next(n)}));if(n&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:n,extractedUrl:r,source:i,state:s,extras:o}=e,a=new cb(n,this.serializeUrl(r),i,s);t.next(a);const u=gw(r,this.rootComponentType).snapshot;return Object(t_.a)(Object.assign({},e,{targetSnapshot:u,urlAfterRedirects:r,extras:Object.assign({},o,{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=e.rawUrl,e.resolve(null),y_.a}),bE(e=>{const{targetSnapshot:t,id:n,extractedUrl:r,rawUrl:i,extras:{skipLocationChange:s,replaceUrl:o}}=e;return this.hooks.beforePreactivation(t,{navigationId:n,appliedUrlTree:r,rawUrlTree:i,skipLocationChange:!!s,replaceUrl:!!o})}),O_(e=>{const t=new fb(e.id,this.serializeUrl(e.extractedUrl),this.serializeUrl(e.urlAfterRedirects),e.targetSnapshot);this.triggerEvent(t)}),Object(__.a)(e=>Object.assign({},e,{guards:function(e,t,n){const r=e._root;return rE(r,t?t._root:null,n,[r.value])}(e.targetSnapshot,e.currentSnapshot,this.rootContexts)})),aE(this.ngModule.injector,e=>this.triggerEvent(e)),O_(e=>{if(qw(e.guardsResult)){const t=Nb(`Redirecting to "${this.serializeUrl(e.guardsResult)}"`);throw t.url=e.guardsResult,t}}),O_(e=>{const t=new mb(e.id,this.serializeUrl(e.extractedUrl),this.serializeUrl(e.urlAfterRedirects),e.targetSnapshot,!!e.guardsResult);this.triggerEvent(t)}),Object(E_.a)(e=>{if(!e.guardsResult){this.resetUrlToCurrentUrlTree();const n=new hb(e.id,this.serializeUrl(e.extractedUrl),"");return t.next(n),e.resolve(!1),!1}return!0}),bE(e=>{if(e.guards.canActivateChecks.length)return Object(t_.a)(e).pipe(O_(e=>{const t=new gb(e.id,this.serializeUrl(e.extractedUrl),this.serializeUrl(e.urlAfterRedirects),e.targetSnapshot);this.triggerEvent(t)}),vE(this.paramsInheritanceStrategy,this.ngModule.injector),O_(e=>{const t=new yb(e.id,this.serializeUrl(e.extractedUrl),this.serializeUrl(e.urlAfterRedirects),e.targetSnapshot);this.triggerEvent(t)}))}),bE(e=>{const{targetSnapshot:t,id:n,extractedUrl:r,rawUrl:i,extras:{skipLocationChange:s,replaceUrl:o}}=e;return this.hooks.afterPreactivation(t,{navigationId:n,appliedUrlTree:r,rawUrlTree:i,skipLocationChange:!!s,replaceUrl:!!o})}),Object(__.a)(e=>{const t=function(e,t,n){const r=Tw(e,t._root,n?n._root:void 0);return new mw(r,t)}(this.routeReuseStrategy,e.targetSnapshot,e.currentRouterState);return Object.assign({},e,{targetRouterState:t})}),O_(e=>{this.currentUrlTree=e.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,e.rawUrl),this.routerState=e.targetRouterState,"deferred"!==this.urlUpdateStrategy||e.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,!!e.extras.replaceUrl,e.id)}),Vw(this.rootContexts,this.routeReuseStrategy,e=>this.triggerEvent(e)),O_({next(){n=!0},complete(){n=!0}}),function(e){return t=>t.lift(new ob(e))}(()=>{if(!n&&!r){this.resetUrlToCurrentUrlTree();const n=new hb(e.id,this.serializeUrl(e.extractedUrl),`Navigation ID ${e.id} is not equal to the current navigation id ${this.navigationId}`);t.next(n),e.resolve(!1)}}),U_(n=>{if(r=!0,function(e){return e&&e[Ib]}(n)){this.navigated=!0;const r=qw(n.url);r||this.resetStateAndUrl(e.currentRouterState,e.currentUrlTree,e.rawUrl);const i=new hb(e.id,this.serializeUrl(e.extractedUrl),n.message);t.next(i),e.resolve(!1),r&&this.navigateByUrl(n.url)}else{this.resetStateAndUrl(e.currentRouterState,e.currentUrlTree,e.rawUrl);const r=new db(e.id,this.serializeUrl(e.extractedUrl),n);t.next(r);try{e.resolve(this.errorHandler(n))}catch(i){e.reject(i)}}return y_.a}))}))}resetRootComponentType(e){this.rootComponentType=e,this.routerState.root.component=this.rootComponentType}getTransition(){return this.transitions.value}setTransition(e){this.transitions.next(Object.assign({},this.getTransition(),e))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(e=>{let t=this.parseUrl(e.url);const n="popstate"===e.type?"popstate":"hashchange",r=e.state&&e.state.navigationId?{navigationId:e.state.navigationId}:null;setTimeout(()=>{this.scheduleNavigation(t,n,r,{replaceUrl:!0})},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}triggerEvent(e){this.events.next(e)}resetConfig(e){Pb(e),this.config=e.map(Fb),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=null)}createUrlTree(e,t={}){const{relativeTo:n,queryParams:r,fragment:s,preserveQueryParams:o,queryParamsHandling:a,preserveFragment:u}=t;Object(i.sb)()&&o&&console&&console.warn&&console.warn("preserveQueryParams is deprecated, use queryParamsHandling instead.");const c=n||this.routerState.root,l=u?this.currentUrlTree.fragment:s;let h=null;if(a)switch(a){case"merge":h=Object.assign({},this.currentUrlTree.queryParams,r);break;case"preserve":h=this.currentUrlTree.queryParams;break;default:h=r||null}else h=o?this.currentUrlTree.queryParams:r||null;return null!==h&&(h=this.removeEmptyProps(h)),xw(c,this.currentUrlTree,e,h,l)}navigateByUrl(e,t={skipLocationChange:!1}){Object(i.sb)()&&this.isNgZoneEnabled&&!i.N.isInAngularZone()&&this.console.warn("Navigation triggered outside Angular zone, did you forget to call 'ngZone.run()'?");const n=qw(e)?e:this.parseUrl(e),r=this.urlHandlingStrategy.merge(n,this.rawUrlTree);return this.scheduleNavigation(r,"imperative",null,t)}navigate(e,t={skipLocationChange:!1}){return function(e){for(let t=0;t<e.length;t++){const n=e[t];if(null==n)throw new Error(`The requested path contains ${n} segment at index ${t}`)}}(e),this.navigateByUrl(this.createUrlTree(e,t),t)}serializeUrl(e){return this.urlSerializer.serialize(e)}parseUrl(e){let t;try{t=this.urlSerializer.parse(e)}catch(n){t=this.malformedUriErrorHandler(n,this.urlSerializer,e)}return t}isActive(e,t){if(qw(e))return qb(this.currentUrlTree,e,t);const n=this.parseUrl(e);return qb(this.currentUrlTree,n,t)}removeEmptyProps(e){return Object.keys(e).reduce((t,n)=>{const r=e[n];return null!=r&&(t[n]=r),t},{})}processNavigations(){this.navigations.subscribe(e=>{this.navigated=!0,this.lastSuccessfulId=e.id,this.events.next(new lb(e.id,this.serializeUrl(e.extractedUrl),this.serializeUrl(this.currentUrlTree))),e.resolve(!0)},e=>{this.console.warn("Unhandled Navigation Error: ")})}scheduleNavigation(e,t,n,r){const i=this.getTransition();if(i&&"imperative"!==t&&"imperative"===i.source&&i.rawUrl.toString()===e.toString())return Promise.resolve(!0);if(i&&"hashchange"==t&&"popstate"===i.source&&i.rawUrl.toString()===e.toString())return Promise.resolve(!0);if(i&&"popstate"==t&&"hashchange"===i.source&&i.rawUrl.toString()===e.toString())return Promise.resolve(!0);let s=null,o=null;const a=new Promise((e,t)=>{s=e,o=t}),u=++this.navigationId;return this.setTransition({id:u,source:t,state:n,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:e,extras:r,resolve:s,reject:o,promise:a,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),a.catch(e=>Promise.reject(e))}setBrowserUrl(e,t,n){const r=this.urlSerializer.serialize(e);this.location.isCurrentPathEqualTo(r)||t?this.location.replaceState(r,"",{navigationId:n}):this.location.go(r,"",{navigationId:n})}resetStateAndUrl(e,t,n){this.routerState=e,this.currentUrlTree=t,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n),this.resetUrlToCurrentUrlTree()}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",{navigationId:this.lastSuccessfulId})}}class IE{constructor(e,t,n,r,i){this.router=e,this.route=t,this.commands=[],null==n&&r.setAttribute(i.nativeElement,"tabindex","0")}set routerLink(e){this.commands=null!=e?Array.isArray(e)?e:[e]:[]}set preserveQueryParams(e){Object(i.sb)()&&console&&console.warn&&console.warn("preserveQueryParams is deprecated!, use queryParamsHandling instead."),this.preserve=e}onClick(){const e={skipLocationChange:OE(this.skipLocationChange),replaceUrl:OE(this.replaceUrl)};return this.router.navigateByUrl(this.urlTree,e),!0}get urlTree(){return this.router.createUrlTree(this.commands,{relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,preserveQueryParams:OE(this.preserve),queryParamsHandling:this.queryParamsHandling,preserveFragment:OE(this.preserveFragment)})}}IE.decorators=[{type:i.s,args:[{selector:":not(a)[routerLink]"}]}],IE.ctorParameters=(()=>[{type:DE},{type:yw},{type:String,decorators:[{type:i.h,args:["tabindex"]}]},{type:i.W},{type:i.t}]),IE.propDecorators={queryParams:[{type:i.D}],fragment:[{type:i.D}],queryParamsHandling:[{type:i.D}],preserveFragment:[{type:i.D}],skipLocationChange:[{type:i.D}],replaceUrl:[{type:i.D}],routerLink:[{type:i.D}],preserveQueryParams:[{type:i.D}],onClick:[{type:i.y,args:["click"]}]};class NE{constructor(e,t,n){this.router=e,this.route=t,this.locationStrategy=n,this.commands=[],this.subscription=e.events.subscribe(e=>{e instanceof lb&&this.updateTargetUrlAndHref()})}set routerLink(e){this.commands=null!=e?Array.isArray(e)?e:[e]:[]}set preserveQueryParams(e){Object(i.sb)()&&console&&console.warn&&console.warn("preserveQueryParams is deprecated, use queryParamsHandling instead."),this.preserve=e}ngOnChanges(e){this.updateTargetUrlAndHref()}ngOnDestroy(){this.subscription.unsubscribe()}onClick(e,t,n,r){if(0!==e||t||n||r)return!0;if("string"==typeof this.target&&"_self"!=this.target)return!0;const i={skipLocationChange:OE(this.skipLocationChange),replaceUrl:OE(this.replaceUrl)};return this.router.navigateByUrl(this.urlTree,i),!1}updateTargetUrlAndHref(){this.href=this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree))}get urlTree(){return this.router.createUrlTree(this.commands,{relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,preserveQueryParams:OE(this.preserve),queryParamsHandling:this.queryParamsHandling,preserveFragment:OE(this.preserveFragment)})}}function OE(e){return""===e||!!e}NE.decorators=[{type:i.s,args:[{selector:"a[routerLink]"}]}],NE.ctorParameters=(()=>[{type:DE},{type:yw},{type:vf.g}]),NE.propDecorators={target:[{type:i.x,args:["attr.target"]},{type:i.D}],queryParams:[{type:i.D}],fragment:[{type:i.D}],queryParamsHandling:[{type:i.D}],preserveFragment:[{type:i.D}],skipLocationChange:[{type:i.D}],replaceUrl:[{type:i.D}],href:[{type:i.x}],routerLink:[{type:i.D}],preserveQueryParams:[{type:i.D}],onClick:[{type:i.y,args:["click",["$event.button","$event.ctrlKey","$event.metaKey","$event.shiftKey"]]}]};class kE{constructor(e,t,n,r){this.router=e,this.element=t,this.renderer=n,this.cdr=r,this.classes=[],this.isActive=!1,this.routerLinkActiveOptions={exact:!1},this.subscription=e.events.subscribe(e=>{e instanceof lb&&this.update()})}ngAfterContentInit(){this.links.changes.subscribe(e=>this.update()),this.linksWithHrefs.changes.subscribe(e=>this.update()),this.update()}set routerLinkActive(e){const t=Array.isArray(e)?e:e.split(" ");this.classes=t.filter(e=>!!e)}ngOnChanges(e){this.update()}ngOnDestroy(){this.subscription.unsubscribe()}update(){this.links&&this.linksWithHrefs&&this.router.navigated&&Promise.resolve().then(()=>{const e=this.hasActiveLinks();this.isActive!==e&&(this.isActive=e,this.classes.forEach(t=>{e?this.renderer.addClass(this.element.nativeElement,t):this.renderer.removeClass(this.element.nativeElement,t)}))})}isLinkActive(e){return t=>e.isActive(t.urlTree,this.routerLinkActiveOptions.exact)}hasActiveLinks(){return this.links.some(this.isLinkActive(this.router))||this.linksWithHrefs.some(this.isLinkActive(this.router))}}kE.decorators=[{type:i.s,args:[{selector:"[routerLinkActive]",exportAs:"routerLinkActive"}]}],kE.ctorParameters=(()=>[{type:DE},{type:i.t},{type:i.W},{type:i.k}]),kE.propDecorators={links:[{type:i.r,args:[IE,{descendants:!0}]}],linksWithHrefs:[{type:i.r,args:[NE,{descendants:!0}]}],routerLinkActiveOptions:[{type:i.D}],routerLinkActive:[{type:i.D}]};class PE{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new ME,this.attachRef=null}}class ME{constructor(){this.contexts=new Map}onChildOutletCreated(e,t){const n=this.getOrCreateContext(e);n.outlet=t,this.contexts.set(e,n)}onChildOutletDestroyed(e){const t=this.getContext(e);t&&(t.outlet=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let t=this.getContext(e);return t||(t=new PE,this.contexts.set(e,t)),t}getContext(e){return this.contexts.get(e)||null}}class RE{constructor(e,t,n,r,s){this.parentContexts=e,this.location=t,this.resolver=n,this.changeDetector=s,this.activated=null,this._activatedRoute=null,this.activateEvents=new i.v,this.deactivateEvents=new i.v,this.name=r||xb,e.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const e=this.parentContexts.getContext(this.name);e&&e.route&&(e.attachRef?this.attach(e.attachRef,e.route):this.activateWith(e.route,e.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const e=this.activated;return this.activated=null,this._activatedRoute=null,e}attach(e,t){this.activated=e,this._activatedRoute=t,this.location.insert(e.hostView)}deactivate(){if(this.activated){const e=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(e)}}activateWith(e,t){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=e;const n=e._futureSnapshot.routeConfig.component,r=(t=t||this.resolver).resolveComponentFactory(n),i=this.parentContexts.getOrCreateContext(this.name).children,s=new FE(e,i,this.location.injector);this.activated=this.location.createComponent(r,this.location.length,s),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}RE.decorators=[{type:i.s,args:[{selector:"router-outlet",exportAs:"outlet"}]}],RE.ctorParameters=(()=>[{type:ME},{type:i.jb},{type:i.p},{type:String,decorators:[{type:i.h,args:["name"]}]},{type:i.k}]),RE.propDecorators={activateEvents:[{type:i.P,args:["activate"]}],deactivateEvents:[{type:i.P,args:["deactivate"]}]};class FE{constructor(e,t,n){this.route=e,this.childContexts=t,this.parent=n}get(e,t){return e===yw?this.route:e===ME?this.childContexts:this.parent.get(e,t)}}class LE{}class VE{preload(e,t){return Object(t_.a)(null)}}class jE{constructor(e,t,n,r,i){this.router=e,this.injector=r,this.preloadingStrategy=i;this.loader=new CE(t,n,t=>e.triggerEvent(new vb(t)),t=>e.triggerEvent(new _b(t)))}setUpPreloading(){this.subscription=this.router.events.pipe(Object(E_.a)(e=>e instanceof lb),rb(()=>this.preload())).subscribe(()=>{})}preload(){const e=this.injector.get(i.L);return this.processRoutes(e,this.router.config)}ngOnDestroy(){this.subscription.unsubscribe()}processRoutes(e,t){const n=[];for(const r of t)if(r.loadChildren&&!r.canLoad&&r._loadedConfig){const e=r._loadedConfig;n.push(this.processRoutes(e.module,e.routes))}else r.loadChildren&&!r.canLoad?n.push(this.preloadConfig(e,r)):r.children&&n.push(this.processRoutes(e,r.children));return Object(n_.a)(n).pipe(Object(b_.a)(),Object(__.a)(e=>void 0))}preloadConfig(e,t){return this.preloadingStrategy.preload(t,()=>{return this.loader.load(e.injector,t).pipe(Object(Q_.a)(e=>(t._loadedConfig=e,this.processRoutes(e.module,e.routes))))})}}jE.decorators=[{type:i.A}],jE.ctorParameters=(()=>[{type:DE},{type:i.K},{type:i.l},{type:i.C},{type:LE}]);class BE{constructor(e,t,n={}){this.router=e,this.viewportScroller=t,this.options=n,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},n.scrollPositionRestoration=n.scrollPositionRestoration||"disabled",n.anchorScrolling=n.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(e=>{e instanceof cb?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=e.navigationTrigger,this.restoredId=e.restoredState?e.restoredState.navigationId:0):e instanceof lb&&(this.lastId=e.id,this.scheduleScrollEvent(e,this.router.parseUrl(e.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(e=>{e instanceof Sb&&(e.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(e.position):e.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(e.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(e,t){this.router.triggerEvent(new Sb(e,"popstate"===this.lastSource?this.store[this.restoredId]:null,t))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}const UE=[RE,IE,NE,kE,Tb],qE=new i.B("ROUTER_CONFIGURATION"),$E=new i.B("ROUTER_FORROOT_GUARD"),HE=[vf.f,{provide:Gb,useClass:Xb},{provide:DE,useFactory:function(e,t,n,r,i,s,o,a,u={},c,l){const h=new DE(null,t,n,r,i,s,o,Vb(a));c&&(h.urlHandlingStrategy=c);l&&(h.routeReuseStrategy=l);u.errorHandler&&(h.errorHandler=u.errorHandler);u.malformedUriErrorHandler&&(h.malformedUriErrorHandler=u.malformedUriErrorHandler);if(u.enableTracing){const e=bf();h.events.subscribe(t=>{e.logGroup(`Router Event: ${t.constructor.name}`),e.log(t.toString()),e.log(t),e.logGroupEnd()})}u.onSameUrlNavigation&&(h.onSameUrlNavigation=u.onSameUrlNavigation);u.paramsInheritanceStrategy&&(h.paramsInheritanceStrategy=u.paramsInheritanceStrategy);u.urlUpdateStrategy&&(h.urlUpdateStrategy=u.urlUpdateStrategy);u.relativeLinkResolution&&(h.relativeLinkResolution=u.relativeLinkResolution);return h},deps:[i.g,Gb,ME,vf.f,i.C,i.K,i.l,EE,qE,[class{},new i.O],[class{},new i.O]]},ME,{provide:yw,useFactory:function(e){return e.routerState.root},deps:[DE]},{provide:i.K,useClass:i.db},jE,VE,class{preload(e,t){return t().pipe(U_(()=>Object(t_.a)(null)))}},{provide:qE,useValue:{enableTracing:!1}}];function zE(){return new i.M("Router",DE)}class WE{constructor(e,t){}static forRoot(e,t){return{ngModule:WE,providers:[HE,XE(e),{provide:$E,useFactory:GE,deps:[[DE,new i.O,new i.cb]]},{provide:qE,useValue:t||{}},{provide:vf.g,useFactory:QE,deps:[vf.i,[new i.z(vf.a),new i.O],qE]},{provide:BE,useFactory:KE,deps:[DE,vf.j,qE]},{provide:LE,useExisting:t&&t.preloadingStrategy?t.preloadingStrategy:VE},{provide:i.M,multi:!0,useFactory:zE},[YE,{provide:i.d,multi:!0,useFactory:ZE,deps:[YE]},{provide:eC,useFactory:JE,deps:[YE]},{provide:i.b,multi:!0,useExisting:eC}]]}}static forChild(e){return{ngModule:WE,providers:[XE(e)]}}}function KE(e,t,n){return n.scrollOffset&&t.setOffset(n.scrollOffset),new BE(e,t,n)}function QE(e,t,n={}){return n.useHash?new vf.d(e,t):new vf.h(e,t)}function GE(e){if(e)throw new Error("RouterModule.forRoot() called twice. Lazy loaded modules should use RouterModule.forChild() instead.");return"guarded"}function XE(e){return[{provide:i.a,multi:!0,useValue:e},{provide:EE,multi:!0,useValue:e}]}WE.decorators=[{type:i.I,args:[{declarations:UE,exports:UE,entryComponents:[Tb]}]}],WE.ctorParameters=(()=>[{type:void 0,decorators:[{type:i.O},{type:i.z,args:[$E]}]},{type:DE,decorators:[{type:i.O}]}]);class YE{constructor(e){this.injector=e,this.initNavigation=!1,this.resultOfPreactivationDone=new r_.a}appInitializer(){return this.injector.get(vf.e,Promise.resolve(null)).then(()=>{let e=null;const t=new Promise(t=>e=t),n=this.injector.get(DE),r=this.injector.get(qE);if(this.isLegacyDisabled(r)||this.isLegacyEnabled(r))e(!0);else if("disabled"===r.initialNavigation)n.setUpLocationChangeListener(),e(!0);else{if("enabled"!==r.initialNavigation)throw new Error(`Invalid initialNavigation options: '${r.initialNavigation}'`);n.hooks.afterPreactivation=(()=>this.initNavigation?Object(t_.a)(null):(this.initNavigation=!0,e(!0),this.resultOfPreactivationDone)),n.initialNavigation()}return t})}bootstrapListener(e){const t=this.injector.get(qE),n=this.injector.get(jE),r=this.injector.get(BE),s=this.injector.get(DE),o=this.injector.get(i.g);e===o.components[0]&&(this.isLegacyEnabled(t)?s.initialNavigation():this.isLegacyDisabled(t)&&s.setUpLocationChangeListener(),n.setUpPreloading(),r.init(),s.resetRootComponentType(o.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}isLegacyEnabled(e){return"legacy_enabled"===e.initialNavigation||!0===e.initialNavigation||void 0===e.initialNavigation}isLegacyDisabled(e){return"legacy_disabled"===e.initialNavigation||!1===e.initialNavigation}}function ZE(e){return e.appInitializer.bind(e)}function JE(e){return e.bootstrapListener.bind(e)}YE.decorators=[{type:i.A}],YE.ctorParameters=(()=>[{type:i.C}]);const eC=new i.B("Router Initializer");new i.ib("7.1.1");class tC extends h_.a{constructor(e,t){super(e),this.sources=t,this.completed=0,this.haveValues=0;const n=t.length;this.values=new Array(n);for(let r=0;r<n;r++){const e=t[r],n=Object(d_.a)(this,e,null,r);n&&this.add(n)}}notifyNext(e,t,n,r,i){this.values[n]=t,i._hasValue||(i._hasValue=!0,this.haveValues++)}notifyComplete(e){const{destination:t,haveValues:n,values:r}=this,i=r.length;e._hasValue?(this.completed++,this.completed===i&&(n===i&&t.next(r),t.complete())):t.complete()}}class nC{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class rC extends nC{get formDirective(){return null}get path(){return null}}function iC(e){return null==e||0===e.length}const sC=new i.B("NgValidators"),oC=new i.B("NgAsyncValidators"),aC=/^(?=.{1,254}$)(?=.{1,64}@)[-!#$%&'*+\/0-9=?A-Z^_`a-z{|}~]+(\.[-!#$%&'*+\/0-9=?A-Z^_`a-z{|}~]+)*@[A-Za-z0-9]([A-Za-z0-9-]{0,61}[A-Za-z0-9])?(\.[A-Za-z0-9]([A-Za-z0-9-]{0,61}[A-Za-z0-9])?)*$/;class uC{static min(e){return t=>{if(iC(t.value)||iC(e))return null;const n=parseFloat(t.value);return!isNaN(n)&&n<e?{min:{min:e,actual:t.value}}:null}}static max(e){return t=>{if(iC(t.value)||iC(e))return null;const n=parseFloat(t.value);return!isNaN(n)&&n>e?{max:{max:e,actual:t.value}}:null}}static required(e){return iC(e.value)?{required:!0}:null}static requiredTrue(e){return!0===e.value?null:{required:!0}}static email(e){return iC(e.value)?null:aC.test(e.value)?null:{email:!0}}static minLength(e){return t=>{if(iC(t.value))return null;const n=t.value?t.value.length:0;return n<e?{minlength:{requiredLength:e,actualLength:n}}:null}}static maxLength(e){return t=>{const n=t.value?t.value.length:0;return n>e?{maxlength:{requiredLength:e,actualLength:n}}:null}}static pattern(e){if(!e)return uC.nullValidator;let t,n;return"string"==typeof e?(n="","^"!==e.charAt(0)&&(n+="^"),n+=e,"$"!==e.charAt(e.length-1)&&(n+="$"),t=new RegExp(n)):(n=e.toString(),t=e),e=>{if(iC(e.value))return null;const r=e.value;return t.test(r)?null:{pattern:{requiredPattern:n,actualValue:r}}}}static nullValidator(e){return null}static compose(e){if(!e)return null;const t=e.filter(cC);return 0==t.length?null:function(e){return hC(function(e,t){return t.map(t=>t(e))}(e,t))}}static composeAsync(e){if(!e)return null;const t=e.filter(cC);return 0==t.length?null:function(e){return function e(...t){let n;return"function"==typeof t[t.length-1]&&(n=t.pop()),1===t.length&&Object(l_.a)(t[0])&&(t=t[0]),0===t.length?y_.a:n?e(t).pipe(Object(__.a)(e=>n(...e))):new o_.a(e=>new tC(e,t))}(function(e,t){return t.map(t=>t(e))}(e,t).map(lC)).pipe(Object(__.a)(hC))}}}function cC(e){return null!=e}function lC(e){const t=Object(i.Pb)(e)?Object(n_.a)(e):e;if(!Object(i.Ob)(t))throw new Error("Expected validator to return Promise or Observable.");return t}function hC(e){const t=e.reduce((e,t)=>null!=t?Object.assign({},e,t):e,{});return 0===Object.keys(t).length?null:t}const dC=new i.B("NgValueAccessor"),pC={provide:dC,useExisting:Object(i.pb)(()=>fC),multi:!0};class fC{constructor(e,t){this._renderer=e,this._elementRef=t,this.onChange=(e=>{}),this.onTouched=(()=>{})}writeValue(e){this._renderer.setProperty(this._elementRef.nativeElement,"checked",e)}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}setDisabledState(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)}}fC.decorators=[{type:i.s,args:[{selector:"input[type=checkbox][formControlName],input[type=checkbox][formControl],input[type=checkbox][ngModel]",host:{"(change)":"onChange($event.target.checked)","(blur)":"onTouched()"},providers:[pC]}]}],fC.ctorParameters=(()=>[{type:i.W},{type:i.t}]);const mC={provide:dC,useExisting:Object(i.pb)(()=>yC),multi:!0};const gC=new i.B("CompositionEventMode");class yC{constructor(e,t,n){this._renderer=e,this._elementRef=t,this._compositionMode=n,this.onChange=(e=>{}),this.onTouched=(()=>{}),this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function(){const e=bf()?bf().getUserAgent():"";return/android (\d+)/.test(e.toLowerCase())}())}writeValue(e){const t=null==e?"":e;this._renderer.setProperty(this._elementRef.nativeElement,"value",t)}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}setDisabledState(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)}_handleInput(e){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(e)}_compositionStart(){this._composing=!0}_compositionEnd(e){this._composing=!1,this._compositionMode&&this.onChange(e)}}function vC(e){return e.validate?t=>e.validate(t):e}function _C(e){return e.validate?t=>e.validate(t):e}yC.decorators=[{type:i.s,args:[{selector:"input:not([type=checkbox])[formControlName],textarea[formControlName],input:not([type=checkbox])[formControl],textarea[formControl],input:not([type=checkbox])[ngModel],textarea[ngModel],[ngDefaultControl]",host:{"(input)":"$any(this)._handleInput($event.target.value)","(blur)":"onTouched()","(compositionstart)":"$any(this)._compositionStart()","(compositionend)":"$any(this)._compositionEnd($event.target.value)"},providers:[mC]}]}],yC.ctorParameters=(()=>[{type:i.W},{type:i.t},{type:Boolean,decorators:[{type:i.O},{type:i.z,args:[gC]}]}]);const bC={provide:dC,useExisting:Object(i.pb)(()=>wC),multi:!0};class wC{constructor(e,t){this._renderer=e,this._elementRef=t,this.onChange=(e=>{}),this.onTouched=(()=>{})}writeValue(e){const t=null==e?"":e;this._renderer.setProperty(this._elementRef.nativeElement,"value",t)}registerOnChange(e){this.onChange=(t=>{e(""==t?null:parseFloat(t))})}registerOnTouched(e){this.onTouched=e}setDisabledState(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)}}function EC(){throw new Error("unimplemented")}wC.decorators=[{type:i.s,args:[{selector:"input[type=number][formControlName],input[type=number][formControl],input[type=number][ngModel]",host:{"(change)":"onChange($event.target.value)","(input)":"onChange($event.target.value)","(blur)":"onTouched()"},providers:[bC]}]}],wC.ctorParameters=(()=>[{type:i.W},{type:i.t}]);class CC extends nC{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null,this._rawValidators=[],this._rawAsyncValidators=[]}get validator(){return EC()}get asyncValidator(){return EC()}}const SC={provide:dC,useExisting:Object(i.pb)(()=>xC),multi:!0};class TC{constructor(){this._accessors=[]}add(e,t){this._accessors.push([e,t])}remove(e){for(let t=this._accessors.length-1;t>=0;--t)if(this._accessors[t][1]===e)return void this._accessors.splice(t,1)}select(e){this._accessors.forEach(t=>{this._isSameGroup(t,e)&&t[1]!==e&&t[1].fireUncheck(e.value)})}_isSameGroup(e,t){return!!e[0].control&&(e[0]._parent===t._control._parent&&e[1].name===t.name)}}TC.decorators=[{type:i.A}];class xC{constructor(e,t,n,r){this._renderer=e,this._elementRef=t,this._registry=n,this._injector=r,this.onChange=(()=>{}),this.onTouched=(()=>{})}ngOnInit(){this._control=this._injector.get(CC),this._checkName(),this._registry.add(this._control,this)}ngOnDestroy(){this._registry.remove(this)}writeValue(e){this._state=e===this.value,this._renderer.setProperty(this._elementRef.nativeElement,"checked",this._state)}registerOnChange(e){this._fn=e,this.onChange=(()=>{e(this.value),this._registry.select(this)})}fireUncheck(e){this.writeValue(e)}registerOnTouched(e){this.onTouched=e}setDisabledState(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)}_checkName(){this.name&&this.formControlName&&this.name!==this.formControlName&&this._throwNameError(),!this.name&&this.formControlName&&(this.name=this.formControlName)}_throwNameError(){throw new Error('\n      If you define both a name and a formControlName attribute on your radio button, their values\n      must match. Ex: <input type="radio" formControlName="food" name="food">\n    ')}}xC.decorators=[{type:i.s,args:[{selector:"input[type=radio][formControlName],input[type=radio][formControl],input[type=radio][ngModel]",host:{"(change)":"onChange()","(blur)":"onTouched()"},providers:[SC]}]}],xC.ctorParameters=(()=>[{type:i.W},{type:i.t},{type:TC},{type:i.C}]),xC.propDecorators={name:[{type:i.D}],formControlName:[{type:i.D}],value:[{type:i.D}]};const AC={provide:dC,useExisting:Object(i.pb)(()=>DC),multi:!0};class DC{constructor(e,t){this._renderer=e,this._elementRef=t,this.onChange=(e=>{}),this.onTouched=(()=>{})}writeValue(e){this._renderer.setProperty(this._elementRef.nativeElement,"value",parseFloat(e))}registerOnChange(e){this.onChange=(t=>{e(""==t?null:parseFloat(t))})}registerOnTouched(e){this.onTouched=e}setDisabledState(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)}}DC.decorators=[{type:i.s,args:[{selector:"input[type=range][formControlName],input[type=range][formControl],input[type=range][ngModel]",host:{"(change)":"onChange($event.target.value)","(input)":"onChange($event.target.value)","(blur)":"onTouched()"},providers:[AC]}]}],DC.ctorParameters=(()=>[{type:i.W},{type:i.t}]);const IC={formControlName:'\n    <div [formGroup]="myGroup">\n      <input formControlName="firstName">\n    </div>\n\n    In your class:\n\n    this.myGroup = new FormGroup({\n       firstName: new FormControl()\n    });',formGroupName:'\n    <div [formGroup]="myGroup">\n       <div formGroupName="person">\n          <input formControlName="firstName">\n       </div>\n    </div>\n\n    In your class:\n\n    this.myGroup = new FormGroup({\n       person: new FormGroup({ firstName: new FormControl() })\n    });',formArrayName:'\n    <div [formGroup]="myGroup">\n      <div formArrayName="cities">\n        <div *ngFor="let city of cityArray.controls; index as i">\n          <input [formControlName]="i">\n        </div>\n      </div>\n    </div>\n\n    In your class:\n\n    this.cityArray = new FormArray([new FormControl(\'SF\')]);\n    this.myGroup = new FormGroup({\n      cities: this.cityArray\n    });',ngModelGroup:'\n    <form>\n       <div ngModelGroup="person">\n          <input [(ngModel)]="person.name" name="firstName">\n       </div>\n    </form>',ngModelWithFormGroup:'\n    <div [formGroup]="myGroup">\n       <input formControlName="firstName">\n       <input [(ngModel)]="showMoreControls" [ngModelOptions]="{standalone: true}">\n    </div>\n  '};class NC{static controlParentException(){throw new Error(`formControlName must be used with a parent formGroup directive.  You'll want to add a formGroup\n       directive and pass it an existing FormGroup instance (you can create one in your class).\n\n      Example:\n\n      ${IC.formControlName}`)}static ngModelGroupException(){throw new Error(`formControlName cannot be used with an ngModelGroup parent. It is only compatible with parents\n       that also have a "form" prefix: formGroupName, formArrayName, or formGroup.\n\n       Option 1:  Update the parent to be formGroupName (reactive form strategy)\n\n        ${IC.formGroupName}\n\n        Option 2: Use ngModel instead of formControlName (template-driven strategy)\n\n        ${IC.ngModelGroup}`)}static missingFormException(){throw new Error(`formGroup expects a FormGroup instance. Please pass one in.\n\n       Example:\n\n       ${IC.formControlName}`)}static groupParentException(){throw new Error(`formGroupName must be used with a parent formGroup directive.  You'll want to add a formGroup\n      directive and pass it an existing FormGroup instance (you can create one in your class).\n\n      Example:\n\n      ${IC.formGroupName}`)}static arrayParentException(){throw new Error(`formArrayName must be used with a parent formGroup directive.  You'll want to add a formGroup\n       directive and pass it an existing FormGroup instance (you can create one in your class).\n\n        Example:\n\n        ${IC.formArrayName}`)}static disabledAttrWarning(){console.warn("\n      It looks like you're using the disabled attribute with a reactive form directive. If you set disabled to true\n      when you set up this control in your component class, the disabled attribute will actually be set in the DOM for\n      you. We recommend using this approach to avoid 'changed after checked' errors.\n       \n      Example: \n      form = new FormGroup({\n        first: new FormControl({value: 'Nancy', disabled: true}, Validators.required),\n        last: new FormControl('Drew', Validators.required)\n      });\n    ")}static ngModelWarning(e){console.warn(`\n    It looks like you're using ngModel on the same form field as ${e}. \n    Support for using the ngModel input property and ngModelChange event with \n    reactive form directives has been deprecated in Angular v6 and will be removed \n    in Angular v7.\n    \n    For more information on this, see our API docs here:\n    https://angular.io/api/forms/${"formControl"===e?"FormControlDirective":"FormControlName"}#use-with-ngmodel\n    `)}}const OC={provide:dC,useExisting:Object(i.pb)(()=>PC),multi:!0};function kC(e,t){return null==e?`${t}`:(t&&"object"==typeof t&&(t="Object"),`${e}: ${t}`.slice(0,50))}class PC{constructor(e,t){this._renderer=e,this._elementRef=t,this._optionMap=new Map,this._idCounter=0,this.onChange=(e=>{}),this.onTouched=(()=>{}),this._compareWith=i.Qb}set compareWith(e){if("function"!=typeof e)throw new Error(`compareWith must be a function, but received ${JSON.stringify(e)}`);this._compareWith=e}writeValue(e){this.value=e;const t=this._getOptionId(e);null==t&&this._renderer.setProperty(this._elementRef.nativeElement,"selectedIndex",-1);const n=kC(t,e);this._renderer.setProperty(this._elementRef.nativeElement,"value",n)}registerOnChange(e){this.onChange=(t=>{this.value=this._getOptionValue(t),e(this.value)})}registerOnTouched(e){this.onTouched=e}setDisabledState(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)}_registerOption(){return(this._idCounter++).toString()}_getOptionId(e){for(const t of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(t),e))return t;return null}_getOptionValue(e){const t=function(e){return e.split(":")[0]}(e);return this._optionMap.has(t)?this._optionMap.get(t):e}}PC.decorators=[{type:i.s,args:[{selector:"select:not([multiple])[formControlName],select:not([multiple])[formControl],select:not([multiple])[ngModel]",host:{"(change)":"onChange($event.target.value)","(blur)":"onTouched()"},providers:[OC]}]}],PC.ctorParameters=(()=>[{type:i.W},{type:i.t}]),PC.propDecorators={compareWith:[{type:i.D}]};class MC{constructor(e,t,n){this._element=e,this._renderer=t,this._select=n,this._select&&(this.id=this._select._registerOption())}set ngValue(e){null!=this._select&&(this._select._optionMap.set(this.id,e),this._setElementValue(kC(this.id,e)),this._select.writeValue(this._select.value))}set value(e){this._setElementValue(e),this._select&&this._select.writeValue(this._select.value)}_setElementValue(e){this._renderer.setProperty(this._element.nativeElement,"value",e)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}MC.decorators=[{type:i.s,args:[{selector:"option"}]}],MC.ctorParameters=(()=>[{type:i.t},{type:i.W},{type:PC,decorators:[{type:i.O},{type:i.w}]}]),MC.propDecorators={ngValue:[{type:i.D,args:["ngValue"]}],value:[{type:i.D,args:["value"]}]};const RC={provide:dC,useExisting:Object(i.pb)(()=>LC),multi:!0};function FC(e,t){return null==e?`${t}`:("string"==typeof t&&(t=`'${t}'`),t&&"object"==typeof t&&(t="Object"),`${e}: ${t}`.slice(0,50))}class LC{constructor(e,t){this._renderer=e,this._elementRef=t,this._optionMap=new Map,this._idCounter=0,this.onChange=(e=>{}),this.onTouched=(()=>{}),this._compareWith=i.Qb}set compareWith(e){if("function"!=typeof e)throw new Error(`compareWith must be a function, but received ${JSON.stringify(e)}`);this._compareWith=e}writeValue(e){let t;if(this.value=e,Array.isArray(e)){const n=e.map(e=>this._getOptionId(e));t=((e,t)=>{e._setSelected(n.indexOf(t.toString())>-1)})}else t=((e,t)=>{e._setSelected(!1)});this._optionMap.forEach(t)}registerOnChange(e){this.onChange=(t=>{const n=[];if(t.hasOwnProperty("selectedOptions")){const e=t.selectedOptions;for(let t=0;t<e.length;t++){const r=e.item(t),i=this._getOptionValue(r.value);n.push(i)}}else{const e=t.options;for(let t=0;t<e.length;t++){const r=e.item(t);if(r.selected){const e=this._getOptionValue(r.value);n.push(e)}}}this.value=n,e(n)})}registerOnTouched(e){this.onTouched=e}setDisabledState(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)}_registerOption(e){const t=(this._idCounter++).toString();return this._optionMap.set(t,e),t}_getOptionId(e){for(const t of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(t)._value,e))return t;return null}_getOptionValue(e){const t=function(e){return e.split(":")[0]}(e);return this._optionMap.has(t)?this._optionMap.get(t)._value:e}}LC.decorators=[{type:i.s,args:[{selector:"select[multiple][formControlName],select[multiple][formControl],select[multiple][ngModel]",host:{"(change)":"onChange($event.target)","(blur)":"onTouched()"},providers:[RC]}]}],LC.ctorParameters=(()=>[{type:i.W},{type:i.t}]),LC.propDecorators={compareWith:[{type:i.D}]};class VC{constructor(e,t,n){this._element=e,this._renderer=t,this._select=n,this._select&&(this.id=this._select._registerOption(this))}set ngValue(e){null!=this._select&&(this._value=e,this._setElementValue(FC(this.id,e)),this._select.writeValue(this._select.value))}set value(e){this._select?(this._value=e,this._setElementValue(FC(this.id,e)),this._select.writeValue(this._select.value)):this._setElementValue(e)}_setElementValue(e){this._renderer.setProperty(this._element.nativeElement,"value",e)}_setSelected(e){this._renderer.setProperty(this._element.nativeElement,"selected",e)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}function jC(e,t){return[...t.path,e]}function BC(e,t){e||HC(t,"Cannot find control with"),t.valueAccessor||HC(t,"No value accessor for form control with"),e.validator=uC.compose([e.validator,t.validator]),e.asyncValidator=uC.composeAsync([e.asyncValidator,t.asyncValidator]),t.valueAccessor.writeValue(e.value),function(e,t){t.valueAccessor.registerOnChange(n=>{e._pendingValue=n,e._pendingChange=!0,e._pendingDirty=!0,"change"===e.updateOn&&UC(e,t)})}(e,t),function(e,t){e.registerOnChange((e,n)=>{t.valueAccessor.writeValue(e),n&&t.viewToModelUpdate(e)})}(e,t),function(e,t){t.valueAccessor.registerOnTouched(()=>{e._pendingTouched=!0,"blur"===e.updateOn&&e._pendingChange&&UC(e,t),"submit"!==e.updateOn&&e.markAsTouched()})}(e,t),t.valueAccessor.setDisabledState&&e.registerOnDisabledChange(e=>{t.valueAccessor.setDisabledState(e)}),t._rawValidators.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(()=>e.updateValueAndValidity())}),t._rawAsyncValidators.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(()=>e.updateValueAndValidity())})}function UC(e,t){e._pendingDirty&&e.markAsDirty(),e.setValue(e._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(e._pendingValue),e._pendingChange=!1}function qC(e,t){null==e&&HC(t,"Cannot find control with"),e.validator=uC.compose([e.validator,t.validator]),e.asyncValidator=uC.composeAsync([e.asyncValidator,t.asyncValidator])}function $C(e){return HC(e,"There is no FormControl instance attached to form control element with")}function HC(e,t){let n;throw n=e.path.length>1?`path: '${e.path.join(" -> ")}'`:e.path[0]?`name: '${e.path}'`:"unspecified name attribute",new Error(`${t} ${n}`)}function zC(e){return null!=e?uC.compose(e.map(vC)):null}function WC(e){return null!=e?uC.composeAsync(e.map(_C)):null}function KC(e,t){if(!e.hasOwnProperty("model"))return!1;const n=e.model;return!!n.isFirstChange()||!Object(i.Qb)(t,n.currentValue)}VC.decorators=[{type:i.s,args:[{selector:"option"}]}],VC.ctorParameters=(()=>[{type:i.t},{type:i.W},{type:LC,decorators:[{type:i.O},{type:i.w}]}]),VC.propDecorators={ngValue:[{type:i.D,args:["ngValue"]}],value:[{type:i.D,args:["value"]}]};const QC=[fC,DC,wC,PC,LC,xC];function GC(e,t){e._syncPendingControls(),t.forEach(e=>{const t=e.control;"submit"===t.updateOn&&t._pendingChange&&(e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1)})}function XC(e,t){if(!t)return null;Array.isArray(t)||HC(e,"Value accessor was not provided as an array for form control with");let n=void 0,r=void 0,i=void 0;return t.forEach(t=>{t.constructor===yC?n=t:!function(e){return QC.some(t=>e.constructor===t)}(t)?(i&&HC(e,"More than one custom value accessor matches form control with"),i=t):(r&&HC(e,"More than one built-in value accessor matches form control with"),r=t)}),i||(r||(n||(HC(e,"No valid value accessor for form control with"),null)))}function YC(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}function ZC(e,t,n,r){Object(i.sb)()&&"never"!==r&&((null!==r&&"once"!==r||t._ngModelWarningSentOnce)&&("always"!==r||n._ngModelWarningSent)||(NC.ngModelWarning(e),t._ngModelWarningSentOnce=!0,n._ngModelWarningSent=!0))}class JC extends rC{ngOnInit(){this._checkParentType(),this.formDirective.addFormGroup(this)}ngOnDestroy(){this.formDirective&&this.formDirective.removeFormGroup(this)}get control(){return this.formDirective.getFormGroup(this)}get path(){return jC(this.name,this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}get validator(){return zC(this._validators)}get asyncValidator(){return WC(this._asyncValidators)}_checkParentType(){}}class eS{constructor(e){this._cd=e}get ngClassUntouched(){return!!this._cd.control&&this._cd.control.untouched}get ngClassTouched(){return!!this._cd.control&&this._cd.control.touched}get ngClassPristine(){return!!this._cd.control&&this._cd.control.pristine}get ngClassDirty(){return!!this._cd.control&&this._cd.control.dirty}get ngClassValid(){return!!this._cd.control&&this._cd.control.valid}get ngClassInvalid(){return!!this._cd.control&&this._cd.control.invalid}get ngClassPending(){return!!this._cd.control&&this._cd.control.pending}}const tS={"[class.ng-untouched]":"ngClassUntouched","[class.ng-touched]":"ngClassTouched","[class.ng-pristine]":"ngClassPristine","[class.ng-dirty]":"ngClassDirty","[class.ng-valid]":"ngClassValid","[class.ng-invalid]":"ngClassInvalid","[class.ng-pending]":"ngClassPending"};class nS extends eS{constructor(e){super(e)}}nS.decorators=[{type:i.s,args:[{selector:"[formControlName],[ngModel],[formControl]",host:tS}]}],nS.ctorParameters=(()=>[{type:CC,decorators:[{type:i.bb}]}]);class rS extends eS{constructor(e){super(e)}}rS.decorators=[{type:i.s,args:[{selector:"[formGroupName],[formArrayName],[ngModelGroup],[formGroup],form:not([ngNoForm]),[ngForm]",host:tS}]}],rS.ctorParameters=(()=>[{type:rC,decorators:[{type:i.bb}]}]);const iS="VALID",sS="INVALID",oS="PENDING",aS="DISABLED";function uS(e){const t=lS(e)?e.validators:e;return Array.isArray(t)?zC(t):t||null}function cS(e,t){const n=lS(t)?t.asyncValidators:e;return Array.isArray(n)?WC(n):n||null}function lS(e){return null!=e&&!Array.isArray(e)&&"object"==typeof e}class hS{constructor(e,t){this.validator=e,this.asyncValidator=t,this._onCollectionChange=(()=>{}),this.pristine=!0,this.touched=!1,this._onDisabledChange=[]}get parent(){return this._parent}get valid(){return this.status===iS}get invalid(){return this.status===sS}get pending(){return this.status==oS}get disabled(){return this.status===aS}get enabled(){return this.status!==aS}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this.validator=uS(e)}setAsyncValidators(e){this.asyncValidator=cS(e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(e=>{e.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(e=>{e.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=oS,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){this.status=aS,this.errors=null,this._forEachChild(t=>{t.disable(Object.assign({},e,{onlySelf:!0}))}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(e),this._onDisabledChange.forEach(e=>e(!0))}enable(e={}){this.status=iS,this._forEachChild(t=>{t.enable(Object.assign({},e,{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(e),this._onDisabledChange.forEach(e=>e(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),this.status!==iS&&this.status!==oS||this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?aS:iS}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=oS;const t=lC(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(t=>this.setErrors(t,{emitEvent:e}))}}_cancelExistingSubscription(){this._asyncValidationSubscription&&this._asyncValidationSubscription.unsubscribe()}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){return function(e,t,n){return null==t?null:(t instanceof Array||(t=t.split(n)),t instanceof Array&&0===t.length?null:t.reduce((e,t)=>e instanceof pS?e.controls.hasOwnProperty(t)?e.controls[t]:null:e instanceof fS&&e.at(t)||null,e))}(this,e,".")}getError(e,t){const n=t?this.get(t):this;return n&&n.errors?n.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new i.v,this.statusChanges=new i.v}_calculateStatus(){return this._allControlsDisabled()?aS:this.errors?sS:this._anyControlsHaveStatus(oS)?oS:this._anyControlsHaveStatus(sS)?sS:iS}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_isBoxedValue(e){return"object"==typeof e&&null!==e&&2===Object.keys(e).length&&"value"in e&&"disabled"in e}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){lS(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}}class dS extends hS{constructor(e=null,t,n){super(uS(t),cS(n,t)),this._onChange=[],this._applyFormState(e),this._setUpdateStrategy(t),this.updateValueAndValidity({onlySelf:!0,emitEvent:!1}),this._initObservables()}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(e=>e(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=null,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_clearChangeFns(){this._onChange=[],this._onDisabledChange=[],this._onCollectionChange=(()=>{})}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange))&&(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0)}_applyFormState(e){this._isBoxedValue(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}}class pS extends hS{constructor(e,t,n){super(uS(t),cS(n,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!1})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t){this.registerControl(e,t),this.updateValueAndValidity(),this._onCollectionChange()}removeControl(e){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity(),this._onCollectionChange()}setControl(e,t){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity(),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){this._checkAllValuesPresent(e),Object.keys(e).forEach(n=>{this._throwIfControlMissing(n),this.controls[n].setValue(e[n],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){Object.keys(e).forEach(n=>{this.controls[n]&&this.controls[n].patchValue(e[n],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}reset(e={},t={}){this._forEachChild((n,r)=>{n.reset(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t),this._updatePristine(t),this._updateTouched(t)}getRawValue(){return this._reduceChildren({},(e,t,n)=>(e[n]=t instanceof dS?t.value:t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(e,t)=>!!t._syncPendingControls()||e);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_throwIfControlMissing(e){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet.  If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[e])throw new Error(`Cannot find form control with name: ${e}.`)}_forEachChild(e){Object.keys(this.controls).forEach(t=>e(this.controls[t],t))}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){let t=!1;return this._forEachChild((n,r)=>{t=t||this.contains(r)&&e(n)}),t}_reduceValue(){return this._reduceChildren({},(e,t,n)=>((t.enabled||this.disabled)&&(e[n]=t.value),e))}_reduceChildren(e,t){let n=e;return this._forEachChild((e,r)=>{n=t(n,e,r)}),n}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_checkAllValuesPresent(e){this._forEachChild((t,n)=>{if(void 0===e[n])throw new Error(`Must supply a value for form control with name: '${n}'.`)})}}class fS extends hS{constructor(e,t,n){super(uS(t),cS(n,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!1})}at(e){return this.controls[e]}push(e){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity(),this._onCollectionChange()}insert(e,t){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity()}removeAt(e){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),this.updateValueAndValidity()}setControl(e,t){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),t&&(this.controls.splice(e,0,t),this._registerControl(t)),this.updateValueAndValidity(),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){this._checkAllValuesPresent(e),e.forEach((e,n)=>{this._throwIfControlMissing(n),this.at(n).setValue(e,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e.forEach((e,n)=>{this.at(n)&&this.at(n).patchValue(e,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}reset(e=[],t={}){this._forEachChild((n,r)=>{n.reset(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t),this._updatePristine(t),this._updateTouched(t)}getRawValue(){return this.controls.map(e=>e instanceof dS?e.value:e.getRawValue())}_syncPendingControls(){let e=this.controls.reduce((e,t)=>!!t._syncPendingControls()||e,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_throwIfControlMissing(e){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet.  If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(e))throw new Error(`Cannot find form control at index ${e}`)}_forEachChild(e){this.controls.forEach((t,n)=>{e(t,n)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_checkAllValuesPresent(e){this._forEachChild((t,n)=>{if(void 0===e[n])throw new Error(`Must supply a value for form control at index: ${n}.`)})}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}}const mS={provide:rC,useExisting:Object(i.pb)(()=>yS)},gS=Promise.resolve(null);class yS extends rC{constructor(e,t){super(),this.submitted=!1,this._directives=[],this.ngSubmit=new i.v,this.form=new pS({},zC(e),WC(t))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(e){gS.then(()=>{const t=this._findContainer(e.path);e.control=t.registerControl(e.name,e.control),BC(e.control,e),e.control.updateValueAndValidity({emitEvent:!1}),this._directives.push(e)})}getControl(e){return this.form.get(e.path)}removeControl(e){gS.then(()=>{const t=this._findContainer(e.path);t&&t.removeControl(e.name),YC(this._directives,e)})}addFormGroup(e){gS.then(()=>{const t=this._findContainer(e.path),n=new pS({});qC(n,e),t.registerControl(e.name,n),n.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(e){gS.then(()=>{const t=this._findContainer(e.path);t&&t.removeControl(e.name)})}getFormGroup(e){return this.form.get(e.path)}updateModel(e,t){gS.then(()=>{this.form.get(e.path).setValue(t)})}setValue(e){this.control.setValue(e)}onSubmit(e){return this.submitted=!0,GC(this.form,this._directives),this.ngSubmit.emit(e),!1}onReset(){this.resetForm()}resetForm(e){this.form.reset(e),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(e){return e.pop(),e.length?this.form.get(e):this.form}}yS.decorators=[{type:i.s,args:[{selector:"form:not([ngNoForm]):not([formGroup]),ngForm,ng-form,[ngForm]",providers:[mS],host:{"(submit)":"onSubmit($event)","(reset)":"onReset()"},outputs:["ngSubmit"],exportAs:"ngForm"}]}],yS.ctorParameters=(()=>[{type:Array,decorators:[{type:i.O},{type:i.bb},{type:i.z,args:[sC]}]},{type:Array,decorators:[{type:i.O},{type:i.bb},{type:i.z,args:[oC]}]}]),yS.propDecorators={options:[{type:i.D,args:["ngFormOptions"]}]};class vS{static modelParentException(){throw new Error(`\n      ngModel cannot be used to register form controls with a parent formGroup directive.  Try using\n      formGroup's partner directive "formControlName" instead.  Example:\n\n      ${IC.formControlName}\n\n      Or, if you'd like to avoid registering this form control, indicate that it's standalone in ngModelOptions:\n\n      Example:\n\n      ${IC.ngModelWithFormGroup}`)}static formGroupNameException(){throw new Error(`\n      ngModel cannot be used to register form controls with a parent formGroupName or formArrayName directive.\n\n      Option 1: Use formControlName instead of ngModel (reactive strategy):\n\n      ${IC.formGroupName}\n\n      Option 2:  Update ngModel's parent be ngModelGroup (template-driven strategy):\n\n      ${IC.ngModelGroup}`)}static missingNameException(){throw new Error('If ngModel is used within a form tag, either the name attribute must be set or the form\n      control must be defined as \'standalone\' in ngModelOptions.\n\n      Example 1: <input [(ngModel)]="person.firstName" name="first">\n      Example 2: <input [(ngModel)]="person.firstName" [ngModelOptions]="{standalone: true}">')}static modelGroupParentException(){throw new Error(`\n      ngModelGroup cannot be used with a parent formGroup directive.\n\n      Option 1: Use formGroupName instead of ngModelGroup (reactive strategy):\n\n      ${IC.formGroupName}\n\n      Option 2:  Use a regular form tag instead of the formGroup directive (template-driven strategy):\n\n      ${IC.ngModelGroup}`)}static ngFormWarning(){console.warn("\n    It looks like you're using 'ngForm'.\n\n    Support for using the 'ngForm' element selector has been deprecated in Angular v6 and will be removed\n    in Angular v9.\n\n    Use 'ng-form' instead.\n\n    Before:\n    <ngForm #myForm=\"ngForm\">\n\n    After:\n    <ng-form #myForm=\"ngForm\">\n    ")}}const _S=new i.B("NgFormSelectorWarning");class bS{constructor(e){(e&&"once"!==e||bS._ngFormWarning)&&"always"!==e||(vS.ngFormWarning(),bS._ngFormWarning=!0)}}bS._ngFormWarning=!1,bS.decorators=[{type:i.s,args:[{selector:"ngForm"}]}],bS.ctorParameters=(()=>[{type:void 0,decorators:[{type:i.O},{type:i.z,args:[_S]}]}]);const wS={provide:rC,useExisting:Object(i.pb)(()=>ES)};class ES extends JC{constructor(e,t,n){super(),this._parent=e,this._validators=t,this._asyncValidators=n}_checkParentType(){this._parent instanceof ES||this._parent instanceof yS||vS.modelGroupParentException()}}ES.decorators=[{type:i.s,args:[{selector:"[ngModelGroup]",providers:[wS],exportAs:"ngModelGroup"}]}],ES.ctorParameters=(()=>[{type:rC,decorators:[{type:i.w},{type:i.cb}]},{type:Array,decorators:[{type:i.O},{type:i.bb},{type:i.z,args:[sC]}]},{type:Array,decorators:[{type:i.O},{type:i.bb},{type:i.z,args:[oC]}]}]),ES.propDecorators={name:[{type:i.D,args:["ngModelGroup"]}]};const CS={provide:CC,useExisting:Object(i.pb)(()=>TS)},SS=Promise.resolve(null);class TS extends CC{constructor(e,t,n,r){super(),this.control=new dS,this._registered=!1,this.update=new i.v,this._parent=e,this._rawValidators=t||[],this._rawAsyncValidators=n||[],this.valueAccessor=XC(this,r)}ngOnChanges(e){this._checkForErrors(),this._registered||this._setUpControl(),"isDisabled"in e&&this._updateDisabled(e),KC(e,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._parent?jC(this.name,this._parent):[this.name]}get formDirective(){return this._parent?this._parent.formDirective:null}get validator(){return zC(this._rawValidators)}get asyncValidator(){return WC(this._rawAsyncValidators)}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){BC(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){!(this._parent instanceof ES)&&this._parent instanceof JC?vS.formGroupNameException():this._parent instanceof ES||this._parent instanceof yS||vS.modelParentException()}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()||this.name||vS.missingNameException()}_updateValue(e){SS.then(()=>{this.control.setValue(e,{emitViewToModelChange:!1})})}_updateDisabled(e){const t=e.isDisabled.currentValue,n=""===t||t&&"false"!==t;SS.then(()=>{n&&!this.control.disabled?this.control.disable():!n&&this.control.disabled&&this.control.enable()})}}TS.decorators=[{type:i.s,args:[{selector:"[ngModel]:not([formControlName]):not([formControl])",providers:[CS],exportAs:"ngModel"}]}],TS.ctorParameters=(()=>[{type:rC,decorators:[{type:i.O},{type:i.w}]},{type:Array,decorators:[{type:i.O},{type:i.bb},{type:i.z,args:[sC]}]},{type:Array,decorators:[{type:i.O},{type:i.bb},{type:i.z,args:[oC]}]},{type:Array,decorators:[{type:i.O},{type:i.bb},{type:i.z,args:[dC]}]}]),TS.propDecorators={name:[{type:i.D}],isDisabled:[{type:i.D,args:["disabled"]}],model:[{type:i.D,args:["ngModel"]}],options:[{type:i.D,args:["ngModelOptions"]}],update:[{type:i.P,args:["ngModelChange"]}]};const xS=new i.B("NgModelWithFormControlWarning"),AS={provide:CC,useExisting:Object(i.pb)(()=>DS)};class DS extends CC{constructor(e,t,n,r){super(),this._ngModelWarningConfig=r,this.update=new i.v,this._ngModelWarningSent=!1,this._rawValidators=e||[],this._rawAsyncValidators=t||[],this.valueAccessor=XC(this,n)}set isDisabled(e){NC.disabledAttrWarning()}ngOnChanges(e){this._isControlChanged(e)&&(BC(this.form,this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this.form.updateValueAndValidity({emitEvent:!1})),KC(e,this.viewModel)&&(ZC("formControl",DS,this,this._ngModelWarningConfig),this.form.setValue(this.model),this.viewModel=this.model)}get path(){return[]}get validator(){return zC(this._rawValidators)}get asyncValidator(){return WC(this._rawAsyncValidators)}get control(){return this.form}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}_isControlChanged(e){return e.hasOwnProperty("form")}}DS._ngModelWarningSentOnce=!1,DS.decorators=[{type:i.s,args:[{selector:"[formControl]",providers:[AS],exportAs:"ngForm"}]}],DS.ctorParameters=(()=>[{type:Array,decorators:[{type:i.O},{type:i.bb},{type:i.z,args:[sC]}]},{type:Array,decorators:[{type:i.O},{type:i.bb},{type:i.z,args:[oC]}]},{type:Array,decorators:[{type:i.O},{type:i.bb},{type:i.z,args:[dC]}]},{type:void 0,decorators:[{type:i.O},{type:i.z,args:[xS]}]}]),DS.propDecorators={form:[{type:i.D,args:["formControl"]}],isDisabled:[{type:i.D,args:["disabled"]}],model:[{type:i.D,args:["ngModel"]}],update:[{type:i.P,args:["ngModelChange"]}]};const IS={provide:rC,useExisting:Object(i.pb)(()=>NS)};class NS extends rC{constructor(e,t){super(),this._validators=e,this._asyncValidators=t,this.submitted=!1,this.directives=[],this.form=null,this.ngSubmit=new i.v}ngOnChanges(e){this._checkFormPresent(),e.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations())}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(e){const t=this.form.get(e.path);return BC(t,e),t.updateValueAndValidity({emitEvent:!1}),this.directives.push(e),t}getControl(e){return this.form.get(e.path)}removeControl(e){YC(this.directives,e)}addFormGroup(e){const t=this.form.get(e.path);qC(t,e),t.updateValueAndValidity({emitEvent:!1})}removeFormGroup(e){}getFormGroup(e){return this.form.get(e.path)}addFormArray(e){const t=this.form.get(e.path);qC(t,e),t.updateValueAndValidity({emitEvent:!1})}removeFormArray(e){}getFormArray(e){return this.form.get(e.path)}updateModel(e,t){this.form.get(e.path).setValue(t)}onSubmit(e){return this.submitted=!0,GC(this.form,this.directives),this.ngSubmit.emit(e),!1}onReset(){this.resetForm()}resetForm(e){this.form.reset(e),this.submitted=!1}_updateDomValue(){this.directives.forEach(e=>{const t=this.form.get(e.path);e.control!==t&&(!function(e,t){t.valueAccessor.registerOnChange(()=>$C(t)),t.valueAccessor.registerOnTouched(()=>$C(t)),t._rawValidators.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(null)}),t._rawAsyncValidators.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(null)}),e&&e._clearChangeFns()}(e.control,e),t&&BC(t,e),e.control=t)}),this.form._updateTreeValidity({emitEvent:!1})}_updateRegistrations(){this.form._registerOnCollectionChange(()=>this._updateDomValue()),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{}),this._oldForm=this.form}_updateValidators(){const e=zC(this._validators);this.form.validator=uC.compose([this.form.validator,e]);const t=WC(this._asyncValidators);this.form.asyncValidator=uC.composeAsync([this.form.asyncValidator,t])}_checkFormPresent(){this.form||NC.missingFormException()}}NS.decorators=[{type:i.s,args:[{selector:"[formGroup]",providers:[IS],host:{"(submit)":"onSubmit($event)","(reset)":"onReset()"},exportAs:"ngForm"}]}],NS.ctorParameters=(()=>[{type:Array,decorators:[{type:i.O},{type:i.bb},{type:i.z,args:[sC]}]},{type:Array,decorators:[{type:i.O},{type:i.bb},{type:i.z,args:[oC]}]}]),NS.propDecorators={form:[{type:i.D,args:["formGroup"]}],ngSubmit:[{type:i.P}]};const OS={provide:rC,useExisting:Object(i.pb)(()=>kS)};class kS extends JC{constructor(e,t,n){super(),this._parent=e,this._validators=t,this._asyncValidators=n}_checkParentType(){RS(this._parent)&&NC.groupParentException()}}kS.decorators=[{type:i.s,args:[{selector:"[formGroupName]",providers:[OS]}]}],kS.ctorParameters=(()=>[{type:rC,decorators:[{type:i.O},{type:i.w},{type:i.cb}]},{type:Array,decorators:[{type:i.O},{type:i.bb},{type:i.z,args:[sC]}]},{type:Array,decorators:[{type:i.O},{type:i.bb},{type:i.z,args:[oC]}]}]),kS.propDecorators={name:[{type:i.D,args:["formGroupName"]}]};const PS={provide:rC,useExisting:Object(i.pb)(()=>MS)};class MS extends rC{constructor(e,t,n){super(),this._parent=e,this._validators=t,this._asyncValidators=n}ngOnInit(){this._checkParentType(),this.formDirective.addFormArray(this)}ngOnDestroy(){this.formDirective&&this.formDirective.removeFormArray(this)}get control(){return this.formDirective.getFormArray(this)}get formDirective(){return this._parent?this._parent.formDirective:null}get path(){return jC(this.name,this._parent)}get validator(){return zC(this._validators)}get asyncValidator(){return WC(this._asyncValidators)}_checkParentType(){RS(this._parent)&&NC.arrayParentException()}}function RS(e){return!(e instanceof kS||e instanceof NS||e instanceof MS)}MS.decorators=[{type:i.s,args:[{selector:"[formArrayName]",providers:[PS]}]}],MS.ctorParameters=(()=>[{type:rC,decorators:[{type:i.O},{type:i.w},{type:i.cb}]},{type:Array,decorators:[{type:i.O},{type:i.bb},{type:i.z,args:[sC]}]},{type:Array,decorators:[{type:i.O},{type:i.bb},{type:i.z,args:[oC]}]}]),MS.propDecorators={name:[{type:i.D,args:["formArrayName"]}]};const FS={provide:CC,useExisting:Object(i.pb)(()=>LS)};class LS extends CC{constructor(e,t,n,r,s){super(),this._ngModelWarningConfig=s,this._added=!1,this.update=new i.v,this._ngModelWarningSent=!1,this._parent=e,this._rawValidators=t||[],this._rawAsyncValidators=n||[],this.valueAccessor=XC(this,r)}set isDisabled(e){NC.disabledAttrWarning()}ngOnChanges(e){this._added||this._setUpControl(),KC(e,this.viewModel)&&(ZC("formControlName",LS,this,this._ngModelWarningConfig),this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}get path(){return jC(this.name,this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}get validator(){return zC(this._rawValidators)}get asyncValidator(){return WC(this._rawAsyncValidators)}_checkParentType(){!(this._parent instanceof kS)&&this._parent instanceof JC?NC.ngModelGroupException():this._parent instanceof kS||this._parent instanceof NS||this._parent instanceof MS||NC.controlParentException()}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this._added=!0}}LS._ngModelWarningSentOnce=!1,LS.decorators=[{type:i.s,args:[{selector:"[formControlName]",providers:[FS]}]}],LS.ctorParameters=(()=>[{type:rC,decorators:[{type:i.O},{type:i.w},{type:i.cb}]},{type:Array,decorators:[{type:i.O},{type:i.bb},{type:i.z,args:[sC]}]},{type:Array,decorators:[{type:i.O},{type:i.bb},{type:i.z,args:[oC]}]},{type:Array,decorators:[{type:i.O},{type:i.bb},{type:i.z,args:[dC]}]},{type:void 0,decorators:[{type:i.O},{type:i.z,args:[xS]}]}]),LS.propDecorators={name:[{type:i.D,args:["formControlName"]}],isDisabled:[{type:i.D,args:["disabled"]}],model:[{type:i.D,args:["ngModel"]}],update:[{type:i.P,args:["ngModelChange"]}]};const VS={provide:sC,useExisting:Object(i.pb)(()=>BS),multi:!0},jS={provide:sC,useExisting:Object(i.pb)(()=>US),multi:!0};class BS{get required(){return this._required}set required(e){this._required=null!=e&&!1!==e&&"false"!==`${e}`,this._onChange&&this._onChange()}validate(e){return this.required?uC.required(e):null}registerOnValidatorChange(e){this._onChange=e}}BS.decorators=[{type:i.s,args:[{selector:":not([type=checkbox])[required][formControlName],:not([type=checkbox])[required][formControl],:not([type=checkbox])[required][ngModel]",providers:[VS],host:{"[attr.required]":'required ? "" : null'}}]}],BS.propDecorators={required:[{type:i.D}]};class US extends BS{validate(e){return this.required?uC.requiredTrue(e):null}}US.decorators=[{type:i.s,args:[{selector:"input[type=checkbox][required][formControlName],input[type=checkbox][required][formControl],input[type=checkbox][required][ngModel]",providers:[jS],host:{"[attr.required]":'required ? "" : null'}}]}];const qS={provide:sC,useExisting:Object(i.pb)(()=>$S),multi:!0};class $S{set email(e){this._enabled=""===e||!0===e||"true"===e,this._onChange&&this._onChange()}validate(e){return this._enabled?uC.email(e):null}registerOnValidatorChange(e){this._onChange=e}}$S.decorators=[{type:i.s,args:[{selector:"[email][formControlName],[email][formControl],[email][ngModel]",providers:[qS]}]}],$S.propDecorators={email:[{type:i.D}]};const HS={provide:sC,useExisting:Object(i.pb)(()=>zS),multi:!0};class zS{ngOnChanges(e){"minlength"in e&&(this._createValidator(),this._onChange&&this._onChange())}validate(e){return null==this.minlength?null:this._validator(e)}registerOnValidatorChange(e){this._onChange=e}_createValidator(){this._validator=uC.minLength(parseInt(this.minlength,10))}}zS.decorators=[{type:i.s,args:[{selector:"[minlength][formControlName],[minlength][formControl],[minlength][ngModel]",providers:[HS],host:{"[attr.minlength]":"minlength ? minlength : null"}}]}],zS.propDecorators={minlength:[{type:i.D}]};const WS={provide:sC,useExisting:Object(i.pb)(()=>KS),multi:!0};class KS{ngOnChanges(e){"maxlength"in e&&(this._createValidator(),this._onChange&&this._onChange())}validate(e){return null!=this.maxlength?this._validator(e):null}registerOnValidatorChange(e){this._onChange=e}_createValidator(){this._validator=uC.maxLength(parseInt(this.maxlength,10))}}KS.decorators=[{type:i.s,args:[{selector:"[maxlength][formControlName],[maxlength][formControl],[maxlength][ngModel]",providers:[WS],host:{"[attr.maxlength]":"maxlength ? maxlength : null"}}]}],KS.propDecorators={maxlength:[{type:i.D}]};const QS={provide:sC,useExisting:Object(i.pb)(()=>GS),multi:!0};class GS{ngOnChanges(e){"pattern"in e&&(this._createValidator(),this._onChange&&this._onChange())}validate(e){return this._validator(e)}registerOnValidatorChange(e){this._onChange=e}_createValidator(){this._validator=uC.pattern(this.pattern)}}GS.decorators=[{type:i.s,args:[{selector:"[pattern][formControlName],[pattern][formControl],[pattern][ngModel]",providers:[QS],host:{"[attr.pattern]":"pattern ? pattern : null"}}]}],GS.propDecorators={pattern:[{type:i.D}]};class XS{group(e,t=null){const n=this._reduceControls(e);let r=null,i=null,s=void 0;return null==t||void 0===t.asyncValidator&&void 0===t.validator?null!=t&&(r=null!=t.validators?t.validators:null,i=null!=t.asyncValidators?t.asyncValidators:null,s=null!=t.updateOn?t.updateOn:void 0):(r=null!=t.validator?t.validator:null,i=null!=t.asyncValidator?t.asyncValidator:null),new pS(n,{asyncValidators:i,updateOn:s,validators:r})}control(e,t,n){return new dS(e,t,n)}array(e,t,n){const r=e.map(e=>this._createControl(e));return new fS(r,t,n)}_reduceControls(e){const t={};return Object.keys(e).forEach(n=>{t[n]=this._createControl(e[n])}),t}_createControl(e){if(e instanceof dS||e instanceof pS||e instanceof fS)return e;if(Array.isArray(e)){const t=e[0],n=e.length>1?e[1]:null,r=e.length>2?e[2]:null;return this.control(t,n,r)}return this.control(e)}}XS.decorators=[{type:i.A}];new i.ib("7.1.1");class YS{}YS.decorators=[{type:i.s,args:[{selector:"form:not([ngNoForm]):not([ngNativeValidate])",host:{novalidate:""}}]}];const ZS=[YS,MC,VC,yC,wC,DC,fC,PC,LC,xC,nS,rS,BS,zS,KS,GS,US,$S],JS=[TS,ES,yS,bS],eT=[DS,NS,LS,kS,MS];class tT{}tT.decorators=[{type:i.I,args:[{declarations:ZS,exports:ZS}]}];class nT{static withConfig(e){return{ngModule:nT,providers:[{provide:_S,useValue:e.warnOnDeprecatedNgFormSelector}]}}}nT.decorators=[{type:i.I,args:[{declarations:JS,providers:[TC],exports:[tT,JS]}]}];class rT{static withConfig(e){return{ngModule:rT,providers:[{provide:xS,useValue:e.warnOnNgModelWithFormControl}]}}}rT.decorators=[{type:i.I,args:[{declarations:[eT],providers:[XS,TC],exports:[tT,eT]}]}];var iT=n("VRyK"),sT=n("3N8a");const oT=new(n("IjjT").a)(sT.a);class aT{constructor(e,t){this.dueTime=e,this.scheduler=t}call(e,t){return t.subscribe(new uT(e,this.dueTime,this.scheduler))}}class uT extends C_.a{constructor(e,t,n){super(e),this.dueTime=t,this.scheduler=n,this.debouncedSubscription=null,this.lastValue=null,this.hasValue=!1}_next(e){this.clearDebounce(),this.lastValue=e,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(cT,this.dueTime,this))}_complete(){this.debouncedNext(),this.destination.complete()}debouncedNext(){if(this.clearDebounce(),this.hasValue){const{lastValue:e}=this;this.lastValue=null,this.hasValue=!1,this.destination.next(e)}}clearDebounce(){const e=this.debouncedSubscription;null!==e&&(this.remove(e),e.unsubscribe(),this.debouncedSubscription=null)}}function cT(e){e.debouncedNext()}var lT=n("CqG3"),hT=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};let dT=class{constructor(e){this.db=e}getAll(){return this.db.collection("/destinations",e=>e.orderBy("name")).valueChanges().pipe(H_(1))}getById(e){return this.db.collection("/destinations",t=>t.where("id","==",e).limit(1)).valueChanges().pipe(Object(__.a)(e=>e[0]),H_(1))}};dT=function(e,t,n,r){var i,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,n,o):i(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o}([Object(i.A)(),hT("design:paramtypes",[lT.AngularFirestore])],dT);var pT=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};let fT=class{constructor(e){this.fs=e}searchDestinations(e=""){return this.fs.getAll().pipe(Object(__.a)(t=>t.filter(t=>t.name.toLowerCase().startsWith(e.toLowerCase()))))}getDestinationById(e){return this.fs.getById(e)}};fT=function(e,t,n,r){var i,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,n,o):i(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o}([Object(i.A)(),pT("design:paramtypes",[dT])],fT);var mT=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};let gT=class{constructor(e){this.route=e}get bgImg(){return`url('assets/img/${this.destination.img||"placeholder"}/bg.jpg')`}ngOnInit(){this.route.data.subscribe(e=>{this.destination=e.destination})}};var yT=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};let vT=class{constructor(e){this.destinationService=e}resolve(e){const t=e.paramMap.get("id");return this.destinationService.getDestinationById(t)}};const _T=[{path:":id",component:gT=function(e,t,n,r){var i,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,n,o):i(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o}([Object(i.n)({selector:"app-destination",template:n("c7zv"),styles:[n("DiaM")]}),mT("design:paramtypes",[yw])],gT),resolve:{destination:vT=function(e,t,n,r){var i,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,n,o):i(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o}([Object(i.A)(),yT("design:paramtypes",[fT])],vT)}}];let bT=class{};bT=function(e,t,n,r){var i,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,n,o):i(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o}([Object(i.I)({imports:[WE.forChild(_T)],exports:[WE]})],bT);var wT=function(e,t,n,r){var i,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,n,o):i(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o},ET=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};let CT=class{get thumbnailImg(){return`assets/img/${this.destination.img||"placeholder"}/thumbnail.jpg`}};wT([Object(i.D)(),ET("design:type",Object)],CT.prototype,"destination",void 0),CT=wT([Object(i.n)({selector:"app-destination-thumbnail",template:n("O/rq"),styles:[n("N3Cr")]})],CT);var ST=function(e,t,n,r){var i,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,n,o):i(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o},TT=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};let xT=class{imgSrc(e){return`assets/img/${this.destination.img||"placeholder"}/${e}.jpg`}};ST([Object(i.D)(),TT("design:type",Object)],xT.prototype,"destination",void 0),xT=ST([Object(i.n)({selector:"app-destination-gallery",template:n("7XFi"),styles:[n("mfFw")]})],xT);let AT=class{};AT=function(e,t,n,r){var i,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,n,o):i(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o}([Object(i.I)({imports:[bT,lT.AngularFirestoreModule,vf.b],providers:[dT,fT,vT],declarations:[gT,CT,xT],exports:[CT]})],AT);var DT=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};let IT=class{constructor(e){this.destinationService=e,this.clueCtrl=new dS("")}ngOnInit(){this.destinations$=Object(iT.a)(Object(t_.a)(""),this.clueCtrl.valueChanges).pipe(function(e,t=oT){return n=>n.lift(new aT(e,t))}(250),Y_(e=>this.destinationService.searchDestinations(e)),U_(e=>Object(t_.a)([])))}};const NT=[{path:"",component:IT=function(e,t,n,r){var i,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,n,o):i(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o}([Object(i.n)({selector:"app-home",template:n("Jyj+"),styles:[n("bdh1")]}),DT("design:paramtypes",[fT])],IT)}];let OT=class{};OT=function(e,t,n,r){var i,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,n,o):i(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o}([Object(i.I)({imports:[WE.forChild(NT)],exports:[WE]})],OT);let kT=class{};kT=function(e,t,n,r){var i,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,n,o):i(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o}([Object(i.I)({imports:[OT,rT,vf.b,AT],declarations:[IT]})],kT);const PT=!0,MT=!0,RT={apiKey:"AIzaSyBcHS3cmq-kK3b6SKSjUayO85lLwWOred0",authDomain:"test-front-lucca.firebaseapp.com",databaseURL:"https://test-front-lucca.firebaseio.com",projectId:"test-front-lucca",storageBucket:"test-front-lucca.appspot.com",messagingSenderId:"1008850527496"};const FT=[{path:"home",loadChildren:()=>kT},{path:"destination",loadChildren:()=>AT},{path:"",redirectTo:"/home",pathMatch:"full"}];let LT=class{};LT=function(e,t,n,r){var i,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,n,o):i(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o}([Object(i.I)({imports:[WE.forRoot(FT,{useHash:MT})],exports:[WE]})],LT);let VT=class{};VT=function(e,t,n,r){var i,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,n,o):i(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o}([Object(i.I)({imports:[Bm,Zv,Jv.AngularFireModule.initializeApp(RT),LT],declarations:[e_],bootstrap:[e_]})],VT),PT&&Object(i.ob)(),rg().bootstrapModule(VT).catch(e=>console.error(e))},zVF4:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("+7AZ"),i={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},s=function(e,t){if(!e)throw o(t)},o=function(e){return new Error("Firebase Database ("+i.SDK_VERSION+") INTERNAL ASSERT FAILED: "+e)},a=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296==(64512&i)&&r+1<e.length&&56320==(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},u={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<e.length;i+=3){var s=e[i],o=i+1<e.length,a=o?e[i+1]:0,u=i+2<e.length,c=u?e[i+2]:0,l=s>>2,h=(3&s)<<4|a>>4,d=(15&a)<<2|c>>6,p=63&c;u||(p=64,o||(d=64)),r.push(n[l],n[h],n[d],n[p])}return r.join("")},encodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(a(e),t)},decodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){for(var t=[],n=0,r=0;n<e.length;){var i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){var s=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&s)}else if(i>239&&i<365){var o=((7&i)<<18|(63&(s=e[n++]))<<12|(63&(a=e[n++]))<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(o>>10)),t[r++]=String.fromCharCode(56320+(1023&o))}else{s=e[n++];var a=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&a)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray:function(e,t){this.init_();for(var n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<e.length;){var s=n[e.charAt(i++)],o=i<e.length?n[e.charAt(i)]:0,a=++i<e.length?n[e.charAt(i)]:64,u=++i<e.length?n[e.charAt(i)]:64;if(++i,null==s||null==o||null==a||null==u)throw Error();var c=s<<2|o>>4;if(r.push(c),64!=a){var l=o<<4&240|a>>2;if(r.push(l),64!=u){var h=a<<6&192|u;r.push(h)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},c=function(e){try{return u.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function l(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(var n in t)t.hasOwnProperty(n)&&(e[n]=l(e[n],t[n]));return e}var h=function(){function e(){var e=this;this.promise=new Promise(function(t,n){e.resolve=t,e.reject=n})}return e.prototype.wrapCallback=function(e){var t=this;return function(n,r){n?t.reject(n):t.resolve(r),"function"==typeof e&&(t.promise.catch(function(){}),1===e.length?e(n):e(n,r))}},e}(),d=function(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""},p="FirebaseError",f=Error.captureStackTrace;var m=function(){return function(e,t){if(this.code=e,this.message=t,f)f(this,g.prototype.create);else try{throw Error.apply(this,arguments)}catch(n){this.name=p,Object.defineProperty(this,"stack",{get:function(){return n.stack}})}}}();m.prototype=Object.create(Error.prototype),m.prototype.constructor=m,m.prototype.name=p;var g=function(){function e(e,t,n){this.service=e,this.serviceName=t,this.errors=n,this.pattern=/\{\$([^}]+)}/g}return e.prototype.create=function(e,t){void 0===t&&(t={});var n,r=this.errors[e],i=this.service+"/"+e;n=void 0===r?"Error":r.replace(this.pattern,function(e,n){var r=t[n];return void 0!==r?r.toString():"<"+n+"?>"}),n=this.serviceName+": "+n+" ("+i+").";var s=new m(i,n);for(var o in t)t.hasOwnProperty(o)&&"_"!==o.slice(-1)&&(s[o]=t[o]);return s},e}();function y(e){return JSON.parse(e)}var v=function(e){var t={},n={},r={},i="";try{var s=e.split(".");t=y(c(s[0])||""),n=y(c(s[1])||""),i=s[2],r=n.d||{},delete n.d}catch(o){}return{header:t,claims:n,data:r,signature:i}},_=function(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])},b=function(e,t){return _(t,function(t,n){e[t]=n}),e},w=function(e,t,n){for(var r in e)if(t.call(n,e[r],r,e))return r},E=function(e){function t(){var t=e.call(this)||this;t.chain_=[],t.buf_=[],t.W_=[],t.pad_=[],t.inbuf_=0,t.total_=0,t.blockSize=64,t.pad_[0]=128;for(var n=1;n<t.blockSize;++n)t.pad_[n]=0;return t.reset(),t}return r.__extends(t,e),t.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},t.prototype.compress_=function(e,t){t||(t=0);var n=this.W_;if("string"==typeof e)for(var r=0;r<16;r++)n[r]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(r=0;r<16;r++)n[r]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(r=16;r<80;r++){var i=n[r-3]^n[r-8]^n[r-14]^n[r-16];n[r]=4294967295&(i<<1|i>>>31)}var s,o,a=this.chain_[0],u=this.chain_[1],c=this.chain_[2],l=this.chain_[3],h=this.chain_[4];for(r=0;r<80;r++){r<40?r<20?(s=l^u&(c^l),o=1518500249):(s=u^c^l,o=1859775393):r<60?(s=u&c|l&(u|c),o=2400959708):(s=u^c^l,o=3395469782);i=(a<<5|a>>>27)+s+h+o+n[r]&4294967295;h=l,l=c,c=4294967295&(u<<30|u>>>2),u=a,a=i}this.chain_[0]=this.chain_[0]+a&4294967295,this.chain_[1]=this.chain_[1]+u&4294967295,this.chain_[2]=this.chain_[2]+c&4294967295,this.chain_[3]=this.chain_[3]+l&4294967295,this.chain_[4]=this.chain_[4]+h&4294967295},t.prototype.update=function(e,t){if(null!=e){void 0===t&&(t=e.length);for(var n=t-this.blockSize,r=0,i=this.buf_,s=this.inbuf_;r<t;){if(0==s)for(;r<=n;)this.compress_(e,r),r+=this.blockSize;if("string"==typeof e){for(;r<t;)if(i[s]=e.charCodeAt(r),++r,++s==this.blockSize){this.compress_(i),s=0;break}}else for(;r<t;)if(i[s]=e[r],++r,++s==this.blockSize){this.compress_(i),s=0;break}}this.inbuf_=s,this.total_+=t}},t.prototype.digest=function(){var e=[],t=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&t,t/=256;this.compress_(this.buf_);var r=0;for(n=0;n<5;n++)for(var i=24;i>=0;i-=8)e[r]=this.chain_[n]>>i&255,++r;return e},t}(function(){return function(){this.blockSize=-1}}());var C=function(){function e(e,t){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(function(){e(n)}).catch(function(e){n.error(e)})}return e.prototype.next=function(e){this.forEachObserver(function(t){t.next(e)})},e.prototype.error=function(e){this.forEachObserver(function(t){t.error(e)}),this.close(e)},e.prototype.complete=function(){this.forEachObserver(function(e){e.complete()}),this.close()},e.prototype.subscribe=function(e,t,n){var r,i=this;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(e,t){if("object"!=typeof e||null===e)return!1;for(var n=0,r=t;n<r.length;n++){var i=r[n];if(i in e&&"function"==typeof e[i])return!0}return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n}).next&&(r.next=S),void 0===r.error&&(r.error=S),void 0===r.complete&&(r.complete=S);var s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(e){}}),this.observers.push(r),s},e.prototype.unsubscribeOne=function(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},e.prototype.forEachObserver=function(e){if(!this.finalized)for(var t=0;t<this.observers.length;t++)this.sendOne(t,e)},e.prototype.sendOne=function(e,t){var n=this;this.task.then(function(){if(void 0!==n.observers&&void 0!==n.observers[e])try{t(n.observers[e])}catch(r){"undefined"!=typeof console&&console.error&&console.error(r)}})},e.prototype.close=function(e){var t=this;this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(function(){t.observers=void 0,t.onNoObservers=void 0}))},e}();function S(){}function T(e,t,n){var r="";switch(t){case 1:r=n?"first":"First";break;case 2:r=n?"second":"Second";break;case 3:r=n?"third":"Third";break;case 4:r=n?"fourth":"Fourth";break;default:throw new Error("errorPrefix called with argumentNumber > 4.  Need to update it?")}var i=e+" failed: ";return i+=r+" argument "}t.assert=s,t.assertionError=o,t.base64=u,t.base64Decode=c,t.base64Encode=function(e){var t=a(e);return u.encodeByteArray(t,!0)},t.CONSTANTS=i,t.deepCopy=function(e){return l(void 0,e)},t.deepExtend=l,t.patchProperty=function(e,t,n){e[t]=n},t.Deferred=h,t.getUA=d,t.isMobileCordova=function(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(d())},t.isNodeSdk=function(){return!0===i.NODE_CLIENT||!0===i.NODE_ADMIN},t.isReactNative=function(){return"object"==typeof navigator&&"ReactNative"===navigator.product},t.ErrorFactory=g,t.FirebaseError=m,t.patchCapture=function(e){var t=f;return f=e,t},t.jsonEval=y,t.stringify=function(e){return JSON.stringify(e)},t.decode=v,t.isAdmin=function(e){var t=v(e).claims;return"object"==typeof t&&!0===t.admin},t.issuedAtTime=function(e){var t=v(e).claims;return"object"==typeof t&&t.hasOwnProperty("iat")?t.iat:null},t.isValidFormat=function(e){var t=v(e).claims;return!!t&&"object"==typeof t&&t.hasOwnProperty("iat")},t.isValidTimestamp=function(e){var t,n,r=v(e).claims,i=Math.floor((new Date).getTime()/1e3);return"object"==typeof r&&(r.hasOwnProperty("nbf")?t=r.nbf:r.hasOwnProperty("iat")&&(t=r.iat),n=r.hasOwnProperty("exp")?r.exp:t+86400),i&&t&&n&&i>=t&&i<=n},t.clone=function(e){return b({},e)},t.contains=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.every=function(e,t){for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&!t(n,e[n]))return!1;return!0},t.extend=b,t.findKey=w,t.findValue=function(e,t,n){var r=w(e,t,n);return r&&e[r]},t.forEach=_,t.getAnyKey=function(e){for(var t in e)return t},t.getCount=function(e){var t=0;for(var n in e)t++;return t},t.getValues=function(e){var t=[],n=0;for(var r in e)t[n++]=e[r];return t},t.isEmpty=function(e){for(var t in e)return!1;return!0},t.isNonNullObject=function(e){return"object"==typeof e&&null!==e},t.map=function(e,t,n){var r={};for(var i in e)r[i]=t.call(n,e[i],i,e);return r},t.safeGet=function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]},t.querystring=function(e){var t=[];return _(e,function(e,n){Array.isArray(n)?n.forEach(function(n){t.push(encodeURIComponent(e)+"="+encodeURIComponent(n))}):t.push(encodeURIComponent(e)+"="+encodeURIComponent(n))}),t.length?"&"+t.join("&"):""},t.querystringDecode=function(e){var t={};return e.replace(/^\?/,"").split("&").forEach(function(e){if(e){var n=e.split("=");t[n[0]]=n[1]}}),t},t.Sha1=E,t.async=function(e,t){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];Promise.resolve(!0).then(function(){e.apply(void 0,n)}).catch(function(e){t&&t(e)})}},t.createSubscribe=function(e,t){var n=new C(e,t);return n.subscribe.bind(n)},t.errorPrefix=T,t.validateArgCount=function(e,t,n,r){var i;if(r<t?i="at least "+t:r>n&&(i=0===n?"none":"no more than "+n),i)throw new Error(e+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+i+".")},t.validateCallback=function(e,t,n,r){if((!r||n)&&"function"!=typeof n)throw new Error(T(e,t,r)+"must be a valid function.")},t.validateContextObject=function(e,t,n,r){if((!r||n)&&("object"!=typeof n||null===n))throw new Error(T(e,t,r)+"must be a valid context object.")},t.validateNamespace=function(e,t,n,r){if((!r||n)&&"string"!=typeof n)throw new Error(T(e,t,r)+"must be a valid firebase namespace.")},t.stringLength=function(e){for(var t=0,n=0;n<e.length;n++){var r=e.charCodeAt(n);r<128?t++:r<2048?t+=2:r>=55296&&r<=56319?(t+=4,n++):t+=3}return t},t.stringToByteArray=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);if(i>=55296&&i<=56319){var o=i-55296;s(++r<e.length,"Surrogate pair missing trail surrogate."),i=65536+(o<<10)+(e.charCodeAt(r)-56320)}i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):i<65536?(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t}}},[[0,0]]]);